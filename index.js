(function e(t,r,n){function i(o,s){if(!r[o]){if(!t[o]){var u=typeof require=="function"&&require;if(!s&&u)return u(o,!0);if(a)return a(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var f=r[o]={exports:{}};t[o][0].call(f.exports,function(e){var r=t[o][1][e];return i(r?r:e)},f,f.exports,e,t,r,n)}return r[o].exports}var a=typeof require=="function"&&require;for(var o=0;o<n.length;o++)i(n[o]);return i})({1:[function(e,t,r){var n=e("gl-now")();var i=e("gl-shader");var a=e("gl-texture2d");var o=e("a-big-triangle");var s=e("rsvp");var u=e("get-pixels");var l=e("exdat");var f=e("mustache");e("whatwg-fetch");var c=window.fetch;var h="#define GLSLIFY 1\nattribute vec2 position;\nvarying vec2 texCoord;\nvoid main() {\n  gl_Position = vec4(position, 0.0, 1.0);\n	texCoord = vec2(0.0,1.0)+vec2(0.5,-0.5) * (position + 1.0);\n}	";var d="https://s3.amazonaws.com/helen-images/annotations.json";var p="https://s3.amazonaws.com/helen-images/images/";var g=[];var _=3;var v;var m;var b={dataIndex:0,nTextures:3,displacement:.05};var y=0;n.on("gl-init",function(){gl=n.gl;_gui=new l.GUI;_gui.add(b,"displacement",0,.1);c(d).then(w).then(function(e){v=e;for(var t=0;t<b.nTextures;t++){T(v[t]).then(function(e){console.log("create texture",t);g.push(a(gl,e))})}});shader=i(gl,h,E(b.nTextures));shader.attributes.position.location=0});n.on("tick",function(){y++;console.log(y);if(y>=b.nTextures){y=0}});n.on("gl-render",function(e){var t=n.gl;if(g.length>=b.nTextures){shader.bind();shader.uniforms.displacement=b.displacement;for(var r=0;r<b.nTextures;r++){shader.uniforms["tex"+r]=g[Math.abs(y-r)].bind(r)}shader.attributes.position.pointer();o(t)}});n.on("gl-error",function(e){throw new Error("WebGL not supported :(")});function w(e){return e.json()}function E(e){return"precision highp float;\n#define GLSLIFY 1\nvarying vec2 texCoord;\n\nuniform float displacement;\n\nuniform sampler2D tex0;\nuniform sampler2D tex1;\nuniform sampler2D tex2;\n\nvec2 updateSt(in vec2 st, in vec4 last, in vec2 dir, in float amount) {\n    return(st + vec2( (last.x + dir.x) * amount, (last.z + dir.y) * amount));\n}\n\nvoid main() {\n\n	float n = 3.0;\n	vec2 direction = vec2(0.1, 0.1);\n	float dMultiply = 0.05;\n\n	vec4 avg = vec4(0.0);\n	vec2 st = texCoord.st;\n\n	vec4 texel0 = texture2D(tex0, st);\n	st = updateSt(st, texel0, direction, 1.0*displacement);\n	vec4 texel1 = texture2D(tex1, st);\n	st = updateSt(st, texel1, direction,2.0*displacement);\n	vec4 texel2 = texture2D(tex2, st);\n	st = updateSt(st, texel2, direction,3.0*displacement);\n\n  avg = texture2D(tex0, st);\n  avg += texture2D(tex1, st);\n  avg += texture2D(tex2, st);\n  avg = avg / n;\n\n  gl_FragColor = vec4(avg.rgb, 1.0);\n  // gl_FragColor = texture2D(tex0, texCoord);\n}"}function A(e){console.log("loadImageId",e);rloadImageFromData(v[e]).then(function(e){_texture=a(n.gl,e)})}function T(e){var t=p+e[0][0];return x(t)}function x(e){return new s.Promise(function(t,r){u(e,function(e,n){if(e){r(e)}else{t(n)}})})}},{"a-big-triangle":19,exdat:69,"get-pixels":70,"gl-now":83,"gl-shader":96,"gl-texture2d":132,mustache:133,rsvp:134,"whatwg-fetch":135}],2:[function(e,t,r){"use strict";var n=e("typedarray-pool");var i=e("ndarray-ops");var a=e("ndarray");var o=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function s(e,t,r,n,i){this.gl=e;this.type=t;this.handle=r;this.length=n;this.usage=i}var u=s.prototype;u.bind=function(){this.gl.bindBuffer(this.type,this.handle)};u.unbind=function(){this.gl.bindBuffer(this.type,null)};u.dispose=function(){this.gl.deleteBuffer(this.handle)};function l(e,t,r,n,i,a){var o=i.length*i.BYTES_PER_ELEMENT;if(a<0){e.bufferData(t,i,n);return o}if(o+a>r){throw new Error("gl-buffer: If resizing buffer, must not specify offset")}e.bufferSubData(t,a,i);return r}function f(e,t){var r=n.malloc(e.length,t);var i=e.length;for(var a=0;a<i;++a){r[a]=e[a]}return r}function c(e,t){var r=1;for(var n=t.length-1;n>=0;--n){if(t[n]!==r){return false}r*=e[n]}return true}u.update=function(e,t){if(typeof t!=="number"){t=-1}this.bind();if(typeof e==="object"&&typeof e.shape!=="undefined"){var r=e.dtype;if(o.indexOf(r)<0){r="float32"}if(this.type===this.gl.ELEMENT_ARRAY_BUFFER){var s=gl.getExtension("OES_element_index_uint");if(s&&r!=="uint16"){r="uint32"}else{r="uint16"}}if(r===e.dtype&&c(e.shape,e.stride)){if(e.offset===0&&e.data.length===e.shape[0]){this.length=l(this.gl,this.type,this.length,this.usage,e.data,t)}else{this.length=l(this.gl,this.type,this.length,this.usage,e.data.subarray(e.offset,e.shape[0]),t)}}else{var u=n.malloc(e.size,r);var h=a(u,e.shape);i.assign(h,e);if(t<0){this.length=l(this.gl,this.type,this.length,this.usage,u,t)}else{this.length=l(this.gl,this.type,this.length,this.usage,u.subarray(0,e.size),t)}n.free(u)}}else if(Array.isArray(e)){var d;if(this.type===this.gl.ELEMENT_ARRAY_BUFFER){d=f(e,"uint16")}else{d=f(e,"float32")}if(t<0){this.length=l(this.gl,this.type,this.length,this.usage,d,t)}else{this.length=l(this.gl,this.type,this.length,this.usage,d.subarray(0,e.length),t)}n.free(d)}else if(typeof e==="object"&&typeof e.length==="number"){this.length=l(this.gl,this.type,this.length,this.usage,e,t)}else if(typeof e==="number"||e===undefined){if(t>=0){throw new Error("gl-buffer: Cannot specify offset when resizing buffer")}e=e|0;if(e<=0){e=1}this.gl.bufferData(this.type,e|0,this.usage);this.length=e}else{throw new Error("gl-buffer: Invalid data type")}};function h(e,t,r,n){r=r||e.ARRAY_BUFFER;n=n||e.DYNAMIC_DRAW;if(r!==e.ARRAY_BUFFER&&r!==e.ELEMENT_ARRAY_BUFFER){throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER")}if(n!==e.DYNAMIC_DRAW&&n!==e.STATIC_DRAW&&n!==e.STREAM_DRAW){throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW")}var i=e.createBuffer();var a=new s(e,r,i,0,n);a.update(t);return a}t.exports=h},{ndarray:8,"ndarray-ops":3,"typedarray-pool":13}],3:[function(e,t,r){"use strict";var n=e("cwise-compiler");var i={body:"",args:[],thisVars:[],localVars:[]};function a(e){if(!e){return i}for(var t=0;t<e.args.length;++t){var r=e.args[t];if(t===0){e.args[t]={name:r,lvalue:true,rvalue:!!e.rvalue,count:e.count||1}}else{e.args[t]={name:r,lvalue:false,rvalue:true,count:1}}}if(!e.thisVars){e.thisVars=[]}if(!e.localVars){e.localVars=[]}return e}function o(e){return n({args:e.args,pre:a(e.pre),body:a(e.body),post:a(e.proc),funcName:e.funcName})}function s(e){var t=[];for(var r=0;r<e.args.length;++r){t.push("a"+r)}var n=new Function("P",["return function ",e.funcName,"_ndarrayops(",t.join(","),") {P(",t.join(","),");return a0}"].join(""));return n(o(e))}var u={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};(function(){for(var e in u){var t=u[e];r[e]=s({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+t+"c"},funcName:e});r[e+"eq"]=s({args:["array","array"],body:{args:["a","b"],body:"a"+t+"=b"},rvalue:true,funcName:e+"eq"});r[e+"s"]=s({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+t+"s"},funcName:e+"s"});r[e+"seq"]=s({args:["array","scalar"],body:{args:["a","s"],body:"a"+t+"=s"},rvalue:true,funcName:e+"seq"})}})();var l={not:"!",bnot:"~",neg:"-",recip:"1.0/"};(function(){for(var e in l){var t=l[e];r[e]=s({args:["array","array"],body:{args:["a","b"],body:"a="+t+"b"},funcName:e});r[e+"eq"]=s({args:["array"],body:{args:["a"],body:"a="+t+"a"},rvalue:true,count:2,funcName:e+"eq"})}})();var f={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};(function(){for(var e in f){var t=f[e];r[e]=s({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+t+"c"},funcName:e});r[e+"s"]=s({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+t+"s"},funcName:e+"s"});r[e+"eq"]=s({args:["array","array"],body:{args:["a","b"],body:"a=a"+t+"b"},rvalue:true,count:2,funcName:e+"eq"});r[e+"seq"]=s({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+t+"s"},rvalue:true,count:2,funcName:e+"seq"})}})();var c=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];(function(){for(var e=0;e<c.length;++e){var t=c[e];r[t]=s({args:["array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:t});r[t+"eq"]=s({args:["array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:true,count:2,funcName:t+"eq"})}})();var h=["max","min","atan2","pow"];(function(){for(var e=0;e<h.length;++e){var t=h[e];r[t]=s({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:t});r[t+"s"]=s({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:t+"s"});r[t+"eq"]=s({args:["array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:true,count:2,funcName:t+"eq"});r[t+"seq"]=s({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:true,count:2,funcName:t+"seq"})}})();var d=["atan2","pow"];(function(){for(var e=0;e<d.length;++e){var t=d[e];r[t+"op"]=s({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:t+"op"});r[t+"ops"]=s({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:t+"ops"});r[t+"opeq"]=s({args:["array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:true,count:2,funcName:t+"opeq"});r[t+"opseq"]=s({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:true,count:2,funcName:t+"opseq"})}})();r.any=n({args:["array"],pre:i,body:{args:[{name:"a",lvalue:false,rvalue:true,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"});r.all=n({args:["array"],pre:i,body:{args:[{name:"x",lvalue:false,rvalue:true,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"});r.sum=n({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:false,rvalue:true,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"});r.prod=n({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:false,rvalue:true,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"});r.norm2squared=n({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:false,rvalue:true,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"});r.norm2=n({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:false,rvalue:true,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"});r.norminf=n({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:false,rvalue:true,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"});r.norm1=n({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:false,rvalue:true,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"});r.sup=n({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:false,rvalue:true,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}});r.inf=n({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:false,rvalue:true,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}});r.argmin=n({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:false,rvalue:false,count:0},{name:"_inline_0_arg1_",lvalue:false,rvalue:false,count:0},{name:"_inline_0_arg2_",lvalue:false,rvalue:true,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:false,rvalue:true,count:2},{name:"_inline_1_arg1_",lvalue:false,rvalue:true,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}});r.argmax=n({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:false,rvalue:false,count:0},{name:"_inline_0_arg1_",lvalue:false,rvalue:false,count:0},{name:"_inline_0_arg2_",lvalue:false,rvalue:true,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:false,rvalue:true,count:2},{name:"_inline_1_arg1_",lvalue:false,rvalue:true,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}});r.random=s({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"});r.assign=s({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"});r.assigns=s({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"});r.equals=n({args:["array","array"],pre:i,body:{args:[{name:"x",lvalue:false,rvalue:true,count:1},{name:"y",lvalue:false,rvalue:true,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})},{"cwise-compiler":4}],4:[function(e,t,r){"use strict";var n=e("./lib/thunk.js");function i(){this.argTypes=[];this.shimArgs=[];this.arrayArgs=[];this.arrayBlockIndices=[];this.scalarArgs=[];this.offsetArgs=[];this.offsetArgIndex=[];this.indexArgs=[];this.shapeArgs=[];this.funcName="";this.pre=null;this.body=null;this.post=null;this.debug=false}function a(e){var t=new i;t.pre=e.pre;t.body=e.body;t.post=e.post;var r=e.args.slice(0);t.argTypes=r;for(var a=0;a<r.length;++a){var o=r[a];if(o==="array"||typeof o==="object"&&o.blockIndices){t.argTypes[a]="array";t.arrayArgs.push(a);t.arrayBlockIndices.push(o.blockIndices?o.blockIndices:0);t.shimArgs.push("array"+a);if(a<t.pre.args.length&&t.pre.args[a].count>0){throw new Error("cwise: pre() block may not reference array args")}if(a<t.post.args.length&&t.post.args[a].count>0){throw new Error("cwise: post() block may not reference array args")}}else if(o==="scalar"){t.scalarArgs.push(a);t.shimArgs.push("scalar"+a)}else if(o==="index"){t.indexArgs.push(a);if(a<t.pre.args.length&&t.pre.args[a].count>0){throw new Error("cwise: pre() block may not reference array index")}if(a<t.body.args.length&&t.body.args[a].lvalue){throw new Error("cwise: body() block may not write to array index")}if(a<t.post.args.length&&t.post.args[a].count>0){throw new Error("cwise: post() block may not reference array index")}}else if(o==="shape"){t.shapeArgs.push(a);if(a<t.pre.args.length&&t.pre.args[a].lvalue){throw new Error("cwise: pre() block may not write to array shape")}if(a<t.body.args.length&&t.body.args[a].lvalue){throw new Error("cwise: body() block may not write to array shape")}if(a<t.post.args.length&&t.post.args[a].lvalue){throw new Error("cwise: post() block may not write to array shape")}}else if(typeof o==="object"&&o.offset){t.argTypes[a]="offset";t.offsetArgs.push({array:o.array,offset:o.offset});t.offsetArgIndex.push(a)}else{throw new Error("cwise: Unknown argument type "+r[a])}}if(t.arrayArgs.length<=0){throw new Error("cwise: No array arguments specified")}if(t.pre.args.length>r.length){throw new Error("cwise: Too many arguments in pre() block")}if(t.body.args.length>r.length){throw new Error("cwise: Too many arguments in body() block")}if(t.post.args.length>r.length){throw new Error("cwise: Too many arguments in post() block")}t.debug=!!e.printCode||!!e.debug;t.funcName=e.funcName||"cwise";t.blockSize=e.blockSize||64;return n(t)}t.exports=a},{"./lib/thunk.js":6}],5:[function(e,t,r){"use strict";var n=e("uniq");function i(e,t,r){var n=e.length,i=t.arrayArgs.length,a=t.indexArgs.length>0,o=[],s=[],u=0,l=0,f,c;for(f=0;f<n;++f){s.push(["i",f,"=0"].join(""))}for(c=0;c<i;++c){for(f=0;f<n;++f){l=u;u=e[f];if(f===0){s.push(["d",c,"s",f,"=t",c,"p",u].join(""))}else{s.push(["d",c,"s",f,"=(t",c,"p",u,"-s",l,"*t",c,"p",l,")"].join(""))}}}o.push("var "+s.join(","));for(f=n-1;f>=0;--f){u=e[f];o.push(["for(i",f,"=0;i",f,"<s",u,";++i",f,"){"].join(""))}o.push(r);for(f=0;f<n;++f){l=u;u=e[f];for(c=0;c<i;++c){o.push(["p",c,"+=d",c,"s",f].join(""))}if(a){if(f>0){o.push(["index[",l,"]-=s",l].join(""))}o.push(["++index[",u,"]"].join(""))}o.push("}")}return o.join("\n")}function a(e,t,r,n){var a=t.length,o=r.arrayArgs.length,s=r.blockSize,u=r.indexArgs.length>0,l=[];for(var f=0;f<o;++f){l.push(["var offset",f,"=p",f].join(""))}for(var f=e;f<a;++f){l.push(["for(var j"+f+"=SS[",t[f],"]|0;j",f,">0;){"].join(""));l.push(["if(j",f,"<",s,"){"].join(""));l.push(["s",t[f],"=j",f].join(""));l.push(["j",f,"=0"].join(""));l.push(["}else{s",t[f],"=",s].join(""));l.push(["j",f,"-=",s,"}"].join(""));if(u){l.push(["index[",t[f],"]=j",f].join(""))}}for(var f=0;f<o;++f){var c=["offset"+f];for(var h=e;h<a;++h){c.push(["j",h,"*t",f,"p",t[h]].join(""))}l.push(["p",f,"=(",c.join("+"),")"].join(""))}l.push(i(t,r,n));for(var f=e;f<a;++f){l.push("}")}return l.join("\n")}function o(e){var t=0,r=e[0].length;while(t<r){for(var n=1;n<e.length;++n){if(e[n][t]!==e[0][t]){return t}}++t}return t}function s(e,t,r){var n=e.body;var i=[];var a=[];for(var o=0;o<e.args.length;++o){var s=e.args[o];if(s.count<=0){continue}var u=new RegExp(s.name,"g");var l="";var f=t.arrayArgs.indexOf(o);switch(t.argTypes[o]){case"offset":var c=t.offsetArgIndex.indexOf(o);var h=t.offsetArgs[c];f=h.array;l="+q"+c;case"array":l="p"+f+l;var d="l"+o;var p="a"+f;if(t.arrayBlockIndices[f]===0){if(s.count===1){if(r[f]==="generic"){if(s.lvalue){i.push(["var ",d,"=",p,".get(",l,")"].join(""));n=n.replace(u,d);a.push([p,".set(",l,",",d,")"].join(""))}else{n=n.replace(u,[p,".get(",l,")"].join(""))}}else{n=n.replace(u,[p,"[",l,"]"].join(""))}}else if(r[f]==="generic"){i.push(["var ",d,"=",p,".get(",l,")"].join(""));n=n.replace(u,d);if(s.lvalue){a.push([p,".set(",l,",",d,")"].join(""))}}else{i.push(["var ",d,"=",p,"[",l,"]"].join(""));n=n.replace(u,d);if(s.lvalue){a.push([p,"[",l,"]=",d].join(""))}}}else{var g=[s.name],_=[l];for(var v=0;v<Math.abs(t.arrayBlockIndices[f]);v++){g.push("\\s*\\[([^\\]]+)\\]");_.push("$"+(v+1)+"*t"+f+"b"+v)}u=new RegExp(g.join(""),"g");l=_.join("+");if(r[f]==="generic"){throw new Error("cwise: Generic arrays not supported in combination with blocks!")}else{n=n.replace(u,[p,"[",l,"]"].join(""))}}break;case"scalar":n=n.replace(u,"Y"+t.scalarArgs.indexOf(o));break;case"index":n=n.replace(u,"index");break;case"shape":n=n.replace(u,"shape");break}}return[i.join("\n"),n,a.join("\n")].join("\n").trim()}function u(e){var t=new Array(e.length);var r=true;for(var n=0;n<e.length;++n){var i=e[n];var a=i.match(/\d+/);if(!a){a=""}else{a=a[0]}if(i.charAt(0)===0){t[n]="u"+i.charAt(1)+a}else{t[n]=i.charAt(0)+a}if(n>0){r=r&&t[n]===t[n-1]}}if(r){return t[0]}return t.join("")}function l(e,t){var r=t[1].length-Math.abs(e.arrayBlockIndices[0])|0;var l=new Array(e.arrayArgs.length);var f=new Array(e.arrayArgs.length);for(var c=0;c<e.arrayArgs.length;++c){f[c]=t[2*c];l[c]=t[2*c+1]}var h=[],d=[];var p=[],g=[];var _=[];for(var c=0;c<e.arrayArgs.length;++c){if(e.arrayBlockIndices[c]<0){p.push(0);g.push(r);h.push(r);d.push(r+e.arrayBlockIndices[c])}else{p.push(e.arrayBlockIndices[c]);g.push(e.arrayBlockIndices[c]+r);h.push(0);d.push(e.arrayBlockIndices[c])}var v=[];for(var m=0;m<l[c].length;m++){if(p[c]<=l[c][m]&&l[c][m]<g[c]){v.push(l[c][m]-p[c])}}_.push(v)}var b=["SS"];var y=["'use strict'"];var w=[];for(var m=0;m<r;++m){w.push(["s",m,"=SS[",m,"]"].join(""))}for(var c=0;c<e.arrayArgs.length;++c){b.push("a"+c);b.push("t"+c);b.push("p"+c);for(var m=0;m<r;++m){w.push(["t",c,"p",m,"=t",c,"[",p[c]+m,"]"].join(""))}for(var m=0;m<Math.abs(e.arrayBlockIndices[c]);++m){w.push(["t",c,"b",m,"=t",c,"[",h[c]+m,"]"].join(""))}}for(var c=0;c<e.scalarArgs.length;++c){b.push("Y"+c)}if(e.shapeArgs.length>0){w.push("shape=SS.slice(0)")}if(e.indexArgs.length>0){var E=new Array(r);for(var c=0;c<r;++c){E[c]="0"}w.push(["index=[",E.join(","),"]"].join(""))}for(var c=0;c<e.offsetArgs.length;++c){var A=e.offsetArgs[c];var T=[];for(var m=0;m<A.offset.length;++m){if(A.offset[m]===0){continue}else if(A.offset[m]===1){T.push(["t",A.array,"p",m].join(""))}else{T.push([A.offset[m],"*t",A.array,"p",m].join(""))}}if(T.length===0){w.push("q"+c+"=0")}else{w.push(["q",c,"=",T.join("+")].join(""))}}var x=n([].concat(e.pre.thisVars).concat(e.body.thisVars).concat(e.post.thisVars));w=w.concat(x);y.push("var "+w.join(","));for(var c=0;c<e.arrayArgs.length;++c){y.push("p"+c+"|=0")}if(e.pre.body.length>3){y.push(s(e.pre,e,f))}var R=s(e.body,e,f);var S=o(_);if(S<r){y.push(a(S,_[0],e,R))}else{y.push(i(_[0],e,R))}if(e.post.body.length>3){y.push(s(e.post,e,f))}if(e.debug){console.log("-----Generated cwise routine for ",t,":\n"+y.join("\n")+"\n----------")}var C=[e.funcName||"unnamed","_cwise_loop_",l[0].join("s"),"m",S,u(f)].join("");var k=new Function(["function ",C,"(",b.join(","),"){",y.join("\n"),"} return ",C].join(""));return k()}t.exports=l},{uniq:7}],6:[function(e,t,r){"use strict";var n=e("./compile.js");function i(e){var t=["'use strict'","var CACHED={}"];var r=[];var i=e.funcName+"_cwise_thunk";t.push(["return function ",i,"(",e.shimArgs.join(","),"){"].join(""));var a=[];var o=[];var s=[["array",e.arrayArgs[0],".shape.slice(",Math.max(0,e.arrayBlockIndices[0]),e.arrayBlockIndices[0]<0?","+e.arrayBlockIndices[0]+")":")"].join("")];var u=[],l=[];for(var f=0;f<e.arrayArgs.length;++f){var c=e.arrayArgs[f];r.push(["t",c,"=array",c,".dtype,","r",c,"=array",c,".order"].join(""));a.push("t"+c);a.push("r"+c);o.push("t"+c);o.push("r"+c+".join()");s.push("array"+c+".data");s.push("array"+c+".stride");s.push("array"+c+".offset|0");if(f>0){u.push("array"+e.arrayArgs[0]+".shape.length===array"+c+".shape.length+"+(Math.abs(e.arrayBlockIndices[0])-Math.abs(e.arrayBlockIndices[f])));l.push("array"+e.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,e.arrayBlockIndices[0])+"]===array"+c+".shape[shapeIndex+"+Math.max(0,e.arrayBlockIndices[f])+"]")}}if(e.arrayArgs.length>1){t.push("if (!("+u.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')");t.push("for(var shapeIndex=array"+e.arrayArgs[0]+".shape.length-"+Math.abs(e.arrayBlockIndices[0])+"; shapeIndex-->0;) {");t.push("if (!("+l.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')");t.push("}")}for(var f=0;f<e.scalarArgs.length;++f){s.push("scalar"+e.scalarArgs[f])}r.push(["type=[",o.join(","),"].join()"].join(""));r.push("proc=CACHED[type]");t.push("var "+r.join(","));t.push(["if(!proc){","CACHED[type]=proc=compile([",a.join(","),"])}","return proc(",s.join(","),")}"].join(""));if(e.debug){console.log("-----Generated thunk:\n"+t.join("\n")+"\n----------")}var h=new Function("compile",t.join("\n"));return h(n.bind(undefined,e))}t.exports=i},{"./compile.js":5}],7:[function(e,t,r){"use strict";function n(e,t){var r=1,n=e.length,i=e[0],a=e[0];for(var o=1;o<n;++o){a=i;i=e[o];if(t(i,a)){if(o===r){r++;continue}e[r++]=i}}e.length=r;return e}function i(e){var t=1,r=e.length,n=e[0],i=e[0];for(var a=1;a<r;++a,i=n){i=n;n=e[a];if(n!==i){if(a===t){t++;continue}e[t++]=n}}e.length=t;return e}function a(e,t,r){if(e.length===0){return e}if(t){if(!r){e.sort(t)}return n(e,t)}if(!r){e.sort()}return i(e)}t.exports=a},{}],8:[function(e,t,r){var n=e("iota-array");var i=e("is-buffer");var a=typeof Float64Array!=="undefined";function o(e,t){return e[0]-t[0]}function s(){var e=this.stride;var t=new Array(e.length);var r;for(r=0;r<t.length;++r){t[r]=[Math.abs(e[r]),r]}t.sort(o);var n=new Array(t.length);for(r=0;r<n.length;++r){n[r]=t[r][1]}return n}function u(e,t){var r=["View",t,"d",e].join("");if(t<0){r="View_Nil"+e}var i=e==="generic";if(t===-1){var a="function "+r+"(a){this.data=a;};var proto="+r+".prototype;proto.dtype='"+e+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+r+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+r+"(a){return new "+r+"(a);}";var o=new Function(a);return o()}else if(t===0){var a="function "+r+"(a,d) {this.data = a;this.offset = d};var proto="+r+".prototype;proto.dtype='"+e+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+r+"_copy() {return new "+r+"(this.data,this.offset)};proto.pick=function "+r+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+r+"_get(){return "+(i?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+r+"_set(v){return "+(i?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+r+"(a,b,c,d){return new "+r+"(a,d)}";var o=new Function("TrivialArray",a);return o(f[e][0])}var a=["'use strict'"];var u=n(t);var l=u.map(function(e){return"i"+e});var c="this.offset+"+u.map(function(e){return"this.stride["+e+"]*i"+e}).join("+");var h=u.map(function(e){return"b"+e}).join(",");var d=u.map(function(e){return"c"+e}).join(",");a.push("function "+r+"(a,"+h+","+d+",d){this.data=a","this.shape=["+h+"]","this.stride=["+d+"]","this.offset=d|0}","var proto="+r+".prototype","proto.dtype='"+e+"'","proto.dimension="+t);a.push("Object.defineProperty(proto,'size',{get:function "+r+"_size(){return "+u.map(function(e){return"this.shape["+e+"]"}).join("*"),"}})");if(t===1){a.push("proto.order=[0]")}else{a.push("Object.defineProperty(proto,'order',{get:");if(t<4){a.push("function "+r+"_order(){");if(t===2){a.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})")}else if(t===3){a.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")}}else{a.push("ORDER})")}}a.push("proto.set=function "+r+"_set("+l.join(",")+",v){");if(i){a.push("return this.data.set("+c+",v)}")}else{a.push("return this.data["+c+"]=v}")}a.push("proto.get=function "+r+"_get("+l.join(",")+"){");if(i){a.push("return this.data.get("+c+")}")}else{a.push("return this.data["+c+"]}")}a.push("proto.index=function "+r+"_index(",l.join(),"){return "+c+"}");a.push("proto.hi=function "+r+"_hi("+l.join(",")+"){return new "+r+"(this.data,"+u.map(function(e){return["(typeof i",e,"!=='number'||i",e,"<0)?this.shape[",e,"]:i",e,"|0"].join("")}).join(",")+","+u.map(function(e){return"this.stride["+e+"]"}).join(",")+",this.offset)}");var p=u.map(function(e){return"a"+e+"=this.shape["+e+"]"});var g=u.map(function(e){return"c"+e+"=this.stride["+e+"]"});a.push("proto.lo=function "+r+"_lo("+l.join(",")+"){var b=this.offset,d=0,"+p.join(",")+","+g.join(","));for(var _=0;_<t;++_){a.push("if(typeof i"+_+"==='number'&&i"+_+">=0){d=i"+_+"|0;b+=c"+_+"*d;a"+_+"-=d}")}a.push("return new "+r+"(this.data,"+u.map(function(e){return"a"+e}).join(",")+","+u.map(function(e){return"c"+e}).join(",")+",b)}");a.push("proto.step=function "+r+"_step("+l.join(",")+"){var "+u.map(function(e){return"a"+e+"=this.shape["+e+"]"}).join(",")+","+u.map(function(e){return"b"+e+"=this.stride["+e+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(var _=0;_<t;++_){a.push("if(typeof i"+_+"==='number'){d=i"+_+"|0;if(d<0){c+=b"+_+"*(a"+_+"-1);a"+_+"=ceil(-a"+_+"/d)}else{a"+_+"=ceil(a"+_+"/d)}b"+_+"*=d}")}a.push("return new "+r+"(this.data,"+u.map(function(e){return"a"+e}).join(",")+","+u.map(function(e){return"b"+e}).join(",")+",c)}");var v=new Array(t);var m=new Array(t);for(var _=0;_<t;++_){v[_]="a[i"+_+"]";m[_]="b[i"+_+"]"}a.push("proto.transpose=function "+r+"_transpose("+l+"){"+l.map(function(e,t){return e+"=("+e+"===undefined?"+t+":"+e+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+r+"(this.data,"+v.join(",")+","+m.join(",")+",this.offset)}");a.push("proto.pick=function "+r+"_pick("+l+"){var a=[],b=[],c=this.offset");for(var _=0;_<t;++_){a.push("if(typeof i"+_+"==='number'&&i"+_+">=0){c=(c+this.stride["+_+"]*i"+_+")|0}else{a.push(this.shape["+_+"]);b.push(this.stride["+_+"])}")}a.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}");a.push("return function construct_"+r+"(data,shape,stride,offset){return new "+r+"(data,"+u.map(function(e){return"shape["+e+"]"}).join(",")+","+u.map(function(e){return"stride["+e+"]"}).join(",")+",offset)}");var o=new Function("CTOR_LIST","ORDER",a.join("\n"));return o(f[e],s)}function l(e){if(i(e)){return"buffer"}if(a){switch(Object.prototype.toString.call(e)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped"}}if(Array.isArray(e)){return"array"}return"generic"}var f={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]};(function(){for(var e in f){f[e].push(u(e,-1))}});function c(e,t,r,n){if(e===undefined){var i=f.array[0];return i([])}else if(typeof e==="number"){e=[e]}if(t===undefined){t=[e.length]}var a=t.length;if(r===undefined){r=new Array(a);for(var o=a-1,s=1;o>=0;--o){r[o]=s;s*=t[o]}}if(n===undefined){n=0;for(var o=0;o<a;++o){if(r[o]<0){n-=(t[o]-1)*r[o]}}}var c=l(e);var h=f[c];while(h.length<=a+1){h.push(u(c,h.length-1))}var i=h[a+1];return i(e,t,r,n)}t.exports=c},{"iota-array":9,"is-buffer":10}],9:[function(e,t,r){"use strict";function n(e){var t=new Array(e);for(var r=0;r<e;++r){t[r]=r}return t}t.exports=n},{}],10:[function(e,t,r){t.exports=function(e){return!!(e!=null&&(e._isBuffer||e.constructor&&typeof e.constructor.isBuffer==="function"&&e.constructor.isBuffer(e)));

}},{}],11:[function(e,t,r){"use strict";"use restrict";var n=32;r.INT_BITS=n;r.INT_MAX=2147483647;r.INT_MIN=-1<<n-1;r.sign=function(e){return(e>0)-(e<0)};r.abs=function(e){var t=e>>n-1;return(e^t)-t};r.min=function(e,t){return t^(e^t)&-(e<t)};r.max=function(e,t){return e^(e^t)&-(e<t)};r.isPow2=function(e){return!(e&e-1)&&!!e};r.log2=function(e){var t,r;t=(e>65535)<<4;e>>>=t;r=(e>255)<<3;e>>>=r;t|=r;r=(e>15)<<2;e>>>=r;t|=r;r=(e>3)<<1;e>>>=r;t|=r;return t|e>>1};r.log10=function(e){return e>=1e9?9:e>=1e8?8:e>=1e7?7:e>=1e6?6:e>=1e5?5:e>=1e4?4:e>=1e3?3:e>=100?2:e>=10?1:0};r.popCount=function(e){e=e-(e>>>1&1431655765);e=(e&858993459)+(e>>>2&858993459);return(e+(e>>>4)&252645135)*16843009>>>24};function i(e){var t=32;e&=-e;if(e)t--;if(e&65535)t-=16;if(e&16711935)t-=8;if(e&252645135)t-=4;if(e&858993459)t-=2;if(e&1431655765)t-=1;return t}r.countTrailingZeros=i;r.nextPow2=function(e){e+=e===0;--e;e|=e>>>1;e|=e>>>2;e|=e>>>4;e|=e>>>8;e|=e>>>16;return e+1};r.prevPow2=function(e){e|=e>>>1;e|=e>>>2;e|=e>>>4;e|=e>>>8;e|=e>>>16;return e-(e>>>1)};r.parity=function(e){e^=e>>>16;e^=e>>>8;e^=e>>>4;e&=15;return 27030>>>e&1};var a=new Array(256);(function(e){for(var t=0;t<256;++t){var r=t,n=t,i=7;for(r>>>=1;r;r>>>=1){n<<=1;n|=r&1;--i}e[t]=n<<i&255}})(a);r.reverse=function(e){return a[e&255]<<24|a[e>>>8&255]<<16|a[e>>>16&255]<<8|a[e>>>24&255]};r.interleave2=function(e,t){e&=65535;e=(e|e<<8)&16711935;e=(e|e<<4)&252645135;e=(e|e<<2)&858993459;e=(e|e<<1)&1431655765;t&=65535;t=(t|t<<8)&16711935;t=(t|t<<4)&252645135;t=(t|t<<2)&858993459;t=(t|t<<1)&1431655765;return e|t<<1};r.deinterleave2=function(e,t){e=e>>>t&1431655765;e=(e|e>>>1)&858993459;e=(e|e>>>2)&252645135;e=(e|e>>>4)&16711935;e=(e|e>>>16)&65535;return e<<16>>16};r.interleave3=function(e,t,r){e&=1023;e=(e|e<<16)&4278190335;e=(e|e<<8)&251719695;e=(e|e<<4)&3272356035;e=(e|e<<2)&1227133513;t&=1023;t=(t|t<<16)&4278190335;t=(t|t<<8)&251719695;t=(t|t<<4)&3272356035;t=(t|t<<2)&1227133513;e|=t<<1;r&=1023;r=(r|r<<16)&4278190335;r=(r|r<<8)&251719695;r=(r|r<<4)&3272356035;r=(r|r<<2)&1227133513;return e|r<<2};r.deinterleave3=function(e,t){e=e>>>t&1227133513;e=(e|e>>>2)&3272356035;e=(e|e>>>4)&251719695;e=(e|e>>>8)&4278190335;e=(e|e>>>16)&1023;return e<<22>>22};r.nextCombination=function(e){var t=e|e-1;return t+1|(~t&-~t)-1>>>i(e)+1}},{}],12:[function(e,t,r){"use strict";function n(e,t,r){var i=e[r]|0;if(i<=0){return[]}var a=new Array(i),o;if(r===e.length-1){for(o=0;o<i;++o){a[o]=t}}else{for(o=0;o<i;++o){a[o]=n(e,t,r+1)}}return a}function i(e,t){var r,n;r=new Array(e);for(n=0;n<e;++n){r[n]=t}return r}function a(e,t){if(typeof t==="undefined"){t=0}switch(typeof e){case"number":if(e>0){return i(e|0,t)}break;case"object":if(typeof e.length==="number"){return n(e,t,0)}break}return[]}t.exports=a},{}],13:[function(e,t,r){(function(t,n){"use strict";var i=e("bit-twiddle");var a=e("dup");if(!t.__TYPEDARRAY_POOL){t.__TYPEDARRAY_POOL={UINT8:a([32,0]),UINT16:a([32,0]),UINT32:a([32,0]),INT8:a([32,0]),INT16:a([32,0]),INT32:a([32,0]),FLOAT:a([32,0]),DOUBLE:a([32,0]),DATA:a([32,0]),UINT8C:a([32,0]),BUFFER:a([32,0])}}var o=typeof Uint8ClampedArray!=="undefined";var s=t.__TYPEDARRAY_POOL;if(!s.UINT8C){s.UINT8C=a([32,0])}if(!s.BUFFER){s.BUFFER=a([32,0])}var u=s.DATA,l=s.BUFFER;r.free=function T(e){if(n.isBuffer(e)){l[i.log2(e.length)].push(e)}else{if(Object.prototype.toString.call(e)!=="[object ArrayBuffer]"){e=e.buffer}if(!e){return}var t=e.length||e.byteLength;var r=i.log2(t)|0;u[r].push(e)}};function f(e){if(!e){return}var t=e.length||e.byteLength;var r=i.log2(t);u[r].push(e)}function c(e){f(e.buffer)}r.freeUint8=r.freeUint16=r.freeUint32=r.freeInt8=r.freeInt16=r.freeInt32=r.freeFloat32=r.freeFloat=r.freeFloat64=r.freeDouble=r.freeUint8Clamped=r.freeDataView=c;r.freeArrayBuffer=f;r.freeBuffer=function x(e){l[i.log2(e.length)].push(e)};r.malloc=function R(e,t){if(t===undefined||t==="arraybuffer"){return h(e)}else{switch(t){case"uint8":return d(e);case"uint16":return p(e);case"uint32":return g(e);case"int8":return _(e);case"int16":return v(e);case"int32":return m(e);case"float":case"float32":return b(e);case"double":case"float64":return y(e);case"uint8_clamped":return w(e);case"buffer":return A(e);case"data":case"dataview":return E(e);default:return null}}return null};function h(e){var e=i.nextPow2(e);var t=i.log2(e);var r=u[t];if(r.length>0){return r.pop()}return new ArrayBuffer(e)}r.mallocArrayBuffer=h;function d(e){return new Uint8Array(h(e),0,e)}r.mallocUint8=d;function p(e){return new Uint16Array(h(2*e),0,e)}r.mallocUint16=p;function g(e){return new Uint32Array(h(4*e),0,e)}r.mallocUint32=g;function _(e){return new Int8Array(h(e),0,e)}r.mallocInt8=_;function v(e){return new Int16Array(h(2*e),0,e)}r.mallocInt16=v;function m(e){return new Int32Array(h(4*e),0,e)}r.mallocInt32=m;function b(e){return new Float32Array(h(4*e),0,e)}r.mallocFloat32=r.mallocFloat=b;function y(e){return new Float64Array(h(8*e),0,e)}r.mallocFloat64=r.mallocDouble=y;function w(e){if(o){return new Uint8ClampedArray(h(e),0,e)}else{return d(e)}}r.mallocUint8Clamped=w;function E(e){return new DataView(h(e),0,e)}r.mallocDataView=E;function A(e){e=i.nextPow2(e);var t=i.log2(e);var r=l[t];if(r.length>0){return r.pop()}return new n(e)}r.mallocBuffer=A;r.clearCache=function S(){for(var e=0;e<32;++e){s.UINT8[e].length=0;s.UINT16[e].length=0;s.UINT32[e].length=0;s.INT8[e].length=0;s.INT16[e].length=0;s.INT32[e].length=0;s.FLOAT[e].length=0;s.DOUBLE[e].length=0;s.UINT8C[e].length=0;u[e].length=0;l[e].length=0}}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{},e("buffer").Buffer)},{"bit-twiddle":11,buffer:21,dup:12}],14:[function(e,t,r){"use strict";function n(e,t,r){if(t){t.bind()}else{e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)}var n=e.getParameter(e.MAX_VERTEX_ATTRIBS)|0;if(r){if(r.length>n){throw new Error("gl-vao: Too many vertex attributes")}for(var i=0;i<r.length;++i){var a=r[i];if(a.buffer){var o=a.buffer;var s=a.size||4;var u=a.type||e.FLOAT;var l=!!a.normalized;var f=a.stride||0;var c=a.offset||0;o.bind();e.enableVertexAttribArray(i);e.vertexAttribPointer(i,s,u,l,f,c)}else{if(typeof a==="number"){e.vertexAttrib1f(i,a)}else if(a.length===1){e.vertexAttrib1f(i,a[0])}else if(a.length===2){e.vertexAttrib2f(i,a[0],a[1])}else if(a.length===3){e.vertexAttrib3f(i,a[0],a[1],a[2])}else if(a.length===4){e.vertexAttrib4f(i,a[0],a[1],a[2],a[3])}else{throw new Error("gl-vao: Invalid vertex attribute")}e.disableVertexAttribArray(i)}}for(;i<n;++i){e.disableVertexAttribArray(i)}}else{e.bindBuffer(e.ARRAY_BUFFER,null);for(var i=0;i<n;++i){e.disableVertexAttribArray(i)}}}t.exports=n},{}],15:[function(e,t,r){"use strict";var n=e("./do-bind.js");function i(e){this.gl=e;this._elements=null;this._attributes=null;this._elementsType=e.UNSIGNED_SHORT}i.prototype.bind=function(){n(this.gl,this._elements,this._attributes)};i.prototype.update=function(e,t,r){this._elements=t;this._attributes=e;this._elementsType=r||this.gl.UNSIGNED_SHORT};i.prototype.dispose=function(){};i.prototype.unbind=function(){};i.prototype.draw=function(e,t,r){r=r||0;var n=this.gl;if(this._elements){n.drawElements(e,t,this._elementsType,r)}else{n.drawArrays(e,r,t)}};function a(e){return new i(e)}t.exports=a},{"./do-bind.js":14}],16:[function(e,t,r){"use strict";var n=e("./do-bind.js");function i(e,t,r,n,i,a){this.location=e;this.dimension=t;this.a=r;this.b=n;this.c=i;this.d=a}i.prototype.bind=function(e){switch(this.dimension){case 1:e.vertexAttrib1f(this.location,this.a);break;case 2:e.vertexAttrib2f(this.location,this.a,this.b);break;case 3:e.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:e.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d);break}};function a(e,t,r){this.gl=e;this._ext=t;this.handle=r;this._attribs=[];this._useElements=false;this._elementsType=e.UNSIGNED_SHORT}a.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var e=0;e<this._attribs.length;++e){this._attribs[e].bind(this.gl)}};a.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)};a.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)};a.prototype.update=function(e,t,r){this.bind();n(this.gl,t,e);this.unbind();this._attribs.length=0;if(e)for(var a=0;a<e.length;++a){var o=e[a];if(typeof o==="number"){this._attribs.push(new i(a,1,o))}else if(Array.isArray(o)){this._attribs.push(new i(a,o.length,o[0],o[1],o[2],o[3]))}}this._useElements=!!t;this._elementsType=r||this.gl.UNSIGNED_SHORT};a.prototype.draw=function(e,t,r){r=r||0;var n=this.gl;if(this._useElements){n.drawElements(e,t,this._elementsType,r)}else{n.drawArrays(e,r,t)}};function o(e,t){return new a(e,t,t.createVertexArrayOES())}t.exports=o},{"./do-bind.js":14}],17:[function(e,t,r){"use strict";var n=e("./lib/vao-native.js");var i=e("./lib/vao-emulated.js");function a(e,t,r,a){var o=e.getExtension("OES_vertex_array_object");var s;if(o){s=n(e,o)}else{s=i(e)}s.update(t,r,a);return s}t.exports=a},{"./lib/vao-emulated.js":15,"./lib/vao-native.js":16}],18:[function(e,t,r){(function n(){"use strict";if(typeof ses!=="undefined"&&ses.ok&&!ses.ok()){return}function e(t){if(t.permitHostObjects___){t.permitHostObjects___(e)}}if(typeof ses!=="undefined"){ses.weakMapPermitHostObjects=e}var r=false;if(typeof WeakMap==="function"){var n=WeakMap;if(typeof navigator!=="undefined"&&/Firefox/.test(navigator.userAgent)){}else{var i=new n;var a=Object.freeze({});i.set(a,1);if(i.get(a)!==1){r=true}else{t.exports=WeakMap;return}}}var o=Object.prototype.hasOwnProperty;var s=Object.getOwnPropertyNames;var u=Object.defineProperty;var l=Object.isExtensible;var f="weakmap:";var c=f+"ident:"+Math.random()+"___";if(typeof crypto!=="undefined"&&typeof crypto.getRandomValues==="function"&&typeof ArrayBuffer==="function"&&typeof Uint8Array==="function"){var h=new ArrayBuffer(25);var d=new Uint8Array(h);crypto.getRandomValues(d);c=f+"rand:"+Array.prototype.map.call(d,function(e){return(e%36).toString(36)}).join("")+"___"}function p(e){return!(e.substr(0,f.length)==f&&e.substr(e.length-3)==="___")}u(Object,"getOwnPropertyNames",{value:function E(e){return s(e).filter(p)}});if("getPropertyNames"in Object){var g=Object.getPropertyNames;u(Object,"getPropertyNames",{value:function A(e){return g(e).filter(p)}})}function _(e){if(e!==Object(e)){throw new TypeError("Not an object: "+e)}var t=e[c];if(t&&t.key===e){return t}if(!l(e)){return void 0}t={key:e};try{u(e,c,{value:t,writable:false,enumerable:false,configurable:false});return t}catch(r){return void 0}}(function(){var e=Object.freeze;u(Object,"freeze",{value:function n(t){_(t);return e(t)}});var t=Object.seal;u(Object,"seal",{value:function i(e){_(e);return t(e)}});var r=Object.preventExtensions;u(Object,"preventExtensions",{value:function a(e){_(e);return r(e)}})})();function v(e){e.prototype=null;return Object.freeze(e)}var m=false;function b(){if(!m&&typeof console!=="undefined"){m=true;console.warn("WeakMap should be invoked as new WeakMap(), not "+"WeakMap(). This will be an error in the future.")}}var y=0;var w=function(){if(!(this instanceof w)){b()}var e=[];var t=[];var r=y++;function n(n,i){var a;var o=_(n);if(o){return r in o?o[r]:i}else{a=e.indexOf(n);return a>=0?t[a]:i}}function i(t){var n=_(t);if(n){return r in n}else{return e.indexOf(t)>=0}}function a(n,i){var a;var o=_(n);if(o){o[r]=i}else{a=e.indexOf(n);if(a>=0){t[a]=i}else{a=e.length;t[a]=i;e[a]=n}}return this}function o(n){var i=_(n);var a,o;if(i){return r in i&&delete i[r]}else{a=e.indexOf(n);if(a<0){return false}o=e.length-1;e[a]=void 0;t[a]=t[o];e[a]=e[o];e.length=o;t.length=o;return true}}return Object.create(w.prototype,{get___:{value:v(n)},has___:{value:v(i)},set___:{value:v(a)},delete___:{value:v(o)}})};w.prototype=Object.create(Object.prototype,{get:{value:function T(e,t){return this.get___(e,t)},writable:true,configurable:true},has:{value:function x(e){return this.has___(e)},writable:true,configurable:true},set:{value:function R(e,t){return this.set___(e,t)},writable:true,configurable:true},"delete":{value:function S(e){return this.delete___(e)},writable:true,configurable:true}});if(typeof n==="function"){(function(){if(r&&typeof Proxy!=="undefined"){Proxy=undefined}function i(){if(!(this instanceof w)){b()}var t=new n;var i=undefined;var a=false;function o(e,r){if(i){return t.has(e)?t.get(e):i.get___(e,r)}else{return t.get(e,r)}}function s(e){return t.has(e)||(i?i.has___(e):false)}var u;if(r){u=function(e,r){t.set(e,r);if(!t.has(e)){if(!i){i=new w}i.set(e,r)}return this}}else{u=function(e,r){if(a){try{t.set(e,r)}catch(n){if(!i){i=new w}i.set___(e,r)}}else{t.set(e,r)}return this}}function l(e){var r=!!t["delete"](e);if(i){return i.delete___(e)||r}return r}return Object.create(w.prototype,{get___:{value:v(o)},has___:{value:v(s)},set___:{value:v(u)},delete___:{value:v(l)},permitHostObjects___:{value:v(function(t){if(t===e){a=true}else{throw new Error("bogus call to permitHostObjects___")}})}})}i.prototype=w.prototype;t.exports=i;Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:false,configurable:true,writable:true})})()}else{if(typeof Proxy!=="undefined"){Proxy=undefined}t.exports=w}})()},{}],19:[function(e,t,r){"use strict";var n=typeof WeakMap==="undefined"?e("weak-map"):WeakMap;var i=e("gl-buffer");var a=e("gl-vao");var o=new n;function s(e){var t=o.get(e);if(!t||!e.isBuffer(t._triangleBuffer.buffer)){var r=i(e,new Float32Array([-1,-1,-1,4,4,-1]));t=a(e,[{buffer:r,type:e.FLOAT,size:2}]);t._triangleBuffer=r;o.set(e,t)}t.bind();e.drawArrays(e.TRIANGLES,0,3);t.unbind()}t.exports=s},{"gl-buffer":2,"gl-vao":17,"weak-map":18}],20:[function(e,t,r){},{}],21:[function(e,t,r){(function(t){"use strict";var n=e("base64-js");var i=e("ieee754");var a=e("isarray");r.Buffer=l;r.SlowBuffer=b;r.INSPECT_MAX_BYTES=50;l.TYPED_ARRAY_SUPPORT=t.TYPED_ARRAY_SUPPORT!==undefined?t.TYPED_ARRAY_SUPPORT:o();r.kMaxLength=s();function o(){try{var e=new Uint8Array(1);e.foo=function(){return 42};return e.foo()===42&&typeof e.subarray==="function"&&e.subarray(1,1).byteLength===0}catch(t){return false}}function s(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function u(e,t){if(s()<t){throw new RangeError("Invalid typed array length")}if(l.TYPED_ARRAY_SUPPORT){e=new Uint8Array(t);e.__proto__=l.prototype}else{if(e===null){e=new l(t)}e.length=t}return e}function l(e,t,r){if(!l.TYPED_ARRAY_SUPPORT&&!(this instanceof l)){return new l(e,t,r)}if(typeof e==="number"){if(typeof t==="string"){throw new Error("If encoding is specified then the first argument must be a string")}return d(this,e)}return f(this,e,t,r)}l.poolSize=8192;l._augment=function(e){e.__proto__=l.prototype;return e};function f(e,t,r,n){if(typeof t==="number"){throw new TypeError('"value" argument must not be a number')}if(typeof ArrayBuffer!=="undefined"&&t instanceof ArrayBuffer){return _(e,t,r,n)}if(typeof t==="string"){return p(e,t,r)}return v(e,t)}l.from=function(e,t,r){return f(null,e,t,r)};if(l.TYPED_ARRAY_SUPPORT){l.prototype.__proto__=Uint8Array.prototype;l.__proto__=Uint8Array;if(typeof Symbol!=="undefined"&&Symbol.species&&l[Symbol.species]===l){Object.defineProperty(l,Symbol.species,{value:null,configurable:true})}}function c(e){if(typeof e!=="number"){throw new TypeError('"size" argument must be a number')}}function h(e,t,r,n){c(t);if(t<=0){return u(e,t)}if(r!==undefined){return typeof n==="string"?u(e,t).fill(r,n):u(e,t).fill(r)}return u(e,t)}l.alloc=function(e,t,r){return h(null,e,t,r)};function d(e,t){c(t);e=u(e,t<0?0:m(t)|0);if(!l.TYPED_ARRAY_SUPPORT){for(var r=0;r<t;r++){e[r]=0}}return e}l.allocUnsafe=function(e){return d(null,e)};l.allocUnsafeSlow=function(e){return d(null,e)};function p(e,t,r){if(typeof r!=="string"||r===""){r="utf8"}if(!l.isEncoding(r)){throw new TypeError('"encoding" must be a valid string encoding')}var n=y(t,r)|0;e=u(e,n);e.write(t,r);return e}function g(e,t){var r=m(t.length)|0;e=u(e,r);for(var n=0;n<r;n+=1){e[n]=t[n]&255}return e}function _(e,t,r,n){t.byteLength;if(r<0||t.byteLength<r){throw new RangeError("'offset' is out of bounds")}if(t.byteLength<r+(n||0)){throw new RangeError("'length' is out of bounds")}if(n===undefined){t=new Uint8Array(t,r)}else{t=new Uint8Array(t,r,n)}if(l.TYPED_ARRAY_SUPPORT){e=t;e.__proto__=l.prototype}else{e=g(e,t)}return e}function v(e,t){if(l.isBuffer(t)){var r=m(t.length)|0;e=u(e,r);if(e.length===0){return e}t.copy(e,0,0,r);return e}if(t){if(typeof ArrayBuffer!=="undefined"&&t.buffer instanceof ArrayBuffer||"length"in t){if(typeof t.length!=="number"||ee(t.length)){return u(e,0)}return g(e,t)}if(t.type==="Buffer"&&a(t.data)){return g(e,t.data)}}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function m(e){if(e>=s()){throw new RangeError("Attempt to allocate Buffer larger than maximum "+"size: 0x"+s().toString(16)+" bytes")}return e|0}function b(e){if(+e!=e){e=0}return l.alloc(+e)}l.isBuffer=function te(e){return!!(e!=null&&e._isBuffer)};l.compare=function re(e,t){if(!l.isBuffer(e)||!l.isBuffer(t)){throw new TypeError("Arguments must be Buffers")}if(e===t)return 0;var r=e.length;var n=t.length;for(var i=0,a=Math.min(r,n);i<a;++i){if(e[i]!==t[i]){r=e[i];n=t[i];break}}if(r<n)return-1;if(n<r)return 1;return 0};l.isEncoding=function ne(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return true;default:return false}};l.concat=function ie(e,t){if(!a(e)){throw new TypeError('"list" argument must be an Array of Buffers')}if(e.length===0){return l.alloc(0)}var r;if(t===undefined){t=0;for(r=0;r<e.length;r++){t+=e[r].length}}var n=l.allocUnsafe(t);var i=0;for(r=0;r<e.length;r++){var o=e[r];if(!l.isBuffer(o)){throw new TypeError('"list" argument must be an Array of Buffers')}o.copy(n,i);i+=o.length}return n};function y(e,t){if(l.isBuffer(e)){return e.length}if(typeof ArrayBuffer!=="undefined"&&typeof ArrayBuffer.isView==="function"&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer)){return e.byteLength}if(typeof e!=="string"){e=""+e}var r=e.length;if(r===0)return 0;var n=false;for(;;){switch(t){case"ascii":case"binary":case"raw":case"raws":return r;case"utf8":case"utf-8":case undefined:return K(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return Q(e).length;default:if(n)return K(e).length;t=(""+t).toLowerCase();n=true}}}l.byteLength=y;function w(e,t,r){var n=false;if(t===undefined||t<0){t=0}if(t>this.length){return""}if(r===undefined||r>this.length){r=this.length}if(r<=0){return""}r>>>=0;t>>>=0;if(r<=t){return""}if(!e)e="utf8";while(true){switch(e){case"hex":return P(this,t,r);case"utf8":case"utf-8":return I(this,t,r);case"ascii":return O(this,t,r);case"binary":return M(this,t,r);case"base64":return j(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase();n=true}}}l.prototype._isBuffer=true;function E(e,t,r){var n=e[t];e[t]=e[r];e[r]=n}l.prototype.swap16=function ae(){var e=this.length;if(e%2!==0){throw new RangeError("Buffer size must be a multiple of 16-bits")}for(var t=0;t<e;t+=2){E(this,t,t+1)}return this};l.prototype.swap32=function oe(){var e=this.length;if(e%4!==0){throw new RangeError("Buffer size must be a multiple of 32-bits")}for(var t=0;t<e;t+=4){E(this,t,t+3);E(this,t+1,t+2)}return this};l.prototype.toString=function se(){var e=this.length|0;if(e===0)return"";if(arguments.length===0)return I(this,0,e);return w.apply(this,arguments)};l.prototype.equals=function ue(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(this===e)return true;return l.compare(this,e)===0};l.prototype.inspect=function le(){var e="";var t=r.INSPECT_MAX_BYTES;if(this.length>0){e=this.toString("hex",0,t).match(/.{2}/g).join(" ");if(this.length>t)e+=" ... "}return"<Buffer "+e+">"};l.prototype.compare=function fe(e,t,r,n,i){if(!l.isBuffer(e)){throw new TypeError("Argument must be a Buffer")}if(t===undefined){t=0}if(r===undefined){r=e?e.length:0}if(n===undefined){n=0}if(i===undefined){i=this.length}if(t<0||r>e.length||n<0||i>this.length){throw new RangeError("out of range index")}if(n>=i&&t>=r){return 0}if(n>=i){return-1}if(t>=r){return 1}t>>>=0;r>>>=0;n>>>=0;i>>>=0;if(this===e)return 0;var a=i-n;var o=r-t;var s=Math.min(a,o);var u=this.slice(n,i);var f=e.slice(t,r);for(var c=0;c<s;++c){if(u[c]!==f[c]){a=u[c];o=f[c];break}}if(a<o)return-1;if(o<a)return 1;return 0};function A(e,t,r,n){var i=1;var a=e.length;var o=t.length;if(n!==undefined){n=String(n).toLowerCase();if(n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le"){if(e.length<2||t.length<2){return-1}i=2;a/=2;o/=2;r/=2}}function s(e,t){if(i===1){return e[t]}else{return e.readUInt16BE(t*i)}}var u=-1;for(var l=0;r+l<a;l++){if(s(e,r+l)===s(t,u===-1?0:l-u)){if(u===-1)u=l;if(l-u+1===o)return(r+u)*i}else{if(u!==-1)l-=l-u;u=-1}}return-1}l.prototype.indexOf=function ce(e,t,r){if(typeof t==="string"){r=t;t=0}else if(t>2147483647){t=2147483647}else if(t<-2147483648){t=-2147483648}t>>=0;if(this.length===0)return-1;if(t>=this.length)return-1;if(t<0)t=Math.max(this.length+t,0);if(typeof e==="string"){e=l.from(e,r)}if(l.isBuffer(e)){if(e.length===0){return-1}return A(this,e,t,r)}if(typeof e==="number"){if(l.TYPED_ARRAY_SUPPORT&&Uint8Array.prototype.indexOf==="function"){return Uint8Array.prototype.indexOf.call(this,e,t)}return A(this,[e],t,r)}throw new TypeError("val must be string, number or Buffer")};l.prototype.includes=function he(e,t,r){return this.indexOf(e,t,r)!==-1};function T(e,t,r,n){r=Number(r)||0;var i=e.length-r;if(!n){n=i}else{n=Number(n);if(n>i){n=i}}var a=t.length;if(a%2!==0)throw new Error("Invalid hex string");if(n>a/2){n=a/2}for(var o=0;o<n;o++){var s=parseInt(t.substr(o*2,2),16);if(isNaN(s))return o;e[r+o]=s}return o}function x(e,t,r,n){return $(K(t,e.length-r),e,r,n)}function R(e,t,r,n){return $(Z(t),e,r,n)}function S(e,t,r,n){return R(e,t,r,n)}function C(e,t,r,n){return $(Q(t),e,r,n)}function k(e,t,r,n){return $(J(t,e.length-r),e,r,n)}l.prototype.write=function de(e,t,r,n){if(t===undefined){n="utf8";r=this.length;t=0}else if(r===undefined&&typeof t==="string"){n=t;r=this.length;t=0}else if(isFinite(t)){t=t|0;if(isFinite(r)){r=r|0;if(n===undefined)n="utf8"}else{n=r;r=undefined}}else{throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported")}var i=this.length-t;if(r===undefined||r>i)r=i;if(e.length>0&&(r<0||t<0)||t>this.length){throw new RangeError("Attempt to write outside buffer bounds")}if(!n)n="utf8";var a=false;for(;;){switch(n){case"hex":return T(this,e,t,r);case"utf8":case"utf-8":return x(this,e,t,r);case"ascii":return R(this,e,t,r);case"binary":return S(this,e,t,r);case"base64":return C(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,e,t,r);default:if(a)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase();a=true}}};l.prototype.toJSON=function pe(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function j(e,t,r){if(t===0&&r===e.length){return n.fromByteArray(e)}else{return n.fromByteArray(e.slice(t,r))}}function I(e,t,r){r=Math.min(e.length,r);var n=[];var i=t;while(i<r){var a=e[i];var o=null;var s=a>239?4:a>223?3:a>191?2:1;if(i+s<=r){var u,l,f,c;switch(s){case 1:if(a<128){o=a}break;case 2:u=e[i+1];if((u&192)===128){c=(a&31)<<6|u&63;if(c>127){o=c}}break;case 3:u=e[i+1];l=e[i+2];if((u&192)===128&&(l&192)===128){c=(a&15)<<12|(u&63)<<6|l&63;if(c>2047&&(c<55296||c>57343)){o=c}}break;case 4:u=e[i+1];l=e[i+2];f=e[i+3];if((u&192)===128&&(l&192)===128&&(f&192)===128){c=(a&15)<<18|(u&63)<<12|(l&63)<<6|f&63;if(c>65535&&c<1114112){o=c}}}}if(o===null){o=65533;s=1}else if(o>65535){o-=65536;n.push(o>>>10&1023|55296);o=56320|o&1023}n.push(o);i+=s}return N(n)}var L=4096;function N(e){var t=e.length;if(t<=L){return String.fromCharCode.apply(String,e)}var r="";var n=0;while(n<t){r+=String.fromCharCode.apply(String,e.slice(n,n+=L))}return r}function O(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;i++){n+=String.fromCharCode(e[i]&127)}return n}function M(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;i++){n+=String.fromCharCode(e[i])}return n}function P(e,t,r){var n=e.length;if(!t||t<0)t=0;if(!r||r<0||r>n)r=n;var i="";for(var a=t;a<r;a++){i+=W(e[a])}return i}function U(e,t,r){var n=e.slice(t,r);var i="";for(var a=0;a<n.length;a+=2){i+=String.fromCharCode(n[a]+n[a+1]*256)}return i}l.prototype.slice=function ge(e,t){var r=this.length;e=~~e;t=t===undefined?r:~~t;if(e<0){e+=r;if(e<0)e=0}else if(e>r){e=r}if(t<0){t+=r;if(t<0)t=0}else if(t>r){t=r}if(t<e)t=e;var n;if(l.TYPED_ARRAY_SUPPORT){n=this.subarray(e,t);n.__proto__=l.prototype}else{var i=t-e;n=new l(i,undefined);for(var a=0;a<i;a++){n[a]=this[a+e]}}return n};function D(e,t,r){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}l.prototype.readUIntLE=function _e(e,t,r){e=e|0;t=t|0;if(!r)D(e,t,this.length);var n=this[e];var i=1;var a=0;while(++a<t&&(i*=256)){n+=this[e+a]*i}return n};l.prototype.readUIntBE=function ve(e,t,r){e=e|0;t=t|0;if(!r){D(e,t,this.length)}var n=this[e+--t];var i=1;while(t>0&&(i*=256)){n+=this[e+--t]*i}return n};l.prototype.readUInt8=function me(e,t){if(!t)D(e,1,this.length);return this[e]};l.prototype.readUInt16LE=function be(e,t){if(!t)D(e,2,this.length);return this[e]|this[e+1]<<8};l.prototype.readUInt16BE=function ye(e,t){if(!t)D(e,2,this.length);return this[e]<<8|this[e+1]};l.prototype.readUInt32LE=function we(e,t){if(!t)D(e,4,this.length);return(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};l.prototype.readUInt32BE=function Ee(e,t){if(!t)D(e,4,this.length);return this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};l.prototype.readIntLE=function Ae(e,t,r){e=e|0;t=t|0;if(!r)D(e,t,this.length);var n=this[e];var i=1;var a=0;while(++a<t&&(i*=256)){n+=this[e+a]*i}i*=128;if(n>=i)n-=Math.pow(2,8*t);return n};l.prototype.readIntBE=function Te(e,t,r){e=e|0;t=t|0;if(!r)D(e,t,this.length);var n=t;var i=1;var a=this[e+--n];while(n>0&&(i*=256)){a+=this[e+--n]*i}i*=128;if(a>=i)a-=Math.pow(2,8*t);return a};l.prototype.readInt8=function xe(e,t){if(!t)D(e,1,this.length);if(!(this[e]&128))return this[e];return(255-this[e]+1)*-1};l.prototype.readInt16LE=function Re(e,t){if(!t)D(e,2,this.length);var r=this[e]|this[e+1]<<8;return r&32768?r|4294901760:r};l.prototype.readInt16BE=function Se(e,t){if(!t)D(e,2,this.length);var r=this[e+1]|this[e]<<8;return r&32768?r|4294901760:r};l.prototype.readInt32LE=function Ce(e,t){if(!t)D(e,4,this.length);return this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};l.prototype.readInt32BE=function ke(e,t){if(!t)D(e,4,this.length);return this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};l.prototype.readFloatLE=function je(e,t){if(!t)D(e,4,this.length);return i.read(this,e,true,23,4)};l.prototype.readFloatBE=function Ie(e,t){if(!t)D(e,4,this.length);return i.read(this,e,false,23,4)};l.prototype.readDoubleLE=function Le(e,t){if(!t)D(e,8,this.length);return i.read(this,e,true,52,8)};l.prototype.readDoubleBE=function Ne(e,t){if(!t)D(e,8,this.length);return i.read(this,e,false,52,8)};function B(e,t,r,n,i,a){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}l.prototype.writeUIntLE=function Oe(e,t,r,n){e=+e;t=t|0;r=r|0;if(!n){var i=Math.pow(2,8*r)-1;B(this,e,t,r,i,0)}var a=1;var o=0;this[t]=e&255;while(++o<r&&(a*=256)){this[t+o]=e/a&255}return t+r};l.prototype.writeUIntBE=function Me(e,t,r,n){e=+e;t=t|0;r=r|0;if(!n){var i=Math.pow(2,8*r)-1;B(this,e,t,r,i,0)}var a=r-1;var o=1;this[t+a]=e&255;while(--a>=0&&(o*=256)){this[t+a]=e/o&255}return t+r};l.prototype.writeUInt8=function Pe(e,t,r){e=+e;t=t|0;if(!r)B(this,e,t,1,255,0);if(!l.TYPED_ARRAY_SUPPORT)e=Math.floor(e);this[t]=e&255;return t+1};function F(e,t,r,n){if(t<0)t=65535+t+1;for(var i=0,a=Math.min(e.length-r,2);i<a;i++){e[r+i]=(t&255<<8*(n?i:1-i))>>>(n?i:1-i)*8}}l.prototype.writeUInt16LE=function Ue(e,t,r){e=+e;t=t|0;if(!r)B(this,e,t,2,65535,0);if(l.TYPED_ARRAY_SUPPORT){this[t]=e&255;this[t+1]=e>>>8}else{F(this,e,t,true)}return t+2};l.prototype.writeUInt16BE=function De(e,t,r){e=+e;t=t|0;if(!r)B(this,e,t,2,65535,0);if(l.TYPED_ARRAY_SUPPORT){this[t]=e>>>8;this[t+1]=e&255}else{F(this,e,t,false)}return t+2};function V(e,t,r,n){if(t<0)t=4294967295+t+1;for(var i=0,a=Math.min(e.length-r,4);i<a;i++){e[r+i]=t>>>(n?i:3-i)*8&255}}l.prototype.writeUInt32LE=function Be(e,t,r){e=+e;t=t|0;if(!r)B(this,e,t,4,4294967295,0);if(l.TYPED_ARRAY_SUPPORT){this[t+3]=e>>>24;this[t+2]=e>>>16;this[t+1]=e>>>8;this[t]=e&255}else{V(this,e,t,true)}return t+4};l.prototype.writeUInt32BE=function Fe(e,t,r){e=+e;t=t|0;if(!r)B(this,e,t,4,4294967295,0);if(l.TYPED_ARRAY_SUPPORT){this[t]=e>>>24;this[t+1]=e>>>16;this[t+2]=e>>>8;this[t+3]=e&255}else{V(this,e,t,false)}return t+4};l.prototype.writeIntLE=function Ve(e,t,r,n){e=+e;t=t|0;if(!n){var i=Math.pow(2,8*r-1);B(this,e,t,r,i-1,-i)}var a=0;var o=1;var s=0;this[t]=e&255;while(++a<r&&(o*=256)){if(e<0&&s===0&&this[t+a-1]!==0){s=1}this[t+a]=(e/o>>0)-s&255}return t+r};l.prototype.writeIntBE=function Xe(e,t,r,n){e=+e;t=t|0;if(!n){var i=Math.pow(2,8*r-1);B(this,e,t,r,i-1,-i)}var a=r-1;var o=1;var s=0;this[t+a]=e&255;while(--a>=0&&(o*=256)){if(e<0&&s===0&&this[t+a+1]!==0){s=1}this[t+a]=(e/o>>0)-s&255}return t+r};l.prototype.writeInt8=function He(e,t,r){e=+e;t=t|0;if(!r)B(this,e,t,1,127,-128);if(!l.TYPED_ARRAY_SUPPORT)e=Math.floor(e);if(e<0)e=255+e+1;this[t]=e&255;return t+1};l.prototype.writeInt16LE=function Ge(e,t,r){e=+e;t=t|0;if(!r)B(this,e,t,2,32767,-32768);if(l.TYPED_ARRAY_SUPPORT){this[t]=e&255;this[t+1]=e>>>8}else{F(this,e,t,true)}return t+2};l.prototype.writeInt16BE=function Ye(e,t,r){e=+e;t=t|0;if(!r)B(this,e,t,2,32767,-32768);if(l.TYPED_ARRAY_SUPPORT){this[t]=e>>>8;this[t+1]=e&255}else{F(this,e,t,false)}return t+2};l.prototype.writeInt32LE=function ze(e,t,r){e=+e;t=t|0;if(!r)B(this,e,t,4,2147483647,-2147483648);if(l.TYPED_ARRAY_SUPPORT){this[t]=e&255;this[t+1]=e>>>8;this[t+2]=e>>>16;this[t+3]=e>>>24}else{V(this,e,t,true)}return t+4};l.prototype.writeInt32BE=function qe(e,t,r){e=+e;t=t|0;if(!r)B(this,e,t,4,2147483647,-2147483648);if(e<0)e=4294967295+e+1;if(l.TYPED_ARRAY_SUPPORT){this[t]=e>>>24;this[t+1]=e>>>16;this[t+2]=e>>>8;this[t+3]=e&255}else{V(this,e,t,false)}return t+4};function X(e,t,r,n,i,a){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function H(e,t,r,n,a){if(!a){X(e,t,r,4,3.4028234663852886e38,-3.4028234663852886e38)}i.write(e,t,r,n,23,4);return r+4}l.prototype.writeFloatLE=function We(e,t,r){return H(this,e,t,true,r)};l.prototype.writeFloatBE=function Ke(e,t,r){return H(this,e,t,false,r)};function G(e,t,r,n,a){if(!a){X(e,t,r,8,1.7976931348623157e308,-1.7976931348623157e308)}i.write(e,t,r,n,52,8);return r+8}l.prototype.writeDoubleLE=function Ze(e,t,r){return G(this,e,t,true,r)};l.prototype.writeDoubleBE=function Je(e,t,r){return G(this,e,t,false,r)};l.prototype.copy=function Qe(e,t,r,n){if(!r)r=0;if(!n&&n!==0)n=this.length;if(t>=e.length)t=e.length;if(!t)t=0;if(n>0&&n<r)n=r;if(n===r)return 0;if(e.length===0||this.length===0)return 0;if(t<0){throw new RangeError("targetStart out of bounds")}if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");if(n>this.length)n=this.length;if(e.length-t<n-r){n=e.length-t+r}var i=n-r;var a;if(this===e&&r<t&&t<n){for(a=i-1;a>=0;a--){e[a+t]=this[a+r]}}else if(i<1e3||!l.TYPED_ARRAY_SUPPORT){for(a=0;a<i;a++){e[a+t]=this[a+r]}}else{Uint8Array.prototype.set.call(e,this.subarray(r,r+i),t)}return i};l.prototype.fill=function $e(e,t,r,n){if(typeof e==="string"){if(typeof t==="string"){n=t;t=0;r=this.length}else if(typeof r==="string"){n=r;r=this.length}if(e.length===1){var i=e.charCodeAt(0);if(i<256){e=i}}if(n!==undefined&&typeof n!=="string"){
throw new TypeError("encoding must be a string")}if(typeof n==="string"&&!l.isEncoding(n)){throw new TypeError("Unknown encoding: "+n)}}else if(typeof e==="number"){e=e&255}if(t<0||this.length<t||this.length<r){throw new RangeError("Out of range index")}if(r<=t){return this}t=t>>>0;r=r===undefined?this.length:r>>>0;if(!e)e=0;var a;if(typeof e==="number"){for(a=t;a<r;a++){this[a]=e}}else{var o=l.isBuffer(e)?e:K(new l(e,n).toString());var s=o.length;for(a=0;a<r-t;a++){this[a+t]=o[a%s]}}return this};var Y=/[^+\/0-9A-Za-z-_]/g;function z(e){e=q(e).replace(Y,"");if(e.length<2)return"";while(e.length%4!==0){e=e+"="}return e}function q(e){if(e.trim)return e.trim();return e.replace(/^\s+|\s+$/g,"")}function W(e){if(e<16)return"0"+e.toString(16);return e.toString(16)}function K(e,t){t=t||Infinity;var r;var n=e.length;var i=null;var a=[];for(var o=0;o<n;o++){r=e.charCodeAt(o);if(r>55295&&r<57344){if(!i){if(r>56319){if((t-=3)>-1)a.push(239,191,189);continue}else if(o+1===n){if((t-=3)>-1)a.push(239,191,189);continue}i=r;continue}if(r<56320){if((t-=3)>-1)a.push(239,191,189);i=r;continue}r=(i-55296<<10|r-56320)+65536}else if(i){if((t-=3)>-1)a.push(239,191,189)}i=null;if(r<128){if((t-=1)<0)break;a.push(r)}else if(r<2048){if((t-=2)<0)break;a.push(r>>6|192,r&63|128)}else if(r<65536){if((t-=3)<0)break;a.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((t-=4)<0)break;a.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else{throw new Error("Invalid code point")}}return a}function Z(e){var t=[];for(var r=0;r<e.length;r++){t.push(e.charCodeAt(r)&255)}return t}function J(e,t){var r,n,i;var a=[];for(var o=0;o<e.length;o++){if((t-=2)<0)break;r=e.charCodeAt(o);n=r>>8;i=r%256;a.push(i);a.push(n)}return a}function Q(e){return n.toByteArray(z(e))}function $(e,t,r,n){for(var i=0;i<n;i++){if(i+r>=t.length||i>=e.length)break;t[i+r]=e[i]}return i}function ee(e){return e!==e}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"base64-js":22,ieee754:23,isarray:24}],22:[function(e,t,r){"use strict";r.toByteArray=s;r.fromByteArray=f;var n=[];var i=[];var a=typeof Uint8Array!=="undefined"?Uint8Array:Array;function o(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var t=0,r=e.length;t<r;++t){n[t]=e[t];i[e.charCodeAt(t)]=t}i["-".charCodeAt(0)]=62;i["_".charCodeAt(0)]=63}o();function s(e){var t,r,n,o,s,u;var l=e.length;if(l%4>0){throw new Error("Invalid string. Length must be a multiple of 4")}s=e[l-2]==="="?2:e[l-1]==="="?1:0;u=new a(l*3/4-s);n=s>0?l-4:l;var f=0;for(t=0,r=0;t<n;t+=4,r+=3){o=i[e.charCodeAt(t)]<<18|i[e.charCodeAt(t+1)]<<12|i[e.charCodeAt(t+2)]<<6|i[e.charCodeAt(t+3)];u[f++]=o>>16&255;u[f++]=o>>8&255;u[f++]=o&255}if(s===2){o=i[e.charCodeAt(t)]<<2|i[e.charCodeAt(t+1)]>>4;u[f++]=o&255}else if(s===1){o=i[e.charCodeAt(t)]<<10|i[e.charCodeAt(t+1)]<<4|i[e.charCodeAt(t+2)]>>2;u[f++]=o>>8&255;u[f++]=o&255}return u}function u(e){return n[e>>18&63]+n[e>>12&63]+n[e>>6&63]+n[e&63]}function l(e,t,r){var n;var i=[];for(var a=t;a<r;a+=3){n=(e[a]<<16)+(e[a+1]<<8)+e[a+2];i.push(u(n))}return i.join("")}function f(e){var t;var r=e.length;var i=r%3;var a="";var o=[];var s=16383;for(var u=0,f=r-i;u<f;u+=s){o.push(l(e,u,u+s>f?f:u+s))}if(i===1){t=e[r-1];a+=n[t>>2];a+=n[t<<4&63];a+="=="}else if(i===2){t=(e[r-2]<<8)+e[r-1];a+=n[t>>10];a+=n[t>>4&63];a+=n[t<<2&63];a+="="}o.push(a);return o.join("")}},{}],23:[function(e,t,r){r.read=function(e,t,r,n,i){var a,o;var s=i*8-n-1;var u=(1<<s)-1;var l=u>>1;var f=-7;var c=r?i-1:0;var h=r?-1:1;var d=e[t+c];c+=h;a=d&(1<<-f)-1;d>>=-f;f+=s;for(;f>0;a=a*256+e[t+c],c+=h,f-=8){}o=a&(1<<-f)-1;a>>=-f;f+=n;for(;f>0;o=o*256+e[t+c],c+=h,f-=8){}if(a===0){a=1-l}else if(a===u){return o?NaN:(d?-1:1)*Infinity}else{o=o+Math.pow(2,n);a=a-l}return(d?-1:1)*o*Math.pow(2,a-n)};r.write=function(e,t,r,n,i,a){var o,s,u;var l=a*8-i-1;var f=(1<<l)-1;var c=f>>1;var h=i===23?Math.pow(2,-24)-Math.pow(2,-77):0;var d=n?0:a-1;var p=n?1:-1;var g=t<0||t===0&&1/t<0?1:0;t=Math.abs(t);if(isNaN(t)||t===Infinity){s=isNaN(t)?1:0;o=f}else{o=Math.floor(Math.log(t)/Math.LN2);if(t*(u=Math.pow(2,-o))<1){o--;u*=2}if(o+c>=1){t+=h/u}else{t+=h*Math.pow(2,1-c)}if(t*u>=2){o++;u/=2}if(o+c>=f){s=0;o=f}else if(o+c>=1){s=(t*u-1)*Math.pow(2,i);o=o+c}else{s=t*Math.pow(2,c-1)*Math.pow(2,i);o=0}}for(;i>=8;e[r+d]=s&255,d+=p,s/=256,i-=8){}o=o<<i|s;l+=i;for(;l>0;e[r+d]=o&255,d+=p,o/=256,l-=8){}e[r+d-p]|=g*128}},{}],24:[function(e,t,r){var n={}.toString;t.exports=Array.isArray||function(e){return n.call(e)=="[object Array]"}},{}],25:[function(e,t,r){function n(){this._events=this._events||{};this._maxListeners=this._maxListeners||undefined}t.exports=n;n.EventEmitter=n;n.prototype._events=undefined;n.prototype._maxListeners=undefined;n.defaultMaxListeners=10;n.prototype.setMaxListeners=function(e){if(!a(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");this._maxListeners=e;return this};n.prototype.emit=function(e){var t,r,n,a,u,l;if(!this._events)this._events={};if(e==="error"){if(!this._events.error||o(this._events.error)&&!this._events.error.length){t=arguments[1];if(t instanceof Error){throw t}throw TypeError('Uncaught, unspecified "error" event.')}}r=this._events[e];if(s(r))return false;if(i(r)){switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1);r.apply(this,a)}}else if(o(r)){a=Array.prototype.slice.call(arguments,1);l=r.slice();n=l.length;for(u=0;u<n;u++)l[u].apply(this,a)}return true};n.prototype.addListener=function(e,t){var r;if(!i(t))throw TypeError("listener must be a function");if(!this._events)this._events={};if(this._events.newListener)this.emit("newListener",e,i(t.listener)?t.listener:t);if(!this._events[e])this._events[e]=t;else if(o(this._events[e]))this._events[e].push(t);else this._events[e]=[this._events[e],t];if(o(this._events[e])&&!this._events[e].warned){if(!s(this._maxListeners)){r=this._maxListeners}else{r=n.defaultMaxListeners}if(r&&r>0&&this._events[e].length>r){this._events[e].warned=true;console.error("(node) warning: possible EventEmitter memory "+"leak detected. %d listeners added. "+"Use emitter.setMaxListeners() to increase limit.",this._events[e].length);if(typeof console.trace==="function"){console.trace()}}}return this};n.prototype.on=n.prototype.addListener;n.prototype.once=function(e,t){if(!i(t))throw TypeError("listener must be a function");var r=false;function n(){this.removeListener(e,n);if(!r){r=true;t.apply(this,arguments)}}n.listener=t;this.on(e,n);return this};n.prototype.removeListener=function(e,t){var r,n,a,s;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;r=this._events[e];a=r.length;n=-1;if(r===t||i(r.listener)&&r.listener===t){delete this._events[e];if(this._events.removeListener)this.emit("removeListener",e,t)}else if(o(r)){for(s=a;s-->0;){if(r[s]===t||r[s].listener&&r[s].listener===t){n=s;break}}if(n<0)return this;if(r.length===1){r.length=0;delete this._events[e]}else{r.splice(n,1)}if(this._events.removeListener)this.emit("removeListener",e,t)}return this};n.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener){if(arguments.length===0)this._events={};else if(this._events[e])delete this._events[e];return this}if(arguments.length===0){for(t in this._events){if(t==="removeListener")continue;this.removeAllListeners(t)}this.removeAllListeners("removeListener");this._events={};return this}r=this._events[e];if(i(r)){this.removeListener(e,r)}else if(r){while(r.length)this.removeListener(e,r[r.length-1])}delete this._events[e];return this};n.prototype.listeners=function(e){var t;if(!this._events||!this._events[e])t=[];else if(i(this._events[e]))t=[this._events[e]];else t=this._events[e].slice();return t};n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(i(t))return 1;else if(t)return t.length}return 0};n.listenerCount=function(e,t){return e.listenerCount(t)};function i(e){return typeof e==="function"}function a(e){return typeof e==="number"}function o(e){return typeof e==="object"&&e!==null}function s(e){return e===void 0}},{}],26:[function(e,t,r){if(typeof Object.create==="function"){t.exports=function n(e,t){e.super_=t;e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}})}}else{t.exports=function i(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype;e.prototype=new r;e.prototype.constructor=e}}},{}],27:[function(e,t,r){arguments[4][10][0].apply(r,arguments)},{dup:10}],28:[function(e,t,r){(function(e){function t(e,t){var r=0;for(var n=e.length-1;n>=0;n--){var i=e[n];if(i==="."){e.splice(n,1)}else if(i===".."){e.splice(n,1);r++}else if(r){e.splice(n,1);r--}}if(t){for(;r--;r){e.unshift("..")}}return e}var n=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;var i=function(e){return n.exec(e).slice(1)};r.resolve=function(){var r="",n=false;for(var i=arguments.length-1;i>=-1&&!n;i--){var o=i>=0?arguments[i]:e.cwd();if(typeof o!=="string"){throw new TypeError("Arguments to path.resolve must be strings")}else if(!o){continue}r=o+"/"+r;n=o.charAt(0)==="/"}r=t(a(r.split("/"),function(e){return!!e}),!n).join("/");return(n?"/":"")+r||"."};r.normalize=function(e){var n=r.isAbsolute(e),i=o(e,-1)==="/";e=t(a(e.split("/"),function(e){return!!e}),!n).join("/");if(!e&&!n){e="."}if(e&&i){e+="/"}return(n?"/":"")+e};r.isAbsolute=function(e){return e.charAt(0)==="/"};r.join=function(){var e=Array.prototype.slice.call(arguments,0);return r.normalize(a(e,function(e,t){if(typeof e!=="string"){throw new TypeError("Arguments to path.join must be strings")}return e}).join("/"))};r.relative=function(e,t){e=r.resolve(e).substr(1);t=r.resolve(t).substr(1);function n(e){var t=0;for(;t<e.length;t++){if(e[t]!=="")break}var r=e.length-1;for(;r>=0;r--){if(e[r]!=="")break}if(t>r)return[];return e.slice(t,r-t+1)}var i=n(e.split("/"));var a=n(t.split("/"));var o=Math.min(i.length,a.length);var s=o;for(var u=0;u<o;u++){if(i[u]!==a[u]){s=u;break}}var l=[];for(var u=s;u<i.length;u++){l.push("..")}l=l.concat(a.slice(s));return l.join("/")};r.sep="/";r.delimiter=":";r.dirname=function(e){var t=i(e),r=t[0],n=t[1];if(!r&&!n){return"."}if(n){n=n.substr(0,n.length-1)}return r+n};r.basename=function(e,t){var r=i(e)[2];if(t&&r.substr(-1*t.length)===t){r=r.substr(0,r.length-t.length)}return r};r.extname=function(e){return i(e)[3]};function a(e,t){if(e.filter)return e.filter(t);var r=[];for(var n=0;n<e.length;n++){if(t(e[n],n,e))r.push(e[n])}return r}var o="ab".substr(-1)==="b"?function(e,t,r){return e.substr(t,r)}:function(e,t,r){if(t<0)t=e.length+t;return e.substr(t,r)}}).call(this,e("_process"))},{_process:29}],29:[function(e,t,r){var n=t.exports={};var i=[];var a=false;var o;var s=-1;function u(){a=false;if(o.length){i=o.concat(i)}else{s=-1}if(i.length){l()}}function l(){if(a){return}var e=setTimeout(u);a=true;var t=i.length;while(t){o=i;i=[];while(++s<t){if(o){o[s].run()}}s=-1;t=i.length}o=null;a=false;clearTimeout(e)}n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1){for(var r=1;r<arguments.length;r++){t[r-1]=arguments[r]}}i.push(new f(e,t));if(i.length===1&&!a){setTimeout(l,0)}};function f(e,t){this.fun=e;this.array=t}f.prototype.run=function(){this.fun.apply(null,this.array)};n.title="browser";n.browser=true;n.env={};n.argv=[];n.version="";n.versions={};function c(){}n.on=c;n.addListener=c;n.once=c;n.off=c;n.removeListener=c;n.removeAllListeners=c;n.emit=c;n.binding=function(e){throw new Error("process.binding is not supported")};n.cwd=function(){return"/"};n.chdir=function(e){throw new Error("process.chdir is not supported")};n.umask=function(){return 0}},{}],30:[function(e,t,r){t.exports=e("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":31}],31:[function(e,t,r){"use strict";var n=Object.keys||function(e){var t=[];for(var r in e){t.push(r)}return t};t.exports=c;var i=e("process-nextick-args");var a=e("core-util-is");a.inherits=e("inherits");var o=e("./_stream_readable");var s=e("./_stream_writable");a.inherits(c,o);var u=n(s.prototype);for(var l=0;l<u.length;l++){var f=u[l];if(!c.prototype[f])c.prototype[f]=s.prototype[f]}function c(e){if(!(this instanceof c))return new c(e);o.call(this,e);s.call(this,e);if(e&&e.readable===false)this.readable=false;if(e&&e.writable===false)this.writable=false;this.allowHalfOpen=true;if(e&&e.allowHalfOpen===false)this.allowHalfOpen=false;this.once("end",h)}function h(){if(this.allowHalfOpen||this._writableState.ended)return;i(d,this)}function d(e){e.end()}function p(e,t){for(var r=0,n=e.length;r<n;r++){t(e[r],r)}}},{"./_stream_readable":33,"./_stream_writable":35,"core-util-is":36,inherits:26,"process-nextick-args":38}],32:[function(e,t,r){"use strict";t.exports=a;var n=e("./_stream_transform");var i=e("core-util-is");i.inherits=e("inherits");i.inherits(a,n);function a(e){if(!(this instanceof a))return new a(e);n.call(this,e)}a.prototype._transform=function(e,t,r){r(null,e)}},{"./_stream_transform":34,"core-util-is":36,inherits:26}],33:[function(e,t,r){(function(r){"use strict";t.exports=g;var n=e("process-nextick-args");var i=e("isarray");var a=e("buffer").Buffer;g.ReadableState=p;var o=e("events");var s=function(e,t){return e.listeners(t).length};var u;(function(){try{u=e("st"+"ream")}catch(t){}finally{if(!u)u=e("events").EventEmitter}})();var a=e("buffer").Buffer;var l=e("core-util-is");l.inherits=e("inherits");var f=e("util");var c=undefined;if(f&&f.debuglog){c=f.debuglog("stream")}else{c=function(){}}var h;l.inherits(g,u);var d;function p(t,r){d=d||e("./_stream_duplex");t=t||{};this.objectMode=!!t.objectMode;if(r instanceof d)this.objectMode=this.objectMode||!!t.readableObjectMode;var n=t.highWaterMark;var i=this.objectMode?16:16*1024;this.highWaterMark=n||n===0?n:i;this.highWaterMark=~~this.highWaterMark;this.buffer=[];this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=null;this.ended=false;this.endEmitted=false;this.reading=false;this.sync=true;this.needReadable=false;this.emittedReadable=false;this.readableListening=false;this.resumeScheduled=false;this.defaultEncoding=t.defaultEncoding||"utf8";this.ranOut=false;this.awaitDrain=0;this.readingMore=false;this.decoder=null;this.encoding=null;if(t.encoding){if(!h)h=e("string_decoder/").StringDecoder;this.decoder=new h(t.encoding);this.encoding=t.encoding}}var d;function g(t){d=d||e("./_stream_duplex");if(!(this instanceof g))return new g(t);this._readableState=new p(t,this);this.readable=true;if(t&&typeof t.read==="function")this._read=t.read;u.call(this)}g.prototype.push=function(e,t){var r=this._readableState;if(!r.objectMode&&typeof e==="string"){t=t||r.defaultEncoding;if(t!==r.encoding){e=new a(e,t);t=""}}return _(this,r,e,t,false)};g.prototype.unshift=function(e){var t=this._readableState;return _(this,t,e,"",true)};g.prototype.isPaused=function(){return this._readableState.flowing===false};function _(e,t,r,n,i){var a=w(t,r);if(a){e.emit("error",a)}else if(r===null){t.reading=false;E(e,t)}else if(t.objectMode||r&&r.length>0){if(t.ended&&!i){var o=new Error("stream.push() after EOF");e.emit("error",o)}else if(t.endEmitted&&i){var o=new Error("stream.unshift() after end event");e.emit("error",o)}else{var s;if(t.decoder&&!i&&!n){r=t.decoder.write(r);s=!t.objectMode&&r.length===0}if(!i)t.reading=false;if(!s){if(t.flowing&&t.length===0&&!t.sync){e.emit("data",r);e.read(0)}else{t.length+=t.objectMode?1:r.length;if(i)t.buffer.unshift(r);else t.buffer.push(r);if(t.needReadable)A(e)}}x(e,t)}}else if(!i){t.reading=false}return v(t)}function v(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||e.length===0)}g.prototype.setEncoding=function(t){if(!h)h=e("string_decoder/").StringDecoder;this._readableState.decoder=new h(t);this._readableState.encoding=t;return this};var m=8388608;function b(e){if(e>=m){e=m}else{e--;e|=e>>>1;e|=e>>>2;e|=e>>>4;e|=e>>>8;e|=e>>>16;e++}return e}function y(e,t){if(t.length===0&&t.ended)return 0;if(t.objectMode)return e===0?0:1;if(e===null||isNaN(e)){if(t.flowing&&t.buffer.length)return t.buffer[0].length;else return t.length}if(e<=0)return 0;if(e>t.highWaterMark)t.highWaterMark=b(e);if(e>t.length){if(!t.ended){t.needReadable=true;return 0}else{return t.length}}return e}g.prototype.read=function(e){c("read",e);var t=this._readableState;var r=e;if(typeof e!=="number"||e>0)t.emittedReadable=false;if(e===0&&t.needReadable&&(t.length>=t.highWaterMark||t.ended)){c("read: emitReadable",t.length,t.ended);if(t.length===0&&t.ended)N(this);else A(this);return null}e=y(e,t);if(e===0&&t.ended){if(t.length===0)N(this);return null}var n=t.needReadable;c("need readable",n);if(t.length===0||t.length-e<t.highWaterMark){n=true;c("length less than watermark",n)}if(t.ended||t.reading){n=false;c("reading or ended",n)}if(n){c("do read");t.reading=true;t.sync=true;if(t.length===0)t.needReadable=true;this._read(t.highWaterMark);t.sync=false}if(n&&!t.reading)e=y(r,t);var i;if(e>0)i=L(e,t);else i=null;if(i===null){t.needReadable=true;e=0}t.length-=e;if(t.length===0&&!t.ended)t.needReadable=true;if(r!==e&&t.ended&&t.length===0)N(this);if(i!==null)this.emit("data",i);return i};function w(e,t){var r=null;if(!a.isBuffer(t)&&typeof t!=="string"&&t!==null&&t!==undefined&&!e.objectMode){r=new TypeError("Invalid non-string/buffer chunk")}return r}function E(e,t){if(t.ended)return;if(t.decoder){var r=t.decoder.end();if(r&&r.length){t.buffer.push(r);t.length+=t.objectMode?1:r.length}}t.ended=true;A(e)}function A(e){var t=e._readableState;t.needReadable=false;if(!t.emittedReadable){c("emitReadable",t.flowing);t.emittedReadable=true;if(t.sync)n(T,e);else T(e)}}function T(e){c("emit readable");e.emit("readable");I(e)}function x(e,t){if(!t.readingMore){t.readingMore=true;n(R,e,t)}}function R(e,t){var r=t.length;while(!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark){c("maybeReadMore read 0");e.read(0);if(r===t.length)break;else r=t.length}t.readingMore=false}g.prototype._read=function(e){this.emit("error",new Error("not implemented"))};g.prototype.pipe=function(e,t){var a=this;var o=this._readableState;switch(o.pipesCount){case 0:o.pipes=e;break;case 1:o.pipes=[o.pipes,e];break;default:o.pipes.push(e);break}o.pipesCount+=1;c("pipe count=%d opts=%j",o.pipesCount,t);var u=(!t||t.end!==false)&&e!==r.stdout&&e!==r.stderr;var l=u?h:g;if(o.endEmitted)n(l);else a.once("end",l);e.on("unpipe",f);function f(e){c("onunpipe");if(e===a){g()}}function h(){c("onend");e.end()}var d=S(a);e.on("drain",d);var p=false;function g(){c("cleanup");e.removeListener("close",m);e.removeListener("finish",b);e.removeListener("drain",d);e.removeListener("error",v);e.removeListener("unpipe",f);a.removeListener("end",h);a.removeListener("end",g);a.removeListener("data",_);p=true;if(o.awaitDrain&&(!e._writableState||e._writableState.needDrain))d()}a.on("data",_);function _(t){c("ondata");var r=e.write(t);if(false===r){if(o.pipesCount===1&&o.pipes[0]===e&&a.listenerCount("data")===1&&!p){c("false write response, pause",a._readableState.awaitDrain);a._readableState.awaitDrain++}a.pause()}}function v(t){c("onerror",t);y();e.removeListener("error",v);if(s(e,"error")===0)e.emit("error",t)}if(!e._events||!e._events.error)e.on("error",v);else if(i(e._events.error))e._events.error.unshift(v);else e._events.error=[v,e._events.error];function m(){e.removeListener("finish",b);y()}e.once("close",m);function b(){c("onfinish");e.removeListener("close",m);y()}e.once("finish",b);function y(){c("unpipe");a.unpipe(e)}e.emit("pipe",a);if(!o.flowing){c("pipe resume");a.resume()}return e};function S(e){return function(){var t=e._readableState;c("pipeOnDrain",t.awaitDrain);if(t.awaitDrain)t.awaitDrain--;if(t.awaitDrain===0&&s(e,"data")){t.flowing=true;I(e)}}}g.prototype.unpipe=function(e){var t=this._readableState;if(t.pipesCount===0)return this;if(t.pipesCount===1){if(e&&e!==t.pipes)return this;if(!e)e=t.pipes;t.pipes=null;t.pipesCount=0;t.flowing=false;if(e)e.emit("unpipe",this);return this}if(!e){var r=t.pipes;var n=t.pipesCount;t.pipes=null;t.pipesCount=0;t.flowing=false;for(var i=0;i<n;i++){r[i].emit("unpipe",this)}return this}var a=P(t.pipes,e);if(a===-1)return this;t.pipes.splice(a,1);t.pipesCount-=1;if(t.pipesCount===1)t.pipes=t.pipes[0];e.emit("unpipe",this);return this};g.prototype.on=function(e,t){var r=u.prototype.on.call(this,e,t);if(e==="data"&&false!==this._readableState.flowing){this.resume()}if(e==="readable"&&!this._readableState.endEmitted){var i=this._readableState;if(!i.readableListening){i.readableListening=true;i.emittedReadable=false;i.needReadable=true;if(!i.reading){n(C,this)}else if(i.length){A(this,i)}}}return r};g.prototype.addListener=g.prototype.on;function C(e){c("readable nexttick read 0");e.read(0)}g.prototype.resume=function(){var e=this._readableState;if(!e.flowing){c("resume");e.flowing=true;k(this,e)}return this};function k(e,t){if(!t.resumeScheduled){t.resumeScheduled=true;n(j,e,t)}}function j(e,t){if(!t.reading){c("resume read 0");e.read(0)}t.resumeScheduled=false;e.emit("resume");I(e);if(t.flowing&&!t.reading)e.read(0)}g.prototype.pause=function(){c("call pause flowing=%j",this._readableState.flowing);if(false!==this._readableState.flowing){c("pause");this._readableState.flowing=false;this.emit("pause")}return this};function I(e){var t=e._readableState;c("flow",t.flowing);if(t.flowing){do{var r=e.read()}while(null!==r&&t.flowing)}}g.prototype.wrap=function(e){var t=this._readableState;var r=false;var n=this;e.on("end",function(){c("wrapped end");if(t.decoder&&!t.ended){var e=t.decoder.end();if(e&&e.length)n.push(e)}n.push(null)});e.on("data",function(i){c("wrapped data");if(t.decoder)i=t.decoder.write(i);if(t.objectMode&&(i===null||i===undefined))return;else if(!t.objectMode&&(!i||!i.length))return;var a=n.push(i);if(!a){r=true;e.pause()}});for(var i in e){if(this[i]===undefined&&typeof e[i]==="function"){this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i)}}var a=["error","close","destroy","pause","resume"];M(a,function(t){e.on(t,n.emit.bind(n,t))});n._read=function(t){c("wrapped _read",t);if(r){r=false;e.resume()}};return n};g._fromList=L;function L(e,t){var r=t.buffer;var n=t.length;var i=!!t.decoder;var o=!!t.objectMode;var s;if(r.length===0)return null;if(n===0)s=null;else if(o)s=r.shift();else if(!e||e>=n){if(i)s=r.join("");else if(r.length===1)s=r[0];else s=a.concat(r,n);r.length=0}else{if(e<r[0].length){var u=r[0];s=u.slice(0,e);r[0]=u.slice(e)}else if(e===r[0].length){s=r.shift()}else{if(i)s="";else s=new a(e);var l=0;for(var f=0,c=r.length;f<c&&l<e;f++){var u=r[0];var h=Math.min(e-l,u.length);if(i)s+=u.slice(0,h);else u.copy(s,l,0,h);if(h<u.length)r[0]=u.slice(h);else r.shift();l+=h}}}return s}function N(e){var t=e._readableState;if(t.length>0)throw new Error("endReadable called on non-empty stream");if(!t.endEmitted){t.ended=true;n(O,t,e)}}function O(e,t){if(!e.endEmitted&&e.length===0){e.endEmitted=true;t.readable=false;t.emit("end")}}function M(e,t){for(var r=0,n=e.length;r<n;r++){t(e[r],r)}}function P(e,t){for(var r=0,n=e.length;r<n;r++){if(e[r]===t)return r}return-1}}).call(this,e("_process"))},{"./_stream_duplex":31,_process:29,buffer:21,"core-util-is":36,events:25,inherits:26,isarray:37,"process-nextick-args":38,"string_decoder/":45,util:20}],34:[function(e,t,r){"use strict";t.exports=s;var n=e("./_stream_duplex");var i=e("core-util-is");i.inherits=e("inherits");i.inherits(s,n);function a(e){this.afterTransform=function(t,r){return o(e,t,r)};this.needTransform=false;this.transforming=false;this.writecb=null;this.writechunk=null;this.writeencoding=null}function o(e,t,r){var n=e._transformState;n.transforming=false;var i=n.writecb;if(!i)return e.emit("error",new Error("no writecb in Transform class"));n.writechunk=null;n.writecb=null;if(r!==null&&r!==undefined)e.push(r);i(t);var a=e._readableState;a.reading=false;if(a.needReadable||a.length<a.highWaterMark){e._read(a.highWaterMark)}}function s(e){if(!(this instanceof s))return new s(e);n.call(this,e);this._transformState=new a(this);var t=this;this._readableState.needReadable=true;this._readableState.sync=false;if(e){if(typeof e.transform==="function")this._transform=e.transform;if(typeof e.flush==="function")this._flush=e.flush}this.once("prefinish",function(){if(typeof this._flush==="function")this._flush(function(e){u(t,e)});else u(t)})}s.prototype.push=function(e,t){this._transformState.needTransform=false;return n.prototype.push.call(this,e,t)};s.prototype._transform=function(e,t,r){throw new Error("not implemented")};s.prototype._write=function(e,t,r){var n=this._transformState;n.writecb=r;n.writechunk=e;n.writeencoding=t;if(!n.transforming){var i=this._readableState;if(n.needTransform||i.needReadable||i.length<i.highWaterMark)this._read(i.highWaterMark)}};s.prototype._read=function(e){var t=this._transformState;if(t.writechunk!==null&&t.writecb&&!t.transforming){t.transforming=true;this._transform(t.writechunk,t.writeencoding,t.afterTransform)}else{t.needTransform=true}};function u(e,t){if(t)return e.emit("error",t);var r=e._writableState;var n=e._transformState;if(r.length)throw new Error("calling transform done when ws.length != 0");if(n.transforming)throw new Error("calling transform done when still transforming");return e.push(null)}},{"./_stream_duplex":31,"core-util-is":36,inherits:26}],35:[function(e,t,r){"use strict";t.exports=d;var n=e("process-nextick-args");var i=!true?setImmediate:n;var a=e("buffer").Buffer;d.WritableState=h;var o=e("core-util-is");o.inherits=e("inherits");var s={deprecate:e("util-deprecate")};var u;(function(){try{u=e("st"+"ream")}catch(t){}finally{if(!u)u=e("events").EventEmitter}})();var a=e("buffer").Buffer;o.inherits(d,u);function l(){}function f(e,t,r){this.chunk=e;this.encoding=t;this.callback=r;this.next=null}var c;function h(t,r){c=c||e("./_stream_duplex");t=t||{};this.objectMode=!!t.objectMode;if(r instanceof c)this.objectMode=this.objectMode||!!t.writableObjectMode;var n=t.highWaterMark;var i=this.objectMode?16:16*1024;this.highWaterMark=n||n===0?n:i;this.highWaterMark=~~this.highWaterMark;this.needDrain=false;this.ending=false;this.ended=false;this.finished=false;var a=t.decodeStrings===false;this.decodeStrings=!a;this.defaultEncoding=t.defaultEncoding||"utf8";this.length=0;this.writing=false;this.corked=0;this.sync=true;this.bufferProcessing=false;this.onwrite=function(e){w(r,e)};this.writecb=null;this.writelen=0;this.bufferedRequest=null;this.lastBufferedRequest=null;this.pendingcb=0;this.prefinished=false;this.errorEmitted=false;this.bufferedRequestCount=0;this.corkedRequestsFree=new k(this);this.corkedRequestsFree.next=new k(this)}h.prototype.getBuffer=function j(){var e=this.bufferedRequest;var t=[];while(e){t.push(e);e=e.next}return t};(function(){try{Object.defineProperty(h.prototype,"buffer",{get:s.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer "+"instead.")})}catch(e){}})();var c;function d(t){c=c||e("./_stream_duplex");if(!(this instanceof d)&&!(this instanceof c))return new d(t);this._writableState=new h(t,this);this.writable=true;if(t){if(typeof t.write==="function")this._write=t.write;if(typeof t.writev==="function")this._writev=t.writev}u.call(this)}d.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))};function p(e,t){var r=new Error("write after end");e.emit("error",r);n(t,r)}function g(e,t,r,i){var o=true;if(!a.isBuffer(r)&&typeof r!=="string"&&r!==null&&r!==undefined&&!t.objectMode){var s=new TypeError("Invalid non-string/buffer chunk");e.emit("error",s);n(i,s);o=false}return o}d.prototype.write=function(e,t,r){var n=this._writableState;var i=false;if(typeof t==="function"){r=t;t=null}if(a.isBuffer(e))t="buffer";else if(!t)t=n.defaultEncoding;if(typeof r!=="function")r=l;if(n.ended)p(this,r);else if(g(this,n,e,r)){n.pendingcb++;i=v(this,n,e,t,r)}return i};d.prototype.cork=function(){var e=this._writableState;e.corked++};d.prototype.uncork=function(){var e=this._writableState;if(e.corked){e.corked--;if(!e.writing&&!e.corked&&!e.finished&&!e.bufferProcessing&&e.bufferedRequest)T(this,e)}};d.prototype.setDefaultEncoding=function I(e){if(typeof e==="string")e=e.toLowerCase();if(!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);this._writableState.defaultEncoding=e};function _(e,t,r){if(!e.objectMode&&e.decodeStrings!==false&&typeof t==="string"){t=new a(t,r)}return t}function v(e,t,r,n,i){r=_(t,r,n);if(a.isBuffer(r))n="buffer";var o=t.objectMode?1:r.length;t.length+=o;var s=t.length<t.highWaterMark;if(!s)t.needDrain=true;if(t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest=new f(r,n,i);if(u){u.next=t.lastBufferedRequest}else{t.bufferedRequest=t.lastBufferedRequest}t.bufferedRequestCount+=1}else{m(e,t,false,o,r,n,i)}return s}function m(e,t,r,n,i,a,o){t.writelen=n;t.writecb=o;t.writing=true;t.sync=true;if(r)e._writev(i,t.onwrite);else e._write(i,a,t.onwrite);t.sync=false}function b(e,t,r,i,a){--t.pendingcb;if(r)n(a,i);else a(i);e._writableState.errorEmitted=true;e.emit("error",i)}function y(e){e.writing=false;e.writecb=null;e.length-=e.writelen;e.writelen=0}function w(e,t){var r=e._writableState;var n=r.sync;var a=r.writecb;y(r);if(t)b(e,r,n,t,a);else{var o=x(r);if(!o&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest){T(e,r)}if(n){i(E,e,r,o,a)}else{E(e,r,o,a)}}}function E(e,t,r,n){if(!r)A(e,t);t.pendingcb--;n();S(e,t)}function A(e,t){if(t.length===0&&t.needDrain){t.needDrain=false;e.emit("drain")}}function T(e,t){t.bufferProcessing=true;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount;var i=new Array(n);var a=t.corkedRequestsFree;a.entry=r;var o=0;while(r){i[o]=r;r=r.next;o+=1}m(e,t,true,t.length,i,"",a.finish);t.pendingcb++;t.lastBufferedRequest=null;t.corkedRequestsFree=a.next;a.next=null}else{while(r){var s=r.chunk;var u=r.encoding;var l=r.callback;var f=t.objectMode?1:s.length;m(e,t,false,f,s,u,l);r=r.next;if(t.writing){break}}if(r===null)t.lastBufferedRequest=null}t.bufferedRequestCount=0;t.bufferedRequest=r;t.bufferProcessing=false}d.prototype._write=function(e,t,r){r(new Error("not implemented"))};d.prototype._writev=null;d.prototype.end=function(e,t,r){var n=this._writableState;if(typeof e==="function"){r=e;e=null;t=null}else if(typeof t==="function"){r=t;t=null}if(e!==null&&e!==undefined)this.write(e,t);if(n.corked){n.corked=1;this.uncork()}if(!n.ending&&!n.finished)C(this,n,r)};function x(e){return e.ending&&e.length===0&&e.bufferedRequest===null&&!e.finished&&!e.writing}function R(e,t){if(!t.prefinished){t.prefinished=true;e.emit("prefinish")}}function S(e,t){var r=x(t);if(r){if(t.pendingcb===0){R(e,t);t.finished=true;e.emit("finish")}else{R(e,t)}}return r}function C(e,t,r){t.ending=true;S(e,t);if(r){if(t.finished)n(r);else e.once("finish",r)}t.ended=true;e.writable=false}function k(e){var t=this;this.next=null;this.entry=null;this.finish=function(r){var n=t.entry;t.entry=null;while(n){var i=n.callback;e.pendingcb--;i(r);n=n.next}if(e.corkedRequestsFree){e.corkedRequestsFree.next=t}else{e.corkedRequestsFree=t}}}},{"./_stream_duplex":31,buffer:21,"core-util-is":36,events:25,inherits:26,"process-nextick-args":38,"util-deprecate":39}],36:[function(e,t,r){(function(e){function t(e){if(Array.isArray){return Array.isArray(e)}return _(e)==="[object Array]"}r.isArray=t;function n(e){return typeof e==="boolean"}r.isBoolean=n;function i(e){return e===null}r.isNull=i;function a(e){return e==null}r.isNullOrUndefined=a;function o(e){return typeof e==="number"}r.isNumber=o;function s(e){return typeof e==="string"}r.isString=s;function u(e){return typeof e==="symbol"}r.isSymbol=u;function l(e){return e===void 0}r.isUndefined=l;function f(e){return _(e)==="[object RegExp]"}r.isRegExp=f;function c(e){return typeof e==="object"&&e!==null}r.isObject=c;function h(e){
return _(e)==="[object Date]"}r.isDate=h;function d(e){return _(e)==="[object Error]"||e instanceof Error}r.isError=d;function p(e){return typeof e==="function"}r.isFunction=p;function g(e){return e===null||typeof e==="boolean"||typeof e==="number"||typeof e==="string"||typeof e==="symbol"||typeof e==="undefined"}r.isPrimitive=g;r.isBuffer=e.isBuffer;function _(e){return Object.prototype.toString.call(e)}}).call(this,{isBuffer:e("../../../../insert-module-globals/node_modules/is-buffer/index.js")})},{"../../../../insert-module-globals/node_modules/is-buffer/index.js":27}],37:[function(e,t,r){arguments[4][24][0].apply(r,arguments)},{dup:24}],38:[function(e,t,r){(function(e){"use strict";if(!e.version||e.version.indexOf("v0.")===0||e.version.indexOf("v1.")===0&&e.version.indexOf("v1.8.")!==0){t.exports=r}else{t.exports=e.nextTick}function r(t){var r=new Array(arguments.length-1);var n=0;while(n<r.length){r[n++]=arguments[n]}e.nextTick(function i(){t.apply(null,r)})}}).call(this,e("_process"))},{_process:29}],39:[function(e,t,r){(function(e){t.exports=r;function r(e,t){if(n("noDeprecation")){return e}var r=false;function i(){if(!r){if(n("throwDeprecation")){throw new Error(t)}else if(n("traceDeprecation")){console.trace(t)}else{console.warn(t)}r=true}return e.apply(this,arguments)}return i}function n(t){try{if(!e.localStorage)return false}catch(r){return false}var n=e.localStorage[t];if(null==n)return false;return String(n).toLowerCase()==="true"}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],40:[function(e,t,r){t.exports=e("./lib/_stream_passthrough.js")},{"./lib/_stream_passthrough.js":32}],41:[function(e,t,r){var n=function(){try{return e("st"+"ream")}catch(t){}}();r=t.exports=e("./lib/_stream_readable.js");r.Stream=n||r;r.Readable=r;r.Writable=e("./lib/_stream_writable.js");r.Duplex=e("./lib/_stream_duplex.js");r.Transform=e("./lib/_stream_transform.js");r.PassThrough=e("./lib/_stream_passthrough.js");if(!true){t.exports=e("stream")}},{"./lib/_stream_duplex.js":31,"./lib/_stream_passthrough.js":32,"./lib/_stream_readable.js":33,"./lib/_stream_transform.js":34,"./lib/_stream_writable.js":35,stream:44}],42:[function(e,t,r){t.exports=e("./lib/_stream_transform.js")},{"./lib/_stream_transform.js":34}],43:[function(e,t,r){t.exports=e("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":35}],44:[function(e,t,r){t.exports=a;var n=e("events").EventEmitter;var i=e("inherits");i(a,n);a.Readable=e("readable-stream/readable.js");a.Writable=e("readable-stream/writable.js");a.Duplex=e("readable-stream/duplex.js");a.Transform=e("readable-stream/transform.js");a.PassThrough=e("readable-stream/passthrough.js");a.Stream=a;function a(){n.call(this)}a.prototype.pipe=function(e,t){var r=this;function i(t){if(e.writable){if(false===e.write(t)&&r.pause){r.pause()}}}r.on("data",i);function a(){if(r.readable&&r.resume){r.resume()}}e.on("drain",a);if(!e._isStdio&&(!t||t.end!==false)){r.on("end",s);r.on("close",u)}var o=false;function s(){if(o)return;o=true;e.end()}function u(){if(o)return;o=true;if(typeof e.destroy==="function")e.destroy()}function l(e){f();if(n.listenerCount(this,"error")===0){throw e}}r.on("error",l);e.on("error",l);function f(){r.removeListener("data",i);e.removeListener("drain",a);r.removeListener("end",s);r.removeListener("close",u);r.removeListener("error",l);e.removeListener("error",l);r.removeListener("end",f);r.removeListener("close",f);e.removeListener("close",f)}r.on("end",f);r.on("close",f);e.on("close",f);e.emit("pipe",r);return e}},{events:25,inherits:26,"readable-stream/duplex.js":30,"readable-stream/passthrough.js":40,"readable-stream/readable.js":41,"readable-stream/transform.js":42,"readable-stream/writable.js":43}],45:[function(e,t,r){var n=e("buffer").Buffer;var i=n.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return true;default:return false}};function a(e){if(e&&!i(e)){throw new Error("Unknown encoding: "+e)}}var o=r.StringDecoder=function(e){this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,"");a(e);switch(this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2;this.detectIncompleteChar=u;break;case"base64":this.surrogateSize=3;this.detectIncompleteChar=l;break;default:this.write=s;return}this.charBuffer=new n(6);this.charReceived=0;this.charLength=0};o.prototype.write=function(e){var t="";while(this.charLength){var r=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;e.copy(this.charBuffer,this.charReceived,0,r);this.charReceived+=r;if(this.charReceived<this.charLength){return""}e=e.slice(r,e.length);t=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var n=t.charCodeAt(t.length-1);if(n>=55296&&n<=56319){this.charLength+=this.surrogateSize;t="";continue}this.charReceived=this.charLength=0;if(e.length===0){return t}break}this.detectIncompleteChar(e);var i=e.length;if(this.charLength){e.copy(this.charBuffer,0,e.length-this.charReceived,i);i-=this.charReceived}t+=e.toString(this.encoding,0,i);var i=t.length-1;var n=t.charCodeAt(i);if(n>=55296&&n<=56319){var a=this.surrogateSize;this.charLength+=a;this.charReceived+=a;this.charBuffer.copy(this.charBuffer,a,0,a);e.copy(this.charBuffer,0,0,a);return t.substring(0,i)}return t};o.prototype.detectIncompleteChar=function(e){var t=e.length>=3?3:e.length;for(;t>0;t--){var r=e[e.length-t];if(t==1&&r>>5==6){this.charLength=2;break}if(t<=2&&r>>4==14){this.charLength=3;break}if(t<=3&&r>>3==30){this.charLength=4;break}}this.charReceived=t};o.prototype.end=function(e){var t="";if(e&&e.length)t=this.write(e);if(this.charReceived){var r=this.charReceived;var n=this.charBuffer;var i=this.encoding;t+=n.slice(0,r).toString(i)}return t};function s(e){return e.toString(this.encoding)}function u(e){this.charReceived=e.length%2;this.charLength=this.charReceived?2:0}function l(e){this.charReceived=e.length%3;this.charLength=this.charReceived?3:0}},{buffer:21}],46:[function(e,t,r){t.exports=function n(e){return e&&typeof e==="object"&&typeof e.copy==="function"&&typeof e.fill==="function"&&typeof e.readUInt8==="function"}},{}],47:[function(e,t,r){(function(t,n){var i=/%[sdj%]/g;r.format=function(e){if(!E(e)){var t=[];for(var r=0;r<arguments.length;r++){t.push(s(arguments[r]))}return t.join(" ")}var r=1;var n=arguments;var a=n.length;var o=String(e).replace(i,function(e){if(e==="%%")return"%";if(r>=a)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(t){return"[Circular]"}default:return e}});for(var u=n[r];r<a;u=n[++r]){if(b(u)||!R(u)){o+=" "+u}else{o+=" "+s(u)}}return o};r.deprecate=function(e,i){if(T(n.process)){return function(){return r.deprecate(e,i).apply(this,arguments)}}if(t.noDeprecation===true){return e}var a=false;function o(){if(!a){if(t.throwDeprecation){throw new Error(i)}else if(t.traceDeprecation){console.trace(i)}else{console.error(i)}a=true}return e.apply(this,arguments)}return o};var a={};var o;r.debuglog=function(e){if(T(o))o=t.env.NODE_DEBUG||"";e=e.toUpperCase();if(!a[e]){if(new RegExp("\\b"+e+"\\b","i").test(o)){var n=t.pid;a[e]=function(){var t=r.format.apply(r,arguments);console.error("%s %d: %s",e,n,t)}}else{a[e]=function(){}}}return a[e]};function s(e,t){var n={seen:[],stylize:l};if(arguments.length>=3)n.depth=arguments[2];if(arguments.length>=4)n.colors=arguments[3];if(m(t)){n.showHidden=t}else if(t){r._extend(n,t)}if(T(n.showHidden))n.showHidden=false;if(T(n.depth))n.depth=2;if(T(n.colors))n.colors=false;if(T(n.customInspect))n.customInspect=true;if(n.colors)n.stylize=u;return c(n,e,n.depth)}r.inspect=s;s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};s.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"};function u(e,t){var r=s.styles[t];if(r){return"["+s.colors[r][0]+"m"+e+"["+s.colors[r][1]+"m"}else{return e}}function l(e,t){return e}function f(e){var t={};e.forEach(function(e,r){t[e]=true});return t}function c(e,t,n){if(e.customInspect&&t&&k(t.inspect)&&t.inspect!==r.inspect&&!(t.constructor&&t.constructor.prototype===t)){var i=t.inspect(n,e);if(!E(i)){i=c(e,i,n)}return i}var a=h(e,t);if(a){return a}var o=Object.keys(t);var s=f(o);if(e.showHidden){o=Object.getOwnPropertyNames(t)}if(C(t)&&(o.indexOf("message")>=0||o.indexOf("description")>=0)){return d(t)}if(o.length===0){if(k(t)){var u=t.name?": "+t.name:"";return e.stylize("[Function"+u+"]","special")}if(x(t)){return e.stylize(RegExp.prototype.toString.call(t),"regexp")}if(S(t)){return e.stylize(Date.prototype.toString.call(t),"date")}if(C(t)){return d(t)}}var l="",m=false,b=["{","}"];if(v(t)){m=true;b=["[","]"]}if(k(t)){var y=t.name?": "+t.name:"";l=" [Function"+y+"]"}if(x(t)){l=" "+RegExp.prototype.toString.call(t)}if(S(t)){l=" "+Date.prototype.toUTCString.call(t)}if(C(t)){l=" "+d(t)}if(o.length===0&&(!m||t.length==0)){return b[0]+l+b[1]}if(n<0){if(x(t)){return e.stylize(RegExp.prototype.toString.call(t),"regexp")}else{return e.stylize("[Object]","special")}}e.seen.push(t);var w;if(m){w=p(e,t,n,s,o)}else{w=o.map(function(r){return g(e,t,n,s,r,m)})}e.seen.pop();return _(w,l,b)}function h(e,t){if(T(t))return e.stylize("undefined","undefined");if(E(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}if(w(t))return e.stylize(""+t,"number");if(m(t))return e.stylize(""+t,"boolean");if(b(t))return e.stylize("null","null")}function d(e){return"["+Error.prototype.toString.call(e)+"]"}function p(e,t,r,n,i){var a=[];for(var o=0,s=t.length;o<s;++o){if(M(t,String(o))){a.push(g(e,t,r,n,String(o),true))}else{a.push("")}}i.forEach(function(i){if(!i.match(/^\d+$/)){a.push(g(e,t,r,n,i,true))}});return a}function g(e,t,r,n,i,a){var o,s,u;u=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]};if(u.get){if(u.set){s=e.stylize("[Getter/Setter]","special")}else{s=e.stylize("[Getter]","special")}}else{if(u.set){s=e.stylize("[Setter]","special")}}if(!M(n,i)){o="["+i+"]"}if(!s){if(e.seen.indexOf(u.value)<0){if(b(r)){s=c(e,u.value,null)}else{s=c(e,u.value,r-1)}if(s.indexOf("\n")>-1){if(a){s=s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2)}else{s="\n"+s.split("\n").map(function(e){return"   "+e}).join("\n")}}}else{s=e.stylize("[Circular]","special")}}if(T(o)){if(a&&i.match(/^\d+$/)){return s}o=JSON.stringify(""+i);if(o.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)){o=o.substr(1,o.length-2);o=e.stylize(o,"name")}else{o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'");o=e.stylize(o,"string")}}return o+": "+s}function _(e,t,r){var n=0;var i=e.reduce(function(e,t){n++;if(t.indexOf("\n")>=0)n++;return e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);if(i>60){return r[0]+(t===""?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]}return r[0]+t+" "+e.join(", ")+" "+r[1]}function v(e){return Array.isArray(e)}r.isArray=v;function m(e){return typeof e==="boolean"}r.isBoolean=m;function b(e){return e===null}r.isNull=b;function y(e){return e==null}r.isNullOrUndefined=y;function w(e){return typeof e==="number"}r.isNumber=w;function E(e){return typeof e==="string"}r.isString=E;function A(e){return typeof e==="symbol"}r.isSymbol=A;function T(e){return e===void 0}r.isUndefined=T;function x(e){return R(e)&&I(e)==="[object RegExp]"}r.isRegExp=x;function R(e){return typeof e==="object"&&e!==null}r.isObject=R;function S(e){return R(e)&&I(e)==="[object Date]"}r.isDate=S;function C(e){return R(e)&&(I(e)==="[object Error]"||e instanceof Error)}r.isError=C;function k(e){return typeof e==="function"}r.isFunction=k;function j(e){return e===null||typeof e==="boolean"||typeof e==="number"||typeof e==="string"||typeof e==="symbol"||typeof e==="undefined"}r.isPrimitive=j;r.isBuffer=e("./support/isBuffer");function I(e){return Object.prototype.toString.call(e)}function L(e){return e<10?"0"+e.toString(10):e.toString(10)}var N=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function O(){var e=new Date;var t=[L(e.getHours()),L(e.getMinutes()),L(e.getSeconds())].join(":");return[e.getDate(),N[e.getMonth()],t].join(" ")}r.log=function(){console.log("%s - %s",O(),r.format.apply(r,arguments))};r.inherits=e("inherits");r._extend=function(e,t){if(!t||!R(t))return e;var r=Object.keys(t);var n=r.length;while(n--){e[r[n]]=t[r[n]]}return e};function M(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}).call(this,e("_process"),typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./support/isBuffer":46,_process:29,inherits:26}],48:[function(e,t,r){var n=e("../utils/common.js");var i=e("./toString.js");var a=e("./math.js");var o=e("./interpret.js");t.exports=s;function s(){this.__state=o.apply(this,arguments);if(this.__state===false){throw"Failed to interpret color arguments"}this.__state.a=this.__state.a||1}s.COMPONENTS=["r","g","b","h","s","v","hex","a"];n.extend(s.prototype,{toString:function(){return i(this)},toOriginal:function(){return this.__state.conversion.write(this)}});u(s.prototype,"r",2);u(s.prototype,"g",1);u(s.prototype,"b",0);l(s.prototype,"h");l(s.prototype,"s");l(s.prototype,"v");Object.defineProperty(s.prototype,"a",{get:function(){return this.__state.a},set:function(e){this.__state.a=e}});Object.defineProperty(s.prototype,"hex",{get:function(){if(!this.__state.space!=="HEX"){this.__state.hex=a.rgb_to_hex(this.r,this.g,this.b)}return this.__state.hex},set:function(e){this.__state.space="HEX";this.__state.hex=e}});function u(e,t,r){Object.defineProperty(e,t,{get:function(){if(this.__state.space==="RGB"){return this.__state[t]}f(this,t,r);return this.__state[t]},set:function(e){if(this.__state.space!=="RGB"){f(this,t,r);this.__state.space="RGB"}this.__state[t]=e}})}function l(e,t){Object.defineProperty(e,t,{get:function(){if(this.__state.space==="HSV")return this.__state[t];c(this);return this.__state[t]},set:function(e){if(this.__state.space!=="HSV"){c(this);this.__state.space="HSV"}this.__state[t]=e}})}function f(e,t,r){if(e.__state.space==="HEX"){e.__state[t]=a.component_from_hex(e.__state.hex,r)}else if(e.__state.space==="HSV"){n.extend(e.__state,a.hsv_to_rgb(e.__state.h,e.__state.s,e.__state.v))}else{throw"Corrupted color state"}}function c(e){var t=a.rgb_to_hsv(e.r,e.g,e.b);n.extend(e.__state,{s:t.s,v:t.v});if(!n.isNaN(t.h)){e.__state.h=t.h}else if(n.isUndefined(e.__state.h)){e.__state.h=0}}},{"../utils/common.js":65,"./interpret.js":49,"./math.js":50,"./toString.js":51}],49:[function(e,t,r){t.exports=n();function n(){var t=e("../utils/common.js");var r=e("./toString.js");var n,i;var a=function(){i=false;var e=arguments.length>1?t.toArray(arguments):arguments[0];t.each(o,function(r){if(r.litmus(e)){t.each(r.conversions,function(r,a){n=r.read(e);if(i===false&&n!==false){i=n;n.conversionName=a;n.conversion=r;return t.BREAK}});return t.BREAK}});return i};var o=[{litmus:t.isString,conversions:{THREE_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);if(t===null)return false;return{space:"HEX",hex:parseInt("0x"+t[1].toString()+t[1].toString()+t[2].toString()+t[2].toString()+t[3].toString()+t[3].toString())}},write:r},SIX_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9]{6})$/i);if(t===null)return false;return{space:"HEX",hex:parseInt("0x"+t[1].toString())}},write:r},CSS_RGB:{read:function(e){var t=e.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);if(t===null)return false;return{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3])}},write:r},CSS_RGBA:{read:function(e){var t=e.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\,\s*(.+)\s*\)/);if(t===null)return false;return{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3]),a:parseFloat(t[4])}},write:r}}},{litmus:t.isNumber,conversions:{HEX:{read:function(e){return{space:"HEX",hex:e,conversionName:"HEX"}},write:function(e){return e.hex}}}},{litmus:t.isArray,conversions:{RGB_ARRAY:{read:function(e){if(e.length!=3)return false;return{space:"RGB",r:e[0],g:e[1],b:e[2]}},write:function(e){return[e.r,e.g,e.b]}},RGBA_ARRAY:{read:function(e){if(e.length!=4)return false;return{space:"RGB",r:e[0],g:e[1],b:e[2],a:e[3]}},write:function(e){return[e.r,e.g,e.b,e.a]}}}},{litmus:t.isObject,conversions:{RGBA_OBJ:{read:function(e){if(t.isNumber(e.r)&&t.isNumber(e.g)&&t.isNumber(e.b)&&t.isNumber(e.a)){return{space:"RGB",r:e.r,g:e.g,b:e.b,a:e.a}}return false},write:function(e){return{r:e.r,g:e.g,b:e.b,a:e.a}}},RGB_OBJ:{read:function(e){if(t.isNumber(e.r)&&t.isNumber(e.g)&&t.isNumber(e.b)){return{space:"RGB",r:e.r,g:e.g,b:e.b}}return false},write:function(e){return{r:e.r,g:e.g,b:e.b}}},HSVA_OBJ:{read:function(e){if(t.isNumber(e.h)&&t.isNumber(e.s)&&t.isNumber(e.v)&&t.isNumber(e.a)){return{space:"HSV",h:e.h,s:e.s,v:e.v,a:e.a}}return false},write:function(e){return{h:e.h,s:e.s,v:e.v,a:e.a}}},HSV_OBJ:{read:function(e){if(t.isNumber(e.h)&&t.isNumber(e.s)&&t.isNumber(e.v)){return{space:"HSV",h:e.h,s:e.s,v:e.v}}return false},write:function(e){return{h:e.h,s:e.s,v:e.v}}}}}];return a}},{"../utils/common.js":65,"./toString.js":51}],50:[function(e,t,r){t.exports=n();function n(){var e;return{hsv_to_rgb:function(e,t,r){var n=Math.floor(e/60)%6;var i=e/60-Math.floor(e/60);var a=r*(1-t);var o=r*(1-i*t);var s=r*(1-(1-i)*t);var u=[[r,s,a],[o,r,a],[a,r,s],[a,o,r],[s,a,r],[r,a,o]][n];return{r:u[0]*255,g:u[1]*255,b:u[2]*255}},rgb_to_hsv:function(e,t,r){var n=Math.min(e,t,r),i=Math.max(e,t,r),a=i-n,o,s;if(i!=0){s=a/i}else{return{h:NaN,s:0,v:0}}if(e==i){o=(t-r)/a}else if(t==i){o=2+(r-e)/a}else{o=4+(e-t)/a}o/=6;if(o<0){o+=1}return{h:o*360,s:s,v:i/255}},rgb_to_hex:function(e,t,r){var n=this.hex_with_component(0,2,e);n=this.hex_with_component(n,1,t);n=this.hex_with_component(n,0,r);return n},component_from_hex:function(e,t){return e>>t*8&255},hex_with_component:function(t,r,n){return n<<(e=r*8)|t&~(255<<e)}}}},{}],51:[function(e,t,r){var n=e("../utils/common.js");t.exports=i;function i(e){if(e.a==1||n.isUndefined(e.a)){var t=e.hex.toString(16);while(t.length<6){t="0"+t}return"#"+t}else{return"rgba("+Math.round(e.r)+","+Math.round(e.g)+","+Math.round(e.b)+","+e.a+")"}}},{"../utils/common.js":65}],52:[function(e,t,r){var n=e("./Controller.js");var i=e("../utils/common.js");var a=e("../dom/dom.js");t.exports=o;function o(e,t){o.superclass.call(this,e,t);var r=this;this.__prev=this.getValue();this.__checkbox=document.createElement("input");this.__checkbox.setAttribute("type","checkbox");a.bind(this.__checkbox,"change",n,false);this.domElement.appendChild(this.__checkbox);this.updateDisplay();function n(){r.setValue(!r.__prev)}}o.superclass=n;i.extend(o.prototype,n.prototype,{setValue:function(e){var t=o.superclass.prototype.setValue.call(this,e);if(this.__onFinishChange){this.__onFinishChange.call(this,this.getValue())}this.__prev=this.getValue();return t},updateDisplay:function(){if(this.getValue()===true){this.__checkbox.setAttribute("checked","checked");this.__checkbox.checked=true}else{this.__checkbox.checked=false}return o.superclass.prototype.updateDisplay.call(this)}})},{"../dom/dom.js":63,"../utils/common.js":65,"./Controller.js":54}],53:[function(e,t,r){var n=e("./Controller.js");var i=e("../utils/common.js");var a=e("../dom/dom.js");var o=e("../color/Color.js");var s=e("../color/interpret.js");t.exports=u;function u(e,t){u.superclass.call(this,e,t);this.__color=new o(this.getValue());this.__temp=new o(0);var r=this;this.domElement=document.createElement("div");a.makeSelectable(this.domElement,false);this.__selector=document.createElement("div");this.__selector.className="selector";this.__saturation_field=document.createElement("div");this.__saturation_field.className="saturation-field";this.__field_knob=document.createElement("div");this.__field_knob.className="field-knob";this.__field_knob_border="2px solid ";this.__hue_knob=document.createElement("div");this.__hue_knob.className="hue-knob";this.__hue_field=document.createElement("div");this.__hue_field.className="hue-field";this.__input=document.createElement("input");this.__input.type="text";this.__input_textShadow="0 1px 1px ";a.bind(this.__input,"keydown",function(e){if(e.keyCode===13){d.call(this)}});a.bind(this.__input,"blur",d);a.bind(this.__selector,"mousedown",function(e){a.addClass(this,"drag").bind(window,"mouseup",function(e){a.removeClass(r.__selector,"drag")})});var n=document.createElement("div");i.extend(this.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"});i.extend(this.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:this.__field_knob_border+(this.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1});i.extend(this.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1});i.extend(this.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"});i.extend(n.style,{width:"100%",height:"100%",background:"none"});f(n,"top","rgba(0,0,0,0)","#000");i.extend(this.__hue_field.style,{width:"15px",height:"100px",display:"inline-block",border:"1px solid #555",cursor:"ns-resize"});c(this.__hue_field);i.extend(this.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:this.__input_textShadow+"rgba(0,0,0,0.7)"});a.bind(this.__saturation_field,"mousedown",l);a.bind(this.__field_knob,"mousedown",l);a.bind(this.__hue_field,"mousedown",function(e){_(e);a.bind(window,"mousemove",_);a.bind(window,"mouseup",p)});function l(e){g(e);a.bind(window,"mousemove",g);a.bind(window,"mouseup",h)}function h(){a.unbind(window,"mousemove",g);a.unbind(window,"mouseup",h)}function d(){var e=s(this.value);if(e!==false){r.__color.__state=e;r.setValue(r.__color.toOriginal())}else{this.value=r.__color.toString()}}function p(){a.unbind(window,"mousemove",_);a.unbind(window,"mouseup",p)}this.__saturation_field.appendChild(n);this.__selector.appendChild(this.__field_knob);this.__selector.appendChild(this.__saturation_field);this.__selector.appendChild(this.__hue_field);this.__hue_field.appendChild(this.__hue_knob);this.domElement.appendChild(this.__input);this.domElement.appendChild(this.__selector);this.updateDisplay();function g(e){e.preventDefault();var t=a.getWidth(r.__saturation_field);var n=a.getOffset(r.__saturation_field);var i=(e.clientX-n.left+document.body.scrollLeft)/t;var o=1-(e.clientY-n.top+document.body.scrollTop)/t;if(o>1)o=1;else if(o<0)o=0;if(i>1)i=1;else if(i<0)i=0;r.__color.v=o;r.__color.s=i;r.setValue(r.__color.toOriginal());return false}function _(e){e.preventDefault();var t=a.getHeight(r.__hue_field);var n=a.getOffset(r.__hue_field);var i=1-(e.clientY-n.top+document.body.scrollTop)/t;if(i>1)i=1;else if(i<0)i=0;r.__color.h=i*360;r.setValue(r.__color.toOriginal());return false}}u.superclass=n;i.extend(u.prototype,n.prototype,{updateDisplay:function(){var e=s(this.getValue());if(e!==false){var t=false;i.each(o.COMPONENTS,function(r){if(!i.isUndefined(e[r])&&!i.isUndefined(this.__color.__state[r])&&e[r]!==this.__color.__state[r]){t=true;return{}}},this);if(t){i.extend(this.__color.__state,e)}}i.extend(this.__temp.__state,this.__color.__state);this.__temp.a=1;var r=this.__color.v<.5||this.__color.s>.5?255:0;var n=255-r;i.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toString(),border:this.__field_knob_border+"rgb("+r+","+r+","+r+")"});this.__hue_knob.style.marginTop=(1-this.__color.h/360)*100+"px";this.__temp.s=1;this.__temp.v=1;f(this.__saturation_field,"left","#fff",this.__temp.toString());i.extend(this.__input.style,{backgroundColor:this.__input.value=this.__color.toString(),color:"rgb("+r+","+r+","+r+")",textShadow:this.__input_textShadow+"rgba("+n+","+n+","+n+",.7)"})}});var l=["-moz-","-o-","-webkit-","-ms-",""];function f(e,t,r,n){e.style.background="";i.each(l,function(i){e.style.cssText+="background: "+i+"linear-gradient("+t+", "+r+" 0%, "+n+" 100%); "})}function c(e){e.style.background="";e.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);";e.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);";e.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);";e.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);";e.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"}},{"../color/Color.js":48,"../color/interpret.js":49,"../dom/dom.js":63,"../utils/common.js":65,"./Controller.js":54}],54:[function(e,t,r){var n=e("../utils/common.js");var i=e("../utils/escapeHtml.js");t.exports=a;function a(e,t){this.initialValue=e[t];this.domElement=document.createElement("div");this.object=e;this.property=t;this.__onChange=undefined;this.__onFinishChange=undefined}n.extend(a.prototype,{onChange:function(e){this.__onChange=e;return this},onFinishChange:function(e){this.__onFinishChange=e;return this},setValue:function(e){this.object[this.property]=e;if(this.__onChange){this.__onChange.call(this,e)}this.updateDisplay();return this},getValue:function(){return this.object[this.property]},updateDisplay:function(){return this},isModified:function(){return this.initialValue!==this.getValue()}})},{"../utils/common.js":65,"../utils/escapeHtml.js":67}],55:[function(e,t,r){var n=e("./Controller.js");var i=e("../utils/common.js");var a=e("../dom/dom.js");t.exports=o;function o(e,t,r){o.superclass.call(this,e,t);var n=this;this.__button=document.createElement("div");this.__button.innerHTML=r===undefined?"Fire":r;a.bind(this.__button,"click",function(e){e.preventDefault();n.fire();return false});a.addClass(this.__button,"button");this.domElement.appendChild(this.__button)}o.superclass=n;i.extend(o.prototype,n.prototype,{fire:function(){if(this.__onChange){this.__onChange.call(this)}this.getValue().call(this.object);if(this.__onFinishChange){this.__onFinishChange.call(this,this.getValue())}}})},{"../dom/dom.js":63,"../utils/common.js":65,"./Controller.js":54}],56:[function(e,t,r){var n=e("./Controller.js");var i=e("../utils/common.js");t.exports=a;function a(e,t,r){a.superclass.call(this,e,t);r=r||{};this.__min=r.min;this.__max=r.max;this.__step=r.step;if(i.isUndefined(this.__step)){if(this.initialValue==0){this.__impliedStep=1}else{this.__impliedStep=Math.pow(10,Math.floor(Math.log(this.initialValue)/Math.LN10))/10}}else{this.__impliedStep=this.__step}this.__precision=o(this.__impliedStep)}a.superclass=n;i.extend(a.prototype,n.prototype,{setValue:function(e){if(this.__min!==undefined&&e<this.__min){e=this.__min}else if(this.__max!==undefined&&e>this.__max){e=this.__max}if(this.__step!==undefined&&e%this.__step!=0){e=Math.round(e/this.__step)*this.__step}return a.superclass.prototype.setValue.call(this,e)},min:function(e){this.__min=e;return this},max:function(e){this.__max=e;return this},step:function(e){this.__step=e;this.__impliedStep=e;this.__precision=o(e);return this}});function o(e){e=e.toString();if(e.indexOf(".")>-1){return e.length-e.indexOf(".")-1}else{return 0}}},{"../utils/common.js":65,"./Controller.js":54}],57:[function(e,t,r){var n=e("./NumberController.js");var i=e("../utils/common.js");var a=e("../dom/dom.js");t.exports=o;function o(e,t,r){this.__truncationSuspended=false;o.superclass.call(this,e,t,r);var n=this;var s;this.__input=document.createElement("input");this.__input.setAttribute("type","text");a.bind(this.__input,"change",u);a.bind(this.__input,"blur",l);a.bind(this.__input,"mousedown",f);a.bind(this.__input,"keydown",function(e){if(e.keyCode===13){n.__truncationSuspended=true;this.blur();n.__truncationSuspended=false}});function u(){var e=parseFloat(n.__input.value);if(!i.isNaN(e))n.setValue(e)}function l(){u();if(n.__onFinishChange){n.__onFinishChange.call(n,n.getValue())}}function f(e){a.bind(window,"mousemove",c);a.bind(window,"mouseup",h);s=e.clientY}function c(e){var t=s-e.clientY;n.setValue(n.getValue()+t*n.__impliedStep);s=e.clientY}function h(){a.unbind(window,"mousemove",c);a.unbind(window,"mouseup",h)}this.updateDisplay();this.domElement.appendChild(this.__input)}o.superclass=n;i.extend(o.prototype,n.prototype,{updateDisplay:function(){this.__input.value=this.__truncationSuspended?this.getValue():s(this.getValue(),this.__precision);return o.superclass.prototype.updateDisplay.call(this)}});function s(e,t){var r=Math.pow(10,t);return Math.round(e*r)/r}},{"../dom/dom.js":63,"../utils/common.js":65,"./NumberController.js":56}],58:[function(e,t,r){var n=e("./NumberController.js");var i=e("../utils/common.js");var a=e("../dom/dom.js");var o=e("../utils/css.js");var s="/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\n.slider {\n  box-shadow: inset 0 2px 4px rgba(0,0,0,0.15);\n  height: 1em;\n  border-radius: 1em;\n  background-color: #eee;\n  padding: 0 0.5em;\n  overflow: hidden;\n}\n\n.slider-fg {\n  padding: 1px 0 2px 0;\n  background-color: #aaa;\n  height: 1em;\n  margin-left: -0.5em;\n  padding-right: 0.5em;\n  border-radius: 1em 0 0 1em;\n}\n\n.slider-fg:after {\n  display: inline-block;\n  border-radius: 1em;\n  background-color: #fff;\n  border:  1px solid #aaa;\n  content: '';\n  float: right;\n  margin-right: -1em;\n  margin-top: -1px;\n  height: 0.9em;\n  width: 0.9em;\n}";t.exports=u;function u(e,t,r,n,i){u.superclass.call(this,e,t,{min:r,max:n,step:i});var o=this;this.__background=document.createElement("div");this.__foreground=document.createElement("div");a.bind(this.__background,"mousedown",s);a.addClass(this.__background,"slider");a.addClass(this.__foreground,"slider-fg");function s(e){a.bind(window,"mousemove",f);a.bind(window,"mouseup",c);f(e)}function f(e){e.preventDefault();var t=a.getOffset(o.__background);var r=a.getWidth(o.__background);o.setValue(l(e.clientX,t.left,t.left+r,o.__min,o.__max));return false}function c(){a.unbind(window,"mousemove",f);a.unbind(window,"mouseup",c);if(o.__onFinishChange){o.__onFinishChange.call(o,o.getValue())}}this.updateDisplay();this.__background.appendChild(this.__foreground);this.domElement.appendChild(this.__background)}u.superclass=n;u.useDefaultStyles=function(){o.inject(s)};i.extend(u.prototype,n.prototype,{updateDisplay:function(){var e=(this.getValue()-this.__min)/(this.__max-this.__min);this.__foreground.style.width=e*100+"%";return u.superclass.prototype.updateDisplay.call(this)}});function l(e,t,r,n,i){return n+(i-n)*((e-t)/(r-t))}},{"../dom/dom.js":63,"../utils/common.js":65,"../utils/css.js":66,"./NumberController.js":56}],59:[function(e,t,r){var n=e("./Controller.js");var i=e("../dom/dom.js");var a=e("../utils/common.js");t.exports=o;function o(e,t,r){o.superclass.call(this,e,t);var n=this;this.__select=document.createElement("select");if(a.isArray(r)){var s={};a.each(r,function(e){s[e]=e});r=s}a.each(r,function(e,t){var r=document.createElement("option");r.innerHTML=t;r.setAttribute("value",e);n.__select.appendChild(r)});this.updateDisplay();i.bind(this.__select,"change",function(){
var e=this.options[this.selectedIndex].value;n.setValue(e)});this.domElement.appendChild(this.__select)}o.superclass=n;a.extend(o.prototype,n.prototype,{setValue:function(e){var t=o.superclass.prototype.setValue.call(this,e);if(this.__onFinishChange){this.__onFinishChange.call(this,this.getValue())}return t},updateDisplay:function(){this.__select.value=this.getValue();return o.superclass.prototype.updateDisplay.call(this)}})},{"../dom/dom.js":63,"../utils/common.js":65,"./Controller.js":54}],60:[function(e,t,r){var n=e("./Controller.js");var i=e("../dom/dom.js");var a=e("../utils/common.js");t.exports=o;function o(e,t){o.superclass.call(this,e,t);var r=this;this.__input=document.createElement("input");this.__input.setAttribute("type","text");i.bind(this.__input,"keyup",n);i.bind(this.__input,"change",n);i.bind(this.__input,"blur",a);i.bind(this.__input,"keydown",function(e){if(e.keyCode===13){this.blur()}});function n(){r.setValue(r.__input.value)}function a(){if(r.__onFinishChange){r.__onFinishChange.call(r,r.getValue())}}this.updateDisplay();this.domElement.appendChild(this.__input)}o.superclass=n;a.extend(o.prototype,n.prototype,{updateDisplay:function(){if(!i.isActive(this.__input)){this.__input.value=this.getValue()}return o.superclass.prototype.updateDisplay.call(this)}})},{"../dom/dom.js":63,"../utils/common.js":65,"./Controller.js":54}],61:[function(e,t,r){var n=e("./OptionController.js");var i=e("./NumberControllerBox.js");var a=e("./NumberControllerSlider.js");var o=e("./StringController.js");var s=e("./FunctionController.js");var u=e("./BooleanController.js");var l=e("../utils/common.js");t.exports=f;function f(e,t){var r=e[t];if(l.isArray(arguments[2])||l.isObject(arguments[2])){return new n(e,t,arguments[2])}if(l.isNumber(r)){if(l.isNumber(arguments[2])&&l.isNumber(arguments[3])){return new a(e,t,arguments[2],arguments[3])}else{return new i(e,t,{min:arguments[2],max:arguments[3]})}}if(l.isString(r)){return new o(e,t)}if(l.isFunction(r)){return new s(e,t,"")}if(l.isBoolean(r)){return new u(e,t)}}},{"../utils/common.js":65,"./BooleanController.js":52,"./FunctionController.js":55,"./NumberControllerBox.js":57,"./NumberControllerSlider.js":58,"./OptionController.js":59,"./StringController.js":60}],62:[function(e,t,r){var n=e("../utils/common.js");var i=e("./dom.js");t.exports=a;function a(){this.backgroundElement=document.createElement("div");n.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear",transition:"opacity 0.2s linear"});i.makeFullscreen(this.backgroundElement);this.backgroundElement.style.position="fixed";this.domElement=document.createElement("div");n.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear",transition:"transform 0.2s ease-out, opacity 0.2s linear"});document.body.appendChild(this.backgroundElement);document.body.appendChild(this.domElement);var e=this;i.bind(this.backgroundElement,"click",function(){e.hide()})}a.prototype.show=function(){var e=this;this.backgroundElement.style.display="block";this.domElement.style.display="block";this.domElement.style.opacity=0;this.domElement.style.webkitTransform="scale(1.1)";this.layout();n.defer(function(){e.backgroundElement.style.opacity=1;e.domElement.style.opacity=1;e.domElement.style.webkitTransform="scale(1)"})};a.prototype.hide=function(){var e=this;var t=function(){e.domElement.style.display="none";e.backgroundElement.style.display="none";i.unbind(e.domElement,"webkitTransitionEnd",t);i.unbind(e.domElement,"transitionend",t);i.unbind(e.domElement,"oTransitionEnd",t)};i.bind(this.domElement,"webkitTransitionEnd",t);i.bind(this.domElement,"transitionend",t);i.bind(this.domElement,"oTransitionEnd",t);this.backgroundElement.style.opacity=0;this.domElement.style.opacity=0;this.domElement.style.webkitTransform="scale(1.1)"};a.prototype.layout=function(){this.domElement.style.left=window.innerWidth/2-i.getWidth(this.domElement)/2+"px";this.domElement.style.top=window.innerHeight/2-i.getHeight(this.domElement)/2+"px"};function o(e){console.log(e)}},{"../utils/common.js":65,"./dom.js":63}],63:[function(e,t,r){var n=e("../utils/common.js");var i={HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]};var a={};n.each(i,function(e,t){n.each(e,function(e){a[e]=t})});var o=/(\d+(\.\d+)?)px/;function s(e){if(e==="0"||n.isUndefined(e))return 0;var t=e.match(o);if(!n.isNull(t)){return parseFloat(t[1])}return 0}var u={makeSelectable:function(e,t){if(e===undefined||e.style===undefined)return;e.onselectstart=t?function(){return false}:function(){};e.style.MozUserSelect=t?"auto":"none";e.style.KhtmlUserSelect=t?"auto":"none";e.unselectable=t?"on":"off"},makeFullscreen:function(e,t,r){if(n.isUndefined(t))t=true;if(n.isUndefined(r))r=true;e.style.position="absolute";if(t){e.style.left=0;e.style.right=0}if(r){e.style.top=0;e.style.bottom=0}},fakeEvent:function(e,t,r,i){r=r||{};var o=a[t];if(!o){throw new Error("Event type "+t+" not supported.")}var s=document.createEvent(o);switch(o){case"MouseEvents":var u=r.x||r.clientX||0;var l=r.y||r.clientY||0;s.initMouseEvent(t,r.bubbles||false,r.cancelable||true,window,r.clickCount||1,0,0,u,l,false,false,false,false,0,null);break;case"KeyboardEvents":var f=s.initKeyboardEvent||s.initKeyEvent;n.defaults(r,{cancelable:true,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false,keyCode:undefined,charCode:undefined});f(t,r.bubbles||false,r.cancelable,window,r.ctrlKey,r.altKey,r.shiftKey,r.metaKey,r.keyCode,r.charCode);break;default:s.initEvent(t,r.bubbles||false,r.cancelable||true);break}n.defaults(s,i);e.dispatchEvent(s)},bind:function(e,t,r,n){n=n||false;if(e.addEventListener)e.addEventListener(t,r,n);else if(e.attachEvent)e.attachEvent("on"+t,r);return u},unbind:function(e,t,r,n){n=n||false;if(e.removeEventListener)e.removeEventListener(t,r,n);else if(e.detachEvent)e.detachEvent("on"+t,r);return u},addClass:function(e,t){if(e.className===undefined){e.className=t}else if(e.className!==t){var r=e.className.split(/ +/);if(r.indexOf(t)==-1){r.push(t);e.className=r.join(" ").replace(/^\s+/,"").replace(/\s+$/,"")}}return u},removeClass:function(e,t){if(t){if(e.className===undefined){}else if(e.className===t){e.removeAttribute("class")}else{var r=e.className.split(/ +/);var n=r.indexOf(t);if(n!=-1){r.splice(n,1);e.className=r.join(" ")}}}else{e.className=undefined}return u},hasClass:function(e,t){return new RegExp("(?:^|\\s+)"+t+"(?:\\s+|$)").test(e.className)||false},getWidth:function(e){var t=getComputedStyle(e);return s(t["border-left-width"])+s(t["border-right-width"])+s(t["padding-left"])+s(t["padding-right"])+s(t["width"])},getHeight:function(e){var t=getComputedStyle(e);return s(t["border-top-width"])+s(t["border-bottom-width"])+s(t["padding-top"])+s(t["padding-bottom"])+s(t["height"])},getOffset:function(e){var t={left:0,top:0};if(e.offsetParent){do{t.left+=e.offsetLeft;t.top+=e.offsetTop}while(e=e.offsetParent)}return t},isActive:function(e){return e===document.activeElement&&(e.type||e.href)}};t.exports=u},{"../utils/common.js":65}],64:[function(e,t,r){var n=e("../utils/css.js");var i='<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n      \n    </div>\n    \n  </div>\n\n</div>';var a=".dg {\n  /** Clear list styles */\n  /* Auto-place container */\n  /* Auto-placed GUI's */\n  /* Line items that don't contain folders. */\n  /** Folder names */\n  /** Hides closed items */\n  /** Controller row */\n  /** Name-half (left) */\n  /** Controller-half (right) */\n  /** Controller placement */\n  /** Shorter number boxes when slider is present. */\n  /** Ensure the entire boolean and function row shows a hand */ }\n  .dg ul {\n    list-style: none;\n    margin: 0;\n    padding: 0;\n    width: 100%;\n    clear: both; }\n  .dg.ac {\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    height: 0;\n    z-index: 0; }\n  .dg:not(.ac) .main {\n    /** Exclude mains in ac so that we don't hide close button */\n    overflow: hidden; }\n  .dg.main {\n    -webkit-transition: opacity 0.1s linear;\n    -o-transition: opacity 0.1s linear;\n    -moz-transition: opacity 0.1s linear;\n    transition: opacity 0.1s linear; }\n    .dg.main.taller-than-window {\n      overflow-y: auto; }\n      .dg.main.taller-than-window .close-button {\n        opacity: 1;\n        /* TODO, these are style notes */\n        margin-top: -1px;\n        border-top: 1px solid #2c2c2c; }\n    .dg.main ul.closed .close-button {\n      opacity: 1 !important; }\n    .dg.main:hover .close-button,\n    .dg.main .close-button.drag {\n      opacity: 1; }\n    .dg.main .close-button {\n      /*opacity: 0;*/\n      -webkit-transition: opacity 0.1s linear;\n      -o-transition: opacity 0.1s linear;\n      -moz-transition: opacity 0.1s linear;\n      transition: opacity 0.1s linear;\n      border: 0;\n      position: absolute;\n      line-height: 19px;\n      height: 20px;\n      /* TODO, these are style notes */\n      cursor: pointer;\n      text-align: center;\n      background-color: #000; }\n      .dg.main .close-button:hover {\n        background-color: #111; }\n  .dg.a {\n    float: right;\n    margin-right: 15px;\n    overflow-x: hidden; }\n    .dg.a.has-save > ul {\n      margin-top: 27px; }\n      .dg.a.has-save > ul.closed {\n        margin-top: 0; }\n    .dg.a .save-row {\n      position: fixed;\n      top: 0;\n      z-index: 1002; }\n  .dg li {\n    -webkit-transition: height 0.1s ease-out;\n    -o-transition: height 0.1s ease-out;\n    -moz-transition: height 0.1s ease-out;\n    transition: height 0.1s ease-out; }\n  .dg li:not(.folder) {\n    cursor: auto;\n    height: 27px;\n    line-height: 27px;\n    overflow: hidden;\n    padding: 0 4px 0 5px; }\n  .dg li.folder {\n    padding: 0;\n    border-left: 4px solid rgba(0, 0, 0, 0); }\n  .dg li.title {\n    cursor: pointer;\n    margin-left: -4px; }\n  .dg .closed li:not(.title),\n  .dg .closed ul li,\n  .dg .closed ul li > * {\n    height: 0;\n    overflow: hidden;\n    border: 0; }\n  .dg .cr {\n    clear: both;\n    padding-left: 3px;\n    height: 27px; }\n  .dg .property-name {\n    cursor: default;\n    float: left;\n    clear: left;\n    width: 40%;\n    overflow: hidden;\n    text-overflow: ellipsis; }\n  .dg .c {\n    float: left;\n    width: 60%; }\n  .dg .c input[type=text] {\n    border: 0;\n    margin-top: 4px;\n    padding: 3px;\n    width: 100%;\n    float: right; }\n  .dg .has-slider input[type=text] {\n    width: 30%;\n    /*display: none;*/\n    margin-left: 0; }\n  .dg .slider {\n    float: left;\n    width: 66%;\n    margin-left: -5px;\n    margin-right: 0;\n    height: 19px;\n    margin-top: 4px; }\n  .dg .slider-fg {\n    height: 100%; }\n  .dg .c input[type=checkbox] {\n    margin-top: 9px; }\n  .dg .c select {\n    margin-top: 5px; }\n  .dg .cr.function,\n  .dg .cr.function .property-name,\n  .dg .cr.function *,\n  .dg .cr.boolean,\n  .dg .cr.boolean * {\n    cursor: pointer; }\n  .dg .selector {\n    display: none;\n    position: absolute;\n    margin-left: -9px;\n    margin-top: 23px;\n    z-index: 10; }\n  .dg .c:hover .selector,\n  .dg .selector.drag {\n    display: block; }\n  .dg li.save-row {\n    padding: 0; }\n    .dg li.save-row .button {\n      display: inline-block;\n      padding: 0px 6px; }\n  .dg.dialogue {\n    background-color: #222;\n    width: 460px;\n    padding: 15px;\n    font-size: 13px;\n    line-height: 15px; }\n\n/* TODO Separate style and structure */\n#dg-new-constructor {\n  padding: 10px;\n  color: #222;\n  font-family: Monaco, monospace;\n  font-size: 10px;\n  border: 0;\n  resize: none;\n  box-shadow: inset 1px 1px 1px #888;\n  word-wrap: break-word;\n  margin: 12px 0;\n  display: block;\n  width: 440px;\n  overflow-y: scroll;\n  height: 100px;\n  position: relative; }\n\n#dg-local-explain {\n  display: none;\n  font-size: 11px;\n  line-height: 17px;\n  border-radius: 3px;\n  background-color: #333;\n  padding: 8px;\n  margin-top: 10px; }\n  #dg-local-explain code {\n    font-size: 10px; }\n\n#dat-gui-save-locally {\n  display: none; }\n\n/** Main type */\n.dg {\n  color: #eee;\n  font: 11px 'Lucida Grande', sans-serif;\n  text-shadow: 0 -1px 0 #111;\n  /** Auto place */\n  /* Controller row, <li> */\n  /** Controllers */ }\n  .dg.main {\n    /** Scrollbar */ }\n    .dg.main::-webkit-scrollbar {\n      width: 5px;\n      background: #1a1a1a; }\n    .dg.main::-webkit-scrollbar-corner {\n      height: 0;\n      display: none; }\n    .dg.main::-webkit-scrollbar-thumb {\n      border-radius: 5px;\n      background: #676767; }\n  .dg li:not(.folder) {\n    background: #1a1a1a;\n    border-bottom: 1px solid #2c2c2c; }\n  .dg li.save-row {\n    line-height: 25px;\n    background: #dad5cb;\n    border: 0; }\n    .dg li.save-row select {\n      margin-left: 5px;\n      width: 108px; }\n    .dg li.save-row .button {\n      margin-left: 5px;\n      margin-top: 1px;\n      border-radius: 2px;\n      font-size: 9px;\n      line-height: 7px;\n      padding: 4px 4px 5px 4px;\n      background: #c5bdad;\n      color: #fff;\n      text-shadow: 0 1px 0 #b0a58f;\n      box-shadow: 0 -1px 0 #b0a58f;\n      cursor: pointer; }\n      .dg li.save-row .button.gears {\n        background: #c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;\n        height: 7px;\n        width: 8px; }\n      .dg li.save-row .button:hover {\n        background-color: #bab19e;\n        box-shadow: 0 -1px 0 #b0a58f; }\n  .dg li.folder {\n    border-bottom: 0; }\n  .dg li.title {\n    padding-left: 16px;\n    background: black url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;\n    cursor: pointer;\n    border-bottom: 1px solid rgba(255, 255, 255, 0.2); }\n  .dg .closed li.title {\n    background-image: url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==); }\n  .dg .cr.boolean {\n    border-left: 3px solid #806787; }\n  .dg .cr.function {\n    border-left: 3px solid #e61d5f; }\n  .dg .cr.number {\n    border-left: 3px solid #2fa1d6; }\n    .dg .cr.number input[type=text] {\n      color: #2fa1d6; }\n  .dg .cr.string {\n    border-left: 3px solid #1ed36f; }\n    .dg .cr.string input[type=text] {\n      color: #1ed36f; }\n  .dg .cr.function:hover, .dg .cr.boolean:hover {\n    background: #111; }\n  .dg .c input[type=text] {\n    background: #303030;\n    outline: none; }\n    .dg .c input[type=text]:hover {\n      background: #3c3c3c; }\n    .dg .c input[type=text]:focus {\n      background: #494949;\n      color: #fff; }\n  .dg .c .slider {\n    background: #303030;\n    cursor: ew-resize; }\n  .dg .c .slider-fg {\n    background: #2fa1d6; }\n  .dg .c .slider:hover {\n    background: #3c3c3c; }\n    .dg .c .slider:hover .slider-fg {\n      background: #44abda; }\n";var o=e("../controllers/factory.js");var s=e("../controllers/Controller.js");var u=e("../controllers/BooleanController.js");var l=e("../controllers/FunctionController.js");var f=e("../controllers/NumberControllerBox.js");var c=e("../controllers/NumberControllerSlider.js");var h=e("../controllers/ColorController.js");var d=e("../utils/requestAnimationFrame.js");var p=e("../dom/CenteredDiv.js");var g=e("../dom/dom.js");var _=e("../utils/common.js");t.exports=v();function v(){n.inject(a);var e="dg";var t=72;var r=20;var v="Default";var m=function(){try{return"localStorage"in window&&window["localStorage"]!==null}catch(e){return false}}();var b;var y=true;var w;var E=false;var A=[];var T=function(t){var r=this;this.domElement=document.createElement("div");this.__ul=document.createElement("ul");this.domElement.appendChild(this.__ul);g.addClass(this.domElement,e);this.__folders={};this.__controllers=[];this.__rememberedObjects=[];this.__rememberedObjectIndecesToControllers=[];this.__listening=[];t=t||{};t=_.defaults(t,{autoPlace:true,width:T.DEFAULT_WIDTH});t=_.defaults(t,{resizable:t.autoPlace,hideable:t.autoPlace});if(!_.isUndefined(t.load)){if(t.preset)t.load.preset=t.preset}else{t.load={preset:v}}if(_.isUndefined(t.parent)&&t.hideable){A.push(this)}t.resizable=_.isUndefined(t.parent)&&t.resizable;if(t.autoPlace&&_.isUndefined(t.scrollable)){t.scrollable=true}var n=m&&localStorage.getItem(k(this,"isLocal"))==="true";var i;Object.defineProperties(this,{parent:{get:function(){return t.parent}},scrollable:{get:function(){return t.scrollable}},autoPlace:{get:function(){return t.autoPlace}},preset:{get:function(){if(r.parent){return r.getRoot().preset}else{return t.load.preset}},set:function(e){if(r.parent){r.getRoot().preset=e}else{t.load.preset=e}M(this);r.revert()}},width:{get:function(){return t.width},set:function(e){t.width=e;L(r,e)}},name:{get:function(){return t.name},set:function(e){t.name=e;if(o){o.innerHTML=t.name}}},closed:{get:function(){return t.closed},set:function(e){t.closed=e;if(t.closed){g.addClass(r.__ul,T.CLASS_CLOSED)}else{g.removeClass(r.__ul,T.CLASS_CLOSED)}this.onResize();if(r.__closeButton){r.__closeButton.innerHTML=e?T.TEXT_OPEN:T.TEXT_CLOSED}}},load:{get:function(){return t.load}},useLocalStorage:{get:function(){return n},set:function(e){if(m){n=e;if(e){g.bind(window,"unload",i)}else{g.unbind(window,"unload",i)}localStorage.setItem(k(r,"isLocal"),e)}}}});if(_.isUndefined(t.parent)){t.closed=false;g.addClass(this.domElement,T.CLASS_MAIN);g.makeSelectable(this.domElement,false);if(m){if(n){r.useLocalStorage=true;var a=localStorage.getItem(k(this,"gui"));if(a){t.load=JSON.parse(a)}}}this.__closeButton=document.createElement("div");this.__closeButton.innerHTML=T.TEXT_CLOSED;g.addClass(this.__closeButton,T.CLASS_CLOSE_BUTTON);this.domElement.appendChild(this.__closeButton);g.bind(this.__closeButton,"click",function(){r.closed=!r.closed})}else{if(t.closed===undefined){t.closed=true}var o=document.createTextNode(t.name);g.addClass(o,"controller-name");var s=R(r,o);var u=function(e){e.preventDefault();r.closed=!r.closed;return false};g.addClass(this.__ul,T.CLASS_CLOSED);g.addClass(s,"title");g.bind(s,"click",u);if(!t.closed){this.closed=false}}if(t.autoPlace){if(_.isUndefined(t.parent)){if(y){w=document.createElement("div");g.addClass(w,e);g.addClass(w,T.CLASS_AUTO_PLACE_CONTAINER);document.body.appendChild(w);y=false}w.appendChild(this.domElement);g.addClass(this.domElement,T.CLASS_AUTO_PLACE)}if(!this.parent)L(r,t.width)}g.bind(window,"resize",function(){r.onResize()});g.bind(this.__ul,"webkitTransitionEnd",function(){r.onResize()});g.bind(this.__ul,"transitionend",function(){r.onResize()});g.bind(this.__ul,"oTransitionEnd",function(){r.onResize()});this.onResize();if(t.resizable){I(this)}i=function(){if(m&&localStorage.getItem(k(r,"isLocal"))==="true"){localStorage.setItem(k(r,"gui"),JSON.stringify(r.getSaveObject()))}};this.saveToLocalStorageIfPossible=i;var l=r.getRoot();function f(){var e=r.getRoot();e.width+=1;_.defer(function(){e.width-=1})}if(!t.parent){f()}};T.toggleHide=function(){E=!E;_.each(A,function(e){e.domElement.style.zIndex=E?-999:999;e.domElement.style.opacity=E?0:1})};T.CLASS_AUTO_PLACE="a";T.CLASS_AUTO_PLACE_CONTAINER="ac";T.CLASS_MAIN="main";T.CLASS_CONTROLLER_ROW="cr";T.CLASS_TOO_TALL="taller-than-window";T.CLASS_CLOSED="closed";T.CLASS_CLOSE_BUTTON="close-button";T.CLASS_DRAG="drag";T.DEFAULT_WIDTH=245;T.TEXT_CLOSED="Close Controls";T.TEXT_OPEN="Open Controls";g.bind(window,"keydown",function(e){if(document.activeElement.type!=="text"&&(e.which===t||e.keyCode==t)){T.toggleHide()}},false);_.extend(T.prototype,{add:function(e,t){return x(this,e,t,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(e,t){return x(this,e,t,{color:true})},remove:function(e){this.__ul.removeChild(e.__li);this.__controllers.splice(this.__controllers.indexOf(e),1);var t=this;_.defer(function(){t.onResize()})},destroy:function(){if(this.autoPlace){w.removeChild(this.domElement)}},addFolder:function(e){if(this.__folders[e]!==undefined){throw new Error("You already have a folder in this GUI by the"+' name "'+e+'"')}var t={name:e,parent:this};t.autoPlace=this.autoPlace;if(this.load&&this.load.folders&&this.load.folders[e]){t.closed=this.load.folders[e].closed;t.load=this.load.folders[e]}var r=new T(t);this.__folders[e]=r;var n=R(this,r.domElement);g.addClass(n,"folder");return r},removeFolder:function(e){var t=this.__folders[e];if(!t){return}delete this.__folders[e];var r=t.__controllers;for(var n=0;n<r.length;++n){r[n].remove()}var i=Object.keys(t.__folders||{});for(n=0;n<i.length;++n){var a=i[n];t.removeFolder(a)}var o=t.domElement.parentNode;o.parentNode.removeChild(o)},open:function(){this.closed=false},update:function(){D(this)},close:function(){this.closed=true},onResize:function(){var e=this.getRoot();if(e.scrollable){var t=g.getOffset(e.__ul).top;var n=0;_.each(e.__ul.childNodes,function(t){if(!(e.autoPlace&&t===e.__save_row))n+=g.getHeight(t)});if(window.innerHeight-t-r<n){g.addClass(e.domElement,T.CLASS_TOO_TALL);e.__ul.style.height=window.innerHeight-t-r+"px"}else{g.removeClass(e.domElement,T.CLASS_TOO_TALL);e.__ul.style.height="auto"}}if(e.__resize_handle){_.defer(function(){e.__resize_handle.style.height=e.__ul.offsetHeight+"px"})}if(e.__closeButton){e.__closeButton.style.width=e.width+"px"}},remember:function(){if(_.isUndefined(b)){b=new p;b.domElement.innerHTML=i}if(this.parent){throw new Error("You can only call remember on a top level GUI.")}var e=this;_.each(Array.prototype.slice.call(arguments),function(t){if(e.__rememberedObjects.length==0){j(e)}if(e.__rememberedObjects.indexOf(t)==-1){e.__rememberedObjects.push(t)}});if(this.autoPlace){L(this,this.width)}},getRoot:function(){var e=this;while(e.parent){e=e.parent}return e},getSaveObject:function(){var e=this.load;e.closed=this.closed;if(this.__rememberedObjects.length>0){e.preset=this.preset;if(!e.remembered){e.remembered={}}e.remembered[this.preset]=N(this)}e.folders={};_.each(this.__folders,function(t,r){e.folders[r]=t.getSaveObject()});return e},save:function(){if(!this.load.remembered){this.load.remembered={}}this.load.remembered[this.preset]=N(this);P(this,false);this.saveToLocalStorageIfPossible()},saveAs:function(e){if(!this.load.remembered){this.load.remembered={};this.load.remembered[v]=N(this,true)}this.load.remembered[e]=N(this);this.preset=e;O(this,e,true);this.saveToLocalStorageIfPossible()},revert:function(e){_.each(this.__controllers,function(t){if(!this.getRoot().load.remembered){t.setValue(t.initialValue)}else{C(e||this.getRoot(),t)}},this);_.each(this.__folders,function(e){e.revert(e)});if(!e){P(this.getRoot(),false)}},listen:function(e){var t=this.__listening.length==0;this.__listening.push(e);if(t)U(this.__listening)}});function x(e,t,r,n){if(t[r]===undefined){throw new Error("Object "+t+' has no property "'+r+'"')}var i;if(n.color){i=new h(t,r)}else{var a=[t,r].concat(n.factoryArgs);i=o.apply(e,a)}if(n.before instanceof s){n.before=n.before.__li}C(e,i);g.addClass(i.domElement,"c");var u=document.createElement("span");g.addClass(u,"property-name");u.innerHTML=i.property;var l=document.createElement("div");l.appendChild(u);l.appendChild(i.domElement);var f=R(e,l,n.before);g.addClass(f,T.CLASS_CONTROLLER_ROW);g.addClass(f,typeof i.getValue());S(e,f,i);e.__controllers.push(i);return i}function R(e,t,r){var n=document.createElement("li");if(t)n.appendChild(t);if(r){e.__ul.insertBefore(n,params.before)}else{e.__ul.appendChild(n)}e.onResize();return n}function S(e,t,r){r.__li=t;r.__gui=e;_.extend(r,{options:function(t){if(arguments.length>1){r.remove();return x(e,r.object,r.property,{before:r.__li.nextElementSibling,factoryArgs:[_.toArray(arguments)]})}if(_.isArray(t)||_.isObject(t)){r.remove();return x(e,r.object,r.property,{before:r.__li.nextElementSibling,factoryArgs:[t]})}},name:function(e){r.__li.firstElementChild.firstElementChild.innerHTML=e;return r},listen:function(){r.__gui.listen(r);return r},remove:function(){r.__gui.remove(r);return r}});if(r instanceof c){var n=new f(r.object,r.property,{min:r.__min,max:r.__max,step:r.__step});_.each(["updateDisplay","onChange","onFinishChange"],function(e){var t=r[e];var i=n[e];r[e]=n[e]=function(){var e=Array.prototype.slice.call(arguments);t.apply(r,e);return i.apply(n,e)}});g.addClass(t,"has-slider");r.domElement.insertBefore(n.domElement,r.domElement.firstElementChild)}else if(r instanceof f){var i=function(t){if(_.isNumber(r.__min)&&_.isNumber(r.__max)){r.remove();return x(e,r.object,r.property,{before:r.__li.nextElementSibling,factoryArgs:[r.__min,r.__max,r.__step]})}return t};r.min=_.compose(i,r.min);r.max=_.compose(i,r.max)}else if(r instanceof u){g.bind(t,"click",function(){g.fakeEvent(r.__checkbox,"click")});g.bind(r.__checkbox,"click",function(e){e.stopPropagation()})}else if(r instanceof l){g.bind(t,"click",function(){g.fakeEvent(r.__button,"click")});g.bind(t,"mouseover",function(){g.addClass(r.__button,"hover")});g.bind(t,"mouseout",function(){g.removeClass(r.__button,"hover")})}else if(r instanceof h){g.addClass(t,"color");r.updateDisplay=_.compose(function(e){t.style.borderLeftColor=r.__color.toString();return e},r.updateDisplay);r.updateDisplay()}r.setValue=_.compose(function(t){if(e.getRoot().__preset_select&&r.isModified()){P(e.getRoot(),true)}return t},r.setValue)}function C(e,t){var r=e.getRoot();var n=r.__rememberedObjects.indexOf(t.object);if(n!=-1){var i=r.__rememberedObjectIndecesToControllers[n];if(i===undefined){i={};r.__rememberedObjectIndecesToControllers[n]=i}i[t.property]=t;if(r.load&&r.load.remembered){var a=r.load.remembered;var o;if(a[e.preset]){o=a[e.preset]}else if(a[v]){o=a[v]}else{return}if(o[n]&&o[n][t.property]!==undefined){var s=o[n][t.property];t.initialValue=s;t.setValue(s)}}}}function k(e,t){return document.location.href+"."+t}function j(e){var t=e.__save_row=document.createElement("li");g.addClass(e.domElement,"has-save");e.__ul.insertBefore(t,e.__ul.firstChild);g.addClass(t,"save-row");var r=document.createElement("span");r.innerHTML="&nbsp;";g.addClass(r,"button gears");var n=document.createElement("span");n.innerHTML="Save";g.addClass(n,"button");g.addClass(n,"save");var i=document.createElement("span");i.innerHTML="New";g.addClass(i,"button");g.addClass(i,"save-as");var a=document.createElement("span");a.innerHTML="Revert";g.addClass(a,"button");g.addClass(a,"revert");var o=e.__preset_select=document.createElement("select");if(e.load&&e.load.remembered){_.each(e.load.remembered,function(t,r){O(e,r,r==e.preset)})}else{O(e,v,false)}g.bind(o,"change",function(){for(var t=0;t<e.__preset_select.length;t++){e.__preset_select[t].innerHTML=e.__preset_select[t].value}e.preset=this.value});t.appendChild(o);t.appendChild(r);t.appendChild(n);t.appendChild(i);t.appendChild(a);if(m){var s=document.getElementById("dg-save-locally");var u=document.getElementById("dg-local-explain");s.style.display="block";var l=document.getElementById("dg-local-storage");if(localStorage.getItem(k(e,"isLocal"))==="true"){l.setAttribute("checked","checked")}function f(){u.style.display=e.useLocalStorage?"block":"none"}f();g.bind(l,"change",function(){e.useLocalStorage=!e.useLocalStorage;f()})}var c=document.getElementById("dg-new-constructor");g.bind(c,"keydown",function(e){if(e.metaKey&&(e.which===67||e.keyCode==67)){b.hide()}});g.bind(r,"click",function(){c.innerHTML=JSON.stringify(e.getSaveObject(),undefined,2);b.show();c.focus();c.select()});g.bind(n,"click",function(){e.save()});g.bind(i,"click",function(){var t=prompt("Enter a new preset name.");if(t)e.saveAs(t)});g.bind(a,"click",function(){e.revert()})}function I(e){e.__resize_handle=document.createElement("div");_.extend(e.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"});var t;g.bind(e.__resize_handle,"mousedown",r);g.bind(e.__closeButton,"mousedown",r);e.domElement.insertBefore(e.__resize_handle,e.domElement.firstElementChild);function r(r){r.preventDefault();t=r.clientX;g.addClass(e.__closeButton,T.CLASS_DRAG);g.bind(window,"mousemove",n);g.bind(window,"mouseup",i);return false}function n(r){r.preventDefault();e.width+=t-r.clientX;e.onResize();t=r.clientX;return false}function i(){g.removeClass(e.__closeButton,T.CLASS_DRAG);g.unbind(window,"mousemove",n);g.unbind(window,"mouseup",i)}}function L(e,t){e.domElement.style.width=t+"px";if(e.__save_row&&e.autoPlace){e.__save_row.style.width=t+"px"}if(e.__closeButton){e.__closeButton.style.width=t+"px"}}function N(e,t){var r={};_.each(e.__rememberedObjects,function(n,i){var a={};var o=e.__rememberedObjectIndecesToControllers[i];_.each(o,function(e,r){a[r]=t?e.initialValue:e.getValue()});r[i]=a});return r}function O(e,t,r){var n=document.createElement("option");n.innerHTML=t;n.value=t;e.__preset_select.appendChild(n);if(r){e.__preset_select.selectedIndex=e.__preset_select.length-1}}function M(e){for(var t=0;t<e.__preset_select.length;t++){if(e.__preset_select[t].value==e.preset){e.__preset_select.selectedIndex=t}}}function P(e,t){var r=e.__preset_select[e.__preset_select.selectedIndex];if(t){r.innerHTML=r.value+"*"}else{r.innerHTML=r.value}}function U(e){if(e.length!=0){d(function(){U(e)})}_.each(e,function(e){e.updateDisplay()})}function D(e){B(e.__controllers);Object.keys(e.__folders).forEach(function(t){D(e.__folders[t])})}function B(e){for(var t in e){e[t].updateDisplay()}}return T}},{"../controllers/BooleanController.js":52,"../controllers/ColorController.js":53,"../controllers/Controller.js":54,"../controllers/FunctionController.js":55,"../controllers/NumberControllerBox.js":57,"../controllers/NumberControllerSlider.js":58,"../controllers/factory.js":61,"../dom/CenteredDiv.js":62,"../dom/dom.js":63,"../utils/common.js":65,"../utils/css.js":66,"../utils/requestAnimationFrame.js":68}],65:[function(e,t,r){t.exports=n();function n(){var e=Array.prototype.forEach;var t=Array.prototype.slice;return{BREAK:{},extend:function(e){this.each(t.call(arguments,1),function(t){for(var r in t)if(!this.isUndefined(t[r]))e[r]=t[r]},this);return e},defaults:function(e){this.each(t.call(arguments,1),function(t){for(var r in t)if(this.isUndefined(e[r]))e[r]=t[r]},this);return e},compose:function(){var e=t.call(arguments);return function(){var r=t.call(arguments);for(var n=e.length-1;n>=0;n--){r=[e[n].apply(this,r)]}return r[0]}},each:function(t,r,n){if(!t)return;if(e&&t.forEach&&t.forEach===e){t.forEach(r,n)}else if(t.length===t.length+0){for(var i=0,a=t.length;i<a;i++)if(i in t&&r.call(n,t[i],i)===this.BREAK)return}else{for(var i in t)if(r.call(n,t[i],i)===this.BREAK)return}},defer:function(e){setTimeout(e,0)},toArray:function(e){if(e.toArray)return e.toArray();return t.call(e)},isUndefined:function(e){return e===undefined},isNull:function(e){return e===null},isNaN:function(e){return e!==e},isArray:Array.isArray||function(e){return e.constructor===Array},isObject:function(e){return e===Object(e)},isNumber:function(e){return e===e+0},isString:function(e){
return e===e+""},isBoolean:function(e){return e===false||e===true},isFunction:function(e){return Object.prototype.toString.call(e)==="[object Function]"}}}},{}],66:[function(e,t,r){t.exports=n();function n(){return{load:function(e,t){t=t||document;var r=t.createElement("link");r.type="text/css";r.rel="stylesheet";r.href=e;t.getElementsByTagName("head")[0].appendChild(r)},inject:function(e,t){t=t||document;var r=document.createElement("style");r.type="text/css";r.innerHTML=e;t.getElementsByTagName("head")[0].appendChild(r)}}}},{}],67:[function(e,t,r){t.exports=i;var n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function i(e){return String(e).replace(/[&<>"'\/]/g,function(e){return n[e]})}},{}],68:[function(e,t,r){t.exports=n();function n(){return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){window.setTimeout(e,1e3/60)}}},{}],69:[function(e,t,r){t.exports={color:{math:e("./dat/color/math.js"),interpret:e("./dat/color/interpret.js"),Color:e("./dat/color/Color.js")},dom:{dom:e("./dat/dom/dom.js")},controllers:{Controller:e("./dat/controllers/Controller.js"),BooleanController:e("./dat/controllers/BooleanController.js"),OptionController:e("./dat/controllers/OptionController.js"),StringController:e("./dat/controllers/StringController.js"),NumberController:e("./dat/controllers/NumberController.js"),NumberControllerBox:e("./dat/controllers/NumberControllerBox.js"),NumberControllerSlider:e("./dat/controllers/NumberControllerSlider.js"),FunctionController:e("./dat/controllers/FunctionController.js"),ColorController:e("./dat/controllers/ColorController.js")},gui:{GUI:e("./dat/gui/GUI.js")},GUI:e("./dat/gui/GUI.js")}},{"./dat/color/Color.js":48,"./dat/color/interpret.js":49,"./dat/color/math.js":50,"./dat/controllers/BooleanController.js":52,"./dat/controllers/ColorController.js":53,"./dat/controllers/Controller.js":54,"./dat/controllers/FunctionController.js":55,"./dat/controllers/NumberController.js":56,"./dat/controllers/NumberControllerBox.js":57,"./dat/controllers/NumberControllerSlider.js":58,"./dat/controllers/OptionController.js":59,"./dat/controllers/StringController.js":60,"./dat/dom/dom.js":63,"./dat/gui/GUI.js":64}],70:[function(e,t,r){(function(r,n){"use strict";var i=e("path");var a=e("ndarray");var o=e("omggif").GifReader;var s=e("ndarray-pack");var u=e("through");var l=e("data-uri-to-buffer");function f(e,t){var r=new Image;r.crossOrigin="Anonymous";r.onload=function(){var e=document.createElement("canvas");e.width=r.width;e.height=r.height;var n=e.getContext("2d");n.drawImage(r,0,0);var i=n.getImageData(0,0,r.width,r.height);t(null,a(new Uint8Array(i.data),[r.width,r.height,4],[4,4*r.width,1],0))};r.onerror=function(e){t(e)};r.src=e}function c(e,t){var r;try{r=new o(e)}catch(n){t(n);return}if(r.numFrames()>0){var i=[r.numFrames(),r.height,r.width,4];var s=new Uint8Array(i[0]*i[1]*i[2]*i[3]);var u=a(s,i);try{for(var l=0;l<r.numFrames();++l){r.decodeAndBlitFrameRGBA(l,s.subarray(u.index(l,0,0,0),u.index(l+1,0,0,0)))}}catch(n){t(n);return}t(null,u.transpose(0,2,1))}else{var i=[r.height,r.width,4];var s=new Uint8Array(i[0]*i[1]*i[2]);var u=a(s,i);try{r.decodeAndBlitFrameRGBA(0,s)}catch(n){t(n);return}t(null,u.transpose(1,0))}}function h(e,t){var r=new XMLHttpRequest;r.open("GET",e,true);r.responseType="arraybuffer";if(r.overrideMimeType){r.overrideMimeType("application/binary")}r.onerror=function(e){t(e)};r.onload=function(){if(r.readyState!==4){return}var e=new Uint8Array(r.response);c(e,t);return};r.send()}function d(e){if(e[0]===undefined){var t=e.length;var r=new Uint8Array(t);for(var n=0;n<t;++n){r[n]=e.get(n)}return r}else{return new Uint8Array(e)}}function p(e,t){n.nextTick(function(){try{var r=l(e);if(r){c(d(r),t)}else{t(new Error("Error parsing data URI"))}}catch(n){t(n)}})}t.exports=function g(e,t,n){if(!n){n=t;t=""}var a=i.extname(e);switch(t||a.toUpperCase()){case".GIF":h(e,n);break;default:if(r.isBuffer(e)){e="data:"+t+";base64,"+e.toString("base64")}if(e.indexOf("data:image/gif;")===0){p(e,n)}else{f(e,n)}}}}).call(this,{isBuffer:e("../browserify/node_modules/insert-module-globals/node_modules/is-buffer/index.js")},e("_process"))},{"../browserify/node_modules/insert-module-globals/node_modules/is-buffer/index.js":27,_process:29,"data-uri-to-buffer":71,ndarray:78,"ndarray-pack":72,omggif:81,path:28,through:82}],71:[function(e,t,r){(function(e){t.exports=r;function r(t){if(!/^data\:/i.test(t)){throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")')}t=t.replace(/\r?\n/g,"");var r=t.indexOf(",");if(-1===r||r<=4)throw new TypeError("malformed data: URI");var n=t.substring(5,r).split(";");var i=false;var a="US-ASCII";for(var o=0;o<n.length;o++){if("base64"==n[o]){i=true}else if(0==n[o].indexOf("charset=")){a=n[o].substring(8)}}var s=unescape(t.substring(r+1));var u=i?"base64":"ascii";var l=new e(s,u);l.type=n[0]||"text/plain";l.charset=a;return l}}).call(this,e("buffer").Buffer)},{buffer:21}],72:[function(e,t,r){"use strict";var n=e("ndarray");var i=e("./doConvert.js");t.exports=function a(e,t){var r=[],a=e,o=1;while(a instanceof Array){r.push(a.length);o*=a.length;a=a[0]}if(r.length===0){return n()}if(!t){t=n(new Float64Array(o),r)}i(t,e);return t}},{"./doConvert.js":73,ndarray:78}],73:[function(e,t,r){t.exports=e("cwise-compiler")({args:["array","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\nvar _inline_1_v=_inline_1_arg1_,_inline_1_i\nfor(_inline_1_i=0;_inline_1_i<_inline_1_arg2_.length-1;++_inline_1_i) {\n_inline_1_v=_inline_1_v[_inline_1_arg2_[_inline_1_i]]\n}\n_inline_1_arg0_=_inline_1_v[_inline_1_arg2_[_inline_1_arg2_.length-1]]\n}",args:[{name:"_inline_1_arg0_",lvalue:true,rvalue:false,count:1},{name:"_inline_1_arg1_",lvalue:false,rvalue:true,count:1},{name:"_inline_1_arg2_",lvalue:false,rvalue:true,count:4}],thisVars:[],localVars:["_inline_1_i","_inline_1_v"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},funcName:"convert",blockSize:64})},{"cwise-compiler":74}],74:[function(e,t,r){arguments[4][4][0].apply(r,arguments)},{"./lib/thunk.js":76,dup:4}],75:[function(e,t,r){arguments[4][5][0].apply(r,arguments)},{dup:5,uniq:77}],76:[function(e,t,r){arguments[4][6][0].apply(r,arguments)},{"./compile.js":75,dup:6}],77:[function(e,t,r){arguments[4][7][0].apply(r,arguments)},{dup:7}],78:[function(e,t,r){arguments[4][8][0].apply(r,arguments)},{dup:8,"iota-array":79,"is-buffer":80}],79:[function(e,t,r){arguments[4][9][0].apply(r,arguments)},{dup:9}],80:[function(e,t,r){arguments[4][10][0].apply(r,arguments)},{dup:10}],81:[function(e,t,r){function n(e,t,r,n){var a=0;var n=n===undefined?{}:n;var o=n.loop===undefined?null:n.loop;var s=n.palette===undefined?null:n.palette;if(t<=0||r<=0||t>65535||r>65535)throw"Width/Height invalid.";function u(e){var t=e.length;if(t<2||t>256||t&t-1)throw"Invalid code/color length, must be power of 2 and 2 .. 256.";return t}e[a++]=71;e[a++]=73;e[a++]=70;e[a++]=56;e[a++]=57;e[a++]=97;var l=0;var f=0;if(s!==null){var c=u(s);while(c>>=1)++l;c=1<<l;--l;if(n.background!==undefined){f=n.background;if(f>=c)throw"Background index out of range.";if(f===0)throw"Background index explicitly passed as 0."}}e[a++]=t&255;e[a++]=t>>8&255;e[a++]=r&255;e[a++]=r>>8&255;e[a++]=(s!==null?128:0)|l;e[a++]=f;e[a++]=0;if(s!==null){for(var h=0,d=s.length;h<d;++h){var p=s[h];e[a++]=p>>16&255;e[a++]=p>>8&255;e[a++]=p&255}}if(o!==null){if(o<0||o>65535)throw"Loop count invalid.";e[a++]=33;e[a++]=255;e[a++]=11;e[a++]=78;e[a++]=69;e[a++]=84;e[a++]=83;e[a++]=67;e[a++]=65;e[a++]=80;e[a++]=69;e[a++]=50;e[a++]=46;e[a++]=48;e[a++]=3;e[a++]=1;e[a++]=o&255;e[a++]=o>>8&255;e[a++]=0}var g=false;this.addFrame=function(t,r,n,o,l,f){if(g===true){--a;g=false}f=f===undefined?{}:f;if(t<0||r<0||t>65535||r>65535)throw"x/y invalid.";if(n<=0||o<=0||n>65535||o>65535)throw"Width/Height invalid.";if(l.length<n*o)throw"Not enough pixels for the frame size.";var c=true;var h=f.palette;if(h===undefined||h===null){c=false;h=s}if(h===undefined||h===null)throw"Must supply either a local or global palette.";var d=u(h);var p=0;while(d>>=1)++p;d=1<<p;var _=f.delay===undefined?0:f.delay;var v=f.disposal===undefined?0:f.disposal;if(v<0||v>3)throw"Disposal out of range.";var m=false;var b=0;if(f.transparent!==undefined&&f.transparent!==null){m=true;b=f.transparent;if(b<0||b>=d)throw"Transparent color index."}if(v!==0||m||_!==0){e[a++]=33;e[a++]=249;e[a++]=4;e[a++]=v<<2|(m===true?1:0);e[a++]=_&255;e[a++]=_>>8&255;e[a++]=b;e[a++]=0}e[a++]=44;e[a++]=t&255;e[a++]=t>>8&255;e[a++]=r&255;e[a++]=r>>8&255;e[a++]=n&255;e[a++]=n>>8&255;e[a++]=o&255;e[a++]=o>>8&255;e[a++]=c===true?128|p-1:0;if(c===true){for(var y=0,w=h.length;y<w;++y){var E=h[y];e[a++]=E>>16&255;e[a++]=E>>8&255;e[a++]=E&255}}a=i(e,a,p<2?2:p,l)};this.end=function(){if(g===false){e[a++]=59;g=true}return a}}function i(e,t,r,n){e[t++]=r;var i=t++;var a=1<<r;var o=a-1;var s=a+1;var u=s+1;var l=r+1;var f=0;var c=0;function h(r){while(f>=r){e[t++]=c&255;c>>=8;f-=8;if(t===i+256){e[i]=255;i=t++}}}function d(e){c|=e<<f;f+=l;h(8)}var p=n[0]&o;var g={};d(a);for(var _=1,v=n.length;_<v;++_){var m=n[_]&o;var b=p<<8|m;var y=g[b];if(y===undefined){c|=p<<f;f+=l;while(f>=8){e[t++]=c&255;c>>=8;f-=8;if(t===i+256){e[i]=255;i=t++}}if(u===4096){d(a);u=s+1;l=r+1;g={}}else{if(u>=1<<l)++l;g[b]=u++}p=m}else{p=y}}d(p);d(s);h(1);if(i+1===t){e[i]=0}else{e[i]=t-i-1;e[t++]=0}return t}function a(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!==56||e[t++]!==97){throw"Invalid GIF 87a/89a header."}var r=e[t++]|e[t++]<<8;var n=e[t++]|e[t++]<<8;var i=e[t++];var a=i>>7;var s=i&7;var u=1<<s+1;var l=e[t++];e[t++];var f=null;if(a){f=t;t+=u*3}var c=true;var h=[];var d=0;var p=null;var g=0;var _=null;this.width=r;this.height=n;while(c&&t<e.length){switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0){t+=14;_=e[t++]|e[t++]<<8;t++}else{t+=12;while(true){var v=e[t++];if(v===0)break;t+=v}}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw"Invalid graphics extension block.";var m=e[t++];d=e[t++]|e[t++]<<8;p=e[t++];if((m&1)===0)p=null;g=m>>2&7;t++;break;case 254:while(true){var v=e[t++];if(v===0)break;t+=v}break;default:throw"Unknown graphic control label: 0x"+e[t-1].toString(16)}break;case 44:var b=e[t++]|e[t++]<<8;var y=e[t++]|e[t++]<<8;var w=e[t++]|e[t++]<<8;var E=e[t++]|e[t++]<<8;var A=e[t++];var T=A>>7;var x=A>>6&1;var R=A&7;var S=1<<R+1;var C=f;var k=false;if(T){var k=true;C=t;t+=S*3}var j=t;t++;while(true){var v=e[t++];if(v===0)break;t+=v}h.push({x:b,y:y,width:w,height:E,has_local_palette:k,palette_offset:C,data_offset:j,data_length:t-j,transparent_index:p,interlaced:!!x,delay:d,disposal:g});break;case 59:c=false;break;default:throw"Unknown gif block: 0x"+e[t-1].toString(16);break}}this.numFrames=function(){return h.length};this.loopCount=function(){return _};this.frameInfo=function(e){if(e<0||e>=h.length)throw"Frame index out of range.";return h[e]};this.decodeAndBlitFrameBGRA=function(t,n){var i=this.frameInfo(t);var a=i.width*i.height;var s=new Uint8Array(a);o(e,i.data_offset,s,a);var u=i.palette_offset;var l=i.transparent_index;if(l===null)l=256;var f=i.width;var c=r-f;var h=f;var d=(i.y*r+i.x)*4;var p=((i.y+i.height)*r+i.x)*4;var g=d;var _=c*4;if(i.interlaced===true){_+=r*4*7}var v=8;for(var m=0,b=s.length;m<b;++m){var y=s[m];if(h===0){g+=_;h=f;if(g>=p){_=c*4+r*4*(v-1);g=d+(f+c)*(v<<1);v>>=1}}if(y===l){g+=4}else{var w=e[u+y*3];var E=e[u+y*3+1];var A=e[u+y*3+2];n[g++]=A;n[g++]=E;n[g++]=w;n[g++]=255}--h}};this.decodeAndBlitFrameRGBA=function(t,n){var i=this.frameInfo(t);var a=i.width*i.height;var s=new Uint8Array(a);o(e,i.data_offset,s,a);var u=i.palette_offset;var l=i.transparent_index;if(l===null)l=256;var f=i.width;var c=r-f;var h=f;var d=(i.y*r+i.x)*4;var p=((i.y+i.height)*r+i.x)*4;var g=d;var _=c*4;if(i.interlaced===true){_+=r*4*7}var v=8;for(var m=0,b=s.length;m<b;++m){var y=s[m];if(h===0){g+=_;h=f;if(g>=p){_=c*4+r*4*(v-1);g=d+(f+c)*(v<<1);v>>=1}}if(y===l){g+=4}else{var w=e[u+y*3];var E=e[u+y*3+1];var A=e[u+y*3+2];n[g++]=w;n[g++]=E;n[g++]=A;n[g++]=255}--h}}}function o(e,t,r,n){var i=e[t++];var a=1<<i;var o=a+1;var s=o+1;var u=i+1;var l=(1<<u)-1;var f=0;var c=0;var h=0;var d=e[t++];var p=new Int32Array(4096);var g=null;while(true){while(f<16){if(d===0)break;c|=e[t++]<<f;f+=8;if(d===1){d=e[t++]}else{--d}}if(f<u)break;var _=c&l;c>>=u;f-=u;if(_===a){s=o+1;u=i+1;l=(1<<u)-1;g=null;continue}else if(_===o){break}var v=_<s?_:g;var m=0;var b=v;while(b>a){b=p[b]>>8;++m}var y=b;var w=h+m+(v!==_?1:0);if(w>n){console.log("Warning, gif stream longer than expected.");return}r[h++]=y;h+=m;var E=h;if(v!==_)r[h++]=y;b=v;while(m--){b=p[b];r[--E]=b&255;b>>=8}if(g!==null&&s<4096){p[s++]=g<<8|y;if(s>=l+1&&u<12){++u;l=l<<1|1}}g=_}if(h!==n){console.log("Warning, gif stream shorter than expected.")}return r}try{r.GifWriter=n;r.GifReader=a}catch(s){}},{}],82:[function(e,t,r){(function(n){var i=e("stream");r=t.exports=a;a.through=a;function a(e,t,r){e=e||function(e){this.queue(e)};t=t||function(){this.queue(null)};var a=false,o=false,s=[],u=false;var l=new i;l.readable=l.writable=true;l.paused=false;l.autoDestroy=!(r&&r.autoDestroy===false);l.write=function(t){e.call(this,t);return!l.paused};function f(){while(s.length&&!l.paused){var e=s.shift();if(null===e)return l.emit("end");else l.emit("data",e)}}l.queue=l.push=function(e){if(u)return l;if(e===null)u=true;s.push(e);f();return l};l.on("end",function(){l.readable=false;if(!l.writable&&l.autoDestroy)n.nextTick(function(){l.destroy()})});function c(){l.writable=false;t.call(l);if(!l.readable&&l.autoDestroy)l.destroy()}l.end=function(e){if(a)return;a=true;if(arguments.length)l.write(e);c();return l};l.destroy=function(){if(o)return;o=true;a=true;s.length=0;l.writable=l.readable=false;l.emit("close");return l};l.pause=function(){if(l.paused)return;l.paused=true;return l};l.resume=function(){if(l.paused){l.paused=false;l.emit("resume")}f();if(!l.paused)l.emit("drain");return l};return l}}).call(this,e("_process"))},{_process:29,stream:44}],83:[function(e,t,r){"use strict";var n=e("game-shell");var i=e("webglew");function a(e){e=e||{};var t=e.extensions||[];var r=n(e);var a=r.scale||1;var o=e.glOptions;r.on("init",function u(){var n=document.createElement("canvas");var u=n.getContext("webgl",o)||n.getContext("experimental-webgl",o);if(!u){r.emit("gl-error",new Error("Unable to initialize WebGL"));return}var l=i(u);for(var f=0;f<t.length;++f){if(!(t[f]in l)){r.emit("gl-error",new Error("Missing extension: "+t[f]));return}}n.style.position="absolute";n.style.left="0px";n.style.top="0px";r.element.appendChild(n);r.canvas=n;r.gl=u;s();r.clearFlags=e.clearFlags===undefined?u.COLOR_BUFFER_BIT|u.DEPTH_BUFFER_BIT:e.clearFlags;r.clearColor=e.clearColor||[0,0,0,0];r.clearDepth=e.clearDepth||1;r.clearStencil=e.clearStencil||0;r.on("resize",s);r.on("render",function c(e){u.bindFramebuffer(u.FRAMEBUFFER,null);u.viewport(0,0,r._width/a|0,r._height/a|0);if(r.clearFlags&u.STENCIL_BUFFER_BIT){u.clearStencil(r.clearStencil)}if(r.clearFlags&u.COLOR_BUFFER_BIT){u.clearColor(r.clearColor[0],r.clearColor[1],r.clearColor[2],r.clearColor[3])}if(r.clearFlags&u.DEPTH_BUFFER_BIT){u.clearDepth(r.clearDepth)}if(r.clearFlags){u.clear(u.COLOR_BUFFER_BIT|u.DEPTH_BUFFER_BIT|u.STENCIL_BUFFER_BIT)}r.emit("gl-render",e)});r.emit("gl-init")});function s(){var e=r._width/a|0;var t=r._height/a|0;r.canvas.width=e;r.canvas.height=t;r.canvas.style.width=r._width+"px";r.canvas.style.height=r._height+"px";r.emit("gl-resize",e,t)}Object.defineProperty(r,"scale",{get:function(){return a},set:function(e){e=+e;if(e<=0||isNaN(e)||a===e){return a}a=e;s();return a}});Object.defineProperty(r,"width",{get:function(){return r._width/a|0}});Object.defineProperty(r,"height",{get:function(){return r._height/a|0}});Object.defineProperty(r,"mouse",{get:function(){return[r.mouseX/a,r.mouseY/a]}});Object.defineProperty(r,"prevMouse",{get:function(){return[r.prevMouseX/a,r.prevMouseY/a]}});return r}t.exports=a},{"game-shell":93,webglew:95}],84:[function(e,t,r){if(typeof window.performance==="object"){if(window.performance.now){t.exports=function(){return window.performance.now()}}else if(window.performance.webkitNow){t.exports=function(){return window.performance.webkitNow()}}}else if(Date.now){t.exports=Date.now}else{t.exports=function(){return(new Date).getTime()}}},{}],85:[function(e,t,r){var n="",i,a,o;if(window.addEventListener){i="addEventListener"}else{i="attachEvent";n="on"}o="onwheel"in document.createElement("div")?"wheel":document.onmousewheel!==undefined?"mousewheel":"DOMMouseScroll";function s(e,t,r,a){e[i](n+t,o=="wheel"?r:function(e){!e&&(e=window.event);var t={originalEvent:e,target:e.target||e.srcElement,type:"wheel",deltaMode:e.type=="MozMousePixelScroll"?0:1,deltaX:0,delatZ:0,preventDefault:function(){e.preventDefault?e.preventDefault():e.returnValue=false}};if(o=="mousewheel"){t.deltaY=-1/40*e.wheelDelta;e.wheelDeltaX&&(t.deltaX=-1/40*e.wheelDeltaX)}else{t.deltaY=e.detail}return r(t)},a||false)}t.exports=function(e,t,r){s(e,o,t,r);if(o=="DOMMouseScroll"){s(e,"MozMousePixelScroll",t,r)}}},{}],86:[function(e,t,r){var n=0;var i=["ms","moz","webkit","o"];for(var a=0;a<i.length&&!window.requestAnimationFrame;++a){window.requestAnimationFrame=window[i[a]+"RequestAnimationFrame"];window.cancelAnimationFrame=window[i[a]+"CancelAnimationFrame"]||window[i[a]+"CancelRequestAnimationFrame"]}if(!window.requestAnimationFrame)window.requestAnimationFrame=function(e,t){var r=(new Date).getTime();var i=Math.max(0,16-(r-n));var a=window.setTimeout(function(){e(r+i)},i);n=r+i;return a};if(!window.cancelAnimationFrame)window.cancelAnimationFrame=function(e){clearTimeout(e)}},{}],87:[function(e,t,r){"use strict";function n(e,t,r,n,i,a){var o=["function ",e,"(a,l,h,",n.join(","),"){",a?"":"var i=",r?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a",i?".get(m)":"[m]"];if(a){if(t.indexOf("c")<0){o.push(";if(x===y){return m}else if(x<=y){")}else{o.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){")}}else{o.push(";if(",t,"){i=m;")}if(r){o.push("l=m+1}else{h=m-1}")}else{o.push("h=m-1}else{l=m+1}")}o.push("}");if(a){o.push("return -1};")}else{o.push("return i};")}return o.join("")}function i(e,t,r,i){var a=new Function([n("A","x"+e+"y",t,["y"],false,i),n("B","x"+e+"y",t,["y"],true,i),n("P","c(x,y)"+e+"0",t,["y","c"],false,i),n("Q","c(x,y)"+e+"0",t,["y","c"],true,i),"function dispatchBsearch",r,"(a,y,c,l,h){if(a.shape){if(typeof(c)==='function'){return Q(a,(l===undefined)?0:l|0,(h===undefined)?a.shape[0]-1:h|0,y,c)}else{return B(a,(c===undefined)?0:c|0,(l===undefined)?a.shape[0]-1:l|0,y)}}else{if(typeof(c)==='function'){return P(a,(l===undefined)?0:l|0,(h===undefined)?a.length-1:h|0,y,c)}else{return A(a,(c===undefined)?0:c|0,(l===undefined)?a.length-1:l|0,y)}}}return dispatchBsearch",r].join(""));return a()}t.exports={ge:i(">=",false,"GE"),gt:i(">",false,"GT"),lt:i("<",true,"LT"),le:i("<=",true,"LE"),eq:i("-",true,"EQ",true)}},{}],88:[function(e,t,r){!function(e,r){if(typeof t!="undefined")t.exports=r();else if(typeof define=="function"&&typeof define.amd=="object")define(r);else this[e]=r()}("domready",function(){var e=[],t,r=document,n=r.documentElement.doScroll,i="DOMContentLoaded",a=(n?/^loaded|^c/:/^loaded|^i|^c/).test(r.readyState);if(!a)r.addEventListener(i,t=function(){r.removeEventListener(i,t);a=1;while(t=e.shift())t()});return function(t){a?setTimeout(t,0):e.push(t)}})},{}],89:[function(e,t,r){"use strict";function n(e){var t={};for(var r in e){if(e.hasOwnProperty(r)){t[e[r]]=r}}return t}t.exports=n},{}],90:[function(e,t,r){arguments[4][9][0].apply(r,arguments)},{dup:9}],91:[function(e,t,r){arguments[4][7][0].apply(r,arguments)},{dup:7}],92:[function(e,t,r){var n=typeof window!=="undefined"?window.navigator.userAgent:"",i=/OS X/.test(n),a=/Opera/.test(n),o=!/like Gecko/.test(n)&&!a;var s,u=t.exports={0:i?"<menu>":"<UNK>",1:"<mouse 1>",2:"<mouse 2>",3:"<break>",4:"<mouse 3>",5:"<mouse 4>",6:"<mouse 5>",8:"<backspace>",9:"<tab>",12:"<clear>",13:"<enter>",16:"<shift>",17:"<control>",18:"<alt>",19:"<pause>",20:"<caps-lock>",21:"<ime-hangul>",23:"<ime-junja>",24:"<ime-final>",25:"<ime-kanji>",27:"<escape>",28:"<ime-convert>",29:"<ime-nonconvert>",30:"<ime-accept>",31:"<ime-mode-change>",27:"<escape>",32:"<space>",33:"<page-up>",34:"<page-down>",35:"<end>",36:"<home>",37:"<left>",38:"<up>",39:"<right>",40:"<down>",41:"<select>",42:"<print>",43:"<execute>",44:"<snapshot>",45:"<insert>",46:"<delete>",47:"<help>",91:"<meta>",92:"<meta>",93:i?"<meta>":"<menu>",95:"<sleep>",106:"<num-*>",107:"<num-+>",108:"<num-enter>",109:"<num-->",110:"<num-.>",111:"<num-/>",144:"<num-lock>",145:"<scroll-lock>",160:"<shift-left>",161:"<shift-right>",162:"<control-left>",163:"<control-right>",164:"<alt-left>",165:"<alt-right>",166:"<browser-back>",167:"<browser-forward>",168:"<browser-refresh>",169:"<browser-stop>",170:"<browser-search>",171:"<browser-favorites>",172:"<browser-home>",173:i&&o?"-":"<volume-mute>",174:"<volume-down>",175:"<volume-up>",176:"<next-track>",177:"<prev-track>",178:"<stop>",179:"<play-pause>",180:"<launch-mail>",181:"<launch-media-select>",182:"<launch-app 1>",183:"<launch-app 2>",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",223:"<meta>",224:"<meta>",226:"<alt-gr>",229:"<ime-process>",231:a?"`":"<unicode>",246:"<attention>",247:"<crsel>",248:"<exsel>",249:"<erase-eof>",250:"<play>",251:"<zoom>",252:"<no-name>",253:"<pa-1>",254:"<clear>"};for(s=58;s<65;++s){u[s]=String.fromCharCode(s)}for(s=48;s<58;++s){u[s]=s-48+""}for(s=65;s<91;++s){u[s]=String.fromCharCode(s)}for(s=96;s<106;++s){u[s]="<num-"+(s-96)+">"}for(s=112;s<136;++s){u[s]="F"+(s-111)}},{}],93:[function(e,t,r){"use strict";var n=e("events").EventEmitter,i=e("util"),a=e("domready"),o=e("vkey"),s=e("invert-hash"),u=e("uniq"),l=e("binary-search-bounds"),f=e("iota-array"),c=Math.min;e("./lib/raf-polyfill.js");var h=e("./lib/mousewheel-polyfill.js");var d=e("./lib/hrtime-polyfill.js");var p=function(){var e=new Array(256),t,r,n;for(t=0;t<256;++t){e[t]="UNK"}for(t in o){n=o[t];if(n.charAt(0)==="<"&&n.charAt(n.length-1)===">"){n=n.substring(1,n.length-1)}n=n.replace(/\s/g,"-");e[parseInt(t)]=n}return e}();var g=u(Object.keys(s(p)));function _(e){return l.eq(g,e)}function v(e){return _(p[e])}function m(){n.call(this);this._curKeyState=new Array(g.length);this._pressCount=new Array(g.length);this._releaseCount=new Array(g.length);this._tickInterval=null;this._rafHandle=null;this._tickRate=0;this._lastTick=d();this._frameTime=0;this._paused=true;this._width=0;this._height=0;this._wantFullscreen=false;this._wantPointerLock=false;this._fullscreenActive=false;this._pointerLockActive=false;this._render=k.bind(undefined,this);this.preventDefaults=true;this.stopPropagation=false;for(var e=0;e<g.length;++e){this._curKeyState[e]=false;this._pressCount[e]=this._releaseCount[e]=0}this.element=null;this.bindings={};this.frameSkip=100;this.tickCount=0;this.frameCount=0;this.startTime=d();this.tickTime=this._tickRate;this.frameTime=10;this.stickyFullscreen=false;this.stickyPointerLock=false;this.scroll=[0,0,0];this.mouseX=0;this.mouseY=0;this.prevMouseX=0;this.prevMouseY=0}i.inherits(m,n);var b=m.prototype;b.keyNames=g;b.bind=function(e){var t;if(e in this.bindings){t=this.bindings[e]}else{t=[]}var r;for(var n=1,i=arguments.length;n<i;++n){r=arguments[n];if(_(r)>=0){t.push(r)}else if(r in this.bindings){var a=this.bindings[r];for(var o=0;o<a.length;++o){t.push(a[o])}}}t=u(t);if(t.length>0){this.bindings[e]=t}this.emit("bind",e,t)};b.unbind=function(e){if(e in this.bindings){delete this.bindings[e]}this.emit("unbind",e)};function y(e,t,r){if(r in t){var n=t[r];for(var i=0,a=n.length;i<a;++i){if(e[_(n[i])]){return true}}return false}var o=_(r);if(o>=0){return e[o]}return false}function w(e,t,r){if(r in t){var n=t[r],i=0;for(var a=0,o=n.length;a<o;++a){i+=e[_(n[a])]}return i}var s=_(r);if(s>=0){return e[s]}return 0}b.down=function(e){return y(this._curKeyState,this.bindings,e)};b.wasDown=function(e){return this.down(e)||!!this.press(e)};b.up=function(e){return!this.down(e)};b.wasUp=function(e){return this.up(e)||!!this.release(e)};b.press=function(e){return w(this._pressCount,this.bindings,e)};b.release=function(e){return w(this._releaseCount,this.bindings,e)};Object.defineProperty(b,"paused",{get:function(){return this._paused},set:function(e){var t=!!e;if(t!==this._paused){if(!this._paused){this._paused=true;this._frameTime=c(1,(d()-this._lastTick)/this._tickRate);clearInterval(this._tickInterval)}else{this._paused=false;this._lastTick=d()-Math.floor(this._frameTime*this._tickRate);this._tickInterval=setInterval(C,this._tickRate,this);this._rafHandle=requestAnimationFrame(this._render)}}}});function E(e){var t=e.element;if(e._wantFullscreen&&!e._fullscreenActive){var r=t.requestFullscreen||t.requestFullScreen||t.webkitRequestFullscreen||t.webkitRequestFullScreen||t.mozRequestFullscreen||t.mozRequestFullScreen||function(){};r.call(t)}if(e._wantPointerLock&&!e._pointerLockActive){var n=t.requestPointerLock||t.webkitRequestPointerLock||t.mozRequestPointerLock||t.msRequestPointerLock||t.oRequestPointerLock||function(){};n.call(t)}}var A=document.exitFullscreen||document.cancelFullscreen||document.cancelFullScreen||document.webkitCancelFullscreen||document.webkitCancelFullScreen||document.mozCancelFullscreen||document.mozCancelFullScreen||function(){};Object.defineProperty(b,"fullscreen",{get:function(){return this._fullscreenActive},set:function(e){var t=!!e;if(!t){this._wantFullscreen=false;A.call(document)}else{this._wantFullscreen=true;E(this)}return this._fullscreenActive}});function T(e){e._fullscreenActive=document.fullscreen||document.mozFullScreen||document.webkitIsFullScreen||false;if(!e.stickyFullscreen&&e._fullscreenActive){e._wantFullscreen=false}}var x=document.exitPointerLock||document.webkitExitPointerLock||document.mozExitPointerLock||function(){};Object.defineProperty(b,"pointerLock",{get:function(){return this._pointerLockActive},set:function(e){var t=!!e;if(!t){this._wantPointerLock=false;x.call(document)}else{this._wantPointerLock=true;E(this)}return this._pointerLockActive}});function R(e,t){e._pointerLockActive=e.element===(document.pointerLockElement||document.mozPointerLockElement||document.webkitPointerLockElement||null);if(!e.stickyPointerLock&&e._pointerLockActive){e._wantPointerLock=false}}Object.defineProperty(b,"width",{get:function(){return this.element.clientWidth}});Object.defineProperty(b,"height",{get:function(){return this.element.clientHeight}});function S(e,t,r){var n=e._curKeyState[t];if(n!==r){if(r){e._pressCount[t]++}else{e._releaseCount[t]++}e._curKeyState[t]=r}}function C(e){var t=d()+e.frameSkip,r=e._pressCount,n=e._releaseCount,i,a,o,s=e._tickRate,u=g.length;while(!e._paused&&d()>=e._lastTick+s){if(d()>t){e._lastTick=d()+s;return}a=d();e.emit("tick");o=d();e.tickTime=o-a;++e.tickCount;e._lastTick+=s;for(i=0;i<u;++i){r[i]=n[i]=0}if(e._pointerLockActive){e.prevMouseX=e.mouseX=e.width>>1;e.prevMouseY=e.mouseY=e.height>>1}else{e.prevMouseX=e.mouseX;e.prevMouseY=e.mouseY}e.scroll[0]=e.scroll[1]=e.scroll[2]=0}}function k(e){e._rafHandle=requestAnimationFrame(e._render);C(e);var t;if(e._paused){t=e._frameTime}else{t=c(1,(d()-e._lastTick)/e._tickRate)}++e.frameCount;var r=d();e.emit("render",t);var n=d();e.frameTime=n-r}function j(e){return document.activeElement===document.body||document.activeElement===e.element}function I(e,t){if(e.preventDefaults){t.preventDefault()}if(e.stopPropagation){t.stopPropagation()}}function L(e,t){I(e,t);var r=v(t.keyCode||t.char||t.which||t.charCode);if(r>=0){S(e,r,false)}}function N(e,t){if(!j(e)){return}I(e,t);if(t.metaKey){H(e,t)}else{var r=v(t.keyCode||t.char||t.which||t.charCode);if(r>=0){S(e,r,true)}}}var O=f(32).map(function(e){return _("mouse-"+(e+1))});function M(e,t){for(var r=0;r<32;++r){S(e,O[r],!!(t&1<<r))}}function P(e,t){I(e,t);if(e._pointerLockActive){var r=t.movementX||t.mozMovementX||t.webkitMovementX||0,n=t.movementY||t.mozMovementY||t.webkitMovementY||0;e.mouseX+=r;e.mouseY+=n}else{e.mouseX=t.clientX-e.element.offsetLeft;e.mouseY=t.clientY-e.element.offsetTop}return false}function U(e,t){I(e,t);S(e,O[t.button],true);return false}function D(e,t){I(e,t);S(e,O[t.button],false);return false}function B(e,t){I(e,t);if(e._pointerLockActive){e.prevMouseX=e.mouseX=e.width>>1;e.prevMouseY=e.mouseY=e.height>>1}else{e.prevMouseX=e.mouseX=t.clientX-e.element.offsetLeft;e.prevMouseY=e.mouseY=t.clientY-e.element.offsetTop}return false}function F(e,t){I(e,t);M(e,0);return false}function V(e,t){I(e,t);var r=1;switch(t.deltaMode){case 0:r=1;break;case 1:r=12;break;case 2:r=e.height;break}e.scroll[0]+=t.deltaX*r;e.scroll[1]+=t.deltaY*r;e.scroll[2]+=t.deltaZ*r||0;return false}function X(e,t){I(e,t);return false}function H(e,t){var r=g.length,n=e._curKeyState,i=e._releaseCount,a;for(a=0;a<r;++a){if(n[a]){++i[a]}n[a]=false}return false}function G(e,t){var r=e.element.clientWidth|0;var n=e.element.clientHeight|0;if(r!==e._width||n!==e._height){e._width=r;e._height=n;e.emit("resize",r,n)}}function Y(){var e=document.createElement("div");e.tabindex=1;e.style.position="absolute";e.style.left="0px";e.style.right="0px";e.style.top="0px";e.style.bottom="0px";e.style.height="100%";e.style.overflow="hidden";document.body.appendChild(e);document.body.style.overflow="hidden";document.body.style.height="100%";return e}function z(e){e=e||{};var t=!!e.fullscreen;var r=t;if(typeof e.pointerLock!==undefined){r=!!e.pointerLock}var n=new m;n._tickRate=e.tickRate||30;n.frameSkip=e.frameSkip||(n._tickRate+5)*5;n.stickyFullscreen=!!e.stickyFullscreen||!!e.sticky;n.stickyPointerLock=!!e.stickyPointerLock||!!e.sticky;if(e.bindings){n.bindings=e.bindings}setTimeout(function(){a(function i(){var i=e.element;if(typeof i==="string"){var a=document.querySelector(i);if(!a){a=document.getElementById(i)}if(!a){a=document.getElementByClass(i)[0]}if(!a){a=Y()}n.element=a}else if(typeof i==="object"&&!!i){n.element=i}else if(typeof i==="function"){n.element=i()}else{n.element=Y()}if(n.element.style){n.element.style["-webkit-touch-callout"]="none";n.element.style["-webkit-user-select"]="none";n.element.style["-khtml-user-select"]="none";n.element.style["-moz-user-select"]="none";n.element.style["-ms-user-select"]="none";n.element.style["user-select"]="none"}n._width=n.element.clientWidth;n._height=n.element.clientHeight;var o=G.bind(undefined,n);if(typeof MutationObserver!=="undefined"){var s=new MutationObserver(o);s.observe(n.element,{attributes:true,subtree:true})}else{n.element.addEventListener("DOMSubtreeModified",o,false)}window.addEventListener("resize",o,false);window.addEventListener("keydown",N.bind(undefined,n),false);window.addEventListener("keyup",L.bind(undefined,n),false);n.element.oncontextmenu=X.bind(undefined,n);n.element.addEventListener("mousedown",U.bind(undefined,n),false);n.element.addEventListener("mouseup",D.bind(undefined,n),false);n.element.addEventListener("mousemove",P.bind(undefined,n),false);n.element.addEventListener("mouseenter",B.bind(undefined,n),false);var u=F.bind(undefined,n);n.element.addEventListener("mouseleave",u,false);n.element.addEventListener("mouseout",u,false);window.addEventListener("mouseleave",u,false);window.addEventListener("mouseout",u,false);var l=H.bind(undefined,n);n.element.addEventListener("blur",l,false);n.element.addEventListener("focusout",l,false);n.element.addEventListener("focus",l,false);window.addEventListener("blur",l,false);window.addEventListener("focusout",l,false);window.addEventListener("focus",l,false);h(n.element,V.bind(undefined,n),false);var f=T.bind(undefined,n);document.addEventListener("fullscreenchange",f,false);document.addEventListener("mozfullscreenchange",f,false);document.addEventListener("webkitfullscreenchange",f,false);n.element.addEventListener("click",E.bind(undefined,n),false);

var c=R.bind(undefined,n);document.addEventListener("pointerlockchange",c,false);document.addEventListener("mozpointerlockchange",c,false);document.addEventListener("webkitpointerlockchange",c,false);document.addEventListener("pointerlocklost",c,false);document.addEventListener("webkitpointerlocklost",c,false);document.addEventListener("mozpointerlocklost",c,false);n.fullscreen=t;n.pointerLock=r;n.bind("mouse-left","mouse-1");n.bind("mouse-right","mouse-3");n.bind("mouse-middle","mouse-2");n._lastTick=d();n.startTime=d();n.paused=false;n.emit("init")})},0);return n}t.exports=z},{"./lib/hrtime-polyfill.js":84,"./lib/mousewheel-polyfill.js":85,"./lib/raf-polyfill.js":86,"binary-search-bounds":87,domready:88,events:25,"invert-hash":89,"iota-array":90,uniq:91,util:47,vkey:92}],94:[function(e,t,r){arguments[4][18][0].apply(r,arguments)},{dup:18}],95:[function(e,t,r){"use strict";var n=typeof WeakMap==="undefined"?e("weak-map"):WeakMap;var i=new n;function a(e){return e.replace(/^[A-Z]+_/,"")}function o(e){var t=i.get(e);if(t){return t}var r={};var n=e.getSupportedExtensions();for(var o=0;o<n.length;++o){var s=n[o];if(s.indexOf("MOZ_")===0){continue}var u=e.getExtension(n[o]);if(!u){continue}while(true){r[s]=u;var l=a(s);if(l===s){break}s=l}}i.set(e,r);return r}t.exports=o},{"weak-map":94}],96:[function(e,t,r){"use strict";var n=e("./lib/create-uniforms");var i=e("./lib/create-attributes");var a=e("./lib/reflect");var o=e("./lib/shader-cache");var s=e("./lib/runtime-reflect");function u(e){this.gl=e;this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}var l=u.prototype;l.bind=function(){if(!this.program){this._relink()}this.gl.useProgram(this.program)};l.dispose=function(){if(this._fref){this._fref.dispose()}if(this._vref){this._vref.dispose()}this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null};function f(e,t){if(e.name<t.name){return-1}return 1}l.update=function(e,t,r,u){if(!t||arguments.length===1){var l=e;e=l.vertex;t=l.fragment;r=l.uniforms;u=l.attributes}var c=this;var h=c.gl;var d=c._vref;c._vref=o.shader(h,h.VERTEX_SHADER,e);if(d){d.dispose()}c.vertShader=c._vref.shader;var p=this._fref;c._fref=o.shader(h,h.FRAGMENT_SHADER,t);if(p){p.dispose()}c.fragShader=c._fref.shader;if(!r||!u){var g=h.createProgram();h.attachShader(g,c.fragShader);h.attachShader(g,c.vertShader);h.linkProgram(g);if(!h.getProgramParameter(g,h.LINK_STATUS)){var _=h.getProgramInfoLog(g);console.error("gl-shader: Error linking program:",_);throw new Error("gl-shader: Error linking program:"+_)}r=r||s.uniforms(h,g);u=u||s.attributes(h,g);h.deleteProgram(g)}u=u.slice();u.sort(f);var v=[];var m=[];var b=[];for(var y=0;y<u.length;++y){var w=u[y];if(w.type.indexOf("mat")>=0){var E=w.type.charAt(w.type.length-1)|0;var A=new Array(E);for(var T=0;T<E;++T){A[T]=b.length;m.push(w.name+"["+T+"]");if(typeof w.location==="number"){b.push(w.location+T)}else if(Array.isArray(w.location)&&w.location.length===E&&typeof w.location[T]==="number"){b.push(w.location[T]|0)}else{b.push(-1)}}v.push({name:w.name,type:w.type,locations:A})}else{v.push({name:w.name,type:w.type,locations:[b.length]});m.push(w.name);if(typeof w.location==="number"){b.push(w.location|0)}else{b.push(-1)}}}var x=0;for(var y=0;y<b.length;++y){if(b[y]<0){while(b.indexOf(x)>=0){x+=1}b[y]=x}}var R=new Array(r.length);function S(){c.program=o.program(h,c._vref,c._fref,m,b);for(var e=0;e<r.length;++e){R[e]=h.getUniformLocation(c.program,r[e].name)}}S();c._relink=S;c.types={uniforms:a(r),attributes:a(u)};c.attributes=i(h,c,v,b);Object.defineProperty(c,"uniforms",n(h,c,r,R))};function c(e,t,r,n,i){var a=new u(e);a.update(t,r,n,i);return a}t.exports=c},{"./lib/create-attributes":97,"./lib/create-uniforms":98,"./lib/reflect":99,"./lib/runtime-reflect":100,"./lib/shader-cache":101}],97:[function(e,t,r){"use strict";t.exports=s;function n(e,t,r,n,i,a){this._gl=e;this._wrapper=t;this._index=r;this._locations=n;this._dimension=i;this._constFunc=a}var i=n.prototype;i.pointer=function u(e,t,r,n){var i=this;var a=i._gl;var o=i._locations[i._index];a.vertexAttribPointer(o,i._dimension,e||a.FLOAT,!!t,r||0,n||0);a.enableVertexAttribArray(o)};i.set=function(e,t,r,n){return this._constFunc(this._locations[this._index],e,t,r,n)};Object.defineProperty(i,"location",{get:function(){return this._locations[this._index]},set:function(e){if(e!==this._locations[this._index]){this._locations[this._index]=e|0;this._wrapper.program=null}return e|0}});function a(e,t,r,i,a,o,s){var u=["gl","v"];var l=[];for(var f=0;f<a;++f){u.push("x"+f);l.push("x"+f)}u.push("if(x0.length===void 0){return gl.vertexAttrib"+a+"f(v,"+l.join()+")}else{return gl.vertexAttrib"+a+"fv(v,x0)}");var c=Function.apply(null,u);var h=new n(e,t,r,i,a,c);Object.defineProperty(o,s,{set:function(t){e.disableVertexAttribArray(i[r]);c(e,i[r],t);return t},get:function(){return h},enumerable:true})}function o(e,t,r,n,i,o,s){var u=new Array(i);var l=new Array(i);for(var f=0;f<i;++f){a(e,t,r[f],n,i,u,f);l[f]=u[f]}Object.defineProperty(u,"location",{set:function(e){if(Array.isArray(e)){for(var t=0;t<i;++t){l[t].location=e[t]}}else{for(var t=0;t<i;++t){l[t].location=e+t}}return e},get:function(){var e=new Array(i);for(var t=0;t<i;++t){e[t]=n[r[t]]}return e},enumerable:true});u.pointer=function(t,a,o,s){t=t||e.FLOAT;a=!!a;o=o||i*i;s=s||0;for(var u=0;u<i;++u){var l=n[r[u]];e.vertexAttribPointer(l,i,t,a,o,s+u*i);e.enableVertexAttribArray(l)}};var c=new Array(i);var h=e["vertexAttrib"+i+"fv"];Object.defineProperty(o,s,{set:function(t){for(var a=0;a<i;++a){var o=n[r[a]];e.disableVertexAttribArray(o);if(Array.isArray(t[0])){h.call(e,o,t[a])}else{for(var s=0;s<i;++s){c[s]=t[i*a+s]}h.call(e,o,c)}}return t},get:function(){return u},enumerable:true})}function s(e,t,r,n){var i={};for(var s=0,u=r.length;s<u;++s){var l=r[s];var f=l.name;var c=l.type;var h=l.locations;switch(c){case"bool":case"int":case"float":a(e,t,h[0],n,1,i,f);break;default:if(c.indexOf("vec")>=0){var d=c.charCodeAt(c.length-1)-48;if(d<2||d>4){throw new Error("gl-shader: Invalid data type for attribute "+f+": "+c)}a(e,t,h[0],n,d,i,f)}else if(c.indexOf("mat")>=0){var d=c.charCodeAt(c.length-1)-48;if(d<2||d>4){throw new Error("gl-shader: Invalid data type for attribute "+f+": "+c)}o(e,t,h,n,d,i,f)}else{throw new Error("gl-shader: Unknown data type for attribute "+f+": "+c)}break}}return i}},{}],98:[function(e,t,r){"use strict";var n=e("./reflect");t.exports=o;function i(e){var t=new Function("y","return function(){return y}");return t(e)}function a(e,t){var r=new Array(e);for(var n=0;n<e;++n){r[n]=t}return r}function o(e,t,r,o){function s(r){var n=new Function("gl","wrapper","locations","return function(){return gl.getUniform(wrapper.program,locations["+r+"])}");return n(e,t,o)}function u(e,t,r){switch(r){case"bool":case"int":case"sampler2D":case"samplerCube":return"gl.uniform1i(locations["+t+"],obj"+e+")";case"float":return"gl.uniform1f(locations["+t+"],obj"+e+")";default:var n=r.indexOf("vec");if(0<=n&&n<=1&&r.length===4+n){var i=r.charCodeAt(r.length-1)-48;if(i<2||i>4){throw new Error("gl-shader: Invalid data type")}switch(r.charAt(0)){case"b":case"i":return"gl.uniform"+i+"iv(locations["+t+"],obj"+e+")";case"v":return"gl.uniform"+i+"fv(locations["+t+"],obj"+e+")";default:throw new Error("gl-shader: Unrecognized data type for vector "+name+": "+r)}}else if(r.indexOf("mat")===0&&r.length===4){var i=r.charCodeAt(r.length-1)-48;if(i<2||i>4){throw new Error("gl-shader: Invalid uniform dimension type for matrix "+name+": "+r)}return"gl.uniformMatrix"+i+"fv(locations["+t+"],false,obj"+e+")"}else{throw new Error("gl-shader: Unknown uniform data type for "+name+": "+r)}break}}function l(e,t){if(typeof t!=="object"){return[[e,t]]}var r=[];for(var n in t){var i=t[n];var a=e;if(parseInt(n)+""===n){a+="["+n+"]"}else{a+="."+n}if(typeof i==="object"){r.push.apply(r,l(a,i))}else{r.push([a,i])}}return r}function f(t){var n=["return function updateProperty(obj){"];var i=l("",t);for(var a=0;a<i.length;++a){var s=i[a];var f=s[0];var c=s[1];if(o[c]){n.push(u(f,c,r[c].type))}}n.push("return obj}");var h=new Function("gl","locations",n.join("\n"));return h(e,o)}function c(e){switch(e){case"bool":return false;case"int":case"sampler2D":case"samplerCube":return 0;case"float":return 0;default:var t=e.indexOf("vec");if(0<=t&&t<=1&&e.length===4+t){var r=e.charCodeAt(e.length-1)-48;if(r<2||r>4){throw new Error("gl-shader: Invalid data type")}if(e.charAt(0)==="b"){return a(r,false)}return a(r,0)}else if(e.indexOf("mat")===0&&e.length===4){var r=e.charCodeAt(e.length-1)-48;if(r<2||r>4){throw new Error("gl-shader: Invalid uniform dimension type for matrix "+name+": "+e)}return a(r*r,0)}else{throw new Error("gl-shader: Unknown uniform data type for "+name+": "+e)}break}}function h(e,t,n){if(typeof n==="object"){var a=d(n);Object.defineProperty(e,t,{get:i(a),set:f(n),enumerable:true,configurable:false})}else{if(o[n]){Object.defineProperty(e,t,{get:s(n),set:f(n),enumerable:true,configurable:false})}else{e[t]=c(r[n].type)}}}function d(e){var t;if(Array.isArray(e)){t=new Array(e.length);for(var r=0;r<e.length;++r){h(t,r,e[r])}}else{t={};for(var n in e){h(t,n,e[n])}}return t}var p=n(r,true);return{get:i(d(p)),set:f(p),enumerable:true,configurable:true}}},{"./reflect":99}],99:[function(e,t,r){"use strict";t.exports=n;function n(e,t){var r={};for(var n=0;n<e.length;++n){var i=e[n].name;var a=i.split(".");var o=r;for(var s=0;s<a.length;++s){var u=a[s].split("[");if(u.length>1){if(!(u[0]in o)){o[u[0]]=[]}o=o[u[0]];for(var l=1;l<u.length;++l){var f=parseInt(u[l]);if(l<u.length-1||s<a.length-1){if(!(f in o)){if(l<u.length-1){o[f]=[]}else{o[f]={}}}o=o[f]}else{if(t){o[f]=n}else{o[f]=e[n].type}}}}else if(s<a.length-1){if(!(u[0]in o)){o[u[0]]={}}o=o[u[0]]}else{if(t){o[u[0]]=n}else{o[u[0]]=e[n].type}}}}return r}},{}],100:[function(e,t,r){"use strict";r.uniforms=o;r.attributes=s;var n={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"};var i=null;function a(e,t){if(!i){var r=Object.keys(n);i={};for(var a=0;a<r.length;++a){var o=r[a];i[e[o]]=n[o]}}return i[t]}function o(e,t){var r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);var n=[];for(var i=0;i<r;++i){var o=e.getActiveUniform(t,i);if(o){var s=a(e,o.type);if(o.size>1){for(var u=0;u<o.size;++u){n.push({name:o.name.replace("[0]","["+u+"]"),type:s})}}else{n.push({name:o.name,type:s})}}}return n}function s(e,t){var r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);var n=[];for(var i=0;i<r;++i){var o=e.getActiveAttrib(t,i);if(o){n.push({name:o.name,type:a(e,o.type)})}}return n}},{}],101:[function(e,t,r){"use strict";r.shader=d;r.program=p;var n=e("gl-format-compiler-error");var i=typeof WeakMap==="undefined"?e("weakmap-shim"):WeakMap;var a=new i;var o=0;function s(e,t,r,n,i,a,o){this.id=e;this.src=t;this.type=r;this.shader=n;this.count=a;this.programs=[];this.cache=o}s.prototype.dispose=function(){if(--this.count===0){var e=this.cache;var t=e.gl;var r=this.programs;for(var n=0,i=r.length;n<i;++n){var a=e.programs[r[n]];if(a){delete e.programs[n];t.deleteProgram(a)}}t.deleteShader(this.shader);delete e.shaders[this.type===t.FRAGMENT_SHADER|0][this.src]}};function u(e){this.gl=e;this.shaders=[{},{}];this.programs={}}var l=u.prototype;function f(e,t,r){var i=e.createShader(t);e.shaderSource(i,r);e.compileShader(i);if(!e.getShaderParameter(i,e.COMPILE_STATUS)){var a=e.getShaderInfoLog(i);try{var o=n(a,r,t)}catch(s){console.warn("Failed to format compiler error: "+s);throw new Error("gl-shader: Error compiling shader:\n"+a)}console.warn("gl-shader: "+o.long);throw new Error("gl-shader: "+o.short)}return i}l.getShaderReference=function(e,t){var r=this.gl;var n=this.shaders[e===r.FRAGMENT_SHADER|0];var i=n[t];if(!i||!r.isShader(i.shader)){var a=f(r,e,t);i=n[t]=new s(o++,t,e,a,[],1,this)}else{i.count+=1}return i};function c(e,t,r,n,i){var a=e.createProgram();e.attachShader(a,t);e.attachShader(a,r);for(var o=0;o<n.length;++o){e.bindAttribLocation(a,i[o],n[o])}e.linkProgram(a);if(!e.getProgramParameter(a,e.LINK_STATUS)){var s=e.getProgramInfoLog(a);console.error("gl-shader: Error linking program:",s);throw new Error("gl-shader: Error linking program:"+s)}return a}l.getProgram=function(e,t,r,n){var i=[e.id,t.id,r.join(":"),n.join(":")].join("@");var a=this.programs[i];if(!a||!this.gl.isProgram(a)){this.programs[i]=a=c(this.gl,e.shader,t.shader,r,n);e.programs.push(i);t.programs.push(i)}return a};function h(e){var t=a.get(e);if(!t){t=new u(e);a.set(e,t)}return t}function d(e,t,r){return h(e).getShaderReference(t,r)}function p(e,t,r,n,i){return h(e).getProgram(t,r,n,i)}},{"gl-format-compiler-error":102,"weakmap-shim":120}],102:[function(e,t,r){var n=e("sprintf-js").sprintf;var i=e("gl-constants/lookup");var a=e("glsl-shader-name");var o=e("add-line-numbers");t.exports=s;function s(e,t,r){"use strict";var s=a(t)||"of unknown name (see npm glsl-shader-name)";var u="unknown type";if(r!==undefined){u=r===i.FRAGMENT_SHADER?"fragment":"vertex"}var l=n("Error compiling %s shader %s:\n",u,s);var f=n("%s%s",l,e);var c=e.split("\n");var h={};for(var d=0;d<c.length;d++){var p=c[d];if(p==="")continue;var g=parseInt(p.split(":")[2]);if(isNaN(g)){throw new Error(n("Could not parse error: %s",p))}h[g]=p}var _=o(t).split("\n");for(var d=0;d<_.length;d++){if(!h[d+3]&&!h[d+2]&&!h[d+1])continue;var v=_[d];l+=v+"\n";if(h[d+1]){var m=h[d+1];m=m.substr(m.split(":",3).join(":").length+1).trim();l+=n("^^^ %s\n\n",m)}}return{"long":l.trim(),"short":f.trim()}}},{"add-line-numbers":103,"gl-constants/lookup":107,"glsl-shader-name":108,"sprintf-js":117}],103:[function(e,t,r){var n=e("pad-left");t.exports=i;function i(e,t,r){t=typeof t==="number"?t:1;r=r||": ";var i=e.split(/\r?\n/);var a=String(i.length+t-1).length;return i.map(function(e,i){var o=i+t;var s=String(o).length;var u=n(o,a-s);return u+r+e}).join("\n")}},{"pad-left":104}],104:[function(e,t,r){"use strict";var n=e("repeat-string");t.exports=function i(e,t,r){r=typeof r!=="undefined"?r+"":" ";return n(r,t)+e}},{"repeat-string":105}],105:[function(e,t,r){"use strict";var n="";var i;t.exports=a;function a(e,t){if(typeof e!=="string"){throw new TypeError("repeat-string expects a string.")}if(t===1)return e;if(t===2)return e+e;var r=e.length*t;if(i!==e||typeof i==="undefined"){i=e;n=""}while(r>n.length&&t>0){if(t&1){n+=e}t>>=1;if(!t)break;e+=e}return n.substr(0,r)}},{}],106:[function(e,t,r){t.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},{}],107:[function(e,t,r){var n=e("./1.0/numbers");t.exports=function i(e){return n[e]}},{"./1.0/numbers":106}],108:[function(e,t,r){var n=e("glsl-tokenizer");var i=e("atob-lite");t.exports=a;function a(e){var t=Array.isArray(e)?e:n(e);for(var r=0;r<t.length;r++){var a=t[r];if(a.type!=="preprocessor")continue;var o=a.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(!o)continue;if(!o[2])continue;var s=o[1];var u=o[2];return(s?i(u):u).trim()}}},{"atob-lite":109,"glsl-tokenizer":116}],109:[function(e,t,r){t.exports=function n(e){return atob(e)}},{}],110:[function(e,t,r){t.exports=A;var n=e("./lib/literals"),i=e("./lib/operators"),a=e("./lib/builtins"),o=e("./lib/literals-300es"),s=e("./lib/builtins-300es");var u=999,l=9999,f=0,c=1,h=2,d=3,p=4,g=5,_=6,v=7,m=8,b=9,y=10,w=11;var E=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"];function A(e){var t=0,r=0,A=u,T,x,R=[],S=[],C=0,k=0,j=1,I=0,L=0,N=false,O=false,M="",P;e=e||{};var U=a;var D=n;if(e.version==="300 es"){U=s;D=o}return function(e){S=[];if(e!==null)return F(e);return V()};function B(e){if(e.length){S.push({type:E[A],data:e,position:L,line:j,column:I})}}function F(e){t=0;M+=e;P=M.length;var n;while(T=M[t],t<P){n=t;switch(A){case f:t=z();break;case c:t=Y();break;case h:t=G();break;case d:t=q();break;case p:t=Z();break;case w:t=K();break;case g:t=J();break;case l:t=Q();break;case b:t=H();break;case u:t=X();break}if(n!==t){switch(M[n]){case"\n":I=0;++j;break;default:++I;break}}}r+=t;M=M.slice(t);return S}function V(e){if(R.length){B(R.join(""))}A=y;B("(eof)");return S}function X(){R=R.length?[]:R;if(x==="/"&&T==="*"){L=r+t-1;A=f;x=T;return t+1}if(x==="/"&&T==="/"){L=r+t-1;A=c;x=T;return t+1}if(T==="#"){A=h;L=r+t;return t}if(/\s/.test(T)){A=b;L=r+t;return t}N=/\d/.test(T);O=/[^\w_]/.test(T);L=r+t;A=N?p:O?d:l;return t}function H(){if(/[^\s]/g.test(T)){B(R.join(""));A=u;return t}R.push(T);x=T;return t+1}function G(){if(T==="\n"&&x!=="\\"){B(R.join(""));A=u;return t}R.push(T);x=T;return t+1}function Y(){return G()}function z(){if(T==="/"&&x==="*"){R.push(T);B(R.join(""));A=u;return t+1}R.push(T);x=T;return t+1}function q(){if(x==="."&&/\d/.test(T)){A=g;return t}if(x==="/"&&T==="*"){A=f;return t}if(x==="/"&&T==="/"){A=c;return t}if(T==="."&&R.length){while(W(R));A=g;return t}if(T===";"||T===")"||T==="("){if(R.length)while(W(R));B(T);A=u;return t+1}var e=R.length===2&&T!=="=";if(/[\w_\d\s]/.test(T)||e){while(W(R));A=u;return t}R.push(T);x=T;return t+1}function W(e){var t=0,r,n;do{r=i.indexOf(e.slice(0,e.length+t).join(""));n=i[r];if(r===-1){if(t--+e.length>0)continue;n=e.slice(0,1).join("")}B(n);L+=n.length;R=R.slice(n.length);return R.length}while(1)}function K(){if(/[^a-fA-F0-9]/.test(T)){B(R.join(""));A=u;return t}R.push(T);x=T;return t+1}function Z(){if(T==="."){R.push(T);A=g;x=T;return t+1}if(/[eE]/.test(T)){R.push(T);A=g;x=T;return t+1}if(T==="x"&&R.length===1&&R[0]==="0"){A=w;R.push(T);x=T;return t+1}if(/[^\d]/.test(T)){B(R.join(""));A=u;return t}R.push(T);x=T;return t+1}function J(){if(T==="f"){R.push(T);x=T;t+=1}if(/[eE]/.test(T)){R.push(T);x=T;return t+1}if(T==="-"&&/[eE]/.test(x)){R.push(T);x=T;return t+1}if(/[^\d]/.test(T)){B(R.join(""));A=u;return t}R.push(T);x=T;return t+1}function Q(){if(/[^\d\w_]/.test(T)){var e=R.join("");if(D.indexOf(e)>-1){A=m}else if(U.indexOf(e)>-1){A=v}else{A=_}B(R.join(""));A=u;return t}R.push(T);x=T;return t+1}}},{"./lib/builtins":112,"./lib/builtins-300es":111,"./lib/literals":114,"./lib/literals-300es":113,"./lib/operators":115}],111:[function(e,t,r){var n=e("./builtins");n=n.slice().filter(function(e){return!/^(gl\_|texture)/.test(e)});t.exports=n.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},{"./builtins":112}],112:[function(e,t,r){t.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},{}],113:[function(e,t,r){var n=e("./literals");t.exports=n.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uint","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},{"./literals":114}],114:[function(e,t,r){t.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},{}],115:[function(e,t,r){t.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},{}],116:[function(e,t,r){var n=e("./index");t.exports=i;function i(e,t){var r=n(t);var i=[];i=i.concat(r(e));i=i.concat(r(null));return i}},{"./index":110}],117:[function(e,t,r){(function(e){var t={not_string:/[^s]/,number:/[diefg]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijosuxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[\+\-]/};function n(){var e=arguments[0],t=n.cache;if(!(t[e]&&t.hasOwnProperty(e))){t[e]=n.parse(e)}return n.format.call(null,t[e],arguments)}n.format=function(e,r){var i=1,s=e.length,u="",l,f=[],c,h,d,p,g,_,v=true,m="";for(c=0;c<s;c++){u=a(e[c]);if(u==="string"){f[f.length]=e[c]}else if(u==="array"){d=e[c];if(d[2]){l=r[i];for(h=0;h<d[2].length;h++){if(!l.hasOwnProperty(d[2][h])){throw new Error(n("[sprintf] property '%s' does not exist",d[2][h]));

}l=l[d[2][h]]}}else if(d[1]){l=r[d[1]]}else{l=r[i++]}if(a(l)=="function"){l=l()}if(t.not_string.test(d[8])&&t.not_json.test(d[8])&&(a(l)!="number"&&isNaN(l))){throw new TypeError(n("[sprintf] expecting number but found %s",a(l)))}if(t.number.test(d[8])){v=l>=0}switch(d[8]){case"b":l=l.toString(2);break;case"c":l=String.fromCharCode(l);break;case"d":case"i":l=parseInt(l,10);break;case"j":l=JSON.stringify(l,null,d[6]?parseInt(d[6]):0);break;case"e":l=d[7]?l.toExponential(d[7]):l.toExponential();break;case"f":l=d[7]?parseFloat(l).toFixed(d[7]):parseFloat(l);break;case"g":l=d[7]?parseFloat(l).toPrecision(d[7]):parseFloat(l);break;case"o":l=l.toString(8);break;case"s":l=(l=String(l))&&d[7]?l.substring(0,d[7]):l;break;case"u":l=l>>>0;break;case"x":l=l.toString(16);break;case"X":l=l.toString(16).toUpperCase();break}if(t.json.test(d[8])){f[f.length]=l}else{if(t.number.test(d[8])&&(!v||d[3])){m=v?"+":"-";l=l.toString().replace(t.sign,"")}else{m=""}g=d[4]?d[4]==="0"?"0":d[4].charAt(1):" ";_=d[6]-(m+l).length;p=d[6]?_>0?o(g,_):"":"";f[f.length]=d[5]?m+l+p:g==="0"?m+p+l:p+m+l}}}return f.join("")};n.cache={};n.parse=function(e){var r=e,n=[],i=[],a=0;while(r){if((n=t.text.exec(r))!==null){i[i.length]=n[0]}else if((n=t.modulo.exec(r))!==null){i[i.length]="%"}else if((n=t.placeholder.exec(r))!==null){if(n[2]){a|=1;var o=[],s=n[2],u=[];if((u=t.key.exec(s))!==null){o[o.length]=u[1];while((s=s.substring(u[0].length))!==""){if((u=t.key_access.exec(s))!==null){o[o.length]=u[1]}else if((u=t.index_access.exec(s))!==null){o[o.length]=u[1]}else{throw new SyntaxError("[sprintf] failed to parse named argument key")}}}else{throw new SyntaxError("[sprintf] failed to parse named argument key")}n[2]=o}else{a|=2}if(a===3){throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported")}i[i.length]=n}else{throw new SyntaxError("[sprintf] unexpected placeholder")}r=r.substring(n[0].length)}return i};var i=function(e,t,r){r=(t||[]).slice(0);r.splice(0,0,e);return n.apply(null,r)};function a(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function o(e,t){return Array(t+1).join(e)}if(typeof r!=="undefined"){r.sprintf=n;r.vsprintf=i}else{e.sprintf=n;e.vsprintf=i;if(typeof define==="function"&&define.amd){define(function(){return{sprintf:n,vsprintf:i}})}}})(typeof window==="undefined"?this:window)},{}],118:[function(e,t,r){var n=e("./hidden-store.js");t.exports=i;function i(){var e={};return function(t){if((typeof t!=="object"||t===null)&&typeof t!=="function"){throw new Error("Weakmap-shim: Key must be object")}var r=t.valueOf(e);return r&&r.identity===e?r:n(t,e)}}},{"./hidden-store.js":119}],119:[function(e,t,r){t.exports=n;function n(e,t){var r={identity:t};var n=e.valueOf;Object.defineProperty(e,"valueOf",{value:function(e){return e!==t?n.apply(this,arguments):r},writable:true});return r}},{}],120:[function(e,t,r){var n=e("./create-store.js");t.exports=i;function i(){var e=n();return{get:function(t,r){var n=e(t);return n.hasOwnProperty("value")?n.value:r},set:function(t,r){e(t).value=r},has:function(t){return"value"in e(t)},"delete":function(t){return delete e(t).value}}}},{"./create-store.js":118}],121:[function(e,t,r){arguments[4][3][0].apply(r,arguments)},{"cwise-compiler":122,dup:3}],122:[function(e,t,r){arguments[4][4][0].apply(r,arguments)},{"./lib/thunk.js":124,dup:4}],123:[function(e,t,r){arguments[4][5][0].apply(r,arguments)},{dup:5,uniq:125}],124:[function(e,t,r){arguments[4][6][0].apply(r,arguments)},{"./compile.js":123,dup:6}],125:[function(e,t,r){arguments[4][7][0].apply(r,arguments)},{dup:7}],126:[function(e,t,r){arguments[4][8][0].apply(r,arguments)},{dup:8,"iota-array":127,"is-buffer":128}],127:[function(e,t,r){arguments[4][9][0].apply(r,arguments)},{dup:9}],128:[function(e,t,r){arguments[4][10][0].apply(r,arguments)},{dup:10}],129:[function(e,t,r){arguments[4][11][0].apply(r,arguments)},{dup:11}],130:[function(e,t,r){arguments[4][12][0].apply(r,arguments)},{dup:12}],131:[function(e,t,r){arguments[4][13][0].apply(r,arguments)},{"bit-twiddle":129,buffer:21,dup:13}],132:[function(e,t,r){"use strict";var n=e("ndarray");var i=e("ndarray-ops");var a=e("typedarray-pool");t.exports=y;var o=null;var s=null;var u=null;function l(e){o=[e.LINEAR,e.NEAREST_MIPMAP_LINEAR,e.LINEAR_MIPMAP_NEAREST,e.LINEAR_MIPMAP_NEAREST];s=[e.NEAREST,e.LINEAR,e.NEAREST_MIPMAP_NEAREST,e.NEAREST_MIPMAP_LINEAR,e.LINEAR_MIPMAP_NEAREST,e.LINEAR_MIPMAP_LINEAR];u=[e.REPEAT,e.CLAMP_TO_EDGE,e.MIRRORED_REPEAT]}var f=function(e,t){i.muls(e,t,255)};function c(e,t,r){var n=e.gl;var i=n.getParameter(n.MAX_TEXTURE_SIZE);if(t<0||t>i||r<0||r>i){throw new Error("gl-texture2d: Invalid texture size")}e._shape=[t,r];e.bind();n.texImage2D(n.TEXTURE_2D,0,e.format,t,r,0,e.format,e.type,null);e._mipLevels=[0];return e}function h(e,t,r,n,i,a){this.gl=e;this.handle=t;this.format=i;this.type=a;this._shape=[r,n];this._mipLevels=[0];this._magFilter=e.NEAREST;this._minFilter=e.NEAREST;this._wrapS=e.CLAMP_TO_EDGE;this._wrapT=e.CLAMP_TO_EDGE;this._anisoSamples=1;var o=this;var s=[this._wrapS,this._wrapT];Object.defineProperties(s,[{get:function(){return o._wrapS},set:function(e){return o.wrapS=e}},{get:function(){return o._wrapT},set:function(e){return o.wrapT=e}}]);this._wrapVector=s;var u=[this._shape[0],this._shape[1]];Object.defineProperties(u,[{get:function(){return o._shape[0]},set:function(e){return o.width=e}},{get:function(){return o._shape[1]},set:function(e){return o.height=e}}]);this._shapeVector=u}var d=h.prototype;Object.defineProperties(d,{minFilter:{get:function(){return this._minFilter},set:function(e){this.bind();var t=this.gl;if(this.type===t.FLOAT&&o.indexOf(e)>=0){if(!t.getExtension("OES_texture_float_linear")){e=t.NEAREST}}if(s.indexOf(e)<0){throw new Error("gl-texture2d: Unknown filter mode "+e)}t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e);return this._minFilter=e}},magFilter:{get:function(){return this._magFilter},set:function(e){this.bind();var t=this.gl;if(this.type===t.FLOAT&&o.indexOf(e)>=0){if(!t.getExtension("OES_texture_float_linear")){e=t.NEAREST}}if(s.indexOf(e)<0){throw new Error("gl-texture2d: Unknown filter mode "+e)}t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,e);return this._magFilter=e}},mipSamples:{get:function(){return this._anisoSamples},set:function(e){var t=this._anisoSamples;this._anisoSamples=Math.max(e,1)|0;if(t!==this._anisoSamples){var r=gl.getExtension("EXT_texture_filter_anisotropic");if(r){this.gl.texParameterf(this.gl.TEXTURE_2D,r.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(e){this.bind();if(u.indexOf(e)<0){throw new Error("gl-texture2d: Unknown wrap mode "+e)}this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,e);return this._wrapS=e}},wrapT:{get:function(){return this._wrapT},set:function(e){this.bind();if(u.indexOf(e)<0){throw new Error("gl-texture2d: Unknown wrap mode "+e)}this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,e);return this._wrapT=e}},wrap:{get:function(){return this._wrapVector},set:function(e){if(!Array.isArray(e)){e=[e,e]}if(e.length!==2){throw new Error("gl-texture2d: Must specify wrap mode for rows and columns")}for(var t=0;t<2;++t){if(u.indexOf(e[t])<0){throw new Error("gl-texture2d: Unknown wrap mode "+e)}}this._wrapS=e[0];this._wrapT=e[1];var r=this.gl;this.bind();r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,this._wrapS);r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,this._wrapT);return e}},shape:{get:function(){return this._shapeVector},set:function(e){if(!Array.isArray(e)){e=[e|0,e|0]}else{if(e.length!==2){throw new Error("gl-texture2d: Invalid texture shape")}}c(this,e[0]|0,e[1]|0);return[e[0]|0,e[1]|0]}},width:{get:function(){return this._shape[0]},set:function(e){e=e|0;c(this,e,this._shape[1]);return e}},height:{get:function(){return this._shape[1]},set:function(e){e=e|0;c(this,this._shape[0],e);return e}}});d.bind=function(e){var t=this.gl;if(e!==undefined){t.activeTexture(t.TEXTURE0+(e|0))}t.bindTexture(t.TEXTURE_2D,this.handle);if(e!==undefined){return e|0}return t.getParameter(t.ACTIVE_TEXTURE)-t.TEXTURE0};d.dispose=function(){this.gl.deleteTexture(this.handle)};d.generateMipmap=function(){this.bind();this.gl.generateMipmap(this.gl.TEXTURE_2D);var e=Math.min(this._shape[0],this._shape[1]);for(var t=0;e>0;++t,e>>>=1){if(this._mipLevels.indexOf(t)<0){this._mipLevels.push(t)}}};d.setPixels=function(e,t,r,n){var i=this.gl;this.bind();if(Array.isArray(t)){n=r;r=t[1]|0;t=t[0]|0}else{t=t||0;r=r||0}n=n||0;if(e instanceof HTMLCanvasElement||e instanceof ImageData||e instanceof HTMLImageElement||e instanceof HTMLVideoElement){var a=this._mipLevels.indexOf(n)<0;if(a){i.texImage2D(i.TEXTURE_2D,0,this.format,this.format,this.type,e);this._mipLevels.push(n)}else{i.texSubImage2D(i.TEXTURE_2D,n,t,r,this.format,this.type,e)}}else if(e.shape&&e.stride&&e.data){if(e.shape.length<2||t+e.shape[1]>this._shape[1]>>>n||r+e.shape[0]>this._shape[0]>>>n||t<0||r<0){throw new Error("gl-texture2d: Texture dimensions are out of bounds")}g(i,t,r,n,this.format,this.type,this._mipLevels,e)}else{throw new Error("gl-texture2d: Unsupported data type")}};function p(e,t){if(e.length===3){return t[2]===1&&t[1]===e[0]*e[2]&&t[0]===e[2]}return t[0]===1&&t[1]===e[0]}function g(e,t,r,o,s,u,l,c){var h=c.dtype;var d=c.shape.slice();if(d.length<2||d.length>3){throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d")}var g=0,_=0;var v=p(d,c.stride.slice());if(h==="float32"){g=e.FLOAT}else if(h==="float64"){g=e.FLOAT;v=false;h="float32"}else if(h==="uint8"){g=e.UNSIGNED_BYTE}else{g=e.UNSIGNED_BYTE;v=false;h="uint8"}var m=1;if(d.length===2){_=e.LUMINANCE;d=[d[0],d[1],1];c=n(c.data,d,[c.stride[0],c.stride[1],1],c.offset)}else if(d.length===3){if(d[2]===1){_=e.ALPHA}else if(d[2]===2){_=e.LUMINANCE_ALPHA}else if(d[2]===3){_=e.RGB}else if(d[2]===4){_=e.RGBA}else{throw new Error("gl-texture2d: Invalid shape for pixel coords")}m=d[2]}else{throw new Error("gl-texture2d: Invalid shape for texture")}if((_===e.LUMINANCE||_===e.ALPHA)&&(s===e.LUMINANCE||s===e.ALPHA)){_=s}if(_!==s){throw new Error("gl-texture2d: Incompatible texture format for setPixels")}var b=c.size;var y=l.indexOf(o)<0;if(y){l.push(o)}if(g===u&&v){if(c.offset===0&&c.data.length===b){if(y){e.texImage2D(e.TEXTURE_2D,o,s,d[0],d[1],0,s,u,c.data)}else{e.texSubImage2D(e.TEXTURE_2D,o,t,r,d[0],d[1],s,u,c.data)}}else{if(y){e.texImage2D(e.TEXTURE_2D,o,s,d[0],d[1],0,s,u,c.data.subarray(c.offset,c.offset+b))}else{e.texSubImage2D(e.TEXTURE_2D,o,t,r,d[0],d[1],s,u,c.data.subarray(c.offset,c.offset+b))}}}else{var w;if(u===e.FLOAT){w=a.mallocFloat32(b)}else{w=a.mallocUint8(b)}var E=n(w,d,[d[2],d[2]*d[0],1]);if(g===e.FLOAT&&u===e.UNSIGNED_BYTE){f(E,c)}else{i.assign(E,c)}if(y){e.texImage2D(e.TEXTURE_2D,o,s,d[0],d[1],0,s,u,w.subarray(0,b))}else{e.texSubImage2D(e.TEXTURE_2D,o,t,r,d[0],d[1],s,u,w.subarray(0,b))}if(u===e.FLOAT){a.freeFloat32(w)}else{a.freeUint8(w)}}}function _(e){var t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE);return t}function v(e,t,r,n,i){var a=e.getParameter(e.MAX_TEXTURE_SIZE);if(t<0||t>a||r<0||r>a){throw new Error("gl-texture2d: Invalid texture shape")}if(i===e.FLOAT&&!e.getExtension("OES_texture_float")){throw new Error("gl-texture2d: Floating point textures not supported on this platform")}var o=_(e);e.texImage2D(e.TEXTURE_2D,0,n,t,r,0,n,i,null);return new h(e,o,t,r,n,i)}function m(e,t,r,n){var i=_(e);e.texImage2D(e.TEXTURE_2D,0,r,r,n,t);return new h(e,i,t.width|0,t.height|0,r,n)}function b(e,t){var r=t.dtype;var o=t.shape.slice();var s=e.getParameter(e.MAX_TEXTURE_SIZE);if(o[0]<0||o[0]>s||o[1]<0||o[1]>s){throw new Error("gl-texture2d: Invalid texture size")}var u=p(o,t.stride.slice());var l=0;if(r==="float32"){l=e.FLOAT}else if(r==="float64"){l=e.FLOAT;u=false;r="float32"}else if(r==="uint8"){l=e.UNSIGNED_BYTE}else{l=e.UNSIGNED_BYTE;u=false;r="uint8"}var c=0;if(o.length===2){c=e.LUMINANCE;o=[o[0],o[1],1];t=n(t.data,o,[t.stride[0],t.stride[1],1],t.offset)}else if(o.length===3){if(o[2]===1){c=e.ALPHA}else if(o[2]===2){c=e.LUMINANCE_ALPHA}else if(o[2]===3){c=e.RGB}else if(o[2]===4){c=e.RGBA}else{throw new Error("gl-texture2d: Invalid shape for pixel coords")}}else{throw new Error("gl-texture2d: Invalid shape for texture")}if(l===e.FLOAT&&!e.getExtension("OES_texture_float")){l=e.UNSIGNED_BYTE;u=false}var d,g;var v=t.size;if(!u){var m=[o[2],o[2]*o[0],1];g=a.malloc(v,r);var b=n(g,o,m,0);if((r==="float32"||r==="float64")&&l===e.UNSIGNED_BYTE){f(b,t)}else{i.assign(b,t)}d=g.subarray(0,v)}else if(t.offset===0&&t.data.length===v){d=t.data}else{d=t.data.subarray(t.offset,t.offset+v)}var y=_(e);e.texImage2D(e.TEXTURE_2D,0,c,o[0],o[1],0,c,l,d);if(!u){a.free(g)}return new h(e,y,o[0],o[1],c,l)}function y(e){if(arguments.length<=1){throw new Error("gl-texture2d: Missing arguments for texture2d constructor")}if(!o){l(e)}if(typeof arguments[1]==="number"){return v(e,arguments[1],arguments[2],arguments[3]||e.RGBA,arguments[4]||e.UNSIGNED_BYTE)}if(Array.isArray(arguments[1])){return v(e,arguments[1][0]|0,arguments[1][1]|0,arguments[2]||e.RGBA,arguments[3]||e.UNSIGNED_BYTE)}if(typeof arguments[1]==="object"){var t=arguments[1];if(t instanceof HTMLCanvasElement||t instanceof HTMLImageElement||t instanceof HTMLVideoElement||t instanceof ImageData){return m(e,t,arguments[2]||e.RGBA,arguments[3]||e.UNSIGNED_BYTE)}else if(t.shape&&t.data&&t.stride){return b(e,t)}}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")}},{ndarray:126,"ndarray-ops":121,"typedarray-pool":131}],133:[function(e,t,r){(function n(e,t){if(typeof r==="object"&&r&&typeof r.nodeName!=="string"){t(r)}else if(typeof define==="function"&&define.amd){define(["exports"],t)}else{e.Mustache={};t(e.Mustache)}})(this,function i(e){var t=Object.prototype.toString;var r=Array.isArray||function x(e){return t.call(e)==="[object Array]"};function n(e){return typeof e==="function"}function i(e){return r(e)?"array":typeof e}function a(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function o(e,t){return e!=null&&typeof e==="object"&&t in e}var s=RegExp.prototype.test;function u(e,t){return s.call(e,t)}var l=/\S/;function f(e){return!u(l,e)}var c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function h(e){return String(e).replace(/[&<>"'`=\/]/g,function t(e){return c[e]})}var d=/\s*/;var p=/\s+/;var g=/\s*=/;var _=/\s*\}/;var v=/#|\^|\/|>|\{|&|=|!/;function m(t,n){if(!t)return[];var i=[];var o=[];var s=[];var u=false;var l=false;function c(){if(u&&!l){while(s.length)delete o[s.pop()]}else{s=[]}u=false;l=false}var h,m,E;function A(e){if(typeof e==="string")e=e.split(p,2);if(!r(e)||e.length!==2)throw new Error("Invalid tags: "+e);h=new RegExp(a(e[0])+"\\s*");m=new RegExp("\\s*"+a(e[1]));E=new RegExp("\\s*"+a("}"+e[1]))}A(n||e.tags);var T=new w(t);var x,R,S,C,k,j;while(!T.eos()){x=T.pos;S=T.scanUntil(h);if(S){for(var I=0,L=S.length;I<L;++I){C=S.charAt(I);if(f(C)){s.push(o.length)}else{l=true}o.push(["text",C,x,x+1]);x+=1;if(C==="\n")c()}}if(!T.scan(h))break;u=true;R=T.scan(v)||"name";T.scan(d);if(R==="="){S=T.scanUntil(g);T.scan(g);T.scanUntil(m)}else if(R==="{"){S=T.scanUntil(E);T.scan(_);T.scanUntil(m);R="&"}else{S=T.scanUntil(m)}if(!T.scan(m))throw new Error("Unclosed tag at "+T.pos);k=[R,S,x,T.pos];o.push(k);if(R==="#"||R==="^"){i.push(k)}else if(R==="/"){j=i.pop();if(!j)throw new Error('Unopened section "'+S+'" at '+x);if(j[1]!==S)throw new Error('Unclosed section "'+j[1]+'" at '+x)}else if(R==="name"||R==="{"||R==="&"){l=true}else if(R==="="){A(S)}}j=i.pop();if(j)throw new Error('Unclosed section "'+j[1]+'" at '+T.pos);return y(b(o))}function b(e){var t=[];var r,n;for(var i=0,a=e.length;i<a;++i){r=e[i];if(r){if(r[0]==="text"&&n&&n[0]==="text"){n[1]+=r[1];n[3]=r[3]}else{t.push(r);n=r}}}return t}function y(e){var t=[];var r=t;var n=[];var i,a;for(var o=0,s=e.length;o<s;++o){i=e[o];switch(i[0]){case"#":case"^":r.push(i);n.push(i);r=i[4]=[];break;case"/":a=n.pop();a[5]=i[2];r=n.length>0?n[n.length-1][4]:t;break;default:r.push(i)}}return t}function w(e){this.string=e;this.tail=e;this.pos=0}w.prototype.eos=function R(){return this.tail===""};w.prototype.scan=function S(e){var t=this.tail.match(e);if(!t||t.index!==0)return"";var r=t[0];this.tail=this.tail.substring(r.length);this.pos+=r.length;return r};w.prototype.scanUntil=function C(e){var t=this.tail.search(e),r;switch(t){case-1:r=this.tail;this.tail="";break;case 0:r="";break;default:r=this.tail.substring(0,t);this.tail=this.tail.substring(t)}this.pos+=r.length;return r};function E(e,t){this.view=e;this.cache={".":this.view};this.parent=t}E.prototype.push=function k(e){return new E(e,this)};E.prototype.lookup=function j(e){var t=this.cache;var r;if(t.hasOwnProperty(e)){r=t[e]}else{var i=this,a,s,u=false;while(i){if(e.indexOf(".")>0){r=i.view;a=e.split(".");s=0;while(r!=null&&s<a.length){if(s===a.length-1)u=o(r,a[s]);r=r[a[s++]]}}else{r=i.view[e];u=o(i.view,e)}if(u)break;i=i.parent}t[e]=r}if(n(r))r=r.call(this.view);return r};function A(){this.cache={}}A.prototype.clearCache=function I(){this.cache={}};A.prototype.parse=function L(e,t){var r=this.cache;var n=r[e];if(n==null)n=r[e]=m(e,t);return n};A.prototype.render=function N(e,t,r){var n=this.parse(e);var i=t instanceof E?t:new E(t);return this.renderTokens(n,i,r,e)};A.prototype.renderTokens=function O(e,t,r,n){var i="";var a,o,s;for(var u=0,l=e.length;u<l;++u){s=undefined;a=e[u];o=a[0];if(o==="#")s=this.renderSection(a,t,r,n);else if(o==="^")s=this.renderInverted(a,t,r,n);else if(o===">")s=this.renderPartial(a,t,r,n);else if(o==="&")s=this.unescapedValue(a,t);else if(o==="name")s=this.escapedValue(a,t);else if(o==="text")s=this.rawValue(a);if(s!==undefined)i+=s}return i};A.prototype.renderSection=function M(e,t,i,a){var o=this;var s="";var u=t.lookup(e[1]);function l(e){return o.render(e,t,i)}if(!u)return;if(r(u)){for(var f=0,c=u.length;f<c;++f){s+=this.renderTokens(e[4],t.push(u[f]),i,a)}}else if(typeof u==="object"||typeof u==="string"||typeof u==="number"){s+=this.renderTokens(e[4],t.push(u),i,a)}else if(n(u)){if(typeof a!=="string")throw new Error("Cannot use higher-order sections without the original template");u=u.call(t.view,a.slice(e[3],e[5]),l);if(u!=null)s+=u}else{s+=this.renderTokens(e[4],t,i,a)}return s};A.prototype.renderInverted=function P(e,t,n,i){var a=t.lookup(e[1]);if(!a||r(a)&&a.length===0)return this.renderTokens(e[4],t,n,i)};A.prototype.renderPartial=function U(e,t,r){if(!r)return;var i=n(r)?r(e[1]):r[e[1]];if(i!=null)return this.renderTokens(this.parse(i),t,r,i)};A.prototype.unescapedValue=function D(e,t){var r=t.lookup(e[1]);if(r!=null)return r};A.prototype.escapedValue=function B(t,r){var n=r.lookup(t[1]);if(n!=null)return e.escape(n)};A.prototype.rawValue=function F(e){return e[1]};e.name="mustache.js";e.version="2.2.1";e.tags=["{{","}}"];var T=new A;e.clearCache=function V(){return T.clearCache()};e.parse=function X(e,t){return T.parse(e,t)};e.render=function H(e,t,r){if(typeof e!=="string"){throw new TypeError('Invalid template! Template should be a "string" '+'but "'+i(e)+'" was given as the first '+"argument for mustache#render(template, view, partials)")}return T.render(e,t,r)};e.to_html=function G(t,r,i,a){var o=e.render(t,r,i);if(n(a)){a(o)}else{return o}};e.escape=h;e.Scanner=w;e.Context=E;e.Writer=A})},{}],134:[function(e,t,r){(function(r,n){(function(){"use strict";function i(e){return typeof e==="function"||typeof e==="object"&&e!==null}function a(e){return typeof e==="function"}function o(e){return typeof e==="object"&&e!==null}var s;if(!Array.isArray){s=function(e){return Object.prototype.toString.call(e)==="[object Array]"}}else{s=Array.isArray}var u=s;var l=Date.now||function(){return(new Date).getTime()};function f(){}var c=Object.create||function(e){if(arguments.length>1){throw new Error("Second argument not supported")}if(typeof e!=="object"){throw new TypeError("Argument must be an object")}f.prototype=e;return new f};function h(e,t){for(var r=0,n=e.length;r<n;r++){if(e[r]===t){return r}}return-1}function d(e){var t=e._promiseCallbacks;if(!t){t=e._promiseCallbacks={}}return t}var p={mixin:function(e){e["on"]=this["on"];e["off"]=this["off"];e["trigger"]=this["trigger"];e._promiseCallbacks=undefined;return e},on:function(e,t){if(typeof t!=="function"){throw new TypeError("Callback must be a function")}var r=d(this),n;n=r[e];if(!n){n=r[e]=[]}if(h(n,t)===-1){n.push(t)}},off:function(e,t){var r=d(this),n,i;if(!t){r[e]=[];return}n=r[e];i=h(n,t);if(i!==-1){n.splice(i,1)}},trigger:function(e,t,r){var n=d(this),i,a;if(i=n[e]){for(var o=0;o<i.length;o++){a=i[o];a(t,r)}}}};var g={instrument:false};p["mixin"](g);function _(e,t){if(e==="onerror"){g["on"]("error",t);return}if(arguments.length===2){g[e]=t}else{return g[e]}}var v=[];function m(){setTimeout(function(){var e;for(var t=0;t<v.length;t++){e=v[t];var r=e.payload;r.guid=r.key+r.id;r.childGuid=r.key+r.childId;if(r.error){r.stack=r.error.stack}g["trigger"](e.name,e.payload)}v.length=0},50)}function b(e,t,r){if(1===v.push({name:e,payload:{key:t._guidKey,id:t._id,eventName:e,detail:t._result,childId:r&&r._id,label:t._label,timeStamp:l(),error:g["instrument-with-stack"]?new Error(t._label):null}})){m()}}var y=b;function w(e,t,r){var n=this;var i=n._state;if(i===H&&!e||i===G&&!t){g.instrument&&y("chained",n,n);return n}n._onError=null;var a=new n.constructor(V,r);var o=n._result;g.instrument&&y("chained",n,a);if(i){var s=arguments[i-1];g.async(function(){oe(i,a,s,o)})}else{te(n,a,e,t)}return a}var E=w;function A(e,t){var r=this;if(e&&typeof e==="object"&&e.constructor===r){return e}var n=new r(V,t);J(n,e);return n}var T=A;function x(e,t,r){if(e===H){return{state:"fulfilled",value:r}}else{return{state:"rejected",reason:r}}}function R(e,t,r,n){this._instanceConstructor=e;this.promise=new e(V,n);this._abortOnReject=r;if(this._validateInput(t)){this._input=t;this.length=t.length;this._remaining=t.length;this._init();if(this.length===0){$(this.promise,this._result)}else{this.length=this.length||0;this._enumerate();if(this._remaining===0){$(this.promise,this._result)}}}else{ee(this.promise,this._validationError())}}var S=R;R.prototype._validateInput=function(e){return u(e)};R.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")};R.prototype._init=function(){this._result=new Array(this.length)};R.prototype._enumerate=function(){var e=this.length;var t=this.promise;var r=this._input;for(var n=0;t._state===X&&n<e;n++){this._eachEntry(r[n],n)}};R.prototype._settleMaybeThenable=function(e,t){var r=this._instanceConstructor;var n=r.resolve;if(n===T){var i=z(e);if(i===E&&e._state!==X){e._onError=null;this._settledAt(e._state,t,e._result)}else if(typeof i!=="function"){this._remaining--;this._result[t]=this._makeResult(H,t,e)}else if(r===B){var a=new r(V);Z(a,e,i);this._willSettleAt(a,t)}else{this._willSettleAt(new r(function(t){t(e)}),t)}}else{this._willSettleAt(n(e),t)}};R.prototype._eachEntry=function(e,t){if(o(e)){this._settleMaybeThenable(e,t)}else{this._remaining--;this._result[t]=this._makeResult(H,t,e)}};R.prototype._settledAt=function(e,t,r){var n=this.promise;if(n._state===X){this._remaining--;if(this._abortOnReject&&e===G){ee(n,r)}else{this._result[t]=this._makeResult(e,t,r)}}if(this._remaining===0){$(n,this._result)}};R.prototype._makeResult=function(e,t,r){return r};R.prototype._willSettleAt=function(e,t){var r=this;te(e,undefined,function(e){r._settledAt(H,t,e)},function(e){r._settledAt(G,t,e)})};function C(e,t){return new S(this,e,true,t).promise}var k=C;function j(e,t){var r=this;var n=new r(V,t);if(!u(e)){ee(n,new TypeError("You must pass an array to race."));return n}var i=e.length;function a(e){J(n,e)}function o(e){ee(n,e)}for(var s=0;n._state===X&&s<i;s++){te(r.resolve(e[s]),undefined,a,o)}return n}var I=j;function L(e,t){var r=this;var n=new r(V,t);ee(n,e);return n}var N=L;var O="rsvp_"+l()+"-";var M=0;function P(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function U(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function D(e,t){this._id=M++;this._label=t;this._state=undefined;this._result=undefined;this._subscribers=[];g.instrument&&y("created",this);if(V!==e){typeof e!=="function"&&P();this instanceof D?se(this,e):U()}}var B=D;D.cast=T;D.all=k;D.race=I;D.resolve=T;D.reject=N;D.prototype={constructor:D,_guidKey:O,_onError:function(e){var t=this;g.after(function(){if(t._onError){g["trigger"]("error",e,t._label)}})},then:E,"catch":function(e,t){return this.then(undefined,e,t)},"finally":function(e,t){var r=this;var n=r.constructor;return r.then(function(t){return n.resolve(e()).then(function(){return t})},function(t){return n.resolve(e()).then(function(){return n.reject(t)})},t)}};function F(){return new TypeError("A promises callback cannot return that same promise.")}function V(){}var X=void 0;var H=1;var G=2;var Y=new ne;function z(e){try{return e.then}catch(t){Y.error=t;return Y}}function q(e,t,r,n){try{e.call(t,r,n)}catch(i){return i}}function W(e,t,r){g.async(function(e){var n=false;var i=q(r,t,function(r){if(n){return}n=true;if(t!==r){J(e,r,undefined)}else{$(e,r)}},function(t){if(n){return}n=true;ee(e,t)},"Settle: "+(e._label||" unknown promise"));if(!n&&i){n=true;ee(e,i)}},e)}function K(e,t){if(t._state===H){$(e,t._result)}else if(t._state===G){t._onError=null;ee(e,t._result)}else{te(t,undefined,function(r){if(t!==r){J(e,r,undefined)}else{$(e,r)}},function(t){ee(e,t)})}}function Z(e,t,r){if(t.constructor===e.constructor&&r===E&&constructor.resolve===T){K(e,t)}else{if(r===Y){ee(e,Y.error)}else if(r===undefined){$(e,t)}else if(a(r)){W(e,t,r)}else{$(e,t)}}}function J(e,t){if(e===t){$(e,t)}else if(i(t)){Z(e,t,z(t))}else{$(e,t)}}function Q(e){if(e._onError){e._onError(e._result)}re(e)}function $(e,t){if(e._state!==X){return}e._result=t;e._state=H;if(e._subscribers.length===0){if(g.instrument){y("fulfilled",e)}}else{g.async(re,e)}}function ee(e,t){if(e._state!==X){return}e._state=G;e._result=t;g.async(Q,e)}function te(e,t,r,n){var i=e._subscribers;var a=i.length;e._onError=null;i[a]=t;i[a+H]=r;i[a+G]=n;if(a===0&&e._state){g.async(re,e)}}function re(e){var t=e._subscribers;var r=e._state;if(g.instrument){y(r===H?"fulfilled":"rejected",e)}if(t.length===0){return}var n,i,a=e._result;for(var o=0;o<t.length;o+=3){n=t[o];i=t[o+r];if(n){oe(r,n,i,a)}else{i(a)}}e._subscribers.length=0}function ne(){this.error=null}var ie=new ne;function ae(e,t){try{return e(t)}catch(r){ie.error=r;return ie}}function oe(e,t,r,n){var i=a(r),o,s,u,l;if(i){o=ae(r,n);if(o===ie){l=true;s=o.error;o=null}else{u=true}if(t===o){ee(t,F());return}}else{o=n;u=true}if(t._state!==X){}else if(i&&u){J(t,o)}else if(l){ee(t,s)}else if(e===H){$(t,o)}else if(e===G){ee(t,o)}}function se(e,t){var r=false;try{t(function i(t){if(r){return}r=true;J(e,t)},function a(t){if(r){return}r=true;ee(e,t)})}catch(n){ee(e,n)}}function ue(e,t,r){this._superConstructor(e,t,false,r)}ue.prototype=c(S.prototype);ue.prototype._superConstructor=S;ue.prototype._makeResult=x;ue.prototype._validationError=function(){return new Error("allSettled must be called with an array")};function le(e,t){return new ue(B,e,t).promise}var fe=le;function ce(e,t){return B.all(e,t)}var he=ce;var de=0;var pe={}.toString;var ge;function _e(e,t){Ce[de]=e;Ce[de+1]=t;de+=2;if(de===2){Ie()}}var ve=_e;var me=typeof window!=="undefined"?window:undefined;var be=me||{};var ye=be.MutationObserver||be.WebKitMutationObserver;var we=typeof self==="undefined"&&typeof r!=="undefined"&&{}.toString.call(r)==="[object process]";var Ee=typeof Uint8ClampedArray!=="undefined"&&typeof importScripts!=="undefined"&&typeof MessageChannel!=="undefined";function Ae(){var e=r.nextTick;var t=r.versions.node.match(/^(?:(\d+)\.)?(?:(\d+)\.)?(\*|\d+)$/);if(Array.isArray(t)&&t[1]==="0"&&t[2]==="10"){e=setImmediate}return function(){e(ke)}}function Te(){return function(){ge(ke)}}function xe(){var e=0;var t=new ye(ke);var r=document.createTextNode("");t.observe(r,{characterData:true});return function(){r.data=e=++e%2}}function Re(){var e=new MessageChannel;e.port1.onmessage=ke;return function(){e.port2.postMessage(0)}}function Se(){return function(){setTimeout(ke,1)}}var Ce=new Array(1e3);function ke(){for(var e=0;e<de;e+=2){var t=Ce[e];var r=Ce[e+1];t(r);Ce[e]=undefined;Ce[e+1]=undefined}de=0}function je(){try{var t=e;var r=t("vertx");ge=r.runOnLoop||r.runOnContext;return Te()}catch(n){return Se()}}var Ie;if(we){Ie=Ae()}else if(ye){Ie=xe()}else if(Ee){Ie=Re()}else if(me===undefined&&typeof e==="function"){Ie=je()}else{Ie=Se()}function Le(e){var t={};t["promise"]=new B(function(e,r){t["resolve"]=e;t["reject"]=r},e);return t}var Ne=Le;function Oe(e,t,r){return B.all(e,r).then(function(e){if(!a(t)){throw new TypeError("You must pass a function as filter's second argument.")}var n=e.length;var i=new Array(n);for(var o=0;o<n;o++){i[o]=t(e[o])}return B.all(i,r).then(function(t){var r=new Array(n);var i=0;for(var a=0;a<n;a++){if(t[a]){r[i]=e[a];i++}}r.length=i;return r})})}var Me=Oe;function Pe(e,t,r){this._superConstructor(e,t,true,r)}var Ue=Pe;Pe.prototype=c(S.prototype);Pe.prototype._superConstructor=S;Pe.prototype._init=function(){this._result={}};Pe.prototype._validateInput=function(e){return e&&typeof e==="object"};Pe.prototype._validationError=function(){return new Error("Promise.hash must be called with an object")};Pe.prototype._enumerate=function(){var e=this;var t=e.promise;var r=e._input;var n=[];for(var i in r){if(t._state===X&&Object.prototype.hasOwnProperty.call(r,i)){n.push({position:i,entry:r[i]})}}var a=n.length;e._remaining=a;var o;for(var s=0;t._state===X&&s<a;s++){o=n[s];e._eachEntry(o.entry,o.position)}};function De(e,t,r){this._superConstructor(e,t,false,r)}De.prototype=c(Ue.prototype);De.prototype._superConstructor=S;De.prototype._makeResult=x;De.prototype._validationError=function(){return new Error("hashSettled must be called with an object")};function Be(e,t){return new De(B,e,t).promise}var Fe=Be;function Ve(e,t){return new Ue(B,e,t).promise}var Xe=Ve;function He(e,t,r){return B.all(e,r).then(function(e){if(!a(t)){throw new TypeError("You must pass a function as map's second argument.")}var n=e.length;var i=new Array(n);for(var o=0;o<n;o++){i[o]=t(e[o])}return B.all(i,r)})}var Ge=He;function Ye(){this.value=undefined}var ze=new Ye;var qe=new Ye;function We(e){try{return e.then}catch(t){ze.value=t;return ze}}function Ke(e,t,r){try{e.apply(t,r)}catch(n){ze.value=n;return ze}}function Ze(e,t){var r={};var n;var i;var a=e.length;var o=new Array(a);for(var s=0;s<a;s++){o[s]=e[s]}for(i=0;i<t.length;i++){n=t[i];r[n]=o[i+1]}return r}function Je(e){var t=e.length;var r=new Array(t-1);for(var n=1;n<t;n++){r[n-1]=e[n]}return r}function Qe(e,t){return{then:function(r,n){return e.call(t,r,n)}}}function $e(e,t){var r=function(){var r=this;var n=arguments.length;var i=new Array(n+1);var a;var o=false;for(var s=0;s<n;++s){a=arguments[s];if(!o){o=nt(a);if(o===qe){var l=new B(V);ee(l,qe.value);return l}else if(o&&o!==true){a=Qe(o,a)}}i[s]=a}var f=new B(V);i[n]=function(e,r){if(e)ee(f,e);else if(t===undefined)J(f,r);else if(t===true)J(f,Je(arguments));else if(u(t))J(f,Ze(arguments,t));else J(f,r)};if(o){return rt(f,i,e,r)}else{return tt(f,i,e,r)}};r.__proto__=e;return r}var et=$e;function tt(e,t,r,n){var i=Ke(r,n,t);if(i===ze){ee(e,i.value)}return e}function rt(e,t,r,n){return B.all(t).then(function(t){var i=Ke(r,n,t);if(i===ze){ee(e,i.value)}return e})}function nt(e){if(e&&typeof e==="object"){if(e.constructor===B){return true}else{return We(e)}}else{return false}}var it;if(typeof self==="object"){it=self}else if(typeof n==="object"){it=n}else{throw new Error("no global: `self` or `global` found");

}var at=it;function ot(e,t){return B.race(e,t)}var st=ot;function ut(e,t){return B.reject(e,t)}var lt=ut;function ft(e,t){return B.resolve(e,t)}var ct=ft;function ht(e){setTimeout(function(){throw e});throw e}var dt=ht;g.async=ve;g.after=function(e){setTimeout(e,0)};var pt=ct;function gt(e,t){g.async(e,t)}function _t(){g["on"].apply(g,arguments)}function vt(){g["off"].apply(g,arguments)}if(typeof window!=="undefined"&&typeof window["__PROMISE_INSTRUMENTATION__"]==="object"){var mt=window["__PROMISE_INSTRUMENTATION__"];_("instrument",true);for(var bt in mt){if(mt.hasOwnProperty(bt)){_t(bt,mt[bt])}}}var yt={race:st,Promise:B,allSettled:fe,hash:Xe,hashSettled:Fe,denodeify:et,on:_t,off:vt,map:Ge,filter:Me,resolve:ct,reject:lt,all:he,rethrow:dt,defer:Ne,EventTarget:p,configure:_,async:gt};if(typeof define==="function"&&define["amd"]){define(function(){return yt})}else if(typeof t!=="undefined"&&t["exports"]){t["exports"]=yt}else if(typeof at!=="undefined"){at["RSVP"]=yt}}).call(this)}).call(this,e("_process"),typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{_process:29}],135:[function(e,t,r){(function(e){"use strict";if(e.fetch){return}function t(e){if(typeof e!=="string"){e=String(e)}if(/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e)){throw new TypeError("Invalid character in header field name")}return e.toLowerCase()}function r(e){if(typeof e!=="string"){e=String(e)}return e}function n(e){this.map={};if(e instanceof n){e.forEach(function(e,t){this.append(t,e)},this)}else if(e){Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}}n.prototype.append=function(e,n){e=t(e);n=r(n);var i=this.map[e];if(!i){i=[];this.map[e]=i}i.push(n)};n.prototype["delete"]=function(e){delete this.map[t(e)]};n.prototype.get=function(e){var r=this.map[t(e)];return r?r[0]:null};n.prototype.getAll=function(e){return this.map[t(e)]||[]};n.prototype.has=function(e){return this.map.hasOwnProperty(t(e))};n.prototype.set=function(e,n){this.map[t(e)]=[r(n)]};n.prototype.forEach=function(e,t){Object.getOwnPropertyNames(this.map).forEach(function(r){this.map[r].forEach(function(n){e.call(t,n,r,this)},this)},this)};function i(e){if(e.bodyUsed){return Promise.reject(new TypeError("Already read"))}e.bodyUsed=true}function a(e){return new Promise(function(t,r){e.onload=function(){t(e.result)};e.onerror=function(){r(e.error)}})}function o(e){var t=new FileReader;t.readAsArrayBuffer(e);return a(t)}function s(e){var t=new FileReader;t.readAsText(e);return a(t)}var u={blob:"FileReader"in e&&"Blob"in e&&function(){try{new Blob;return true}catch(e){return false}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};function l(){this.bodyUsed=false;this._initBody=function(e){this._bodyInit=e;if(typeof e==="string"){this._bodyText=e}else if(u.blob&&Blob.prototype.isPrototypeOf(e)){this._bodyBlob=e}else if(u.formData&&FormData.prototype.isPrototypeOf(e)){this._bodyFormData=e}else if(!e){this._bodyText=""}else if(u.arrayBuffer&&ArrayBuffer.prototype.isPrototypeOf(e)){}else{throw new Error("unsupported BodyInit type")}if(!this.headers.get("content-type")){if(typeof e==="string"){this.headers.set("content-type","text/plain;charset=UTF-8")}else if(this._bodyBlob&&this._bodyBlob.type){this.headers.set("content-type",this._bodyBlob.type)}}};if(u.blob){this.blob=function(){var e=i(this);if(e){return e}if(this._bodyBlob){return Promise.resolve(this._bodyBlob)}else if(this._bodyFormData){throw new Error("could not read FormData body as blob")}else{return Promise.resolve(new Blob([this._bodyText]))}};this.arrayBuffer=function(){return this.blob().then(o)};this.text=function(){var e=i(this);if(e){return e}if(this._bodyBlob){return s(this._bodyBlob)}else if(this._bodyFormData){throw new Error("could not read FormData body as text")}else{return Promise.resolve(this._bodyText)}}}else{this.text=function(){var e=i(this);return e?e:Promise.resolve(this._bodyText)}}if(u.formData){this.formData=function(){return this.text().then(d)}}this.json=function(){return this.text().then(JSON.parse)};return this}var f=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function c(e){var t=e.toUpperCase();return f.indexOf(t)>-1?t:e}function h(e,t){t=t||{};var r=t.body;if(h.prototype.isPrototypeOf(e)){if(e.bodyUsed){throw new TypeError("Already read")}this.url=e.url;this.credentials=e.credentials;if(!t.headers){this.headers=new n(e.headers)}this.method=e.method;this.mode=e.mode;if(!r){r=e._bodyInit;e.bodyUsed=true}}else{this.url=e}this.credentials=t.credentials||this.credentials||"omit";if(t.headers||!this.headers){this.headers=new n(t.headers)}this.method=c(t.method||this.method||"GET");this.mode=t.mode||this.mode||null;this.referrer=null;if((this.method==="GET"||this.method==="HEAD")&&r){throw new TypeError("Body not allowed for GET or HEAD requests")}this._initBody(r)}h.prototype.clone=function(){return new h(this)};function d(e){var t=new FormData;e.trim().split("&").forEach(function(e){if(e){var r=e.split("=");var n=r.shift().replace(/\+/g," ");var i=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(i))}});return t}function p(e){var t=new n;var r=e.getAllResponseHeaders().trim().split("\n");r.forEach(function(e){var r=e.trim().split(":");var n=r.shift().trim();var i=r.join(":").trim();t.append(n,i)});return t}l.call(h.prototype);function g(e,t){if(!t){t={}}this.type="default";this.status=t.status;this.ok=this.status>=200&&this.status<300;this.statusText=t.statusText;this.headers=t.headers instanceof n?t.headers:new n(t.headers);this.url=t.url||"";this._initBody(e)}l.call(g.prototype);g.prototype.clone=function(){return new g(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new n(this.headers),url:this.url})};g.error=function(){var e=new g(null,{status:0,statusText:""});e.type="error";return e};var _=[301,302,303,307,308];g.redirect=function(e,t){if(_.indexOf(t)===-1){throw new RangeError("Invalid status code")}return new g(null,{status:t,headers:{location:e}})};e.Headers=n;e.Request=h;e.Response=g;e.fetch=function(e,t){return new Promise(function(r,n){var i;if(h.prototype.isPrototypeOf(e)&&!t){i=e}else{i=new h(e,t)}var a=new XMLHttpRequest;function o(){if("responseURL"in a){return a.responseURL}if(/^X-Request-URL:/m.test(a.getAllResponseHeaders())){return a.getResponseHeader("X-Request-URL")}return}a.onload=function(){var e=a.status===1223?204:a.status;if(e<100||e>599){n(new TypeError("Network request failed"));return}var t={status:e,statusText:a.statusText,headers:p(a),url:o()};var i="response"in a?a.response:a.responseText;r(new g(i,t))};a.onerror=function(){n(new TypeError("Network request failed"))};a.open(i.method,i.url,true);if(i.credentials==="include"){a.withCredentials=true}if("responseType"in a&&u.blob){a.responseType="blob"}i.headers.forEach(function(e,t){a.setRequestHeader(t,e)});a.send(typeof i._bodyInit==="undefined"?null:i._bodyInit)})};e.fetch.polyfill=true})(typeof self!=="undefined"?self:this)},{}]},{},[1]);