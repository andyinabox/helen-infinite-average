(function e(t,r,n){function i(o,s){if(!r[o]){if(!t[o]){var u=typeof require=="function"&&require;if(!s&&u)return u(o,!0);if(a)return a(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var f=r[o]={exports:{}};t[o][0].call(f.exports,function(e){var r=t[o][1][e];return i(r?r:e)},f,f.exports,e,t,r,n)}return r[o].exports}var a=typeof require=="function"&&require;for(var o=0;o<n.length;o++)i(n[o]);return i})({1:[function(e,t,r){var n=e("lodash");var i=e("gl-now")();var a=e("gl-shader");var o=e("gl-texture2d");var s=e("a-big-triangle");var u=e("rsvp");var l=e("get-pixels");var f=e("exdat");e("whatwg-fetch");var c=window.fetch;var h="#define GLSLIFY 1\nattribute vec2 position;\nvarying vec2 texCoord;\nvoid main() {\n  gl_Position = vec4(position, 0.0, 1.0);\n	texCoord = vec2(0.0,1.0)+vec2(0.5,-0.5) * (position + 1.0);\n}	";var d;var p="https://s3.amazonaws.com/helen-images/annotations.json";var _="https://s3.amazonaws.com/helen-images/images/";var v=[];var g=3;var m;var y;var b={dataIndex:0,nTextures:10,displacement:.001};var w=0;var E=c("./assets/shader.frag.tpl").then(T).then(function(e){d=n.template(e)});var A=c(p).then(x).then(function(e){m=e;for(var t=0;t<b.nTextures;t++){C(m[t]).then(function(e){v.push(o(gl,e))})}});i.on("gl-init",function(){gl=i.gl;_gui=new f.GUI;_gui.add(b,"displacement",0,.1);E.then(function(){A.then(function(){shader=a(gl,h,R(b.nTextures));shader.attributes.position.location=0})})});i.on("tick",function(){w++;if(w>=b.nTextures){w=0}});i.on("gl-render",function(e){var t=i.gl;if(v.length>=b.nTextures&&shader){shader.bind();shader.uniforms.displacement=b.displacement;for(var r=0;r<b.nTextures;r++){shader.uniforms["tex"+r]=v[Math.abs(w-r)].bind(r)}shader.attributes.position.pointer();s(t)}});i.on("gl-error",function(e){throw new Error("WebGL not supported :(")});function x(e){return e.json()}function T(e){return e.text()}function R(e){var t=d({iterator:k(e)});return t}function S(e){console.log("loadImageId",e);rloadImageFromData(m[e]).then(function(e){_texture=o(i.gl,e)})}function C(e){var t=_+e[0][0];return j(t)}function j(e){return new u.Promise(function(t,r){l(e,function(e,n){if(e){r(e)}else{t(n)}})})}function k(e){var t=[];for(var r=0;r<e;r++){t.push(r+"")}return t}},{"a-big-triangle":19,exdat:69,"get-pixels":70,"gl-now":83,"gl-shader":96,"gl-texture2d":132,lodash:133,rsvp:134,"whatwg-fetch":135}],2:[function(e,t,r){"use strict";var n=e("typedarray-pool");var i=e("ndarray-ops");var a=e("ndarray");var o=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function s(e,t,r,n,i){this.gl=e;this.type=t;this.handle=r;this.length=n;this.usage=i}var u=s.prototype;u.bind=function(){this.gl.bindBuffer(this.type,this.handle)};u.unbind=function(){this.gl.bindBuffer(this.type,null)};u.dispose=function(){this.gl.deleteBuffer(this.handle)};function l(e,t,r,n,i,a){var o=i.length*i.BYTES_PER_ELEMENT;if(a<0){e.bufferData(t,i,n);return o}if(o+a>r){throw new Error("gl-buffer: If resizing buffer, must not specify offset")}e.bufferSubData(t,a,i);return r}function f(e,t){var r=n.malloc(e.length,t);var i=e.length;for(var a=0;a<i;++a){r[a]=e[a]}return r}function c(e,t){var r=1;for(var n=t.length-1;n>=0;--n){if(t[n]!==r){return false}r*=e[n]}return true}u.update=function(e,t){if(typeof t!=="number"){t=-1}this.bind();if(typeof e==="object"&&typeof e.shape!=="undefined"){var r=e.dtype;if(o.indexOf(r)<0){r="float32"}if(this.type===this.gl.ELEMENT_ARRAY_BUFFER){var s=gl.getExtension("OES_element_index_uint");if(s&&r!=="uint16"){r="uint32"}else{r="uint16"}}if(r===e.dtype&&c(e.shape,e.stride)){if(e.offset===0&&e.data.length===e.shape[0]){this.length=l(this.gl,this.type,this.length,this.usage,e.data,t)}else{this.length=l(this.gl,this.type,this.length,this.usage,e.data.subarray(e.offset,e.shape[0]),t)}}else{var u=n.malloc(e.size,r);var h=a(u,e.shape);i.assign(h,e);if(t<0){this.length=l(this.gl,this.type,this.length,this.usage,u,t)}else{this.length=l(this.gl,this.type,this.length,this.usage,u.subarray(0,e.size),t)}n.free(u)}}else if(Array.isArray(e)){var d;if(this.type===this.gl.ELEMENT_ARRAY_BUFFER){d=f(e,"uint16")}else{d=f(e,"float32")}if(t<0){this.length=l(this.gl,this.type,this.length,this.usage,d,t)}else{this.length=l(this.gl,this.type,this.length,this.usage,d.subarray(0,e.length),t)}n.free(d)}else if(typeof e==="object"&&typeof e.length==="number"){this.length=l(this.gl,this.type,this.length,this.usage,e,t)}else if(typeof e==="number"||e===undefined){if(t>=0){throw new Error("gl-buffer: Cannot specify offset when resizing buffer")}e=e|0;if(e<=0){e=1}this.gl.bufferData(this.type,e|0,this.usage);this.length=e}else{throw new Error("gl-buffer: Invalid data type")}};function h(e,t,r,n){r=r||e.ARRAY_BUFFER;n=n||e.DYNAMIC_DRAW;if(r!==e.ARRAY_BUFFER&&r!==e.ELEMENT_ARRAY_BUFFER){throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER")}if(n!==e.DYNAMIC_DRAW&&n!==e.STATIC_DRAW&&n!==e.STREAM_DRAW){throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW")}var i=e.createBuffer();var a=new s(e,r,i,0,n);a.update(t);return a}t.exports=h},{ndarray:8,"ndarray-ops":3,"typedarray-pool":13}],3:[function(e,t,r){"use strict";var n=e("cwise-compiler");var i={body:"",args:[],thisVars:[],localVars:[]};function a(e){if(!e){return i}for(var t=0;t<e.args.length;++t){var r=e.args[t];if(t===0){e.args[t]={name:r,lvalue:true,rvalue:!!e.rvalue,count:e.count||1}}else{e.args[t]={name:r,lvalue:false,rvalue:true,count:1}}}if(!e.thisVars){e.thisVars=[]}if(!e.localVars){e.localVars=[]}return e}function o(e){return n({args:e.args,pre:a(e.pre),body:a(e.body),post:a(e.proc),funcName:e.funcName})}function s(e){var t=[];for(var r=0;r<e.args.length;++r){t.push("a"+r)}var n=new Function("P",["return function ",e.funcName,"_ndarrayops(",t.join(","),") {P(",t.join(","),");return a0}"].join(""));return n(o(e))}var u={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};(function(){for(var e in u){var t=u[e];r[e]=s({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+t+"c"},funcName:e});r[e+"eq"]=s({args:["array","array"],body:{args:["a","b"],body:"a"+t+"=b"},rvalue:true,funcName:e+"eq"});r[e+"s"]=s({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+t+"s"},funcName:e+"s"});r[e+"seq"]=s({args:["array","scalar"],body:{args:["a","s"],body:"a"+t+"=s"},rvalue:true,funcName:e+"seq"})}})();var l={not:"!",bnot:"~",neg:"-",recip:"1.0/"};(function(){for(var e in l){var t=l[e];r[e]=s({args:["array","array"],body:{args:["a","b"],body:"a="+t+"b"},funcName:e});r[e+"eq"]=s({args:["array"],body:{args:["a"],body:"a="+t+"a"},rvalue:true,count:2,funcName:e+"eq"})}})();var f={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};(function(){for(var e in f){var t=f[e];r[e]=s({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+t+"c"},funcName:e});r[e+"s"]=s({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+t+"s"},funcName:e+"s"});r[e+"eq"]=s({args:["array","array"],body:{args:["a","b"],body:"a=a"+t+"b"},rvalue:true,count:2,funcName:e+"eq"});r[e+"seq"]=s({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+t+"s"},rvalue:true,count:2,funcName:e+"seq"})}})();var c=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];(function(){for(var e=0;e<c.length;++e){var t=c[e];r[t]=s({args:["array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:t});r[t+"eq"]=s({args:["array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:true,count:2,funcName:t+"eq"})}})();var h=["max","min","atan2","pow"];(function(){for(var e=0;e<h.length;++e){var t=h[e];r[t]=s({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:t});r[t+"s"]=s({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:t+"s"});r[t+"eq"]=s({args:["array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:true,count:2,funcName:t+"eq"});r[t+"seq"]=s({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:true,count:2,funcName:t+"seq"})}})();var d=["atan2","pow"];(function(){for(var e=0;e<d.length;++e){var t=d[e];r[t+"op"]=s({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:t+"op"});r[t+"ops"]=s({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:t+"ops"});r[t+"opeq"]=s({args:["array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:true,count:2,funcName:t+"opeq"});r[t+"opseq"]=s({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:true,count:2,funcName:t+"opseq"})}})();r.any=n({args:["array"],pre:i,body:{args:[{name:"a",lvalue:false,rvalue:true,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"});r.all=n({args:["array"],pre:i,body:{args:[{name:"x",lvalue:false,rvalue:true,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"});r.sum=n({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:false,rvalue:true,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"});r.prod=n({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:false,rvalue:true,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"});r.norm2squared=n({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:false,rvalue:true,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"});r.norm2=n({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:false,rvalue:true,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"});r.norminf=n({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:false,rvalue:true,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"});r.norm1=n({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:false,rvalue:true,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"});r.sup=n({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:false,rvalue:true,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}});r.inf=n({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:false,rvalue:true,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}});r.argmin=n({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:false,rvalue:false,count:0},{name:"_inline_0_arg1_",lvalue:false,rvalue:false,count:0},{name:"_inline_0_arg2_",lvalue:false,rvalue:true,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:false,rvalue:true,count:2},{name:"_inline_1_arg1_",lvalue:false,rvalue:true,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}});r.argmax=n({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:false,rvalue:false,count:0},{name:"_inline_0_arg1_",lvalue:false,rvalue:false,count:0},{name:"_inline_0_arg2_",lvalue:false,rvalue:true,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:false,rvalue:true,count:2},{name:"_inline_1_arg1_",lvalue:false,rvalue:true,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}});r.random=s({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"});r.assign=s({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"});r.assigns=s({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"});r.equals=n({args:["array","array"],pre:i,body:{args:[{name:"x",lvalue:false,rvalue:true,count:1},{name:"y",lvalue:false,rvalue:true,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})},{"cwise-compiler":4}],4:[function(e,t,r){"use strict";var n=e("./lib/thunk.js");function i(){this.argTypes=[];this.shimArgs=[];this.arrayArgs=[];this.arrayBlockIndices=[];this.scalarArgs=[];this.offsetArgs=[];this.offsetArgIndex=[];this.indexArgs=[];this.shapeArgs=[];this.funcName="";this.pre=null;this.body=null;this.post=null;this.debug=false}function a(e){var t=new i;t.pre=e.pre;t.body=e.body;t.post=e.post;var r=e.args.slice(0);t.argTypes=r;for(var a=0;a<r.length;++a){var o=r[a];if(o==="array"||typeof o==="object"&&o.blockIndices){t.argTypes[a]="array";t.arrayArgs.push(a);t.arrayBlockIndices.push(o.blockIndices?o.blockIndices:0);t.shimArgs.push("array"+a);if(a<t.pre.args.length&&t.pre.args[a].count>0){throw new Error("cwise: pre() block may not reference array args")}if(a<t.post.args.length&&t.post.args[a].count>0){throw new Error("cwise: post() block may not reference array args")}}else if(o==="scalar"){t.scalarArgs.push(a);t.shimArgs.push("scalar"+a)}else if(o==="index"){t.indexArgs.push(a);if(a<t.pre.args.length&&t.pre.args[a].count>0){throw new Error("cwise: pre() block may not reference array index")}if(a<t.body.args.length&&t.body.args[a].lvalue){throw new Error("cwise: body() block may not write to array index")}if(a<t.post.args.length&&t.post.args[a].count>0){throw new Error("cwise: post() block may not reference array index")}}else if(o==="shape"){t.shapeArgs.push(a);if(a<t.pre.args.length&&t.pre.args[a].lvalue){throw new Error("cwise: pre() block may not write to array shape")}if(a<t.body.args.length&&t.body.args[a].lvalue){throw new Error("cwise: body() block may not write to array shape")}if(a<t.post.args.length&&t.post.args[a].lvalue){throw new Error("cwise: post() block may not write to array shape")}}else if(typeof o==="object"&&o.offset){t.argTypes[a]="offset";t.offsetArgs.push({array:o.array,offset:o.offset});t.offsetArgIndex.push(a)}else{throw new Error("cwise: Unknown argument type "+r[a])}}if(t.arrayArgs.length<=0){throw new Error("cwise: No array arguments specified")}if(t.pre.args.length>r.length){throw new Error("cwise: Too many arguments in pre() block")}if(t.body.args.length>r.length){throw new Error("cwise: Too many arguments in body() block")}if(t.post.args.length>r.length){throw new Error("cwise: Too many arguments in post() block")}t.debug=!!e.printCode||!!e.debug;t.funcName=e.funcName||"cwise";t.blockSize=e.blockSize||64;return n(t)}t.exports=a},{"./lib/thunk.js":6}],5:[function(e,t,r){"use strict";var n=e("uniq");function i(e,t,r){var n=e.length,i=t.arrayArgs.length,a=t.indexArgs.length>0,o=[],s=[],u=0,l=0,f,c;for(f=0;f<n;++f){s.push(["i",f,"=0"].join(""))}for(c=0;c<i;++c){for(f=0;f<n;++f){l=u;u=e[f];if(f===0){s.push(["d",c,"s",f,"=t",c,"p",u].join(""))}else{s.push(["d",c,"s",f,"=(t",c,"p",u,"-s",l,"*t",c,"p",l,")"].join(""))}}}o.push("var "+s.join(","));for(f=n-1;f>=0;--f){u=e[f];o.push(["for(i",f,"=0;i",f,"<s",u,";++i",f,"){"].join(""))}o.push(r);for(f=0;f<n;++f){l=u;u=e[f];for(c=0;c<i;++c){o.push(["p",c,"+=d",c,"s",f].join(""))}if(a){if(f>0){o.push(["index[",l,"]-=s",l].join(""))}o.push(["++index[",u,"]"].join(""))}o.push("}")}return o.join("\n")}function a(e,t,r,n){var a=t.length,o=r.arrayArgs.length,s=r.blockSize,u=r.indexArgs.length>0,l=[];for(var f=0;f<o;++f){l.push(["var offset",f,"=p",f].join(""))}for(var f=e;f<a;++f){l.push(["for(var j"+f+"=SS[",t[f],"]|0;j",f,">0;){"].join(""));l.push(["if(j",f,"<",s,"){"].join(""));l.push(["s",t[f],"=j",f].join(""));l.push(["j",f,"=0"].join(""));l.push(["}else{s",t[f],"=",s].join(""));l.push(["j",f,"-=",s,"}"].join(""));if(u){l.push(["index[",t[f],"]=j",f].join(""))}}for(var f=0;f<o;++f){var c=["offset"+f];for(var h=e;h<a;++h){c.push(["j",h,"*t",f,"p",t[h]].join(""))}l.push(["p",f,"=(",c.join("+"),")"].join(""))}l.push(i(t,r,n));for(var f=e;f<a;++f){l.push("}")}return l.join("\n")}function o(e){var t=0,r=e[0].length;while(t<r){for(var n=1;n<e.length;++n){if(e[n][t]!==e[0][t]){return t}}++t}return t}function s(e,t,r){var n=e.body;var i=[];var a=[];for(var o=0;o<e.args.length;++o){var s=e.args[o];if(s.count<=0){continue}var u=new RegExp(s.name,"g");var l="";var f=t.arrayArgs.indexOf(o);switch(t.argTypes[o]){case"offset":var c=t.offsetArgIndex.indexOf(o);var h=t.offsetArgs[c];f=h.array;l="+q"+c;case"array":l="p"+f+l;var d="l"+o;var p="a"+f;if(t.arrayBlockIndices[f]===0){if(s.count===1){if(r[f]==="generic"){if(s.lvalue){i.push(["var ",d,"=",p,".get(",l,")"].join(""));n=n.replace(u,d);a.push([p,".set(",l,",",d,")"].join(""))}else{n=n.replace(u,[p,".get(",l,")"].join(""))}}else{n=n.replace(u,[p,"[",l,"]"].join(""))}}else if(r[f]==="generic"){i.push(["var ",d,"=",p,".get(",l,")"].join(""));n=n.replace(u,d);if(s.lvalue){a.push([p,".set(",l,",",d,")"].join(""))}}else{i.push(["var ",d,"=",p,"[",l,"]"].join(""));n=n.replace(u,d);if(s.lvalue){a.push([p,"[",l,"]=",d].join(""))}}}else{var _=[s.name],v=[l];for(var g=0;g<Math.abs(t.arrayBlockIndices[f]);g++){_.push("\\s*\\[([^\\]]+)\\]");v.push("$"+(g+1)+"*t"+f+"b"+g)}u=new RegExp(_.join(""),"g");l=v.join("+");if(r[f]==="generic"){throw new Error("cwise: Generic arrays not supported in combination with blocks!")}else{n=n.replace(u,[p,"[",l,"]"].join(""))}}break;case"scalar":n=n.replace(u,"Y"+t.scalarArgs.indexOf(o));break;case"index":n=n.replace(u,"index");break;case"shape":n=n.replace(u,"shape");break}}return[i.join("\n"),n,a.join("\n")].join("\n").trim()}function u(e){var t=new Array(e.length);var r=true;for(var n=0;n<e.length;++n){var i=e[n];var a=i.match(/\d+/);if(!a){a=""}else{a=a[0]}if(i.charAt(0)===0){t[n]="u"+i.charAt(1)+a}else{t[n]=i.charAt(0)+a}if(n>0){r=r&&t[n]===t[n-1]}}if(r){return t[0]}return t.join("")}function l(e,t){var r=t[1].length-Math.abs(e.arrayBlockIndices[0])|0;var l=new Array(e.arrayArgs.length);var f=new Array(e.arrayArgs.length);for(var c=0;c<e.arrayArgs.length;++c){f[c]=t[2*c];l[c]=t[2*c+1]}var h=[],d=[];var p=[],_=[];var v=[];for(var c=0;c<e.arrayArgs.length;++c){if(e.arrayBlockIndices[c]<0){p.push(0);_.push(r);h.push(r);d.push(r+e.arrayBlockIndices[c])}else{p.push(e.arrayBlockIndices[c]);_.push(e.arrayBlockIndices[c]+r);h.push(0);d.push(e.arrayBlockIndices[c])}var g=[];for(var m=0;m<l[c].length;m++){if(p[c]<=l[c][m]&&l[c][m]<_[c]){g.push(l[c][m]-p[c])}}v.push(g)}var y=["SS"];var b=["'use strict'"];var w=[];for(var m=0;m<r;++m){w.push(["s",m,"=SS[",m,"]"].join(""))}for(var c=0;c<e.arrayArgs.length;++c){y.push("a"+c);y.push("t"+c);y.push("p"+c);for(var m=0;m<r;++m){w.push(["t",c,"p",m,"=t",c,"[",p[c]+m,"]"].join(""))}for(var m=0;m<Math.abs(e.arrayBlockIndices[c]);++m){w.push(["t",c,"b",m,"=t",c,"[",h[c]+m,"]"].join(""))}}for(var c=0;c<e.scalarArgs.length;++c){y.push("Y"+c)}if(e.shapeArgs.length>0){w.push("shape=SS.slice(0)")}if(e.indexArgs.length>0){var E=new Array(r);for(var c=0;c<r;++c){E[c]="0"}w.push(["index=[",E.join(","),"]"].join(""))}for(var c=0;c<e.offsetArgs.length;++c){var A=e.offsetArgs[c];var x=[];for(var m=0;m<A.offset.length;++m){if(A.offset[m]===0){continue}else if(A.offset[m]===1){x.push(["t",A.array,"p",m].join(""))}else{x.push([A.offset[m],"*t",A.array,"p",m].join(""))}}if(x.length===0){w.push("q"+c+"=0")}else{w.push(["q",c,"=",x.join("+")].join(""))}}var T=n([].concat(e.pre.thisVars).concat(e.body.thisVars).concat(e.post.thisVars));w=w.concat(T);b.push("var "+w.join(","));for(var c=0;c<e.arrayArgs.length;++c){b.push("p"+c+"|=0")}if(e.pre.body.length>3){b.push(s(e.pre,e,f))}var R=s(e.body,e,f);var S=o(v);if(S<r){b.push(a(S,v[0],e,R))}else{b.push(i(v[0],e,R))}if(e.post.body.length>3){b.push(s(e.post,e,f))}if(e.debug){console.log("-----Generated cwise routine for ",t,":\n"+b.join("\n")+"\n----------")}var C=[e.funcName||"unnamed","_cwise_loop_",l[0].join("s"),"m",S,u(f)].join("");var j=new Function(["function ",C,"(",y.join(","),"){",b.join("\n"),"} return ",C].join(""));return j()}t.exports=l},{uniq:7}],6:[function(e,t,r){"use strict";var n=e("./compile.js");function i(e){var t=["'use strict'","var CACHED={}"];var r=[];var i=e.funcName+"_cwise_thunk";t.push(["return function ",i,"(",e.shimArgs.join(","),"){"].join(""));var a=[];var o=[];var s=[["array",e.arrayArgs[0],".shape.slice(",Math.max(0,e.arrayBlockIndices[0]),e.arrayBlockIndices[0]<0?","+e.arrayBlockIndices[0]+")":")"].join("")];var u=[],l=[];for(var f=0;f<e.arrayArgs.length;++f){var c=e.arrayArgs[f];r.push(["t",c,"=array",c,".dtype,","r",c,"=array",c,".order"].join(""));a.push("t"+c);a.push("r"+c);o.push("t"+c);o.push("r"+c+".join()");s.push("array"+c+".data");s.push("array"+c+".stride");s.push("array"+c+".offset|0");if(f>0){u.push("array"+e.arrayArgs[0]+".shape.length===array"+c+".shape.length+"+(Math.abs(e.arrayBlockIndices[0])-Math.abs(e.arrayBlockIndices[f])));l.push("array"+e.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,e.arrayBlockIndices[0])+"]===array"+c+".shape[shapeIndex+"+Math.max(0,e.arrayBlockIndices[f])+"]")}}if(e.arrayArgs.length>1){t.push("if (!("+u.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')");t.push("for(var shapeIndex=array"+e.arrayArgs[0]+".shape.length-"+Math.abs(e.arrayBlockIndices[0])+"; shapeIndex-->0;) {");t.push("if (!("+l.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')");t.push("}")}for(var f=0;f<e.scalarArgs.length;++f){s.push("scalar"+e.scalarArgs[f])}r.push(["type=[",o.join(","),"].join()"].join(""));r.push("proc=CACHED[type]");t.push("var "+r.join(","));t.push(["if(!proc){","CACHED[type]=proc=compile([",a.join(","),"])}","return proc(",s.join(","),")}"].join(""));if(e.debug){console.log("-----Generated thunk:\n"+t.join("\n")+"\n----------")}var h=new Function("compile",t.join("\n"));return h(n.bind(undefined,e))}t.exports=i},{"./compile.js":5}],7:[function(e,t,r){"use strict";function n(e,t){var r=1,n=e.length,i=e[0],a=e[0];for(var o=1;o<n;++o){a=i;i=e[o];if(t(i,a)){if(o===r){r++;continue}e[r++]=i}}e.length=r;return e}function i(e){var t=1,r=e.length,n=e[0],i=e[0];for(var a=1;a<r;++a,i=n){i=n;n=e[a];if(n!==i){if(a===t){t++;continue}e[t++]=n}}e.length=t;return e}function a(e,t,r){if(e.length===0){return e}if(t){if(!r){e.sort(t)}return n(e,t)}if(!r){e.sort()}return i(e)}t.exports=a},{}],8:[function(e,t,r){var n=e("iota-array");var i=e("is-buffer");var a=typeof Float64Array!=="undefined";function o(e,t){return e[0]-t[0]}function s(){var e=this.stride;var t=new Array(e.length);var r;for(r=0;r<t.length;++r){t[r]=[Math.abs(e[r]),r]}t.sort(o);var n=new Array(t.length);for(r=0;r<n.length;++r){n[r]=t[r][1]}return n}function u(e,t){var r=["View",t,"d",e].join("");if(t<0){r="View_Nil"+e}var i=e==="generic";if(t===-1){var a="function "+r+"(a){this.data=a;};var proto="+r+".prototype;proto.dtype='"+e+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+r+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+r+"(a){return new "+r+"(a);}";var o=new Function(a);return o()}else if(t===0){var a="function "+r+"(a,d) {this.data = a;this.offset = d};var proto="+r+".prototype;proto.dtype='"+e+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+r+"_copy() {return new "+r+"(this.data,this.offset)};proto.pick=function "+r+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+r+"_get(){return "+(i?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+r+"_set(v){return "+(i?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+r+"(a,b,c,d){return new "+r+"(a,d)}";var o=new Function("TrivialArray",a);return o(f[e][0])}var a=["'use strict'"];var u=n(t);var l=u.map(function(e){return"i"+e});var c="this.offset+"+u.map(function(e){return"this.stride["+e+"]*i"+e}).join("+");var h=u.map(function(e){return"b"+e}).join(",");var d=u.map(function(e){return"c"+e}).join(",");a.push("function "+r+"(a,"+h+","+d+",d){this.data=a","this.shape=["+h+"]","this.stride=["+d+"]","this.offset=d|0}","var proto="+r+".prototype","proto.dtype='"+e+"'","proto.dimension="+t);a.push("Object.defineProperty(proto,'size',{get:function "+r+"_size(){return "+u.map(function(e){return"this.shape["+e+"]"}).join("*"),"}})");if(t===1){a.push("proto.order=[0]")}else{a.push("Object.defineProperty(proto,'order',{get:");if(t<4){a.push("function "+r+"_order(){");if(t===2){a.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})")}else if(t===3){a.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")}}else{a.push("ORDER})")}}a.push("proto.set=function "+r+"_set("+l.join(",")+",v){");if(i){a.push("return this.data.set("+c+",v)}")}else{a.push("return this.data["+c+"]=v}")}a.push("proto.get=function "+r+"_get("+l.join(",")+"){");if(i){a.push("return this.data.get("+c+")}")}else{a.push("return this.data["+c+"]}")}a.push("proto.index=function "+r+"_index(",l.join(),"){return "+c+"}");a.push("proto.hi=function "+r+"_hi("+l.join(",")+"){return new "+r+"(this.data,"+u.map(function(e){return["(typeof i",e,"!=='number'||i",e,"<0)?this.shape[",e,"]:i",e,"|0"].join("")}).join(",")+","+u.map(function(e){return"this.stride["+e+"]"}).join(",")+",this.offset)}");var p=u.map(function(e){return"a"+e+"=this.shape["+e+"]"});var _=u.map(function(e){return"c"+e+"=this.stride["+e+"]"});a.push("proto.lo=function "+r+"_lo("+l.join(",")+"){var b=this.offset,d=0,"+p.join(",")+","+_.join(","));for(var v=0;v<t;++v){a.push("if(typeof i"+v+"==='number'&&i"+v+">=0){d=i"+v+"|0;b+=c"+v+"*d;a"+v+"-=d}")}a.push("return new "+r+"(this.data,"+u.map(function(e){return"a"+e}).join(",")+","+u.map(function(e){return"c"+e}).join(",")+",b)}");a.push("proto.step=function "+r+"_step("+l.join(",")+"){var "+u.map(function(e){return"a"+e+"=this.shape["+e+"]"}).join(",")+","+u.map(function(e){return"b"+e+"=this.stride["+e+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(var v=0;v<t;++v){a.push("if(typeof i"+v+"==='number'){d=i"+v+"|0;if(d<0){c+=b"+v+"*(a"+v+"-1);a"+v+"=ceil(-a"+v+"/d)}else{a"+v+"=ceil(a"+v+"/d)}b"+v+"*=d}")}a.push("return new "+r+"(this.data,"+u.map(function(e){return"a"+e}).join(",")+","+u.map(function(e){return"b"+e}).join(",")+",c)}");var g=new Array(t);var m=new Array(t);for(var v=0;v<t;++v){g[v]="a[i"+v+"]";m[v]="b[i"+v+"]"}a.push("proto.transpose=function "+r+"_transpose("+l+"){"+l.map(function(e,t){return e+"=("+e+"===undefined?"+t+":"+e+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+r+"(this.data,"+g.join(",")+","+m.join(",")+",this.offset)}");a.push("proto.pick=function "+r+"_pick("+l+"){var a=[],b=[],c=this.offset");for(var v=0;v<t;++v){a.push("if(typeof i"+v+"==='number'&&i"+v+">=0){c=(c+this.stride["+v+"]*i"+v+")|0}else{a.push(this.shape["+v+"]);b.push(this.stride["+v+"])}")}a.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}");a.push("return function construct_"+r+"(data,shape,stride,offset){return new "+r+"(data,"+u.map(function(e){return"shape["+e+"]"}).join(",")+","+u.map(function(e){return"stride["+e+"]"}).join(",")+",offset)}");var o=new Function("CTOR_LIST","ORDER",a.join("\n"));return o(f[e],s)}function l(e){if(i(e)){return"buffer"}if(a){switch(Object.prototype.toString.call(e)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped"}}if(Array.isArray(e)){return"array"}return"generic"}var f={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]};(function(){for(var e in f){f[e].push(u(e,-1))}});function c(e,t,r,n){if(e===undefined){var i=f.array[0];return i([])}else if(typeof e==="number"){e=[e]}if(t===undefined){t=[e.length]}var a=t.length;if(r===undefined){r=new Array(a);for(var o=a-1,s=1;o>=0;--o){r[o]=s;s*=t[o]}}if(n===undefined){n=0;for(var o=0;o<a;++o){if(r[o]<0){n-=(t[o]-1)*r[o]}}}var c=l(e);var h=f[c];while(h.length<=a+1){h.push(u(c,h.length-1))}var i=h[a+1];return i(e,t,r,n)}t.exports=c},{"iota-array":9,"is-buffer":10}],9:[function(e,t,r){"use strict";function n(e){var t=new Array(e);for(var r=0;r<e;++r){t[r]=r}return t}t.exports=n},{}],10:[function(e,t,r){t.exports=function(e){return!!(e!=null&&(e._isBuffer||e.constructor&&typeof e.constructor.isBuffer==="function"&&e.constructor.isBuffer(e)))}},{}],11:[function(e,t,r){"use strict";"use restrict";var n=32;r.INT_BITS=n;r.INT_MAX=2147483647;r.INT_MIN=-1<<n-1;r.sign=function(e){return(e>0)-(e<0)};r.abs=function(e){var t=e>>n-1;return(e^t)-t};r.min=function(e,t){return t^(e^t)&-(e<t)};r.max=function(e,t){return e^(e^t)&-(e<t)};r.isPow2=function(e){return!(e&e-1)&&!!e};r.log2=function(e){var t,r;t=(e>65535)<<4;e>>>=t;r=(e>255)<<3;e>>>=r;t|=r;r=(e>15)<<2;e>>>=r;t|=r;r=(e>3)<<1;e>>>=r;t|=r;return t|e>>1};r.log10=function(e){return e>=1e9?9:e>=1e8?8:e>=1e7?7:e>=1e6?6:e>=1e5?5:e>=1e4?4:e>=1e3?3:e>=100?2:e>=10?1:0};r.popCount=function(e){e=e-(e>>>1&1431655765);e=(e&858993459)+(e>>>2&858993459);

return(e+(e>>>4)&252645135)*16843009>>>24};function i(e){var t=32;e&=-e;if(e)t--;if(e&65535)t-=16;if(e&16711935)t-=8;if(e&252645135)t-=4;if(e&858993459)t-=2;if(e&1431655765)t-=1;return t}r.countTrailingZeros=i;r.nextPow2=function(e){e+=e===0;--e;e|=e>>>1;e|=e>>>2;e|=e>>>4;e|=e>>>8;e|=e>>>16;return e+1};r.prevPow2=function(e){e|=e>>>1;e|=e>>>2;e|=e>>>4;e|=e>>>8;e|=e>>>16;return e-(e>>>1)};r.parity=function(e){e^=e>>>16;e^=e>>>8;e^=e>>>4;e&=15;return 27030>>>e&1};var a=new Array(256);(function(e){for(var t=0;t<256;++t){var r=t,n=t,i=7;for(r>>>=1;r;r>>>=1){n<<=1;n|=r&1;--i}e[t]=n<<i&255}})(a);r.reverse=function(e){return a[e&255]<<24|a[e>>>8&255]<<16|a[e>>>16&255]<<8|a[e>>>24&255]};r.interleave2=function(e,t){e&=65535;e=(e|e<<8)&16711935;e=(e|e<<4)&252645135;e=(e|e<<2)&858993459;e=(e|e<<1)&1431655765;t&=65535;t=(t|t<<8)&16711935;t=(t|t<<4)&252645135;t=(t|t<<2)&858993459;t=(t|t<<1)&1431655765;return e|t<<1};r.deinterleave2=function(e,t){e=e>>>t&1431655765;e=(e|e>>>1)&858993459;e=(e|e>>>2)&252645135;e=(e|e>>>4)&16711935;e=(e|e>>>16)&65535;return e<<16>>16};r.interleave3=function(e,t,r){e&=1023;e=(e|e<<16)&4278190335;e=(e|e<<8)&251719695;e=(e|e<<4)&3272356035;e=(e|e<<2)&1227133513;t&=1023;t=(t|t<<16)&4278190335;t=(t|t<<8)&251719695;t=(t|t<<4)&3272356035;t=(t|t<<2)&1227133513;e|=t<<1;r&=1023;r=(r|r<<16)&4278190335;r=(r|r<<8)&251719695;r=(r|r<<4)&3272356035;r=(r|r<<2)&1227133513;return e|r<<2};r.deinterleave3=function(e,t){e=e>>>t&1227133513;e=(e|e>>>2)&3272356035;e=(e|e>>>4)&251719695;e=(e|e>>>8)&4278190335;e=(e|e>>>16)&1023;return e<<22>>22};r.nextCombination=function(e){var t=e|e-1;return t+1|(~t&-~t)-1>>>i(e)+1}},{}],12:[function(e,t,r){"use strict";function n(e,t,r){var i=e[r]|0;if(i<=0){return[]}var a=new Array(i),o;if(r===e.length-1){for(o=0;o<i;++o){a[o]=t}}else{for(o=0;o<i;++o){a[o]=n(e,t,r+1)}}return a}function i(e,t){var r,n;r=new Array(e);for(n=0;n<e;++n){r[n]=t}return r}function a(e,t){if(typeof t==="undefined"){t=0}switch(typeof e){case"number":if(e>0){return i(e|0,t)}break;case"object":if(typeof e.length==="number"){return n(e,t,0)}break}return[]}t.exports=a},{}],13:[function(e,t,r){(function(t,n){"use strict";var i=e("bit-twiddle");var a=e("dup");if(!t.__TYPEDARRAY_POOL){t.__TYPEDARRAY_POOL={UINT8:a([32,0]),UINT16:a([32,0]),UINT32:a([32,0]),INT8:a([32,0]),INT16:a([32,0]),INT32:a([32,0]),FLOAT:a([32,0]),DOUBLE:a([32,0]),DATA:a([32,0]),UINT8C:a([32,0]),BUFFER:a([32,0])}}var o=typeof Uint8ClampedArray!=="undefined";var s=t.__TYPEDARRAY_POOL;if(!s.UINT8C){s.UINT8C=a([32,0])}if(!s.BUFFER){s.BUFFER=a([32,0])}var u=s.DATA,l=s.BUFFER;r.free=function x(e){if(n.isBuffer(e)){l[i.log2(e.length)].push(e)}else{if(Object.prototype.toString.call(e)!=="[object ArrayBuffer]"){e=e.buffer}if(!e){return}var t=e.length||e.byteLength;var r=i.log2(t)|0;u[r].push(e)}};function f(e){if(!e){return}var t=e.length||e.byteLength;var r=i.log2(t);u[r].push(e)}function c(e){f(e.buffer)}r.freeUint8=r.freeUint16=r.freeUint32=r.freeInt8=r.freeInt16=r.freeInt32=r.freeFloat32=r.freeFloat=r.freeFloat64=r.freeDouble=r.freeUint8Clamped=r.freeDataView=c;r.freeArrayBuffer=f;r.freeBuffer=function T(e){l[i.log2(e.length)].push(e)};r.malloc=function R(e,t){if(t===undefined||t==="arraybuffer"){return h(e)}else{switch(t){case"uint8":return d(e);case"uint16":return p(e);case"uint32":return _(e);case"int8":return v(e);case"int16":return g(e);case"int32":return m(e);case"float":case"float32":return y(e);case"double":case"float64":return b(e);case"uint8_clamped":return w(e);case"buffer":return A(e);case"data":case"dataview":return E(e);default:return null}}return null};function h(e){var e=i.nextPow2(e);var t=i.log2(e);var r=u[t];if(r.length>0){return r.pop()}return new ArrayBuffer(e)}r.mallocArrayBuffer=h;function d(e){return new Uint8Array(h(e),0,e)}r.mallocUint8=d;function p(e){return new Uint16Array(h(2*e),0,e)}r.mallocUint16=p;function _(e){return new Uint32Array(h(4*e),0,e)}r.mallocUint32=_;function v(e){return new Int8Array(h(e),0,e)}r.mallocInt8=v;function g(e){return new Int16Array(h(2*e),0,e)}r.mallocInt16=g;function m(e){return new Int32Array(h(4*e),0,e)}r.mallocInt32=m;function y(e){return new Float32Array(h(4*e),0,e)}r.mallocFloat32=r.mallocFloat=y;function b(e){return new Float64Array(h(8*e),0,e)}r.mallocFloat64=r.mallocDouble=b;function w(e){if(o){return new Uint8ClampedArray(h(e),0,e)}else{return d(e)}}r.mallocUint8Clamped=w;function E(e){return new DataView(h(e),0,e)}r.mallocDataView=E;function A(e){e=i.nextPow2(e);var t=i.log2(e);var r=l[t];if(r.length>0){return r.pop()}return new n(e)}r.mallocBuffer=A;r.clearCache=function S(){for(var e=0;e<32;++e){s.UINT8[e].length=0;s.UINT16[e].length=0;s.UINT32[e].length=0;s.INT8[e].length=0;s.INT16[e].length=0;s.INT32[e].length=0;s.FLOAT[e].length=0;s.DOUBLE[e].length=0;s.UINT8C[e].length=0;u[e].length=0;l[e].length=0}}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{},e("buffer").Buffer)},{"bit-twiddle":11,buffer:21,dup:12}],14:[function(e,t,r){"use strict";function n(e,t,r){if(t){t.bind()}else{e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)}var n=e.getParameter(e.MAX_VERTEX_ATTRIBS)|0;if(r){if(r.length>n){throw new Error("gl-vao: Too many vertex attributes")}for(var i=0;i<r.length;++i){var a=r[i];if(a.buffer){var o=a.buffer;var s=a.size||4;var u=a.type||e.FLOAT;var l=!!a.normalized;var f=a.stride||0;var c=a.offset||0;o.bind();e.enableVertexAttribArray(i);e.vertexAttribPointer(i,s,u,l,f,c)}else{if(typeof a==="number"){e.vertexAttrib1f(i,a)}else if(a.length===1){e.vertexAttrib1f(i,a[0])}else if(a.length===2){e.vertexAttrib2f(i,a[0],a[1])}else if(a.length===3){e.vertexAttrib3f(i,a[0],a[1],a[2])}else if(a.length===4){e.vertexAttrib4f(i,a[0],a[1],a[2],a[3])}else{throw new Error("gl-vao: Invalid vertex attribute")}e.disableVertexAttribArray(i)}}for(;i<n;++i){e.disableVertexAttribArray(i)}}else{e.bindBuffer(e.ARRAY_BUFFER,null);for(var i=0;i<n;++i){e.disableVertexAttribArray(i)}}}t.exports=n},{}],15:[function(e,t,r){"use strict";var n=e("./do-bind.js");function i(e){this.gl=e;this._elements=null;this._attributes=null;this._elementsType=e.UNSIGNED_SHORT}i.prototype.bind=function(){n(this.gl,this._elements,this._attributes)};i.prototype.update=function(e,t,r){this._elements=t;this._attributes=e;this._elementsType=r||this.gl.UNSIGNED_SHORT};i.prototype.dispose=function(){};i.prototype.unbind=function(){};i.prototype.draw=function(e,t,r){r=r||0;var n=this.gl;if(this._elements){n.drawElements(e,t,this._elementsType,r)}else{n.drawArrays(e,r,t)}};function a(e){return new i(e)}t.exports=a},{"./do-bind.js":14}],16:[function(e,t,r){"use strict";var n=e("./do-bind.js");function i(e,t,r,n,i,a){this.location=e;this.dimension=t;this.a=r;this.b=n;this.c=i;this.d=a}i.prototype.bind=function(e){switch(this.dimension){case 1:e.vertexAttrib1f(this.location,this.a);break;case 2:e.vertexAttrib2f(this.location,this.a,this.b);break;case 3:e.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:e.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d);break}};function a(e,t,r){this.gl=e;this._ext=t;this.handle=r;this._attribs=[];this._useElements=false;this._elementsType=e.UNSIGNED_SHORT}a.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var e=0;e<this._attribs.length;++e){this._attribs[e].bind(this.gl)}};a.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)};a.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)};a.prototype.update=function(e,t,r){this.bind();n(this.gl,t,e);this.unbind();this._attribs.length=0;if(e)for(var a=0;a<e.length;++a){var o=e[a];if(typeof o==="number"){this._attribs.push(new i(a,1,o))}else if(Array.isArray(o)){this._attribs.push(new i(a,o.length,o[0],o[1],o[2],o[3]))}}this._useElements=!!t;this._elementsType=r||this.gl.UNSIGNED_SHORT};a.prototype.draw=function(e,t,r){r=r||0;var n=this.gl;if(this._useElements){n.drawElements(e,t,this._elementsType,r)}else{n.drawArrays(e,r,t)}};function o(e,t){return new a(e,t,t.createVertexArrayOES())}t.exports=o},{"./do-bind.js":14}],17:[function(e,t,r){"use strict";var n=e("./lib/vao-native.js");var i=e("./lib/vao-emulated.js");function a(e,t,r,a){var o=e.getExtension("OES_vertex_array_object");var s;if(o){s=n(e,o)}else{s=i(e)}s.update(t,r,a);return s}t.exports=a},{"./lib/vao-emulated.js":15,"./lib/vao-native.js":16}],18:[function(e,t,r){(function n(){"use strict";if(typeof ses!=="undefined"&&ses.ok&&!ses.ok()){return}function e(t){if(t.permitHostObjects___){t.permitHostObjects___(e)}}if(typeof ses!=="undefined"){ses.weakMapPermitHostObjects=e}var r=false;if(typeof WeakMap==="function"){var n=WeakMap;if(typeof navigator!=="undefined"&&/Firefox/.test(navigator.userAgent)){}else{var i=new n;var a=Object.freeze({});i.set(a,1);if(i.get(a)!==1){r=true}else{t.exports=WeakMap;return}}}var o=Object.prototype.hasOwnProperty;var s=Object.getOwnPropertyNames;var u=Object.defineProperty;var l=Object.isExtensible;var f="weakmap:";var c=f+"ident:"+Math.random()+"___";if(typeof crypto!=="undefined"&&typeof crypto.getRandomValues==="function"&&typeof ArrayBuffer==="function"&&typeof Uint8Array==="function"){var h=new ArrayBuffer(25);var d=new Uint8Array(h);crypto.getRandomValues(d);c=f+"rand:"+Array.prototype.map.call(d,function(e){return(e%36).toString(36)}).join("")+"___"}function p(e){return!(e.substr(0,f.length)==f&&e.substr(e.length-3)==="___")}u(Object,"getOwnPropertyNames",{value:function E(e){return s(e).filter(p)}});if("getPropertyNames"in Object){var _=Object.getPropertyNames;u(Object,"getPropertyNames",{value:function A(e){return _(e).filter(p)}})}function v(e){if(e!==Object(e)){throw new TypeError("Not an object: "+e)}var t=e[c];if(t&&t.key===e){return t}if(!l(e)){return void 0}t={key:e};try{u(e,c,{value:t,writable:false,enumerable:false,configurable:false});return t}catch(r){return void 0}}(function(){var e=Object.freeze;u(Object,"freeze",{value:function n(t){v(t);return e(t)}});var t=Object.seal;u(Object,"seal",{value:function i(e){v(e);return t(e)}});var r=Object.preventExtensions;u(Object,"preventExtensions",{value:function a(e){v(e);return r(e)}})})();function g(e){e.prototype=null;return Object.freeze(e)}var m=false;function y(){if(!m&&typeof console!=="undefined"){m=true;console.warn("WeakMap should be invoked as new WeakMap(), not "+"WeakMap(). This will be an error in the future.")}}var b=0;var w=function(){if(!(this instanceof w)){y()}var e=[];var t=[];var r=b++;function n(n,i){var a;var o=v(n);if(o){return r in o?o[r]:i}else{a=e.indexOf(n);return a>=0?t[a]:i}}function i(t){var n=v(t);if(n){return r in n}else{return e.indexOf(t)>=0}}function a(n,i){var a;var o=v(n);if(o){o[r]=i}else{a=e.indexOf(n);if(a>=0){t[a]=i}else{a=e.length;t[a]=i;e[a]=n}}return this}function o(n){var i=v(n);var a,o;if(i){return r in i&&delete i[r]}else{a=e.indexOf(n);if(a<0){return false}o=e.length-1;e[a]=void 0;t[a]=t[o];e[a]=e[o];e.length=o;t.length=o;return true}}return Object.create(w.prototype,{get___:{value:g(n)},has___:{value:g(i)},set___:{value:g(a)},delete___:{value:g(o)}})};w.prototype=Object.create(Object.prototype,{get:{value:function x(e,t){return this.get___(e,t)},writable:true,configurable:true},has:{value:function T(e){return this.has___(e)},writable:true,configurable:true},set:{value:function R(e,t){return this.set___(e,t)},writable:true,configurable:true},"delete":{value:function S(e){return this.delete___(e)},writable:true,configurable:true}});if(typeof n==="function"){(function(){if(r&&typeof Proxy!=="undefined"){Proxy=undefined}function i(){if(!(this instanceof w)){y()}var t=new n;var i=undefined;var a=false;function o(e,r){if(i){return t.has(e)?t.get(e):i.get___(e,r)}else{return t.get(e,r)}}function s(e){return t.has(e)||(i?i.has___(e):false)}var u;if(r){u=function(e,r){t.set(e,r);if(!t.has(e)){if(!i){i=new w}i.set(e,r)}return this}}else{u=function(e,r){if(a){try{t.set(e,r)}catch(n){if(!i){i=new w}i.set___(e,r)}}else{t.set(e,r)}return this}}function l(e){var r=!!t["delete"](e);if(i){return i.delete___(e)||r}return r}return Object.create(w.prototype,{get___:{value:g(o)},has___:{value:g(s)},set___:{value:g(u)},delete___:{value:g(l)},permitHostObjects___:{value:g(function(t){if(t===e){a=true}else{throw new Error("bogus call to permitHostObjects___")}})}})}i.prototype=w.prototype;t.exports=i;Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:false,configurable:true,writable:true})})()}else{if(typeof Proxy!=="undefined"){Proxy=undefined}t.exports=w}})()},{}],19:[function(e,t,r){"use strict";var n=typeof WeakMap==="undefined"?e("weak-map"):WeakMap;var i=e("gl-buffer");var a=e("gl-vao");var o=new n;function s(e){var t=o.get(e);if(!t||!e.isBuffer(t._triangleBuffer.buffer)){var r=i(e,new Float32Array([-1,-1,-1,4,4,-1]));t=a(e,[{buffer:r,type:e.FLOAT,size:2}]);t._triangleBuffer=r;o.set(e,t)}t.bind();e.drawArrays(e.TRIANGLES,0,3);t.unbind()}t.exports=s},{"gl-buffer":2,"gl-vao":17,"weak-map":18}],20:[function(e,t,r){},{}],21:[function(e,t,r){(function(t){"use strict";var n=e("base64-js");var i=e("ieee754");var a=e("isarray");r.Buffer=l;r.SlowBuffer=y;r.INSPECT_MAX_BYTES=50;l.TYPED_ARRAY_SUPPORT=t.TYPED_ARRAY_SUPPORT!==undefined?t.TYPED_ARRAY_SUPPORT:o();r.kMaxLength=s();function o(){try{var e=new Uint8Array(1);e.foo=function(){return 42};return e.foo()===42&&typeof e.subarray==="function"&&e.subarray(1,1).byteLength===0}catch(t){return false}}function s(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function u(e,t){if(s()<t){throw new RangeError("Invalid typed array length")}if(l.TYPED_ARRAY_SUPPORT){e=new Uint8Array(t);e.__proto__=l.prototype}else{if(e===null){e=new l(t)}e.length=t}return e}function l(e,t,r){if(!l.TYPED_ARRAY_SUPPORT&&!(this instanceof l)){return new l(e,t,r)}if(typeof e==="number"){if(typeof t==="string"){throw new Error("If encoding is specified then the first argument must be a string")}return d(this,e)}return f(this,e,t,r)}l.poolSize=8192;l._augment=function(e){e.__proto__=l.prototype;return e};function f(e,t,r,n){if(typeof t==="number"){throw new TypeError('"value" argument must not be a number')}if(typeof ArrayBuffer!=="undefined"&&t instanceof ArrayBuffer){return v(e,t,r,n)}if(typeof t==="string"){return p(e,t,r)}return g(e,t)}l.from=function(e,t,r){return f(null,e,t,r)};if(l.TYPED_ARRAY_SUPPORT){l.prototype.__proto__=Uint8Array.prototype;l.__proto__=Uint8Array;if(typeof Symbol!=="undefined"&&Symbol.species&&l[Symbol.species]===l){Object.defineProperty(l,Symbol.species,{value:null,configurable:true})}}function c(e){if(typeof e!=="number"){throw new TypeError('"size" argument must be a number')}}function h(e,t,r,n){c(t);if(t<=0){return u(e,t)}if(r!==undefined){return typeof n==="string"?u(e,t).fill(r,n):u(e,t).fill(r)}return u(e,t)}l.alloc=function(e,t,r){return h(null,e,t,r)};function d(e,t){c(t);e=u(e,t<0?0:m(t)|0);if(!l.TYPED_ARRAY_SUPPORT){for(var r=0;r<t;r++){e[r]=0}}return e}l.allocUnsafe=function(e){return d(null,e)};l.allocUnsafeSlow=function(e){return d(null,e)};function p(e,t,r){if(typeof r!=="string"||r===""){r="utf8"}if(!l.isEncoding(r)){throw new TypeError('"encoding" must be a valid string encoding')}var n=b(t,r)|0;e=u(e,n);e.write(t,r);return e}function _(e,t){var r=m(t.length)|0;e=u(e,r);for(var n=0;n<r;n+=1){e[n]=t[n]&255}return e}function v(e,t,r,n){t.byteLength;if(r<0||t.byteLength<r){throw new RangeError("'offset' is out of bounds")}if(t.byteLength<r+(n||0)){throw new RangeError("'length' is out of bounds")}if(n===undefined){t=new Uint8Array(t,r)}else{t=new Uint8Array(t,r,n)}if(l.TYPED_ARRAY_SUPPORT){e=t;e.__proto__=l.prototype}else{e=_(e,t)}return e}function g(e,t){if(l.isBuffer(t)){var r=m(t.length)|0;e=u(e,r);if(e.length===0){return e}t.copy(e,0,0,r);return e}if(t){if(typeof ArrayBuffer!=="undefined"&&t.buffer instanceof ArrayBuffer||"length"in t){if(typeof t.length!=="number"||ee(t.length)){return u(e,0)}return _(e,t)}if(t.type==="Buffer"&&a(t.data)){return _(e,t.data)}}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function m(e){if(e>=s()){throw new RangeError("Attempt to allocate Buffer larger than maximum "+"size: 0x"+s().toString(16)+" bytes")}return e|0}function y(e){if(+e!=e){e=0}return l.alloc(+e)}l.isBuffer=function te(e){return!!(e!=null&&e._isBuffer)};l.compare=function re(e,t){if(!l.isBuffer(e)||!l.isBuffer(t)){throw new TypeError("Arguments must be Buffers")}if(e===t)return 0;var r=e.length;var n=t.length;for(var i=0,a=Math.min(r,n);i<a;++i){if(e[i]!==t[i]){r=e[i];n=t[i];break}}if(r<n)return-1;if(n<r)return 1;return 0};l.isEncoding=function ne(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return true;default:return false}};l.concat=function ie(e,t){if(!a(e)){throw new TypeError('"list" argument must be an Array of Buffers')}if(e.length===0){return l.alloc(0)}var r;if(t===undefined){t=0;for(r=0;r<e.length;r++){t+=e[r].length}}var n=l.allocUnsafe(t);var i=0;for(r=0;r<e.length;r++){var o=e[r];if(!l.isBuffer(o)){throw new TypeError('"list" argument must be an Array of Buffers')}o.copy(n,i);i+=o.length}return n};function b(e,t){if(l.isBuffer(e)){return e.length}if(typeof ArrayBuffer!=="undefined"&&typeof ArrayBuffer.isView==="function"&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer)){return e.byteLength}if(typeof e!=="string"){e=""+e}var r=e.length;if(r===0)return 0;var n=false;for(;;){switch(t){case"ascii":case"binary":case"raw":case"raws":return r;case"utf8":case"utf-8":case undefined:return K(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return J(e).length;default:if(n)return K(e).length;t=(""+t).toLowerCase();n=true}}}l.byteLength=b;function w(e,t,r){var n=false;if(t===undefined||t<0){t=0}if(t>this.length){return""}if(r===undefined||r>this.length){r=this.length}if(r<=0){return""}r>>>=0;t>>>=0;if(r<=t){return""}if(!e)e="utf8";while(true){switch(e){case"hex":return P(this,t,r);case"utf8":case"utf-8":return I(this,t,r);case"ascii":return N(this,t,r);case"binary":return M(this,t,r);case"base64":return k(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase();n=true}}}l.prototype._isBuffer=true;function E(e,t,r){var n=e[t];e[t]=e[r];e[r]=n}l.prototype.swap16=function ae(){var e=this.length;if(e%2!==0){throw new RangeError("Buffer size must be a multiple of 16-bits")}for(var t=0;t<e;t+=2){E(this,t,t+1)}return this};l.prototype.swap32=function oe(){var e=this.length;if(e%4!==0){throw new RangeError("Buffer size must be a multiple of 32-bits")}for(var t=0;t<e;t+=4){E(this,t,t+3);E(this,t+1,t+2)}return this};l.prototype.toString=function se(){var e=this.length|0;if(e===0)return"";if(arguments.length===0)return I(this,0,e);return w.apply(this,arguments)};l.prototype.equals=function ue(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(this===e)return true;return l.compare(this,e)===0};l.prototype.inspect=function le(){var e="";var t=r.INSPECT_MAX_BYTES;if(this.length>0){e=this.toString("hex",0,t).match(/.{2}/g).join(" ");if(this.length>t)e+=" ... "}return"<Buffer "+e+">"};l.prototype.compare=function fe(e,t,r,n,i){if(!l.isBuffer(e)){throw new TypeError("Argument must be a Buffer")}if(t===undefined){t=0}if(r===undefined){r=e?e.length:0}if(n===undefined){n=0}if(i===undefined){i=this.length}if(t<0||r>e.length||n<0||i>this.length){throw new RangeError("out of range index")}if(n>=i&&t>=r){return 0}if(n>=i){return-1}if(t>=r){return 1}t>>>=0;r>>>=0;n>>>=0;i>>>=0;if(this===e)return 0;var a=i-n;var o=r-t;var s=Math.min(a,o);var u=this.slice(n,i);var f=e.slice(t,r);for(var c=0;c<s;++c){if(u[c]!==f[c]){a=u[c];o=f[c];break}}if(a<o)return-1;if(o<a)return 1;return 0};function A(e,t,r,n){var i=1;var a=e.length;var o=t.length;if(n!==undefined){n=String(n).toLowerCase();if(n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le"){if(e.length<2||t.length<2){return-1}i=2;a/=2;o/=2;r/=2}}function s(e,t){if(i===1){return e[t]}else{return e.readUInt16BE(t*i)}}var u=-1;for(var l=0;r+l<a;l++){if(s(e,r+l)===s(t,u===-1?0:l-u)){if(u===-1)u=l;if(l-u+1===o)return(r+u)*i}else{if(u!==-1)l-=l-u;u=-1}}return-1}l.prototype.indexOf=function ce(e,t,r){if(typeof t==="string"){r=t;t=0}else if(t>2147483647){t=2147483647}else if(t<-2147483648){t=-2147483648}t>>=0;if(this.length===0)return-1;if(t>=this.length)return-1;if(t<0)t=Math.max(this.length+t,0);if(typeof e==="string"){e=l.from(e,r)}if(l.isBuffer(e)){if(e.length===0){return-1}return A(this,e,t,r)}if(typeof e==="number"){if(l.TYPED_ARRAY_SUPPORT&&Uint8Array.prototype.indexOf==="function"){return Uint8Array.prototype.indexOf.call(this,e,t)}return A(this,[e],t,r)}throw new TypeError("val must be string, number or Buffer")};l.prototype.includes=function he(e,t,r){return this.indexOf(e,t,r)!==-1};function x(e,t,r,n){r=Number(r)||0;var i=e.length-r;if(!n){n=i}else{n=Number(n);if(n>i){n=i}}var a=t.length;if(a%2!==0)throw new Error("Invalid hex string");if(n>a/2){n=a/2}for(var o=0;o<n;o++){var s=parseInt(t.substr(o*2,2),16);if(isNaN(s))return o;e[r+o]=s}return o}function T(e,t,r,n){return Q(K(t,e.length-r),e,r,n)}function R(e,t,r,n){return Q($(t),e,r,n)}function S(e,t,r,n){return R(e,t,r,n)}function C(e,t,r,n){return Q(J(t),e,r,n)}function j(e,t,r,n){return Q(Z(t,e.length-r),e,r,n)}l.prototype.write=function de(e,t,r,n){if(t===undefined){n="utf8";r=this.length;t=0}else if(r===undefined&&typeof t==="string"){n=t;r=this.length;t=0}else if(isFinite(t)){t=t|0;if(isFinite(r)){r=r|0;if(n===undefined)n="utf8"}else{n=r;r=undefined}}else{throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported")}var i=this.length-t;if(r===undefined||r>i)r=i;if(e.length>0&&(r<0||t<0)||t>this.length){throw new RangeError("Attempt to write outside buffer bounds")}if(!n)n="utf8";var a=false;for(;;){switch(n){case"hex":return x(this,e,t,r);case"utf8":case"utf-8":return T(this,e,t,r);case"ascii":return R(this,e,t,r);case"binary":return S(this,e,t,r);case"base64":return C(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,e,t,r);default:if(a)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase();a=true}}};l.prototype.toJSON=function pe(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function k(e,t,r){if(t===0&&r===e.length){return n.fromByteArray(e)}else{return n.fromByteArray(e.slice(t,r))}}function I(e,t,r){r=Math.min(e.length,r);var n=[];var i=t;while(i<r){var a=e[i];var o=null;var s=a>239?4:a>223?3:a>191?2:1;if(i+s<=r){var u,l,f,c;switch(s){case 1:if(a<128){o=a}break;case 2:u=e[i+1];if((u&192)===128){c=(a&31)<<6|u&63;if(c>127){o=c}}break;case 3:u=e[i+1];l=e[i+2];if((u&192)===128&&(l&192)===128){c=(a&15)<<12|(u&63)<<6|l&63;if(c>2047&&(c<55296||c>57343)){o=c}}break;case 4:u=e[i+1];l=e[i+2];f=e[i+3];if((u&192)===128&&(l&192)===128&&(f&192)===128){c=(a&15)<<18|(u&63)<<12|(l&63)<<6|f&63;if(c>65535&&c<1114112){o=c}}}}if(o===null){o=65533;s=1}else if(o>65535){o-=65536;n.push(o>>>10&1023|55296);o=56320|o&1023}n.push(o);i+=s}return L(n)}var O=4096;function L(e){var t=e.length;if(t<=O){return String.fromCharCode.apply(String,e)}var r="";var n=0;while(n<t){r+=String.fromCharCode.apply(String,e.slice(n,n+=O))}return r}function N(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;i++){n+=String.fromCharCode(e[i]&127)}return n}function M(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;i++){n+=String.fromCharCode(e[i])}return n}function P(e,t,r){var n=e.length;if(!t||t<0)t=0;if(!r||r<0||r>n)r=n;var i="";for(var a=t;a<r;a++){i+=q(e[a])}return i}function U(e,t,r){var n=e.slice(t,r);var i="";for(var a=0;a<n.length;a+=2){i+=String.fromCharCode(n[a]+n[a+1]*256)}return i}l.prototype.slice=function _e(e,t){var r=this.length;e=~~e;t=t===undefined?r:~~t;if(e<0){e+=r;if(e<0)e=0}else if(e>r){e=r}if(t<0){t+=r;if(t<0)t=0}else if(t>r){t=r}if(t<e)t=e;var n;if(l.TYPED_ARRAY_SUPPORT){n=this.subarray(e,t);n.__proto__=l.prototype}else{var i=t-e;n=new l(i,undefined);for(var a=0;a<i;a++){n[a]=this[a+e]}}return n};function B(e,t,r){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}l.prototype.readUIntLE=function ve(e,t,r){e=e|0;t=t|0;if(!r)B(e,t,this.length);var n=this[e];var i=1;var a=0;while(++a<t&&(i*=256)){n+=this[e+a]*i}return n};l.prototype.readUIntBE=function ge(e,t,r){e=e|0;t=t|0;if(!r){B(e,t,this.length)}var n=this[e+--t];var i=1;while(t>0&&(i*=256)){n+=this[e+--t]*i}return n};l.prototype.readUInt8=function me(e,t){if(!t)B(e,1,this.length);return this[e]};l.prototype.readUInt16LE=function ye(e,t){if(!t)B(e,2,this.length);return this[e]|this[e+1]<<8};l.prototype.readUInt16BE=function be(e,t){if(!t)B(e,2,this.length);return this[e]<<8|this[e+1]};l.prototype.readUInt32LE=function we(e,t){if(!t)B(e,4,this.length);return(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};l.prototype.readUInt32BE=function Ee(e,t){if(!t)B(e,4,this.length);return this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};l.prototype.readIntLE=function Ae(e,t,r){e=e|0;t=t|0;if(!r)B(e,t,this.length);var n=this[e];var i=1;var a=0;while(++a<t&&(i*=256)){n+=this[e+a]*i}i*=128;if(n>=i)n-=Math.pow(2,8*t);return n};l.prototype.readIntBE=function xe(e,t,r){e=e|0;t=t|0;if(!r)B(e,t,this.length);var n=t;var i=1;var a=this[e+--n];while(n>0&&(i*=256)){a+=this[e+--n]*i}i*=128;if(a>=i)a-=Math.pow(2,8*t);return a};l.prototype.readInt8=function Te(e,t){if(!t)B(e,1,this.length);if(!(this[e]&128))return this[e];return(255-this[e]+1)*-1};l.prototype.readInt16LE=function Re(e,t){if(!t)B(e,2,this.length);var r=this[e]|this[e+1]<<8;return r&32768?r|4294901760:r};l.prototype.readInt16BE=function Se(e,t){if(!t)B(e,2,this.length);var r=this[e+1]|this[e]<<8;return r&32768?r|4294901760:r};l.prototype.readInt32LE=function Ce(e,t){if(!t)B(e,4,this.length);return this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};l.prototype.readInt32BE=function je(e,t){if(!t)B(e,4,this.length);return this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};l.prototype.readFloatLE=function ke(e,t){if(!t)B(e,4,this.length);return i.read(this,e,true,23,4)};l.prototype.readFloatBE=function Ie(e,t){if(!t)B(e,4,this.length);return i.read(this,e,false,23,4)};l.prototype.readDoubleLE=function Oe(e,t){if(!t)B(e,8,this.length);return i.read(this,e,true,52,8)};l.prototype.readDoubleBE=function Le(e,t){if(!t)B(e,8,this.length);return i.read(this,e,false,52,8)};function D(e,t,r,n,i,a){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}l.prototype.writeUIntLE=function Ne(e,t,r,n){e=+e;t=t|0;r=r|0;if(!n){var i=Math.pow(2,8*r)-1;D(this,e,t,r,i,0)}var a=1;var o=0;this[t]=e&255;while(++o<r&&(a*=256)){this[t+o]=e/a&255}return t+r};l.prototype.writeUIntBE=function Me(e,t,r,n){e=+e;t=t|0;r=r|0;if(!n){var i=Math.pow(2,8*r)-1;D(this,e,t,r,i,0)}var a=r-1;var o=1;this[t+a]=e&255;while(--a>=0&&(o*=256)){this[t+a]=e/o&255}return t+r};l.prototype.writeUInt8=function Pe(e,t,r){e=+e;t=t|0;if(!r)D(this,e,t,1,255,0);if(!l.TYPED_ARRAY_SUPPORT)e=Math.floor(e);this[t]=e&255;return t+1};function F(e,t,r,n){if(t<0)t=65535+t+1;for(var i=0,a=Math.min(e.length-r,2);i<a;i++){e[r+i]=(t&255<<8*(n?i:1-i))>>>(n?i:1-i)*8}}l.prototype.writeUInt16LE=function Ue(e,t,r){e=+e;t=t|0;if(!r)D(this,e,t,2,65535,0);if(l.TYPED_ARRAY_SUPPORT){this[t]=e&255;this[t+1]=e>>>8}else{F(this,e,t,true)}return t+2};l.prototype.writeUInt16BE=function Be(e,t,r){e=+e;t=t|0;if(!r)D(this,e,t,2,65535,0);if(l.TYPED_ARRAY_SUPPORT){this[t]=e>>>8;this[t+1]=e&255}else{F(this,e,t,false)}return t+2};function V(e,t,r,n){if(t<0)t=4294967295+t+1;for(var i=0,a=Math.min(e.length-r,4);i<a;i++){e[r+i]=t>>>(n?i:3-i)*8&255}}l.prototype.writeUInt32LE=function De(e,t,r){e=+e;t=t|0;if(!r)D(this,e,t,4,4294967295,0);if(l.TYPED_ARRAY_SUPPORT){this[t+3]=e>>>24;this[t+2]=e>>>16;this[t+1]=e>>>8;this[t]=e&255}else{V(this,e,t,true)}return t+4};l.prototype.writeUInt32BE=function Fe(e,t,r){e=+e;t=t|0;if(!r)D(this,e,t,4,4294967295,0);if(l.TYPED_ARRAY_SUPPORT){this[t]=e>>>24;this[t+1]=e>>>16;this[t+2]=e>>>8;this[t+3]=e&255}else{V(this,e,t,false)}return t+4};l.prototype.writeIntLE=function Ve(e,t,r,n){e=+e;t=t|0;if(!n){var i=Math.pow(2,8*r-1);D(this,e,t,r,i-1,-i)}var a=0;var o=1;var s=0;this[t]=e&255;while(++a<r&&(o*=256)){if(e<0&&s===0&&this[t+a-1]!==0){s=1}this[t+a]=(e/o>>0)-s&255}return t+r};l.prototype.writeIntBE=function Xe(e,t,r,n){e=+e;t=t|0;if(!n){var i=Math.pow(2,8*r-1);D(this,e,t,r,i-1,-i)}var a=r-1;var o=1;var s=0;this[t+a]=e&255;while(--a>=0&&(o*=256)){if(e<0&&s===0&&this[t+a+1]!==0){s=1}this[t+a]=(e/o>>0)-s&255}return t+r};l.prototype.writeInt8=function He(e,t,r){e=+e;t=t|0;if(!r)D(this,e,t,1,127,-128);if(!l.TYPED_ARRAY_SUPPORT)e=Math.floor(e);if(e<0)e=255+e+1;this[t]=e&255;return t+1};l.prototype.writeInt16LE=function Ge(e,t,r){e=+e;t=t|0;if(!r)D(this,e,t,2,32767,-32768);if(l.TYPED_ARRAY_SUPPORT){this[t]=e&255;this[t+1]=e>>>8}else{F(this,e,t,true)}return t+2};l.prototype.writeInt16BE=function ze(e,t,r){e=+e;t=t|0;if(!r)D(this,e,t,2,32767,-32768);if(l.TYPED_ARRAY_SUPPORT){this[t]=e>>>8;this[t+1]=e&255}else{F(this,e,t,false)}return t+2};l.prototype.writeInt32LE=function Ye(e,t,r){e=+e;t=t|0;if(!r)D(this,e,t,4,2147483647,-2147483648);if(l.TYPED_ARRAY_SUPPORT){this[t]=e&255;this[t+1]=e>>>8;this[t+2]=e>>>16;this[t+3]=e>>>24}else{V(this,e,t,true)}return t+4};l.prototype.writeInt32BE=function We(e,t,r){e=+e;t=t|0;if(!r)D(this,e,t,4,2147483647,-2147483648);if(e<0)e=4294967295+e+1;if(l.TYPED_ARRAY_SUPPORT){this[t]=e>>>24;this[t+1]=e>>>16;this[t+2]=e>>>8;this[t+3]=e&255}else{V(this,e,t,false)}return t+4};function X(e,t,r,n,i,a){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function H(e,t,r,n,a){if(!a){X(e,t,r,4,3.4028234663852886e38,-3.4028234663852886e38)}i.write(e,t,r,n,23,4);return r+4}l.prototype.writeFloatLE=function qe(e,t,r){return H(this,e,t,true,r)};l.prototype.writeFloatBE=function Ke(e,t,r){return H(this,e,t,false,r)};function G(e,t,r,n,a){if(!a){X(e,t,r,8,1.7976931348623157e308,-1.7976931348623157e308)}i.write(e,t,r,n,52,8);return r+8}l.prototype.writeDoubleLE=function $e(e,t,r){return G(this,e,t,true,r)};l.prototype.writeDoubleBE=function Ze(e,t,r){return G(this,e,t,false,r)};l.prototype.copy=function Je(e,t,r,n){if(!r)r=0;if(!n&&n!==0)n=this.length;if(t>=e.length)t=e.length;if(!t)t=0;if(n>0&&n<r)n=r;if(n===r)return 0;if(e.length===0||this.length===0)return 0;if(t<0){throw new RangeError("targetStart out of bounds")}if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");if(n>this.length)n=this.length;if(e.length-t<n-r){n=e.length-t+r}var i=n-r;var a;if(this===e&&r<t&&t<n){for(a=i-1;a>=0;a--){e[a+t]=this[a+r]}}else if(i<1e3||!l.TYPED_ARRAY_SUPPORT){for(a=0;a<i;a++){e[a+t]=this[a+r]}}else{Uint8Array.prototype.set.call(e,this.subarray(r,r+i),t)}return i};l.prototype.fill=function Qe(e,t,r,n){if(typeof e==="string"){if(typeof t==="string"){n=t;t=0;r=this.length}else if(typeof r==="string"){n=r;r=this.length}if(e.length===1){var i=e.charCodeAt(0);if(i<256){e=i}}if(n!==undefined&&typeof n!=="string"){throw new TypeError("encoding must be a string")}if(typeof n==="string"&&!l.isEncoding(n)){throw new TypeError("Unknown encoding: "+n)}}else if(typeof e==="number"){e=e&255}if(t<0||this.length<t||this.length<r){throw new RangeError("Out of range index")}if(r<=t){return this}t=t>>>0;r=r===undefined?this.length:r>>>0;if(!e)e=0;var a;if(typeof e==="number"){for(a=t;a<r;a++){this[a]=e}}else{var o=l.isBuffer(e)?e:K(new l(e,n).toString());var s=o.length;for(a=0;a<r-t;a++){this[a+t]=o[a%s]}}return this};var z=/[^+\/0-9A-Za-z-_]/g;function Y(e){e=W(e).replace(z,"");if(e.length<2)return"";while(e.length%4!==0){e=e+"="}return e}
function W(e){if(e.trim)return e.trim();return e.replace(/^\s+|\s+$/g,"")}function q(e){if(e<16)return"0"+e.toString(16);return e.toString(16)}function K(e,t){t=t||Infinity;var r;var n=e.length;var i=null;var a=[];for(var o=0;o<n;o++){r=e.charCodeAt(o);if(r>55295&&r<57344){if(!i){if(r>56319){if((t-=3)>-1)a.push(239,191,189);continue}else if(o+1===n){if((t-=3)>-1)a.push(239,191,189);continue}i=r;continue}if(r<56320){if((t-=3)>-1)a.push(239,191,189);i=r;continue}r=(i-55296<<10|r-56320)+65536}else if(i){if((t-=3)>-1)a.push(239,191,189)}i=null;if(r<128){if((t-=1)<0)break;a.push(r)}else if(r<2048){if((t-=2)<0)break;a.push(r>>6|192,r&63|128)}else if(r<65536){if((t-=3)<0)break;a.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((t-=4)<0)break;a.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else{throw new Error("Invalid code point")}}return a}function $(e){var t=[];for(var r=0;r<e.length;r++){t.push(e.charCodeAt(r)&255)}return t}function Z(e,t){var r,n,i;var a=[];for(var o=0;o<e.length;o++){if((t-=2)<0)break;r=e.charCodeAt(o);n=r>>8;i=r%256;a.push(i);a.push(n)}return a}function J(e){return n.toByteArray(Y(e))}function Q(e,t,r,n){for(var i=0;i<n;i++){if(i+r>=t.length||i>=e.length)break;t[i+r]=e[i]}return i}function ee(e){return e!==e}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"base64-js":22,ieee754:23,isarray:24}],22:[function(e,t,r){"use strict";r.toByteArray=s;r.fromByteArray=f;var n=[];var i=[];var a=typeof Uint8Array!=="undefined"?Uint8Array:Array;function o(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var t=0,r=e.length;t<r;++t){n[t]=e[t];i[e.charCodeAt(t)]=t}i["-".charCodeAt(0)]=62;i["_".charCodeAt(0)]=63}o();function s(e){var t,r,n,o,s,u;var l=e.length;if(l%4>0){throw new Error("Invalid string. Length must be a multiple of 4")}s=e[l-2]==="="?2:e[l-1]==="="?1:0;u=new a(l*3/4-s);n=s>0?l-4:l;var f=0;for(t=0,r=0;t<n;t+=4,r+=3){o=i[e.charCodeAt(t)]<<18|i[e.charCodeAt(t+1)]<<12|i[e.charCodeAt(t+2)]<<6|i[e.charCodeAt(t+3)];u[f++]=o>>16&255;u[f++]=o>>8&255;u[f++]=o&255}if(s===2){o=i[e.charCodeAt(t)]<<2|i[e.charCodeAt(t+1)]>>4;u[f++]=o&255}else if(s===1){o=i[e.charCodeAt(t)]<<10|i[e.charCodeAt(t+1)]<<4|i[e.charCodeAt(t+2)]>>2;u[f++]=o>>8&255;u[f++]=o&255}return u}function u(e){return n[e>>18&63]+n[e>>12&63]+n[e>>6&63]+n[e&63]}function l(e,t,r){var n;var i=[];for(var a=t;a<r;a+=3){n=(e[a]<<16)+(e[a+1]<<8)+e[a+2];i.push(u(n))}return i.join("")}function f(e){var t;var r=e.length;var i=r%3;var a="";var o=[];var s=16383;for(var u=0,f=r-i;u<f;u+=s){o.push(l(e,u,u+s>f?f:u+s))}if(i===1){t=e[r-1];a+=n[t>>2];a+=n[t<<4&63];a+="=="}else if(i===2){t=(e[r-2]<<8)+e[r-1];a+=n[t>>10];a+=n[t>>4&63];a+=n[t<<2&63];a+="="}o.push(a);return o.join("")}},{}],23:[function(e,t,r){r.read=function(e,t,r,n,i){var a,o;var s=i*8-n-1;var u=(1<<s)-1;var l=u>>1;var f=-7;var c=r?i-1:0;var h=r?-1:1;var d=e[t+c];c+=h;a=d&(1<<-f)-1;d>>=-f;f+=s;for(;f>0;a=a*256+e[t+c],c+=h,f-=8){}o=a&(1<<-f)-1;a>>=-f;f+=n;for(;f>0;o=o*256+e[t+c],c+=h,f-=8){}if(a===0){a=1-l}else if(a===u){return o?NaN:(d?-1:1)*Infinity}else{o=o+Math.pow(2,n);a=a-l}return(d?-1:1)*o*Math.pow(2,a-n)};r.write=function(e,t,r,n,i,a){var o,s,u;var l=a*8-i-1;var f=(1<<l)-1;var c=f>>1;var h=i===23?Math.pow(2,-24)-Math.pow(2,-77):0;var d=n?0:a-1;var p=n?1:-1;var _=t<0||t===0&&1/t<0?1:0;t=Math.abs(t);if(isNaN(t)||t===Infinity){s=isNaN(t)?1:0;o=f}else{o=Math.floor(Math.log(t)/Math.LN2);if(t*(u=Math.pow(2,-o))<1){o--;u*=2}if(o+c>=1){t+=h/u}else{t+=h*Math.pow(2,1-c)}if(t*u>=2){o++;u/=2}if(o+c>=f){s=0;o=f}else if(o+c>=1){s=(t*u-1)*Math.pow(2,i);o=o+c}else{s=t*Math.pow(2,c-1)*Math.pow(2,i);o=0}}for(;i>=8;e[r+d]=s&255,d+=p,s/=256,i-=8){}o=o<<i|s;l+=i;for(;l>0;e[r+d]=o&255,d+=p,o/=256,l-=8){}e[r+d-p]|=_*128}},{}],24:[function(e,t,r){var n={}.toString;t.exports=Array.isArray||function(e){return n.call(e)=="[object Array]"}},{}],25:[function(e,t,r){function n(){this._events=this._events||{};this._maxListeners=this._maxListeners||undefined}t.exports=n;n.EventEmitter=n;n.prototype._events=undefined;n.prototype._maxListeners=undefined;n.defaultMaxListeners=10;n.prototype.setMaxListeners=function(e){if(!a(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");this._maxListeners=e;return this};n.prototype.emit=function(e){var t,r,n,a,u,l;if(!this._events)this._events={};if(e==="error"){if(!this._events.error||o(this._events.error)&&!this._events.error.length){t=arguments[1];if(t instanceof Error){throw t}throw TypeError('Uncaught, unspecified "error" event.')}}r=this._events[e];if(s(r))return false;if(i(r)){switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1);r.apply(this,a)}}else if(o(r)){a=Array.prototype.slice.call(arguments,1);l=r.slice();n=l.length;for(u=0;u<n;u++)l[u].apply(this,a)}return true};n.prototype.addListener=function(e,t){var r;if(!i(t))throw TypeError("listener must be a function");if(!this._events)this._events={};if(this._events.newListener)this.emit("newListener",e,i(t.listener)?t.listener:t);if(!this._events[e])this._events[e]=t;else if(o(this._events[e]))this._events[e].push(t);else this._events[e]=[this._events[e],t];if(o(this._events[e])&&!this._events[e].warned){if(!s(this._maxListeners)){r=this._maxListeners}else{r=n.defaultMaxListeners}if(r&&r>0&&this._events[e].length>r){this._events[e].warned=true;console.error("(node) warning: possible EventEmitter memory "+"leak detected. %d listeners added. "+"Use emitter.setMaxListeners() to increase limit.",this._events[e].length);if(typeof console.trace==="function"){console.trace()}}}return this};n.prototype.on=n.prototype.addListener;n.prototype.once=function(e,t){if(!i(t))throw TypeError("listener must be a function");var r=false;function n(){this.removeListener(e,n);if(!r){r=true;t.apply(this,arguments)}}n.listener=t;this.on(e,n);return this};n.prototype.removeListener=function(e,t){var r,n,a,s;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;r=this._events[e];a=r.length;n=-1;if(r===t||i(r.listener)&&r.listener===t){delete this._events[e];if(this._events.removeListener)this.emit("removeListener",e,t)}else if(o(r)){for(s=a;s-->0;){if(r[s]===t||r[s].listener&&r[s].listener===t){n=s;break}}if(n<0)return this;if(r.length===1){r.length=0;delete this._events[e]}else{r.splice(n,1)}if(this._events.removeListener)this.emit("removeListener",e,t)}return this};n.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener){if(arguments.length===0)this._events={};else if(this._events[e])delete this._events[e];return this}if(arguments.length===0){for(t in this._events){if(t==="removeListener")continue;this.removeAllListeners(t)}this.removeAllListeners("removeListener");this._events={};return this}r=this._events[e];if(i(r)){this.removeListener(e,r)}else if(r){while(r.length)this.removeListener(e,r[r.length-1])}delete this._events[e];return this};n.prototype.listeners=function(e){var t;if(!this._events||!this._events[e])t=[];else if(i(this._events[e]))t=[this._events[e]];else t=this._events[e].slice();return t};n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(i(t))return 1;else if(t)return t.length}return 0};n.listenerCount=function(e,t){return e.listenerCount(t)};function i(e){return typeof e==="function"}function a(e){return typeof e==="number"}function o(e){return typeof e==="object"&&e!==null}function s(e){return e===void 0}},{}],26:[function(e,t,r){if(typeof Object.create==="function"){t.exports=function n(e,t){e.super_=t;e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}})}}else{t.exports=function i(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype;e.prototype=new r;e.prototype.constructor=e}}},{}],27:[function(e,t,r){arguments[4][10][0].apply(r,arguments)},{dup:10}],28:[function(e,t,r){(function(e){function t(e,t){var r=0;for(var n=e.length-1;n>=0;n--){var i=e[n];if(i==="."){e.splice(n,1)}else if(i===".."){e.splice(n,1);r++}else if(r){e.splice(n,1);r--}}if(t){for(;r--;r){e.unshift("..")}}return e}var n=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;var i=function(e){return n.exec(e).slice(1)};r.resolve=function(){var r="",n=false;for(var i=arguments.length-1;i>=-1&&!n;i--){var o=i>=0?arguments[i]:e.cwd();if(typeof o!=="string"){throw new TypeError("Arguments to path.resolve must be strings")}else if(!o){continue}r=o+"/"+r;n=o.charAt(0)==="/"}r=t(a(r.split("/"),function(e){return!!e}),!n).join("/");return(n?"/":"")+r||"."};r.normalize=function(e){var n=r.isAbsolute(e),i=o(e,-1)==="/";e=t(a(e.split("/"),function(e){return!!e}),!n).join("/");if(!e&&!n){e="."}if(e&&i){e+="/"}return(n?"/":"")+e};r.isAbsolute=function(e){return e.charAt(0)==="/"};r.join=function(){var e=Array.prototype.slice.call(arguments,0);return r.normalize(a(e,function(e,t){if(typeof e!=="string"){throw new TypeError("Arguments to path.join must be strings")}return e}).join("/"))};r.relative=function(e,t){e=r.resolve(e).substr(1);t=r.resolve(t).substr(1);function n(e){var t=0;for(;t<e.length;t++){if(e[t]!=="")break}var r=e.length-1;for(;r>=0;r--){if(e[r]!=="")break}if(t>r)return[];return e.slice(t,r-t+1)}var i=n(e.split("/"));var a=n(t.split("/"));var o=Math.min(i.length,a.length);var s=o;for(var u=0;u<o;u++){if(i[u]!==a[u]){s=u;break}}var l=[];for(var u=s;u<i.length;u++){l.push("..")}l=l.concat(a.slice(s));return l.join("/")};r.sep="/";r.delimiter=":";r.dirname=function(e){var t=i(e),r=t[0],n=t[1];if(!r&&!n){return"."}if(n){n=n.substr(0,n.length-1)}return r+n};r.basename=function(e,t){var r=i(e)[2];if(t&&r.substr(-1*t.length)===t){r=r.substr(0,r.length-t.length)}return r};r.extname=function(e){return i(e)[3]};function a(e,t){if(e.filter)return e.filter(t);var r=[];for(var n=0;n<e.length;n++){if(t(e[n],n,e))r.push(e[n])}return r}var o="ab".substr(-1)==="b"?function(e,t,r){return e.substr(t,r)}:function(e,t,r){if(t<0)t=e.length+t;return e.substr(t,r)}}).call(this,e("_process"))},{_process:29}],29:[function(e,t,r){var n=t.exports={};var i=[];var a=false;var o;var s=-1;function u(){a=false;if(o.length){i=o.concat(i)}else{s=-1}if(i.length){l()}}function l(){if(a){return}var e=setTimeout(u);a=true;var t=i.length;while(t){o=i;i=[];while(++s<t){if(o){o[s].run()}}s=-1;t=i.length}o=null;a=false;clearTimeout(e)}n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1){for(var r=1;r<arguments.length;r++){t[r-1]=arguments[r]}}i.push(new f(e,t));if(i.length===1&&!a){setTimeout(l,0)}};function f(e,t){this.fun=e;this.array=t}f.prototype.run=function(){this.fun.apply(null,this.array)};n.title="browser";n.browser=true;n.env={};n.argv=[];n.version="";n.versions={};function c(){}n.on=c;n.addListener=c;n.once=c;n.off=c;n.removeListener=c;n.removeAllListeners=c;n.emit=c;n.binding=function(e){throw new Error("process.binding is not supported")};n.cwd=function(){return"/"};n.chdir=function(e){throw new Error("process.chdir is not supported")};n.umask=function(){return 0}},{}],30:[function(e,t,r){t.exports=e("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":31}],31:[function(e,t,r){"use strict";var n=Object.keys||function(e){var t=[];for(var r in e){t.push(r)}return t};t.exports=c;var i=e("process-nextick-args");var a=e("core-util-is");a.inherits=e("inherits");var o=e("./_stream_readable");var s=e("./_stream_writable");a.inherits(c,o);var u=n(s.prototype);for(var l=0;l<u.length;l++){var f=u[l];if(!c.prototype[f])c.prototype[f]=s.prototype[f]}function c(e){if(!(this instanceof c))return new c(e);o.call(this,e);s.call(this,e);if(e&&e.readable===false)this.readable=false;if(e&&e.writable===false)this.writable=false;this.allowHalfOpen=true;if(e&&e.allowHalfOpen===false)this.allowHalfOpen=false;this.once("end",h)}function h(){if(this.allowHalfOpen||this._writableState.ended)return;i(d,this)}function d(e){e.end()}function p(e,t){for(var r=0,n=e.length;r<n;r++){t(e[r],r)}}},{"./_stream_readable":33,"./_stream_writable":35,"core-util-is":36,inherits:26,"process-nextick-args":38}],32:[function(e,t,r){"use strict";t.exports=a;var n=e("./_stream_transform");var i=e("core-util-is");i.inherits=e("inherits");i.inherits(a,n);function a(e){if(!(this instanceof a))return new a(e);n.call(this,e)}a.prototype._transform=function(e,t,r){r(null,e)}},{"./_stream_transform":34,"core-util-is":36,inherits:26}],33:[function(e,t,r){(function(r){"use strict";t.exports=_;var n=e("process-nextick-args");var i=e("isarray");var a=e("buffer").Buffer;_.ReadableState=p;var o=e("events");var s=function(e,t){return e.listeners(t).length};var u;(function(){try{u=e("st"+"ream")}catch(t){}finally{if(!u)u=e("events").EventEmitter}})();var a=e("buffer").Buffer;var l=e("core-util-is");l.inherits=e("inherits");var f=e("util");var c=undefined;if(f&&f.debuglog){c=f.debuglog("stream")}else{c=function(){}}var h;l.inherits(_,u);var d;function p(t,r){d=d||e("./_stream_duplex");t=t||{};this.objectMode=!!t.objectMode;if(r instanceof d)this.objectMode=this.objectMode||!!t.readableObjectMode;var n=t.highWaterMark;var i=this.objectMode?16:16*1024;this.highWaterMark=n||n===0?n:i;this.highWaterMark=~~this.highWaterMark;this.buffer=[];this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=null;this.ended=false;this.endEmitted=false;this.reading=false;this.sync=true;this.needReadable=false;this.emittedReadable=false;this.readableListening=false;this.resumeScheduled=false;this.defaultEncoding=t.defaultEncoding||"utf8";this.ranOut=false;this.awaitDrain=0;this.readingMore=false;this.decoder=null;this.encoding=null;if(t.encoding){if(!h)h=e("string_decoder/").StringDecoder;this.decoder=new h(t.encoding);this.encoding=t.encoding}}var d;function _(t){d=d||e("./_stream_duplex");if(!(this instanceof _))return new _(t);this._readableState=new p(t,this);this.readable=true;if(t&&typeof t.read==="function")this._read=t.read;u.call(this)}_.prototype.push=function(e,t){var r=this._readableState;if(!r.objectMode&&typeof e==="string"){t=t||r.defaultEncoding;if(t!==r.encoding){e=new a(e,t);t=""}}return v(this,r,e,t,false)};_.prototype.unshift=function(e){var t=this._readableState;return v(this,t,e,"",true)};_.prototype.isPaused=function(){return this._readableState.flowing===false};function v(e,t,r,n,i){var a=w(t,r);if(a){e.emit("error",a)}else if(r===null){t.reading=false;E(e,t)}else if(t.objectMode||r&&r.length>0){if(t.ended&&!i){var o=new Error("stream.push() after EOF");e.emit("error",o)}else if(t.endEmitted&&i){var o=new Error("stream.unshift() after end event");e.emit("error",o)}else{var s;if(t.decoder&&!i&&!n){r=t.decoder.write(r);s=!t.objectMode&&r.length===0}if(!i)t.reading=false;if(!s){if(t.flowing&&t.length===0&&!t.sync){e.emit("data",r);e.read(0)}else{t.length+=t.objectMode?1:r.length;if(i)t.buffer.unshift(r);else t.buffer.push(r);if(t.needReadable)A(e)}}T(e,t)}}else if(!i){t.reading=false}return g(t)}function g(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||e.length===0)}_.prototype.setEncoding=function(t){if(!h)h=e("string_decoder/").StringDecoder;this._readableState.decoder=new h(t);this._readableState.encoding=t;return this};var m=8388608;function y(e){if(e>=m){e=m}else{e--;e|=e>>>1;e|=e>>>2;e|=e>>>4;e|=e>>>8;e|=e>>>16;e++}return e}function b(e,t){if(t.length===0&&t.ended)return 0;if(t.objectMode)return e===0?0:1;if(e===null||isNaN(e)){if(t.flowing&&t.buffer.length)return t.buffer[0].length;else return t.length}if(e<=0)return 0;if(e>t.highWaterMark)t.highWaterMark=y(e);if(e>t.length){if(!t.ended){t.needReadable=true;return 0}else{return t.length}}return e}_.prototype.read=function(e){c("read",e);var t=this._readableState;var r=e;if(typeof e!=="number"||e>0)t.emittedReadable=false;if(e===0&&t.needReadable&&(t.length>=t.highWaterMark||t.ended)){c("read: emitReadable",t.length,t.ended);if(t.length===0&&t.ended)L(this);else A(this);return null}e=b(e,t);if(e===0&&t.ended){if(t.length===0)L(this);return null}var n=t.needReadable;c("need readable",n);if(t.length===0||t.length-e<t.highWaterMark){n=true;c("length less than watermark",n)}if(t.ended||t.reading){n=false;c("reading or ended",n)}if(n){c("do read");t.reading=true;t.sync=true;if(t.length===0)t.needReadable=true;this._read(t.highWaterMark);t.sync=false}if(n&&!t.reading)e=b(r,t);var i;if(e>0)i=O(e,t);else i=null;if(i===null){t.needReadable=true;e=0}t.length-=e;if(t.length===0&&!t.ended)t.needReadable=true;if(r!==e&&t.ended&&t.length===0)L(this);if(i!==null)this.emit("data",i);return i};function w(e,t){var r=null;if(!a.isBuffer(t)&&typeof t!=="string"&&t!==null&&t!==undefined&&!e.objectMode){r=new TypeError("Invalid non-string/buffer chunk")}return r}function E(e,t){if(t.ended)return;if(t.decoder){var r=t.decoder.end();if(r&&r.length){t.buffer.push(r);t.length+=t.objectMode?1:r.length}}t.ended=true;A(e)}function A(e){var t=e._readableState;t.needReadable=false;if(!t.emittedReadable){c("emitReadable",t.flowing);t.emittedReadable=true;if(t.sync)n(x,e);else x(e)}}function x(e){c("emit readable");e.emit("readable");I(e)}function T(e,t){if(!t.readingMore){t.readingMore=true;n(R,e,t)}}function R(e,t){var r=t.length;while(!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark){c("maybeReadMore read 0");e.read(0);if(r===t.length)break;else r=t.length}t.readingMore=false}_.prototype._read=function(e){this.emit("error",new Error("not implemented"))};_.prototype.pipe=function(e,t){var a=this;var o=this._readableState;switch(o.pipesCount){case 0:o.pipes=e;break;case 1:o.pipes=[o.pipes,e];break;default:o.pipes.push(e);break}o.pipesCount+=1;c("pipe count=%d opts=%j",o.pipesCount,t);var u=(!t||t.end!==false)&&e!==r.stdout&&e!==r.stderr;var l=u?h:_;if(o.endEmitted)n(l);else a.once("end",l);e.on("unpipe",f);function f(e){c("onunpipe");if(e===a){_()}}function h(){c("onend");e.end()}var d=S(a);e.on("drain",d);var p=false;function _(){c("cleanup");e.removeListener("close",m);e.removeListener("finish",y);e.removeListener("drain",d);e.removeListener("error",g);e.removeListener("unpipe",f);a.removeListener("end",h);a.removeListener("end",_);a.removeListener("data",v);p=true;if(o.awaitDrain&&(!e._writableState||e._writableState.needDrain))d()}a.on("data",v);function v(t){c("ondata");var r=e.write(t);if(false===r){if(o.pipesCount===1&&o.pipes[0]===e&&a.listenerCount("data")===1&&!p){c("false write response, pause",a._readableState.awaitDrain);a._readableState.awaitDrain++}a.pause()}}function g(t){c("onerror",t);b();e.removeListener("error",g);if(s(e,"error")===0)e.emit("error",t)}if(!e._events||!e._events.error)e.on("error",g);else if(i(e._events.error))e._events.error.unshift(g);else e._events.error=[g,e._events.error];function m(){e.removeListener("finish",y);b()}e.once("close",m);function y(){c("onfinish");e.removeListener("close",m);b()}e.once("finish",y);function b(){c("unpipe");a.unpipe(e)}e.emit("pipe",a);if(!o.flowing){c("pipe resume");a.resume()}return e};function S(e){return function(){var t=e._readableState;c("pipeOnDrain",t.awaitDrain);if(t.awaitDrain)t.awaitDrain--;if(t.awaitDrain===0&&s(e,"data")){t.flowing=true;I(e)}}}_.prototype.unpipe=function(e){var t=this._readableState;if(t.pipesCount===0)return this;if(t.pipesCount===1){if(e&&e!==t.pipes)return this;if(!e)e=t.pipes;t.pipes=null;t.pipesCount=0;t.flowing=false;if(e)e.emit("unpipe",this);return this}if(!e){var r=t.pipes;var n=t.pipesCount;t.pipes=null;t.pipesCount=0;t.flowing=false;for(var i=0;i<n;i++){r[i].emit("unpipe",this)}return this}var a=P(t.pipes,e);if(a===-1)return this;t.pipes.splice(a,1);t.pipesCount-=1;if(t.pipesCount===1)t.pipes=t.pipes[0];e.emit("unpipe",this);return this};_.prototype.on=function(e,t){var r=u.prototype.on.call(this,e,t);if(e==="data"&&false!==this._readableState.flowing){this.resume()}if(e==="readable"&&!this._readableState.endEmitted){var i=this._readableState;if(!i.readableListening){i.readableListening=true;i.emittedReadable=false;i.needReadable=true;if(!i.reading){n(C,this)}else if(i.length){A(this,i)}}}return r};_.prototype.addListener=_.prototype.on;function C(e){c("readable nexttick read 0");e.read(0)}_.prototype.resume=function(){var e=this._readableState;if(!e.flowing){c("resume");e.flowing=true;j(this,e)}return this};function j(e,t){if(!t.resumeScheduled){t.resumeScheduled=true;n(k,e,t)}}function k(e,t){if(!t.reading){c("resume read 0");e.read(0)}t.resumeScheduled=false;e.emit("resume");I(e);if(t.flowing&&!t.reading)e.read(0)}_.prototype.pause=function(){c("call pause flowing=%j",this._readableState.flowing);if(false!==this._readableState.flowing){c("pause");this._readableState.flowing=false;this.emit("pause")}return this};function I(e){var t=e._readableState;c("flow",t.flowing);if(t.flowing){do{var r=e.read()}while(null!==r&&t.flowing)}}_.prototype.wrap=function(e){var t=this._readableState;var r=false;var n=this;e.on("end",function(){c("wrapped end");if(t.decoder&&!t.ended){var e=t.decoder.end();if(e&&e.length)n.push(e)}n.push(null)});e.on("data",function(i){c("wrapped data");if(t.decoder)i=t.decoder.write(i);if(t.objectMode&&(i===null||i===undefined))return;else if(!t.objectMode&&(!i||!i.length))return;var a=n.push(i);if(!a){r=true;e.pause()}});for(var i in e){if(this[i]===undefined&&typeof e[i]==="function"){this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i)}}var a=["error","close","destroy","pause","resume"];M(a,function(t){e.on(t,n.emit.bind(n,t))});n._read=function(t){c("wrapped _read",t);if(r){r=false;e.resume()}};return n};_._fromList=O;function O(e,t){var r=t.buffer;var n=t.length;var i=!!t.decoder;var o=!!t.objectMode;var s;if(r.length===0)return null;if(n===0)s=null;else if(o)s=r.shift();else if(!e||e>=n){if(i)s=r.join("");else if(r.length===1)s=r[0];else s=a.concat(r,n);r.length=0}else{if(e<r[0].length){var u=r[0];s=u.slice(0,e);r[0]=u.slice(e)}else if(e===r[0].length){s=r.shift()}else{if(i)s="";else s=new a(e);var l=0;for(var f=0,c=r.length;f<c&&l<e;f++){var u=r[0];var h=Math.min(e-l,u.length);if(i)s+=u.slice(0,h);else u.copy(s,l,0,h);if(h<u.length)r[0]=u.slice(h);else r.shift();l+=h}}}return s}function L(e){var t=e._readableState;if(t.length>0)throw new Error("endReadable called on non-empty stream");if(!t.endEmitted){t.ended=true;n(N,t,e)}}function N(e,t){if(!e.endEmitted&&e.length===0){e.endEmitted=true;t.readable=false;t.emit("end")}}function M(e,t){for(var r=0,n=e.length;r<n;r++){t(e[r],r)}}function P(e,t){for(var r=0,n=e.length;r<n;r++){if(e[r]===t)return r}return-1}}).call(this,e("_process"))},{"./_stream_duplex":31,_process:29,buffer:21,"core-util-is":36,events:25,inherits:26,isarray:37,"process-nextick-args":38,"string_decoder/":45,util:20}],34:[function(e,t,r){"use strict";t.exports=s;var n=e("./_stream_duplex");var i=e("core-util-is");i.inherits=e("inherits");i.inherits(s,n);function a(e){this.afterTransform=function(t,r){return o(e,t,r)};this.needTransform=false;this.transforming=false;this.writecb=null;this.writechunk=null;this.writeencoding=null}function o(e,t,r){var n=e._transformState;n.transforming=false;var i=n.writecb;if(!i)return e.emit("error",new Error("no writecb in Transform class"));n.writechunk=null;n.writecb=null;if(r!==null&&r!==undefined)e.push(r);i(t);var a=e._readableState;a.reading=false;if(a.needReadable||a.length<a.highWaterMark){e._read(a.highWaterMark)}}function s(e){if(!(this instanceof s))return new s(e);n.call(this,e);this._transformState=new a(this);var t=this;this._readableState.needReadable=true;this._readableState.sync=false;if(e){if(typeof e.transform==="function")this._transform=e.transform;if(typeof e.flush==="function")this._flush=e.flush}this.once("prefinish",function(){if(typeof this._flush==="function")this._flush(function(e){u(t,e)});else u(t)})}s.prototype.push=function(e,t){this._transformState.needTransform=false;return n.prototype.push.call(this,e,t)};s.prototype._transform=function(e,t,r){throw new Error("not implemented")};s.prototype._write=function(e,t,r){var n=this._transformState;n.writecb=r;n.writechunk=e;n.writeencoding=t;if(!n.transforming){var i=this._readableState;if(n.needTransform||i.needReadable||i.length<i.highWaterMark)this._read(i.highWaterMark)}};s.prototype._read=function(e){var t=this._transformState;if(t.writechunk!==null&&t.writecb&&!t.transforming){t.transforming=true;this._transform(t.writechunk,t.writeencoding,t.afterTransform)}else{t.needTransform=true}};function u(e,t){if(t)return e.emit("error",t);var r=e._writableState;var n=e._transformState;if(r.length)throw new Error("calling transform done when ws.length != 0");if(n.transforming)throw new Error("calling transform done when still transforming");return e.push(null)}},{"./_stream_duplex":31,"core-util-is":36,inherits:26}],35:[function(e,t,r){"use strict";t.exports=d;var n=e("process-nextick-args");var i=!true?setImmediate:n;var a=e("buffer").Buffer;d.WritableState=h;var o=e("core-util-is");o.inherits=e("inherits");var s={deprecate:e("util-deprecate")};var u;(function(){try{u=e("st"+"ream")}catch(t){}finally{if(!u)u=e("events").EventEmitter}})();var a=e("buffer").Buffer;o.inherits(d,u);function l(){}function f(e,t,r){this.chunk=e;this.encoding=t;this.callback=r;this.next=null}var c;function h(t,r){c=c||e("./_stream_duplex");t=t||{};this.objectMode=!!t.objectMode;if(r instanceof c)this.objectMode=this.objectMode||!!t.writableObjectMode;var n=t.highWaterMark;var i=this.objectMode?16:16*1024;this.highWaterMark=n||n===0?n:i;this.highWaterMark=~~this.highWaterMark;this.needDrain=false;this.ending=false;this.ended=false;this.finished=false;var a=t.decodeStrings===false;this.decodeStrings=!a;this.defaultEncoding=t.defaultEncoding||"utf8";this.length=0;this.writing=false;this.corked=0;this.sync=true;this.bufferProcessing=false;this.onwrite=function(e){w(r,e)};this.writecb=null;this.writelen=0;this.bufferedRequest=null;this.lastBufferedRequest=null;this.pendingcb=0;this.prefinished=false;this.errorEmitted=false;this.bufferedRequestCount=0;this.corkedRequestsFree=new j(this);this.corkedRequestsFree.next=new j(this)}h.prototype.getBuffer=function k(){var e=this.bufferedRequest;var t=[];while(e){t.push(e);e=e.next}return t};(function(){try{Object.defineProperty(h.prototype,"buffer",{get:s.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer "+"instead.")})}catch(e){}})();var c;function d(t){c=c||e("./_stream_duplex");if(!(this instanceof d)&&!(this instanceof c))return new d(t);this._writableState=new h(t,this);this.writable=true;if(t){if(typeof t.write==="function")this._write=t.write;if(typeof t.writev==="function")this._writev=t.writev}u.call(this)}d.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))};function p(e,t){var r=new Error("write after end");e.emit("error",r);n(t,r)}function _(e,t,r,i){var o=true;if(!a.isBuffer(r)&&typeof r!=="string"&&r!==null&&r!==undefined&&!t.objectMode){var s=new TypeError("Invalid non-string/buffer chunk");e.emit("error",s);n(i,s);o=false}return o}d.prototype.write=function(e,t,r){var n=this._writableState;var i=false;if(typeof t==="function"){r=t;t=null}if(a.isBuffer(e))t="buffer";else if(!t)t=n.defaultEncoding;if(typeof r!=="function")r=l;if(n.ended)p(this,r);else if(_(this,n,e,r)){n.pendingcb++;i=g(this,n,e,t,r)}return i};d.prototype.cork=function(){var e=this._writableState;e.corked++};d.prototype.uncork=function(){var e=this._writableState;if(e.corked){e.corked--;if(!e.writing&&!e.corked&&!e.finished&&!e.bufferProcessing&&e.bufferedRequest)x(this,e)}};d.prototype.setDefaultEncoding=function I(e){if(typeof e==="string")e=e.toLowerCase();if(!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);this._writableState.defaultEncoding=e};function v(e,t,r){if(!e.objectMode&&e.decodeStrings!==false&&typeof t==="string"){t=new a(t,r)}return t}function g(e,t,r,n,i){r=v(t,r,n);if(a.isBuffer(r))n="buffer";var o=t.objectMode?1:r.length;t.length+=o;var s=t.length<t.highWaterMark;if(!s)t.needDrain=true;if(t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest=new f(r,n,i);if(u){u.next=t.lastBufferedRequest}else{t.bufferedRequest=t.lastBufferedRequest}t.bufferedRequestCount+=1}else{m(e,t,false,o,r,n,i)}return s}function m(e,t,r,n,i,a,o){t.writelen=n;t.writecb=o;t.writing=true;t.sync=true;if(r)e._writev(i,t.onwrite);else e._write(i,a,t.onwrite);t.sync=false}function y(e,t,r,i,a){--t.pendingcb;if(r)n(a,i);else a(i);e._writableState.errorEmitted=true;e.emit("error",i)}function b(e){e.writing=false;e.writecb=null;e.length-=e.writelen;e.writelen=0}function w(e,t){var r=e._writableState;var n=r.sync;var a=r.writecb;b(r);if(t)y(e,r,n,t,a);else{var o=T(r);if(!o&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest){x(e,r)}if(n){i(E,e,r,o,a)}else{E(e,r,o,a)}}}function E(e,t,r,n){if(!r)A(e,t);t.pendingcb--;n();S(e,t)}function A(e,t){if(t.length===0&&t.needDrain){t.needDrain=false;e.emit("drain")}}function x(e,t){t.bufferProcessing=true;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount;var i=new Array(n);var a=t.corkedRequestsFree;a.entry=r;var o=0;while(r){i[o]=r;r=r.next;o+=1}m(e,t,true,t.length,i,"",a.finish);t.pendingcb++;t.lastBufferedRequest=null;t.corkedRequestsFree=a.next;a.next=null}else{while(r){var s=r.chunk;var u=r.encoding;var l=r.callback;var f=t.objectMode?1:s.length;m(e,t,false,f,s,u,l);r=r.next;if(t.writing){break}}if(r===null)t.lastBufferedRequest=null}t.bufferedRequestCount=0;t.bufferedRequest=r;t.bufferProcessing=false}d.prototype._write=function(e,t,r){r(new Error("not implemented"))};d.prototype._writev=null;d.prototype.end=function(e,t,r){var n=this._writableState;if(typeof e==="function"){r=e;e=null;t=null}else if(typeof t==="function"){r=t;t=null}if(e!==null&&e!==undefined)this.write(e,t);if(n.corked){n.corked=1;this.uncork()}if(!n.ending&&!n.finished)C(this,n,r)};function T(e){return e.ending&&e.length===0&&e.bufferedRequest===null&&!e.finished&&!e.writing}function R(e,t){if(!t.prefinished){t.prefinished=true;e.emit("prefinish")}}function S(e,t){var r=T(t);if(r){if(t.pendingcb===0){R(e,t);t.finished=true;e.emit("finish")}else{R(e,t)}}return r}function C(e,t,r){t.ending=true;S(e,t);if(r){if(t.finished)n(r);else e.once("finish",r)}t.ended=true;e.writable=false}function j(e){var t=this;this.next=null;this.entry=null;this.finish=function(r){var n=t.entry;t.entry=null;while(n){var i=n.callback;e.pendingcb--;i(r);n=n.next}if(e.corkedRequestsFree){e.corkedRequestsFree.next=t}else{e.corkedRequestsFree=t}}}},{"./_stream_duplex":31,buffer:21,"core-util-is":36,events:25,inherits:26,"process-nextick-args":38,"util-deprecate":39}],36:[function(e,t,r){(function(e){function t(e){if(Array.isArray){return Array.isArray(e)}return v(e)==="[object Array]"}r.isArray=t;function n(e){return typeof e==="boolean"}r.isBoolean=n;function i(e){return e===null}r.isNull=i;function a(e){return e==null}r.isNullOrUndefined=a;function o(e){return typeof e==="number"}r.isNumber=o;function s(e){return typeof e==="string"}r.isString=s;function u(e){return typeof e==="symbol"}r.isSymbol=u;function l(e){return e===void 0}r.isUndefined=l;function f(e){return v(e)==="[object RegExp]"}r.isRegExp=f;function c(e){return typeof e==="object"&&e!==null}r.isObject=c;function h(e){return v(e)==="[object Date]"}r.isDate=h;function d(e){return v(e)==="[object Error]"||e instanceof Error}r.isError=d;function p(e){return typeof e==="function"}r.isFunction=p;function _(e){return e===null||typeof e==="boolean"||typeof e==="number"||typeof e==="string"||typeof e==="symbol"||typeof e==="undefined"}r.isPrimitive=_;r.isBuffer=e.isBuffer;function v(e){return Object.prototype.toString.call(e)}}).call(this,{isBuffer:e("../../../../insert-module-globals/node_modules/is-buffer/index.js")})},{"../../../../insert-module-globals/node_modules/is-buffer/index.js":27}],37:[function(e,t,r){arguments[4][24][0].apply(r,arguments);

},{dup:24}],38:[function(e,t,r){(function(e){"use strict";if(!e.version||e.version.indexOf("v0.")===0||e.version.indexOf("v1.")===0&&e.version.indexOf("v1.8.")!==0){t.exports=r}else{t.exports=e.nextTick}function r(t){var r=new Array(arguments.length-1);var n=0;while(n<r.length){r[n++]=arguments[n]}e.nextTick(function i(){t.apply(null,r)})}}).call(this,e("_process"))},{_process:29}],39:[function(e,t,r){(function(e){t.exports=r;function r(e,t){if(n("noDeprecation")){return e}var r=false;function i(){if(!r){if(n("throwDeprecation")){throw new Error(t)}else if(n("traceDeprecation")){console.trace(t)}else{console.warn(t)}r=true}return e.apply(this,arguments)}return i}function n(t){try{if(!e.localStorage)return false}catch(r){return false}var n=e.localStorage[t];if(null==n)return false;return String(n).toLowerCase()==="true"}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],40:[function(e,t,r){t.exports=e("./lib/_stream_passthrough.js")},{"./lib/_stream_passthrough.js":32}],41:[function(e,t,r){var n=function(){try{return e("st"+"ream")}catch(t){}}();r=t.exports=e("./lib/_stream_readable.js");r.Stream=n||r;r.Readable=r;r.Writable=e("./lib/_stream_writable.js");r.Duplex=e("./lib/_stream_duplex.js");r.Transform=e("./lib/_stream_transform.js");r.PassThrough=e("./lib/_stream_passthrough.js");if(!true){t.exports=e("stream")}},{"./lib/_stream_duplex.js":31,"./lib/_stream_passthrough.js":32,"./lib/_stream_readable.js":33,"./lib/_stream_transform.js":34,"./lib/_stream_writable.js":35,stream:44}],42:[function(e,t,r){t.exports=e("./lib/_stream_transform.js")},{"./lib/_stream_transform.js":34}],43:[function(e,t,r){t.exports=e("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":35}],44:[function(e,t,r){t.exports=a;var n=e("events").EventEmitter;var i=e("inherits");i(a,n);a.Readable=e("readable-stream/readable.js");a.Writable=e("readable-stream/writable.js");a.Duplex=e("readable-stream/duplex.js");a.Transform=e("readable-stream/transform.js");a.PassThrough=e("readable-stream/passthrough.js");a.Stream=a;function a(){n.call(this)}a.prototype.pipe=function(e,t){var r=this;function i(t){if(e.writable){if(false===e.write(t)&&r.pause){r.pause()}}}r.on("data",i);function a(){if(r.readable&&r.resume){r.resume()}}e.on("drain",a);if(!e._isStdio&&(!t||t.end!==false)){r.on("end",s);r.on("close",u)}var o=false;function s(){if(o)return;o=true;e.end()}function u(){if(o)return;o=true;if(typeof e.destroy==="function")e.destroy()}function l(e){f();if(n.listenerCount(this,"error")===0){throw e}}r.on("error",l);e.on("error",l);function f(){r.removeListener("data",i);e.removeListener("drain",a);r.removeListener("end",s);r.removeListener("close",u);r.removeListener("error",l);e.removeListener("error",l);r.removeListener("end",f);r.removeListener("close",f);e.removeListener("close",f)}r.on("end",f);r.on("close",f);e.on("close",f);e.emit("pipe",r);return e}},{events:25,inherits:26,"readable-stream/duplex.js":30,"readable-stream/passthrough.js":40,"readable-stream/readable.js":41,"readable-stream/transform.js":42,"readable-stream/writable.js":43}],45:[function(e,t,r){var n=e("buffer").Buffer;var i=n.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return true;default:return false}};function a(e){if(e&&!i(e)){throw new Error("Unknown encoding: "+e)}}var o=r.StringDecoder=function(e){this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,"");a(e);switch(this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2;this.detectIncompleteChar=u;break;case"base64":this.surrogateSize=3;this.detectIncompleteChar=l;break;default:this.write=s;return}this.charBuffer=new n(6);this.charReceived=0;this.charLength=0};o.prototype.write=function(e){var t="";while(this.charLength){var r=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;e.copy(this.charBuffer,this.charReceived,0,r);this.charReceived+=r;if(this.charReceived<this.charLength){return""}e=e.slice(r,e.length);t=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var n=t.charCodeAt(t.length-1);if(n>=55296&&n<=56319){this.charLength+=this.surrogateSize;t="";continue}this.charReceived=this.charLength=0;if(e.length===0){return t}break}this.detectIncompleteChar(e);var i=e.length;if(this.charLength){e.copy(this.charBuffer,0,e.length-this.charReceived,i);i-=this.charReceived}t+=e.toString(this.encoding,0,i);var i=t.length-1;var n=t.charCodeAt(i);if(n>=55296&&n<=56319){var a=this.surrogateSize;this.charLength+=a;this.charReceived+=a;this.charBuffer.copy(this.charBuffer,a,0,a);e.copy(this.charBuffer,0,0,a);return t.substring(0,i)}return t};o.prototype.detectIncompleteChar=function(e){var t=e.length>=3?3:e.length;for(;t>0;t--){var r=e[e.length-t];if(t==1&&r>>5==6){this.charLength=2;break}if(t<=2&&r>>4==14){this.charLength=3;break}if(t<=3&&r>>3==30){this.charLength=4;break}}this.charReceived=t};o.prototype.end=function(e){var t="";if(e&&e.length)t=this.write(e);if(this.charReceived){var r=this.charReceived;var n=this.charBuffer;var i=this.encoding;t+=n.slice(0,r).toString(i)}return t};function s(e){return e.toString(this.encoding)}function u(e){this.charReceived=e.length%2;this.charLength=this.charReceived?2:0}function l(e){this.charReceived=e.length%3;this.charLength=this.charReceived?3:0}},{buffer:21}],46:[function(e,t,r){t.exports=function n(e){return e&&typeof e==="object"&&typeof e.copy==="function"&&typeof e.fill==="function"&&typeof e.readUInt8==="function"}},{}],47:[function(e,t,r){(function(t,n){var i=/%[sdj%]/g;r.format=function(e){if(!E(e)){var t=[];for(var r=0;r<arguments.length;r++){t.push(s(arguments[r]))}return t.join(" ")}var r=1;var n=arguments;var a=n.length;var o=String(e).replace(i,function(e){if(e==="%%")return"%";if(r>=a)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(t){return"[Circular]"}default:return e}});for(var u=n[r];r<a;u=n[++r]){if(y(u)||!R(u)){o+=" "+u}else{o+=" "+s(u)}}return o};r.deprecate=function(e,i){if(x(n.process)){return function(){return r.deprecate(e,i).apply(this,arguments)}}if(t.noDeprecation===true){return e}var a=false;function o(){if(!a){if(t.throwDeprecation){throw new Error(i)}else if(t.traceDeprecation){console.trace(i)}else{console.error(i)}a=true}return e.apply(this,arguments)}return o};var a={};var o;r.debuglog=function(e){if(x(o))o=t.env.NODE_DEBUG||"";e=e.toUpperCase();if(!a[e]){if(new RegExp("\\b"+e+"\\b","i").test(o)){var n=t.pid;a[e]=function(){var t=r.format.apply(r,arguments);console.error("%s %d: %s",e,n,t)}}else{a[e]=function(){}}}return a[e]};function s(e,t){var n={seen:[],stylize:l};if(arguments.length>=3)n.depth=arguments[2];if(arguments.length>=4)n.colors=arguments[3];if(m(t)){n.showHidden=t}else if(t){r._extend(n,t)}if(x(n.showHidden))n.showHidden=false;if(x(n.depth))n.depth=2;if(x(n.colors))n.colors=false;if(x(n.customInspect))n.customInspect=true;if(n.colors)n.stylize=u;return c(n,e,n.depth)}r.inspect=s;s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};s.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"};function u(e,t){var r=s.styles[t];if(r){return"["+s.colors[r][0]+"m"+e+"["+s.colors[r][1]+"m"}else{return e}}function l(e,t){return e}function f(e){var t={};e.forEach(function(e,r){t[e]=true});return t}function c(e,t,n){if(e.customInspect&&t&&j(t.inspect)&&t.inspect!==r.inspect&&!(t.constructor&&t.constructor.prototype===t)){var i=t.inspect(n,e);if(!E(i)){i=c(e,i,n)}return i}var a=h(e,t);if(a){return a}var o=Object.keys(t);var s=f(o);if(e.showHidden){o=Object.getOwnPropertyNames(t)}if(C(t)&&(o.indexOf("message")>=0||o.indexOf("description")>=0)){return d(t)}if(o.length===0){if(j(t)){var u=t.name?": "+t.name:"";return e.stylize("[Function"+u+"]","special")}if(T(t)){return e.stylize(RegExp.prototype.toString.call(t),"regexp")}if(S(t)){return e.stylize(Date.prototype.toString.call(t),"date")}if(C(t)){return d(t)}}var l="",m=false,y=["{","}"];if(g(t)){m=true;y=["[","]"]}if(j(t)){var b=t.name?": "+t.name:"";l=" [Function"+b+"]"}if(T(t)){l=" "+RegExp.prototype.toString.call(t)}if(S(t)){l=" "+Date.prototype.toUTCString.call(t)}if(C(t)){l=" "+d(t)}if(o.length===0&&(!m||t.length==0)){return y[0]+l+y[1]}if(n<0){if(T(t)){return e.stylize(RegExp.prototype.toString.call(t),"regexp")}else{return e.stylize("[Object]","special")}}e.seen.push(t);var w;if(m){w=p(e,t,n,s,o)}else{w=o.map(function(r){return _(e,t,n,s,r,m)})}e.seen.pop();return v(w,l,y)}function h(e,t){if(x(t))return e.stylize("undefined","undefined");if(E(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}if(w(t))return e.stylize(""+t,"number");if(m(t))return e.stylize(""+t,"boolean");if(y(t))return e.stylize("null","null")}function d(e){return"["+Error.prototype.toString.call(e)+"]"}function p(e,t,r,n,i){var a=[];for(var o=0,s=t.length;o<s;++o){if(M(t,String(o))){a.push(_(e,t,r,n,String(o),true))}else{a.push("")}}i.forEach(function(i){if(!i.match(/^\d+$/)){a.push(_(e,t,r,n,i,true))}});return a}function _(e,t,r,n,i,a){var o,s,u;u=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]};if(u.get){if(u.set){s=e.stylize("[Getter/Setter]","special")}else{s=e.stylize("[Getter]","special")}}else{if(u.set){s=e.stylize("[Setter]","special")}}if(!M(n,i)){o="["+i+"]"}if(!s){if(e.seen.indexOf(u.value)<0){if(y(r)){s=c(e,u.value,null)}else{s=c(e,u.value,r-1)}if(s.indexOf("\n")>-1){if(a){s=s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2)}else{s="\n"+s.split("\n").map(function(e){return"   "+e}).join("\n")}}}else{s=e.stylize("[Circular]","special")}}if(x(o)){if(a&&i.match(/^\d+$/)){return s}o=JSON.stringify(""+i);if(o.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)){o=o.substr(1,o.length-2);o=e.stylize(o,"name")}else{o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'");o=e.stylize(o,"string")}}return o+": "+s}function v(e,t,r){var n=0;var i=e.reduce(function(e,t){n++;if(t.indexOf("\n")>=0)n++;return e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);if(i>60){return r[0]+(t===""?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]}return r[0]+t+" "+e.join(", ")+" "+r[1]}function g(e){return Array.isArray(e)}r.isArray=g;function m(e){return typeof e==="boolean"}r.isBoolean=m;function y(e){return e===null}r.isNull=y;function b(e){return e==null}r.isNullOrUndefined=b;function w(e){return typeof e==="number"}r.isNumber=w;function E(e){return typeof e==="string"}r.isString=E;function A(e){return typeof e==="symbol"}r.isSymbol=A;function x(e){return e===void 0}r.isUndefined=x;function T(e){return R(e)&&I(e)==="[object RegExp]"}r.isRegExp=T;function R(e){return typeof e==="object"&&e!==null}r.isObject=R;function S(e){return R(e)&&I(e)==="[object Date]"}r.isDate=S;function C(e){return R(e)&&(I(e)==="[object Error]"||e instanceof Error)}r.isError=C;function j(e){return typeof e==="function"}r.isFunction=j;function k(e){return e===null||typeof e==="boolean"||typeof e==="number"||typeof e==="string"||typeof e==="symbol"||typeof e==="undefined"}r.isPrimitive=k;r.isBuffer=e("./support/isBuffer");function I(e){return Object.prototype.toString.call(e)}function O(e){return e<10?"0"+e.toString(10):e.toString(10)}var L=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function N(){var e=new Date;var t=[O(e.getHours()),O(e.getMinutes()),O(e.getSeconds())].join(":");return[e.getDate(),L[e.getMonth()],t].join(" ")}r.log=function(){console.log("%s - %s",N(),r.format.apply(r,arguments))};r.inherits=e("inherits");r._extend=function(e,t){if(!t||!R(t))return e;var r=Object.keys(t);var n=r.length;while(n--){e[r[n]]=t[r[n]]}return e};function M(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}).call(this,e("_process"),typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./support/isBuffer":46,_process:29,inherits:26}],48:[function(e,t,r){var n=e("../utils/common.js");var i=e("./toString.js");var a=e("./math.js");var o=e("./interpret.js");t.exports=s;function s(){this.__state=o.apply(this,arguments);if(this.__state===false){throw"Failed to interpret color arguments"}this.__state.a=this.__state.a||1}s.COMPONENTS=["r","g","b","h","s","v","hex","a"];n.extend(s.prototype,{toString:function(){return i(this)},toOriginal:function(){return this.__state.conversion.write(this)}});u(s.prototype,"r",2);u(s.prototype,"g",1);u(s.prototype,"b",0);l(s.prototype,"h");l(s.prototype,"s");l(s.prototype,"v");Object.defineProperty(s.prototype,"a",{get:function(){return this.__state.a},set:function(e){this.__state.a=e}});Object.defineProperty(s.prototype,"hex",{get:function(){if(!this.__state.space!=="HEX"){this.__state.hex=a.rgb_to_hex(this.r,this.g,this.b)}return this.__state.hex},set:function(e){this.__state.space="HEX";this.__state.hex=e}});function u(e,t,r){Object.defineProperty(e,t,{get:function(){if(this.__state.space==="RGB"){return this.__state[t]}f(this,t,r);return this.__state[t]},set:function(e){if(this.__state.space!=="RGB"){f(this,t,r);this.__state.space="RGB"}this.__state[t]=e}})}function l(e,t){Object.defineProperty(e,t,{get:function(){if(this.__state.space==="HSV")return this.__state[t];c(this);return this.__state[t]},set:function(e){if(this.__state.space!=="HSV"){c(this);this.__state.space="HSV"}this.__state[t]=e}})}function f(e,t,r){if(e.__state.space==="HEX"){e.__state[t]=a.component_from_hex(e.__state.hex,r)}else if(e.__state.space==="HSV"){n.extend(e.__state,a.hsv_to_rgb(e.__state.h,e.__state.s,e.__state.v))}else{throw"Corrupted color state"}}function c(e){var t=a.rgb_to_hsv(e.r,e.g,e.b);n.extend(e.__state,{s:t.s,v:t.v});if(!n.isNaN(t.h)){e.__state.h=t.h}else if(n.isUndefined(e.__state.h)){e.__state.h=0}}},{"../utils/common.js":65,"./interpret.js":49,"./math.js":50,"./toString.js":51}],49:[function(e,t,r){t.exports=n();function n(){var t=e("../utils/common.js");var r=e("./toString.js");var n,i;var a=function(){i=false;var e=arguments.length>1?t.toArray(arguments):arguments[0];t.each(o,function(r){if(r.litmus(e)){t.each(r.conversions,function(r,a){n=r.read(e);if(i===false&&n!==false){i=n;n.conversionName=a;n.conversion=r;return t.BREAK}});return t.BREAK}});return i};var o=[{litmus:t.isString,conversions:{THREE_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);if(t===null)return false;return{space:"HEX",hex:parseInt("0x"+t[1].toString()+t[1].toString()+t[2].toString()+t[2].toString()+t[3].toString()+t[3].toString())}},write:r},SIX_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9]{6})$/i);if(t===null)return false;return{space:"HEX",hex:parseInt("0x"+t[1].toString())}},write:r},CSS_RGB:{read:function(e){var t=e.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);if(t===null)return false;return{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3])}},write:r},CSS_RGBA:{read:function(e){var t=e.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\,\s*(.+)\s*\)/);if(t===null)return false;return{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3]),a:parseFloat(t[4])}},write:r}}},{litmus:t.isNumber,conversions:{HEX:{read:function(e){return{space:"HEX",hex:e,conversionName:"HEX"}},write:function(e){return e.hex}}}},{litmus:t.isArray,conversions:{RGB_ARRAY:{read:function(e){if(e.length!=3)return false;return{space:"RGB",r:e[0],g:e[1],b:e[2]}},write:function(e){return[e.r,e.g,e.b]}},RGBA_ARRAY:{read:function(e){if(e.length!=4)return false;return{space:"RGB",r:e[0],g:e[1],b:e[2],a:e[3]}},write:function(e){return[e.r,e.g,e.b,e.a]}}}},{litmus:t.isObject,conversions:{RGBA_OBJ:{read:function(e){if(t.isNumber(e.r)&&t.isNumber(e.g)&&t.isNumber(e.b)&&t.isNumber(e.a)){return{space:"RGB",r:e.r,g:e.g,b:e.b,a:e.a}}return false},write:function(e){return{r:e.r,g:e.g,b:e.b,a:e.a}}},RGB_OBJ:{read:function(e){if(t.isNumber(e.r)&&t.isNumber(e.g)&&t.isNumber(e.b)){return{space:"RGB",r:e.r,g:e.g,b:e.b}}return false},write:function(e){return{r:e.r,g:e.g,b:e.b}}},HSVA_OBJ:{read:function(e){if(t.isNumber(e.h)&&t.isNumber(e.s)&&t.isNumber(e.v)&&t.isNumber(e.a)){return{space:"HSV",h:e.h,s:e.s,v:e.v,a:e.a}}return false},write:function(e){return{h:e.h,s:e.s,v:e.v,a:e.a}}},HSV_OBJ:{read:function(e){if(t.isNumber(e.h)&&t.isNumber(e.s)&&t.isNumber(e.v)){return{space:"HSV",h:e.h,s:e.s,v:e.v}}return false},write:function(e){return{h:e.h,s:e.s,v:e.v}}}}}];return a}},{"../utils/common.js":65,"./toString.js":51}],50:[function(e,t,r){t.exports=n();function n(){var e;return{hsv_to_rgb:function(e,t,r){var n=Math.floor(e/60)%6;var i=e/60-Math.floor(e/60);var a=r*(1-t);var o=r*(1-i*t);var s=r*(1-(1-i)*t);var u=[[r,s,a],[o,r,a],[a,r,s],[a,o,r],[s,a,r],[r,a,o]][n];return{r:u[0]*255,g:u[1]*255,b:u[2]*255}},rgb_to_hsv:function(e,t,r){var n=Math.min(e,t,r),i=Math.max(e,t,r),a=i-n,o,s;if(i!=0){s=a/i}else{return{h:NaN,s:0,v:0}}if(e==i){o=(t-r)/a}else if(t==i){o=2+(r-e)/a}else{o=4+(e-t)/a}o/=6;if(o<0){o+=1}return{h:o*360,s:s,v:i/255}},rgb_to_hex:function(e,t,r){var n=this.hex_with_component(0,2,e);n=this.hex_with_component(n,1,t);n=this.hex_with_component(n,0,r);return n},component_from_hex:function(e,t){return e>>t*8&255},hex_with_component:function(t,r,n){return n<<(e=r*8)|t&~(255<<e)}}}},{}],51:[function(e,t,r){var n=e("../utils/common.js");t.exports=i;function i(e){if(e.a==1||n.isUndefined(e.a)){var t=e.hex.toString(16);while(t.length<6){t="0"+t}return"#"+t}else{return"rgba("+Math.round(e.r)+","+Math.round(e.g)+","+Math.round(e.b)+","+e.a+")"}}},{"../utils/common.js":65}],52:[function(e,t,r){var n=e("./Controller.js");var i=e("../utils/common.js");var a=e("../dom/dom.js");t.exports=o;function o(e,t){o.superclass.call(this,e,t);var r=this;this.__prev=this.getValue();this.__checkbox=document.createElement("input");this.__checkbox.setAttribute("type","checkbox");a.bind(this.__checkbox,"change",n,false);this.domElement.appendChild(this.__checkbox);this.updateDisplay();function n(){r.setValue(!r.__prev)}}o.superclass=n;i.extend(o.prototype,n.prototype,{setValue:function(e){var t=o.superclass.prototype.setValue.call(this,e);if(this.__onFinishChange){this.__onFinishChange.call(this,this.getValue())}this.__prev=this.getValue();return t},updateDisplay:function(){if(this.getValue()===true){this.__checkbox.setAttribute("checked","checked");this.__checkbox.checked=true}else{this.__checkbox.checked=false}return o.superclass.prototype.updateDisplay.call(this)}})},{"../dom/dom.js":63,"../utils/common.js":65,"./Controller.js":54}],53:[function(e,t,r){var n=e("./Controller.js");var i=e("../utils/common.js");var a=e("../dom/dom.js");var o=e("../color/Color.js");var s=e("../color/interpret.js");t.exports=u;function u(e,t){u.superclass.call(this,e,t);this.__color=new o(this.getValue());this.__temp=new o(0);var r=this;this.domElement=document.createElement("div");a.makeSelectable(this.domElement,false);this.__selector=document.createElement("div");this.__selector.className="selector";this.__saturation_field=document.createElement("div");this.__saturation_field.className="saturation-field";this.__field_knob=document.createElement("div");this.__field_knob.className="field-knob";this.__field_knob_border="2px solid ";this.__hue_knob=document.createElement("div");this.__hue_knob.className="hue-knob";this.__hue_field=document.createElement("div");this.__hue_field.className="hue-field";this.__input=document.createElement("input");this.__input.type="text";this.__input_textShadow="0 1px 1px ";a.bind(this.__input,"keydown",function(e){if(e.keyCode===13){d.call(this)}});a.bind(this.__input,"blur",d);a.bind(this.__selector,"mousedown",function(e){a.addClass(this,"drag").bind(window,"mouseup",function(e){a.removeClass(r.__selector,"drag")})});var n=document.createElement("div");i.extend(this.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"});i.extend(this.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:this.__field_knob_border+(this.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1});i.extend(this.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1});i.extend(this.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"});i.extend(n.style,{width:"100%",height:"100%",background:"none"});f(n,"top","rgba(0,0,0,0)","#000");i.extend(this.__hue_field.style,{width:"15px",height:"100px",display:"inline-block",border:"1px solid #555",cursor:"ns-resize"});c(this.__hue_field);i.extend(this.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:this.__input_textShadow+"rgba(0,0,0,0.7)"});a.bind(this.__saturation_field,"mousedown",l);a.bind(this.__field_knob,"mousedown",l);a.bind(this.__hue_field,"mousedown",function(e){v(e);a.bind(window,"mousemove",v);a.bind(window,"mouseup",p)});function l(e){_(e);a.bind(window,"mousemove",_);a.bind(window,"mouseup",h)}function h(){a.unbind(window,"mousemove",_);a.unbind(window,"mouseup",h)}function d(){var e=s(this.value);if(e!==false){r.__color.__state=e;r.setValue(r.__color.toOriginal())}else{this.value=r.__color.toString()}}function p(){a.unbind(window,"mousemove",v);a.unbind(window,"mouseup",p)}this.__saturation_field.appendChild(n);this.__selector.appendChild(this.__field_knob);this.__selector.appendChild(this.__saturation_field);this.__selector.appendChild(this.__hue_field);this.__hue_field.appendChild(this.__hue_knob);this.domElement.appendChild(this.__input);this.domElement.appendChild(this.__selector);this.updateDisplay();function _(e){e.preventDefault();var t=a.getWidth(r.__saturation_field);var n=a.getOffset(r.__saturation_field);var i=(e.clientX-n.left+document.body.scrollLeft)/t;var o=1-(e.clientY-n.top+document.body.scrollTop)/t;if(o>1)o=1;else if(o<0)o=0;if(i>1)i=1;else if(i<0)i=0;r.__color.v=o;r.__color.s=i;r.setValue(r.__color.toOriginal());return false}function v(e){e.preventDefault();var t=a.getHeight(r.__hue_field);var n=a.getOffset(r.__hue_field);var i=1-(e.clientY-n.top+document.body.scrollTop)/t;if(i>1)i=1;else if(i<0)i=0;r.__color.h=i*360;r.setValue(r.__color.toOriginal());return false}}u.superclass=n;i.extend(u.prototype,n.prototype,{updateDisplay:function(){var e=s(this.getValue());if(e!==false){var t=false;i.each(o.COMPONENTS,function(r){if(!i.isUndefined(e[r])&&!i.isUndefined(this.__color.__state[r])&&e[r]!==this.__color.__state[r]){t=true;return{}}},this);if(t){i.extend(this.__color.__state,e)}}i.extend(this.__temp.__state,this.__color.__state);this.__temp.a=1;var r=this.__color.v<.5||this.__color.s>.5?255:0;var n=255-r;i.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toString(),border:this.__field_knob_border+"rgb("+r+","+r+","+r+")"});this.__hue_knob.style.marginTop=(1-this.__color.h/360)*100+"px";this.__temp.s=1;this.__temp.v=1;f(this.__saturation_field,"left","#fff",this.__temp.toString());i.extend(this.__input.style,{backgroundColor:this.__input.value=this.__color.toString(),color:"rgb("+r+","+r+","+r+")",textShadow:this.__input_textShadow+"rgba("+n+","+n+","+n+",.7)"})}});var l=["-moz-","-o-","-webkit-","-ms-",""];function f(e,t,r,n){e.style.background="";i.each(l,function(i){e.style.cssText+="background: "+i+"linear-gradient("+t+", "+r+" 0%, "+n+" 100%); "})}function c(e){e.style.background="";e.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);";e.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);";e.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);";e.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);";e.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"}},{"../color/Color.js":48,"../color/interpret.js":49,"../dom/dom.js":63,"../utils/common.js":65,"./Controller.js":54}],54:[function(e,t,r){var n=e("../utils/common.js");var i=e("../utils/escapeHtml.js");t.exports=a;function a(e,t){this.initialValue=e[t];this.domElement=document.createElement("div");this.object=e;this.property=t;this.__onChange=undefined;this.__onFinishChange=undefined}n.extend(a.prototype,{onChange:function(e){this.__onChange=e;return this},onFinishChange:function(e){this.__onFinishChange=e;return this},setValue:function(e){this.object[this.property]=e;if(this.__onChange){this.__onChange.call(this,e)}this.updateDisplay();return this},getValue:function(){return this.object[this.property]},updateDisplay:function(){return this},isModified:function(){return this.initialValue!==this.getValue()}})},{"../utils/common.js":65,"../utils/escapeHtml.js":67}],55:[function(e,t,r){var n=e("./Controller.js");var i=e("../utils/common.js");var a=e("../dom/dom.js");t.exports=o;function o(e,t,r){o.superclass.call(this,e,t);var n=this;this.__button=document.createElement("div");this.__button.innerHTML=r===undefined?"Fire":r;a.bind(this.__button,"click",function(e){e.preventDefault();n.fire();return false});a.addClass(this.__button,"button");this.domElement.appendChild(this.__button)}o.superclass=n;i.extend(o.prototype,n.prototype,{fire:function(){if(this.__onChange){this.__onChange.call(this)}this.getValue().call(this.object);if(this.__onFinishChange){this.__onFinishChange.call(this,this.getValue())}}})},{"../dom/dom.js":63,"../utils/common.js":65,"./Controller.js":54}],56:[function(e,t,r){var n=e("./Controller.js");var i=e("../utils/common.js");t.exports=a;function a(e,t,r){a.superclass.call(this,e,t);r=r||{};this.__min=r.min;this.__max=r.max;this.__step=r.step;if(i.isUndefined(this.__step)){if(this.initialValue==0){this.__impliedStep=1}else{this.__impliedStep=Math.pow(10,Math.floor(Math.log(this.initialValue)/Math.LN10))/10}}else{this.__impliedStep=this.__step}this.__precision=o(this.__impliedStep)}a.superclass=n;i.extend(a.prototype,n.prototype,{setValue:function(e){if(this.__min!==undefined&&e<this.__min){e=this.__min}else if(this.__max!==undefined&&e>this.__max){e=this.__max}if(this.__step!==undefined&&e%this.__step!=0){e=Math.round(e/this.__step)*this.__step}return a.superclass.prototype.setValue.call(this,e)},min:function(e){this.__min=e;return this},max:function(e){this.__max=e;return this},step:function(e){this.__step=e;this.__impliedStep=e;this.__precision=o(e);return this}});function o(e){e=e.toString();if(e.indexOf(".")>-1){return e.length-e.indexOf(".")-1}else{return 0}}},{"../utils/common.js":65,"./Controller.js":54}],57:[function(e,t,r){var n=e("./NumberController.js");var i=e("../utils/common.js");var a=e("../dom/dom.js");t.exports=o;function o(e,t,r){this.__truncationSuspended=false;o.superclass.call(this,e,t,r);var n=this;var s;this.__input=document.createElement("input");this.__input.setAttribute("type","text");a.bind(this.__input,"change",u);a.bind(this.__input,"blur",l);a.bind(this.__input,"mousedown",f);a.bind(this.__input,"keydown",function(e){if(e.keyCode===13){n.__truncationSuspended=true;this.blur();n.__truncationSuspended=false}});function u(){var e=parseFloat(n.__input.value);if(!i.isNaN(e))n.setValue(e)}function l(){u();if(n.__onFinishChange){n.__onFinishChange.call(n,n.getValue())}}function f(e){a.bind(window,"mousemove",c);a.bind(window,"mouseup",h);s=e.clientY}function c(e){var t=s-e.clientY;n.setValue(n.getValue()+t*n.__impliedStep);s=e.clientY}function h(){a.unbind(window,"mousemove",c);a.unbind(window,"mouseup",h)}this.updateDisplay();this.domElement.appendChild(this.__input)}o.superclass=n;i.extend(o.prototype,n.prototype,{updateDisplay:function(){this.__input.value=this.__truncationSuspended?this.getValue():s(this.getValue(),this.__precision);return o.superclass.prototype.updateDisplay.call(this)}});function s(e,t){var r=Math.pow(10,t);return Math.round(e*r)/r}},{"../dom/dom.js":63,"../utils/common.js":65,"./NumberController.js":56}],58:[function(e,t,r){var n=e("./NumberController.js");var i=e("../utils/common.js");var a=e("../dom/dom.js");var o=e("../utils/css.js");var s="/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\n.slider {\n  box-shadow: inset 0 2px 4px rgba(0,0,0,0.15);\n  height: 1em;\n  border-radius: 1em;\n  background-color: #eee;\n  padding: 0 0.5em;\n  overflow: hidden;\n}\n\n.slider-fg {\n  padding: 1px 0 2px 0;\n  background-color: #aaa;\n  height: 1em;\n  margin-left: -0.5em;\n  padding-right: 0.5em;\n  border-radius: 1em 0 0 1em;\n}\n\n.slider-fg:after {\n  display: inline-block;\n  border-radius: 1em;\n  background-color: #fff;\n  border:  1px solid #aaa;\n  content: '';\n  float: right;\n  margin-right: -1em;\n  margin-top: -1px;\n  height: 0.9em;\n  width: 0.9em;\n}";t.exports=u;function u(e,t,r,n,i){u.superclass.call(this,e,t,{min:r,max:n,step:i});var o=this;this.__background=document.createElement("div");this.__foreground=document.createElement("div");a.bind(this.__background,"mousedown",s);a.addClass(this.__background,"slider");a.addClass(this.__foreground,"slider-fg");function s(e){a.bind(window,"mousemove",f);a.bind(window,"mouseup",c);f(e)}function f(e){e.preventDefault();var t=a.getOffset(o.__background);var r=a.getWidth(o.__background);o.setValue(l(e.clientX,t.left,t.left+r,o.__min,o.__max));return false}function c(){a.unbind(window,"mousemove",f);a.unbind(window,"mouseup",c);if(o.__onFinishChange){o.__onFinishChange.call(o,o.getValue())}}this.updateDisplay();this.__background.appendChild(this.__foreground);this.domElement.appendChild(this.__background)}u.superclass=n;u.useDefaultStyles=function(){o.inject(s)};i.extend(u.prototype,n.prototype,{updateDisplay:function(){var e=(this.getValue()-this.__min)/(this.__max-this.__min);this.__foreground.style.width=e*100+"%";return u.superclass.prototype.updateDisplay.call(this)}});function l(e,t,r,n,i){return n+(i-n)*((e-t)/(r-t))}},{"../dom/dom.js":63,"../utils/common.js":65,"../utils/css.js":66,"./NumberController.js":56}],59:[function(e,t,r){var n=e("./Controller.js");var i=e("../dom/dom.js");var a=e("../utils/common.js");t.exports=o;function o(e,t,r){o.superclass.call(this,e,t);var n=this;this.__select=document.createElement("select");if(a.isArray(r)){var s={};a.each(r,function(e){s[e]=e});r=s}a.each(r,function(e,t){var r=document.createElement("option");r.innerHTML=t;r.setAttribute("value",e);n.__select.appendChild(r)});this.updateDisplay();i.bind(this.__select,"change",function(){var e=this.options[this.selectedIndex].value;n.setValue(e)});this.domElement.appendChild(this.__select)}o.superclass=n;a.extend(o.prototype,n.prototype,{setValue:function(e){var t=o.superclass.prototype.setValue.call(this,e);if(this.__onFinishChange){this.__onFinishChange.call(this,this.getValue())}return t},updateDisplay:function(){this.__select.value=this.getValue();return o.superclass.prototype.updateDisplay.call(this)}})},{"../dom/dom.js":63,"../utils/common.js":65,"./Controller.js":54}],60:[function(e,t,r){var n=e("./Controller.js");var i=e("../dom/dom.js");var a=e("../utils/common.js");t.exports=o;function o(e,t){o.superclass.call(this,e,t);

var r=this;this.__input=document.createElement("input");this.__input.setAttribute("type","text");i.bind(this.__input,"keyup",n);i.bind(this.__input,"change",n);i.bind(this.__input,"blur",a);i.bind(this.__input,"keydown",function(e){if(e.keyCode===13){this.blur()}});function n(){r.setValue(r.__input.value)}function a(){if(r.__onFinishChange){r.__onFinishChange.call(r,r.getValue())}}this.updateDisplay();this.domElement.appendChild(this.__input)}o.superclass=n;a.extend(o.prototype,n.prototype,{updateDisplay:function(){if(!i.isActive(this.__input)){this.__input.value=this.getValue()}return o.superclass.prototype.updateDisplay.call(this)}})},{"../dom/dom.js":63,"../utils/common.js":65,"./Controller.js":54}],61:[function(e,t,r){var n=e("./OptionController.js");var i=e("./NumberControllerBox.js");var a=e("./NumberControllerSlider.js");var o=e("./StringController.js");var s=e("./FunctionController.js");var u=e("./BooleanController.js");var l=e("../utils/common.js");t.exports=f;function f(e,t){var r=e[t];if(l.isArray(arguments[2])||l.isObject(arguments[2])){return new n(e,t,arguments[2])}if(l.isNumber(r)){if(l.isNumber(arguments[2])&&l.isNumber(arguments[3])){return new a(e,t,arguments[2],arguments[3])}else{return new i(e,t,{min:arguments[2],max:arguments[3]})}}if(l.isString(r)){return new o(e,t)}if(l.isFunction(r)){return new s(e,t,"")}if(l.isBoolean(r)){return new u(e,t)}}},{"../utils/common.js":65,"./BooleanController.js":52,"./FunctionController.js":55,"./NumberControllerBox.js":57,"./NumberControllerSlider.js":58,"./OptionController.js":59,"./StringController.js":60}],62:[function(e,t,r){var n=e("../utils/common.js");var i=e("./dom.js");t.exports=a;function a(){this.backgroundElement=document.createElement("div");n.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear",transition:"opacity 0.2s linear"});i.makeFullscreen(this.backgroundElement);this.backgroundElement.style.position="fixed";this.domElement=document.createElement("div");n.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear",transition:"transform 0.2s ease-out, opacity 0.2s linear"});document.body.appendChild(this.backgroundElement);document.body.appendChild(this.domElement);var e=this;i.bind(this.backgroundElement,"click",function(){e.hide()})}a.prototype.show=function(){var e=this;this.backgroundElement.style.display="block";this.domElement.style.display="block";this.domElement.style.opacity=0;this.domElement.style.webkitTransform="scale(1.1)";this.layout();n.defer(function(){e.backgroundElement.style.opacity=1;e.domElement.style.opacity=1;e.domElement.style.webkitTransform="scale(1)"})};a.prototype.hide=function(){var e=this;var t=function(){e.domElement.style.display="none";e.backgroundElement.style.display="none";i.unbind(e.domElement,"webkitTransitionEnd",t);i.unbind(e.domElement,"transitionend",t);i.unbind(e.domElement,"oTransitionEnd",t)};i.bind(this.domElement,"webkitTransitionEnd",t);i.bind(this.domElement,"transitionend",t);i.bind(this.domElement,"oTransitionEnd",t);this.backgroundElement.style.opacity=0;this.domElement.style.opacity=0;this.domElement.style.webkitTransform="scale(1.1)"};a.prototype.layout=function(){this.domElement.style.left=window.innerWidth/2-i.getWidth(this.domElement)/2+"px";this.domElement.style.top=window.innerHeight/2-i.getHeight(this.domElement)/2+"px"};function o(e){console.log(e)}},{"../utils/common.js":65,"./dom.js":63}],63:[function(e,t,r){var n=e("../utils/common.js");var i={HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]};var a={};n.each(i,function(e,t){n.each(e,function(e){a[e]=t})});var o=/(\d+(\.\d+)?)px/;function s(e){if(e==="0"||n.isUndefined(e))return 0;var t=e.match(o);if(!n.isNull(t)){return parseFloat(t[1])}return 0}var u={makeSelectable:function(e,t){if(e===undefined||e.style===undefined)return;e.onselectstart=t?function(){return false}:function(){};e.style.MozUserSelect=t?"auto":"none";e.style.KhtmlUserSelect=t?"auto":"none";e.unselectable=t?"on":"off"},makeFullscreen:function(e,t,r){if(n.isUndefined(t))t=true;if(n.isUndefined(r))r=true;e.style.position="absolute";if(t){e.style.left=0;e.style.right=0}if(r){e.style.top=0;e.style.bottom=0}},fakeEvent:function(e,t,r,i){r=r||{};var o=a[t];if(!o){throw new Error("Event type "+t+" not supported.")}var s=document.createEvent(o);switch(o){case"MouseEvents":var u=r.x||r.clientX||0;var l=r.y||r.clientY||0;s.initMouseEvent(t,r.bubbles||false,r.cancelable||true,window,r.clickCount||1,0,0,u,l,false,false,false,false,0,null);break;case"KeyboardEvents":var f=s.initKeyboardEvent||s.initKeyEvent;n.defaults(r,{cancelable:true,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false,keyCode:undefined,charCode:undefined});f(t,r.bubbles||false,r.cancelable,window,r.ctrlKey,r.altKey,r.shiftKey,r.metaKey,r.keyCode,r.charCode);break;default:s.initEvent(t,r.bubbles||false,r.cancelable||true);break}n.defaults(s,i);e.dispatchEvent(s)},bind:function(e,t,r,n){n=n||false;if(e.addEventListener)e.addEventListener(t,r,n);else if(e.attachEvent)e.attachEvent("on"+t,r);return u},unbind:function(e,t,r,n){n=n||false;if(e.removeEventListener)e.removeEventListener(t,r,n);else if(e.detachEvent)e.detachEvent("on"+t,r);return u},addClass:function(e,t){if(e.className===undefined){e.className=t}else if(e.className!==t){var r=e.className.split(/ +/);if(r.indexOf(t)==-1){r.push(t);e.className=r.join(" ").replace(/^\s+/,"").replace(/\s+$/,"")}}return u},removeClass:function(e,t){if(t){if(e.className===undefined){}else if(e.className===t){e.removeAttribute("class")}else{var r=e.className.split(/ +/);var n=r.indexOf(t);if(n!=-1){r.splice(n,1);e.className=r.join(" ")}}}else{e.className=undefined}return u},hasClass:function(e,t){return new RegExp("(?:^|\\s+)"+t+"(?:\\s+|$)").test(e.className)||false},getWidth:function(e){var t=getComputedStyle(e);return s(t["border-left-width"])+s(t["border-right-width"])+s(t["padding-left"])+s(t["padding-right"])+s(t["width"])},getHeight:function(e){var t=getComputedStyle(e);return s(t["border-top-width"])+s(t["border-bottom-width"])+s(t["padding-top"])+s(t["padding-bottom"])+s(t["height"])},getOffset:function(e){var t={left:0,top:0};if(e.offsetParent){do{t.left+=e.offsetLeft;t.top+=e.offsetTop}while(e=e.offsetParent)}return t},isActive:function(e){return e===document.activeElement&&(e.type||e.href)}};t.exports=u},{"../utils/common.js":65}],64:[function(e,t,r){var n=e("../utils/css.js");var i='<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n      \n    </div>\n    \n  </div>\n\n</div>';var a=".dg {\n  /** Clear list styles */\n  /* Auto-place container */\n  /* Auto-placed GUI's */\n  /* Line items that don't contain folders. */\n  /** Folder names */\n  /** Hides closed items */\n  /** Controller row */\n  /** Name-half (left) */\n  /** Controller-half (right) */\n  /** Controller placement */\n  /** Shorter number boxes when slider is present. */\n  /** Ensure the entire boolean and function row shows a hand */ }\n  .dg ul {\n    list-style: none;\n    margin: 0;\n    padding: 0;\n    width: 100%;\n    clear: both; }\n  .dg.ac {\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    height: 0;\n    z-index: 0; }\n  .dg:not(.ac) .main {\n    /** Exclude mains in ac so that we don't hide close button */\n    overflow: hidden; }\n  .dg.main {\n    -webkit-transition: opacity 0.1s linear;\n    -o-transition: opacity 0.1s linear;\n    -moz-transition: opacity 0.1s linear;\n    transition: opacity 0.1s linear; }\n    .dg.main.taller-than-window {\n      overflow-y: auto; }\n      .dg.main.taller-than-window .close-button {\n        opacity: 1;\n        /* TODO, these are style notes */\n        margin-top: -1px;\n        border-top: 1px solid #2c2c2c; }\n    .dg.main ul.closed .close-button {\n      opacity: 1 !important; }\n    .dg.main:hover .close-button,\n    .dg.main .close-button.drag {\n      opacity: 1; }\n    .dg.main .close-button {\n      /*opacity: 0;*/\n      -webkit-transition: opacity 0.1s linear;\n      -o-transition: opacity 0.1s linear;\n      -moz-transition: opacity 0.1s linear;\n      transition: opacity 0.1s linear;\n      border: 0;\n      position: absolute;\n      line-height: 19px;\n      height: 20px;\n      /* TODO, these are style notes */\n      cursor: pointer;\n      text-align: center;\n      background-color: #000; }\n      .dg.main .close-button:hover {\n        background-color: #111; }\n  .dg.a {\n    float: right;\n    margin-right: 15px;\n    overflow-x: hidden; }\n    .dg.a.has-save > ul {\n      margin-top: 27px; }\n      .dg.a.has-save > ul.closed {\n        margin-top: 0; }\n    .dg.a .save-row {\n      position: fixed;\n      top: 0;\n      z-index: 1002; }\n  .dg li {\n    -webkit-transition: height 0.1s ease-out;\n    -o-transition: height 0.1s ease-out;\n    -moz-transition: height 0.1s ease-out;\n    transition: height 0.1s ease-out; }\n  .dg li:not(.folder) {\n    cursor: auto;\n    height: 27px;\n    line-height: 27px;\n    overflow: hidden;\n    padding: 0 4px 0 5px; }\n  .dg li.folder {\n    padding: 0;\n    border-left: 4px solid rgba(0, 0, 0, 0); }\n  .dg li.title {\n    cursor: pointer;\n    margin-left: -4px; }\n  .dg .closed li:not(.title),\n  .dg .closed ul li,\n  .dg .closed ul li > * {\n    height: 0;\n    overflow: hidden;\n    border: 0; }\n  .dg .cr {\n    clear: both;\n    padding-left: 3px;\n    height: 27px; }\n  .dg .property-name {\n    cursor: default;\n    float: left;\n    clear: left;\n    width: 40%;\n    overflow: hidden;\n    text-overflow: ellipsis; }\n  .dg .c {\n    float: left;\n    width: 60%; }\n  .dg .c input[type=text] {\n    border: 0;\n    margin-top: 4px;\n    padding: 3px;\n    width: 100%;\n    float: right; }\n  .dg .has-slider input[type=text] {\n    width: 30%;\n    /*display: none;*/\n    margin-left: 0; }\n  .dg .slider {\n    float: left;\n    width: 66%;\n    margin-left: -5px;\n    margin-right: 0;\n    height: 19px;\n    margin-top: 4px; }\n  .dg .slider-fg {\n    height: 100%; }\n  .dg .c input[type=checkbox] {\n    margin-top: 9px; }\n  .dg .c select {\n    margin-top: 5px; }\n  .dg .cr.function,\n  .dg .cr.function .property-name,\n  .dg .cr.function *,\n  .dg .cr.boolean,\n  .dg .cr.boolean * {\n    cursor: pointer; }\n  .dg .selector {\n    display: none;\n    position: absolute;\n    margin-left: -9px;\n    margin-top: 23px;\n    z-index: 10; }\n  .dg .c:hover .selector,\n  .dg .selector.drag {\n    display: block; }\n  .dg li.save-row {\n    padding: 0; }\n    .dg li.save-row .button {\n      display: inline-block;\n      padding: 0px 6px; }\n  .dg.dialogue {\n    background-color: #222;\n    width: 460px;\n    padding: 15px;\n    font-size: 13px;\n    line-height: 15px; }\n\n/* TODO Separate style and structure */\n#dg-new-constructor {\n  padding: 10px;\n  color: #222;\n  font-family: Monaco, monospace;\n  font-size: 10px;\n  border: 0;\n  resize: none;\n  box-shadow: inset 1px 1px 1px #888;\n  word-wrap: break-word;\n  margin: 12px 0;\n  display: block;\n  width: 440px;\n  overflow-y: scroll;\n  height: 100px;\n  position: relative; }\n\n#dg-local-explain {\n  display: none;\n  font-size: 11px;\n  line-height: 17px;\n  border-radius: 3px;\n  background-color: #333;\n  padding: 8px;\n  margin-top: 10px; }\n  #dg-local-explain code {\n    font-size: 10px; }\n\n#dat-gui-save-locally {\n  display: none; }\n\n/** Main type */\n.dg {\n  color: #eee;\n  font: 11px 'Lucida Grande', sans-serif;\n  text-shadow: 0 -1px 0 #111;\n  /** Auto place */\n  /* Controller row, <li> */\n  /** Controllers */ }\n  .dg.main {\n    /** Scrollbar */ }\n    .dg.main::-webkit-scrollbar {\n      width: 5px;\n      background: #1a1a1a; }\n    .dg.main::-webkit-scrollbar-corner {\n      height: 0;\n      display: none; }\n    .dg.main::-webkit-scrollbar-thumb {\n      border-radius: 5px;\n      background: #676767; }\n  .dg li:not(.folder) {\n    background: #1a1a1a;\n    border-bottom: 1px solid #2c2c2c; }\n  .dg li.save-row {\n    line-height: 25px;\n    background: #dad5cb;\n    border: 0; }\n    .dg li.save-row select {\n      margin-left: 5px;\n      width: 108px; }\n    .dg li.save-row .button {\n      margin-left: 5px;\n      margin-top: 1px;\n      border-radius: 2px;\n      font-size: 9px;\n      line-height: 7px;\n      padding: 4px 4px 5px 4px;\n      background: #c5bdad;\n      color: #fff;\n      text-shadow: 0 1px 0 #b0a58f;\n      box-shadow: 0 -1px 0 #b0a58f;\n      cursor: pointer; }\n      .dg li.save-row .button.gears {\n        background: #c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;\n        height: 7px;\n        width: 8px; }\n      .dg li.save-row .button:hover {\n        background-color: #bab19e;\n        box-shadow: 0 -1px 0 #b0a58f; }\n  .dg li.folder {\n    border-bottom: 0; }\n  .dg li.title {\n    padding-left: 16px;\n    background: black url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;\n    cursor: pointer;\n    border-bottom: 1px solid rgba(255, 255, 255, 0.2); }\n  .dg .closed li.title {\n    background-image: url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==); }\n  .dg .cr.boolean {\n    border-left: 3px solid #806787; }\n  .dg .cr.function {\n    border-left: 3px solid #e61d5f; }\n  .dg .cr.number {\n    border-left: 3px solid #2fa1d6; }\n    .dg .cr.number input[type=text] {\n      color: #2fa1d6; }\n  .dg .cr.string {\n    border-left: 3px solid #1ed36f; }\n    .dg .cr.string input[type=text] {\n      color: #1ed36f; }\n  .dg .cr.function:hover, .dg .cr.boolean:hover {\n    background: #111; }\n  .dg .c input[type=text] {\n    background: #303030;\n    outline: none; }\n    .dg .c input[type=text]:hover {\n      background: #3c3c3c; }\n    .dg .c input[type=text]:focus {\n      background: #494949;\n      color: #fff; }\n  .dg .c .slider {\n    background: #303030;\n    cursor: ew-resize; }\n  .dg .c .slider-fg {\n    background: #2fa1d6; }\n  .dg .c .slider:hover {\n    background: #3c3c3c; }\n    .dg .c .slider:hover .slider-fg {\n      background: #44abda; }\n";var o=e("../controllers/factory.js");var s=e("../controllers/Controller.js");var u=e("../controllers/BooleanController.js");var l=e("../controllers/FunctionController.js");var f=e("../controllers/NumberControllerBox.js");var c=e("../controllers/NumberControllerSlider.js");var h=e("../controllers/ColorController.js");var d=e("../utils/requestAnimationFrame.js");var p=e("../dom/CenteredDiv.js");var _=e("../dom/dom.js");var v=e("../utils/common.js");t.exports=g();function g(){n.inject(a);var e="dg";var t=72;var r=20;var g="Default";var m=function(){try{return"localStorage"in window&&window["localStorage"]!==null}catch(e){return false}}();var y;var b=true;var w;var E=false;var A=[];var x=function(t){var r=this;this.domElement=document.createElement("div");this.__ul=document.createElement("ul");this.domElement.appendChild(this.__ul);_.addClass(this.domElement,e);this.__folders={};this.__controllers=[];this.__rememberedObjects=[];this.__rememberedObjectIndecesToControllers=[];this.__listening=[];t=t||{};t=v.defaults(t,{autoPlace:true,width:x.DEFAULT_WIDTH});t=v.defaults(t,{resizable:t.autoPlace,hideable:t.autoPlace});if(!v.isUndefined(t.load)){if(t.preset)t.load.preset=t.preset}else{t.load={preset:g}}if(v.isUndefined(t.parent)&&t.hideable){A.push(this)}t.resizable=v.isUndefined(t.parent)&&t.resizable;if(t.autoPlace&&v.isUndefined(t.scrollable)){t.scrollable=true}var n=m&&localStorage.getItem(j(this,"isLocal"))==="true";var i;Object.defineProperties(this,{parent:{get:function(){return t.parent}},scrollable:{get:function(){return t.scrollable}},autoPlace:{get:function(){return t.autoPlace}},preset:{get:function(){if(r.parent){return r.getRoot().preset}else{return t.load.preset}},set:function(e){if(r.parent){r.getRoot().preset=e}else{t.load.preset=e}M(this);r.revert()}},width:{get:function(){return t.width},set:function(e){t.width=e;O(r,e)}},name:{get:function(){return t.name},set:function(e){t.name=e;if(o){o.innerHTML=t.name}}},closed:{get:function(){return t.closed},set:function(e){t.closed=e;if(t.closed){_.addClass(r.__ul,x.CLASS_CLOSED)}else{_.removeClass(r.__ul,x.CLASS_CLOSED)}this.onResize();if(r.__closeButton){r.__closeButton.innerHTML=e?x.TEXT_OPEN:x.TEXT_CLOSED}}},load:{get:function(){return t.load}},useLocalStorage:{get:function(){return n},set:function(e){if(m){n=e;if(e){_.bind(window,"unload",i)}else{_.unbind(window,"unload",i)}localStorage.setItem(j(r,"isLocal"),e)}}}});if(v.isUndefined(t.parent)){t.closed=false;_.addClass(this.domElement,x.CLASS_MAIN);_.makeSelectable(this.domElement,false);if(m){if(n){r.useLocalStorage=true;var a=localStorage.getItem(j(this,"gui"));if(a){t.load=JSON.parse(a)}}}this.__closeButton=document.createElement("div");this.__closeButton.innerHTML=x.TEXT_CLOSED;_.addClass(this.__closeButton,x.CLASS_CLOSE_BUTTON);this.domElement.appendChild(this.__closeButton);_.bind(this.__closeButton,"click",function(){r.closed=!r.closed})}else{if(t.closed===undefined){t.closed=true}var o=document.createTextNode(t.name);_.addClass(o,"controller-name");var s=R(r,o);var u=function(e){e.preventDefault();r.closed=!r.closed;return false};_.addClass(this.__ul,x.CLASS_CLOSED);_.addClass(s,"title");_.bind(s,"click",u);if(!t.closed){this.closed=false}}if(t.autoPlace){if(v.isUndefined(t.parent)){if(b){w=document.createElement("div");_.addClass(w,e);_.addClass(w,x.CLASS_AUTO_PLACE_CONTAINER);document.body.appendChild(w);b=false}w.appendChild(this.domElement);_.addClass(this.domElement,x.CLASS_AUTO_PLACE)}if(!this.parent)O(r,t.width)}_.bind(window,"resize",function(){r.onResize()});_.bind(this.__ul,"webkitTransitionEnd",function(){r.onResize()});_.bind(this.__ul,"transitionend",function(){r.onResize()});_.bind(this.__ul,"oTransitionEnd",function(){r.onResize()});this.onResize();if(t.resizable){I(this)}i=function(){if(m&&localStorage.getItem(j(r,"isLocal"))==="true"){localStorage.setItem(j(r,"gui"),JSON.stringify(r.getSaveObject()))}};this.saveToLocalStorageIfPossible=i;var l=r.getRoot();function f(){var e=r.getRoot();e.width+=1;v.defer(function(){e.width-=1})}if(!t.parent){f()}};x.toggleHide=function(){E=!E;v.each(A,function(e){e.domElement.style.zIndex=E?-999:999;e.domElement.style.opacity=E?0:1})};x.CLASS_AUTO_PLACE="a";x.CLASS_AUTO_PLACE_CONTAINER="ac";x.CLASS_MAIN="main";x.CLASS_CONTROLLER_ROW="cr";x.CLASS_TOO_TALL="taller-than-window";x.CLASS_CLOSED="closed";x.CLASS_CLOSE_BUTTON="close-button";x.CLASS_DRAG="drag";x.DEFAULT_WIDTH=245;x.TEXT_CLOSED="Close Controls";x.TEXT_OPEN="Open Controls";_.bind(window,"keydown",function(e){if(document.activeElement.type!=="text"&&(e.which===t||e.keyCode==t)){x.toggleHide()}},false);v.extend(x.prototype,{add:function(e,t){return T(this,e,t,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(e,t){return T(this,e,t,{color:true})},remove:function(e){this.__ul.removeChild(e.__li);this.__controllers.splice(this.__controllers.indexOf(e),1);var t=this;v.defer(function(){t.onResize()})},destroy:function(){if(this.autoPlace){w.removeChild(this.domElement)}},addFolder:function(e){if(this.__folders[e]!==undefined){throw new Error("You already have a folder in this GUI by the"+' name "'+e+'"')}var t={name:e,parent:this};t.autoPlace=this.autoPlace;if(this.load&&this.load.folders&&this.load.folders[e]){t.closed=this.load.folders[e].closed;t.load=this.load.folders[e]}var r=new x(t);this.__folders[e]=r;var n=R(this,r.domElement);_.addClass(n,"folder");return r},removeFolder:function(e){var t=this.__folders[e];if(!t){return}delete this.__folders[e];var r=t.__controllers;for(var n=0;n<r.length;++n){r[n].remove()}var i=Object.keys(t.__folders||{});for(n=0;n<i.length;++n){var a=i[n];t.removeFolder(a)}var o=t.domElement.parentNode;o.parentNode.removeChild(o)},open:function(){this.closed=false},update:function(){B(this)},close:function(){this.closed=true},onResize:function(){var e=this.getRoot();if(e.scrollable){var t=_.getOffset(e.__ul).top;var n=0;v.each(e.__ul.childNodes,function(t){if(!(e.autoPlace&&t===e.__save_row))n+=_.getHeight(t)});if(window.innerHeight-t-r<n){_.addClass(e.domElement,x.CLASS_TOO_TALL);e.__ul.style.height=window.innerHeight-t-r+"px"}else{_.removeClass(e.domElement,x.CLASS_TOO_TALL);e.__ul.style.height="auto"}}if(e.__resize_handle){v.defer(function(){e.__resize_handle.style.height=e.__ul.offsetHeight+"px"})}if(e.__closeButton){e.__closeButton.style.width=e.width+"px"}},remember:function(){if(v.isUndefined(y)){y=new p;y.domElement.innerHTML=i}if(this.parent){throw new Error("You can only call remember on a top level GUI.")}var e=this;v.each(Array.prototype.slice.call(arguments),function(t){if(e.__rememberedObjects.length==0){k(e)}if(e.__rememberedObjects.indexOf(t)==-1){e.__rememberedObjects.push(t)}});if(this.autoPlace){O(this,this.width)}},getRoot:function(){var e=this;while(e.parent){e=e.parent}return e},getSaveObject:function(){var e=this.load;e.closed=this.closed;if(this.__rememberedObjects.length>0){e.preset=this.preset;if(!e.remembered){e.remembered={}}e.remembered[this.preset]=L(this)}e.folders={};v.each(this.__folders,function(t,r){e.folders[r]=t.getSaveObject()});return e},save:function(){if(!this.load.remembered){this.load.remembered={}}this.load.remembered[this.preset]=L(this);P(this,false);this.saveToLocalStorageIfPossible()},saveAs:function(e){if(!this.load.remembered){this.load.remembered={};this.load.remembered[g]=L(this,true)}this.load.remembered[e]=L(this);this.preset=e;N(this,e,true);this.saveToLocalStorageIfPossible()},revert:function(e){v.each(this.__controllers,function(t){if(!this.getRoot().load.remembered){t.setValue(t.initialValue)}else{C(e||this.getRoot(),t)}},this);v.each(this.__folders,function(e){e.revert(e)});if(!e){P(this.getRoot(),false)}},listen:function(e){var t=this.__listening.length==0;this.__listening.push(e);if(t)U(this.__listening)}});function T(e,t,r,n){if(t[r]===undefined){throw new Error("Object "+t+' has no property "'+r+'"')}var i;if(n.color){i=new h(t,r)}else{var a=[t,r].concat(n.factoryArgs);i=o.apply(e,a)}if(n.before instanceof s){n.before=n.before.__li}C(e,i);_.addClass(i.domElement,"c");var u=document.createElement("span");_.addClass(u,"property-name");u.innerHTML=i.property;var l=document.createElement("div");l.appendChild(u);l.appendChild(i.domElement);var f=R(e,l,n.before);_.addClass(f,x.CLASS_CONTROLLER_ROW);_.addClass(f,typeof i.getValue());S(e,f,i);e.__controllers.push(i);return i}function R(e,t,r){var n=document.createElement("li");if(t)n.appendChild(t);if(r){e.__ul.insertBefore(n,params.before)}else{e.__ul.appendChild(n)}e.onResize();return n}function S(e,t,r){r.__li=t;r.__gui=e;v.extend(r,{options:function(t){if(arguments.length>1){r.remove();return T(e,r.object,r.property,{before:r.__li.nextElementSibling,factoryArgs:[v.toArray(arguments)]})}if(v.isArray(t)||v.isObject(t)){r.remove();return T(e,r.object,r.property,{before:r.__li.nextElementSibling,factoryArgs:[t]})}},name:function(e){r.__li.firstElementChild.firstElementChild.innerHTML=e;return r},listen:function(){r.__gui.listen(r);return r},remove:function(){r.__gui.remove(r);return r}});if(r instanceof c){var n=new f(r.object,r.property,{min:r.__min,max:r.__max,step:r.__step});v.each(["updateDisplay","onChange","onFinishChange"],function(e){var t=r[e];var i=n[e];r[e]=n[e]=function(){var e=Array.prototype.slice.call(arguments);t.apply(r,e);return i.apply(n,e)}});_.addClass(t,"has-slider");r.domElement.insertBefore(n.domElement,r.domElement.firstElementChild)}else if(r instanceof f){var i=function(t){if(v.isNumber(r.__min)&&v.isNumber(r.__max)){r.remove();return T(e,r.object,r.property,{before:r.__li.nextElementSibling,factoryArgs:[r.__min,r.__max,r.__step]})}return t};r.min=v.compose(i,r.min);r.max=v.compose(i,r.max)}else if(r instanceof u){_.bind(t,"click",function(){_.fakeEvent(r.__checkbox,"click")});_.bind(r.__checkbox,"click",function(e){e.stopPropagation()})}else if(r instanceof l){_.bind(t,"click",function(){_.fakeEvent(r.__button,"click")});_.bind(t,"mouseover",function(){_.addClass(r.__button,"hover")});_.bind(t,"mouseout",function(){_.removeClass(r.__button,"hover")})}else if(r instanceof h){_.addClass(t,"color");r.updateDisplay=v.compose(function(e){t.style.borderLeftColor=r.__color.toString();return e},r.updateDisplay);r.updateDisplay()}r.setValue=v.compose(function(t){if(e.getRoot().__preset_select&&r.isModified()){P(e.getRoot(),true)}return t},r.setValue)}function C(e,t){var r=e.getRoot();var n=r.__rememberedObjects.indexOf(t.object);if(n!=-1){var i=r.__rememberedObjectIndecesToControllers[n];if(i===undefined){i={};r.__rememberedObjectIndecesToControllers[n]=i}i[t.property]=t;if(r.load&&r.load.remembered){var a=r.load.remembered;var o;if(a[e.preset]){o=a[e.preset]}else if(a[g]){o=a[g]}else{return}if(o[n]&&o[n][t.property]!==undefined){var s=o[n][t.property];t.initialValue=s;t.setValue(s)}}}}function j(e,t){return document.location.href+"."+t}function k(e){var t=e.__save_row=document.createElement("li");_.addClass(e.domElement,"has-save");e.__ul.insertBefore(t,e.__ul.firstChild);_.addClass(t,"save-row");var r=document.createElement("span");r.innerHTML="&nbsp;";_.addClass(r,"button gears");var n=document.createElement("span");n.innerHTML="Save";_.addClass(n,"button");_.addClass(n,"save");var i=document.createElement("span");i.innerHTML="New";_.addClass(i,"button");_.addClass(i,"save-as");var a=document.createElement("span");a.innerHTML="Revert";_.addClass(a,"button");_.addClass(a,"revert");var o=e.__preset_select=document.createElement("select");if(e.load&&e.load.remembered){v.each(e.load.remembered,function(t,r){N(e,r,r==e.preset)})}else{N(e,g,false)}_.bind(o,"change",function(){for(var t=0;t<e.__preset_select.length;t++){e.__preset_select[t].innerHTML=e.__preset_select[t].value}e.preset=this.value});t.appendChild(o);t.appendChild(r);t.appendChild(n);t.appendChild(i);t.appendChild(a);if(m){var s=document.getElementById("dg-save-locally");var u=document.getElementById("dg-local-explain");s.style.display="block";var l=document.getElementById("dg-local-storage");if(localStorage.getItem(j(e,"isLocal"))==="true"){l.setAttribute("checked","checked")}function f(){u.style.display=e.useLocalStorage?"block":"none"}f();_.bind(l,"change",function(){e.useLocalStorage=!e.useLocalStorage;f()})}var c=document.getElementById("dg-new-constructor");_.bind(c,"keydown",function(e){if(e.metaKey&&(e.which===67||e.keyCode==67)){y.hide()}});_.bind(r,"click",function(){c.innerHTML=JSON.stringify(e.getSaveObject(),undefined,2);y.show();c.focus();c.select()});_.bind(n,"click",function(){e.save()});_.bind(i,"click",function(){var t=prompt("Enter a new preset name.");if(t)e.saveAs(t)});_.bind(a,"click",function(){e.revert()})}function I(e){e.__resize_handle=document.createElement("div");v.extend(e.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"});var t;_.bind(e.__resize_handle,"mousedown",r);_.bind(e.__closeButton,"mousedown",r);e.domElement.insertBefore(e.__resize_handle,e.domElement.firstElementChild);function r(r){r.preventDefault();t=r.clientX;_.addClass(e.__closeButton,x.CLASS_DRAG);_.bind(window,"mousemove",n);_.bind(window,"mouseup",i);return false}function n(r){r.preventDefault();e.width+=t-r.clientX;e.onResize();t=r.clientX;return false}function i(){_.removeClass(e.__closeButton,x.CLASS_DRAG);_.unbind(window,"mousemove",n);_.unbind(window,"mouseup",i)}}function O(e,t){e.domElement.style.width=t+"px";if(e.__save_row&&e.autoPlace){e.__save_row.style.width=t+"px"}if(e.__closeButton){e.__closeButton.style.width=t+"px"}}function L(e,t){var r={};v.each(e.__rememberedObjects,function(n,i){var a={};var o=e.__rememberedObjectIndecesToControllers[i];v.each(o,function(e,r){a[r]=t?e.initialValue:e.getValue()});r[i]=a});return r}function N(e,t,r){var n=document.createElement("option");n.innerHTML=t;n.value=t;e.__preset_select.appendChild(n);if(r){e.__preset_select.selectedIndex=e.__preset_select.length-1}}function M(e){for(var t=0;t<e.__preset_select.length;t++){if(e.__preset_select[t].value==e.preset){e.__preset_select.selectedIndex=t}}}function P(e,t){var r=e.__preset_select[e.__preset_select.selectedIndex];if(t){r.innerHTML=r.value+"*"}else{r.innerHTML=r.value}}function U(e){if(e.length!=0){d(function(){U(e)})}v.each(e,function(e){e.updateDisplay()})}function B(e){D(e.__controllers);Object.keys(e.__folders).forEach(function(t){B(e.__folders[t])})}function D(e){for(var t in e){e[t].updateDisplay()}}return x}},{"../controllers/BooleanController.js":52,"../controllers/ColorController.js":53,"../controllers/Controller.js":54,"../controllers/FunctionController.js":55,"../controllers/NumberControllerBox.js":57,"../controllers/NumberControllerSlider.js":58,"../controllers/factory.js":61,"../dom/CenteredDiv.js":62,"../dom/dom.js":63,"../utils/common.js":65,"../utils/css.js":66,"../utils/requestAnimationFrame.js":68}],65:[function(e,t,r){t.exports=n();function n(){var e=Array.prototype.forEach;var t=Array.prototype.slice;return{BREAK:{},extend:function(e){this.each(t.call(arguments,1),function(t){for(var r in t)if(!this.isUndefined(t[r]))e[r]=t[r]},this);return e},defaults:function(e){this.each(t.call(arguments,1),function(t){for(var r in t)if(this.isUndefined(e[r]))e[r]=t[r]},this);return e},compose:function(){var e=t.call(arguments);return function(){var r=t.call(arguments);for(var n=e.length-1;n>=0;n--){r=[e[n].apply(this,r)]}return r[0]}},each:function(t,r,n){if(!t)return;if(e&&t.forEach&&t.forEach===e){t.forEach(r,n)}else if(t.length===t.length+0){for(var i=0,a=t.length;i<a;i++)if(i in t&&r.call(n,t[i],i)===this.BREAK)return}else{for(var i in t)if(r.call(n,t[i],i)===this.BREAK)return}},defer:function(e){setTimeout(e,0)},toArray:function(e){if(e.toArray)return e.toArray();return t.call(e)},isUndefined:function(e){return e===undefined},isNull:function(e){return e===null},isNaN:function(e){return e!==e},isArray:Array.isArray||function(e){return e.constructor===Array},isObject:function(e){return e===Object(e)},isNumber:function(e){return e===e+0},isString:function(e){return e===e+""},isBoolean:function(e){return e===false||e===true},isFunction:function(e){return Object.prototype.toString.call(e)==="[object Function]"}}}},{}],66:[function(e,t,r){t.exports=n();function n(){return{load:function(e,t){t=t||document;var r=t.createElement("link");r.type="text/css";r.rel="stylesheet";r.href=e;t.getElementsByTagName("head")[0].appendChild(r)},inject:function(e,t){t=t||document;var r=document.createElement("style");r.type="text/css";r.innerHTML=e;t.getElementsByTagName("head")[0].appendChild(r)}}}},{}],67:[function(e,t,r){t.exports=i;var n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"
};function i(e){return String(e).replace(/[&<>"'\/]/g,function(e){return n[e]})}},{}],68:[function(e,t,r){t.exports=n();function n(){return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){window.setTimeout(e,1e3/60)}}},{}],69:[function(e,t,r){t.exports={color:{math:e("./dat/color/math.js"),interpret:e("./dat/color/interpret.js"),Color:e("./dat/color/Color.js")},dom:{dom:e("./dat/dom/dom.js")},controllers:{Controller:e("./dat/controllers/Controller.js"),BooleanController:e("./dat/controllers/BooleanController.js"),OptionController:e("./dat/controllers/OptionController.js"),StringController:e("./dat/controllers/StringController.js"),NumberController:e("./dat/controllers/NumberController.js"),NumberControllerBox:e("./dat/controllers/NumberControllerBox.js"),NumberControllerSlider:e("./dat/controllers/NumberControllerSlider.js"),FunctionController:e("./dat/controllers/FunctionController.js"),ColorController:e("./dat/controllers/ColorController.js")},gui:{GUI:e("./dat/gui/GUI.js")},GUI:e("./dat/gui/GUI.js")}},{"./dat/color/Color.js":48,"./dat/color/interpret.js":49,"./dat/color/math.js":50,"./dat/controllers/BooleanController.js":52,"./dat/controllers/ColorController.js":53,"./dat/controllers/Controller.js":54,"./dat/controllers/FunctionController.js":55,"./dat/controllers/NumberController.js":56,"./dat/controllers/NumberControllerBox.js":57,"./dat/controllers/NumberControllerSlider.js":58,"./dat/controllers/OptionController.js":59,"./dat/controllers/StringController.js":60,"./dat/dom/dom.js":63,"./dat/gui/GUI.js":64}],70:[function(e,t,r){(function(r,n){"use strict";var i=e("path");var a=e("ndarray");var o=e("omggif").GifReader;var s=e("ndarray-pack");var u=e("through");var l=e("data-uri-to-buffer");function f(e,t){var r=new Image;r.crossOrigin="Anonymous";r.onload=function(){var e=document.createElement("canvas");e.width=r.width;e.height=r.height;var n=e.getContext("2d");n.drawImage(r,0,0);var i=n.getImageData(0,0,r.width,r.height);t(null,a(new Uint8Array(i.data),[r.width,r.height,4],[4,4*r.width,1],0))};r.onerror=function(e){t(e)};r.src=e}function c(e,t){var r;try{r=new o(e)}catch(n){t(n);return}if(r.numFrames()>0){var i=[r.numFrames(),r.height,r.width,4];var s=new Uint8Array(i[0]*i[1]*i[2]*i[3]);var u=a(s,i);try{for(var l=0;l<r.numFrames();++l){r.decodeAndBlitFrameRGBA(l,s.subarray(u.index(l,0,0,0),u.index(l+1,0,0,0)))}}catch(n){t(n);return}t(null,u.transpose(0,2,1))}else{var i=[r.height,r.width,4];var s=new Uint8Array(i[0]*i[1]*i[2]);var u=a(s,i);try{r.decodeAndBlitFrameRGBA(0,s)}catch(n){t(n);return}t(null,u.transpose(1,0))}}function h(e,t){var r=new XMLHttpRequest;r.open("GET",e,true);r.responseType="arraybuffer";if(r.overrideMimeType){r.overrideMimeType("application/binary")}r.onerror=function(e){t(e)};r.onload=function(){if(r.readyState!==4){return}var e=new Uint8Array(r.response);c(e,t);return};r.send()}function d(e){if(e[0]===undefined){var t=e.length;var r=new Uint8Array(t);for(var n=0;n<t;++n){r[n]=e.get(n)}return r}else{return new Uint8Array(e)}}function p(e,t){n.nextTick(function(){try{var r=l(e);if(r){c(d(r),t)}else{t(new Error("Error parsing data URI"))}}catch(n){t(n)}})}t.exports=function _(e,t,n){if(!n){n=t;t=""}var a=i.extname(e);switch(t||a.toUpperCase()){case".GIF":h(e,n);break;default:if(r.isBuffer(e)){e="data:"+t+";base64,"+e.toString("base64")}if(e.indexOf("data:image/gif;")===0){p(e,n)}else{f(e,n)}}}}).call(this,{isBuffer:e("../browserify/node_modules/insert-module-globals/node_modules/is-buffer/index.js")},e("_process"))},{"../browserify/node_modules/insert-module-globals/node_modules/is-buffer/index.js":27,_process:29,"data-uri-to-buffer":71,ndarray:78,"ndarray-pack":72,omggif:81,path:28,through:82}],71:[function(e,t,r){(function(e){t.exports=r;function r(t){if(!/^data\:/i.test(t)){throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")')}t=t.replace(/\r?\n/g,"");var r=t.indexOf(",");if(-1===r||r<=4)throw new TypeError("malformed data: URI");var n=t.substring(5,r).split(";");var i=false;var a="US-ASCII";for(var o=0;o<n.length;o++){if("base64"==n[o]){i=true}else if(0==n[o].indexOf("charset=")){a=n[o].substring(8)}}var s=unescape(t.substring(r+1));var u=i?"base64":"ascii";var l=new e(s,u);l.type=n[0]||"text/plain";l.charset=a;return l}}).call(this,e("buffer").Buffer)},{buffer:21}],72:[function(e,t,r){"use strict";var n=e("ndarray");var i=e("./doConvert.js");t.exports=function a(e,t){var r=[],a=e,o=1;while(a instanceof Array){r.push(a.length);o*=a.length;a=a[0]}if(r.length===0){return n()}if(!t){t=n(new Float64Array(o),r)}i(t,e);return t}},{"./doConvert.js":73,ndarray:78}],73:[function(e,t,r){t.exports=e("cwise-compiler")({args:["array","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\nvar _inline_1_v=_inline_1_arg1_,_inline_1_i\nfor(_inline_1_i=0;_inline_1_i<_inline_1_arg2_.length-1;++_inline_1_i) {\n_inline_1_v=_inline_1_v[_inline_1_arg2_[_inline_1_i]]\n}\n_inline_1_arg0_=_inline_1_v[_inline_1_arg2_[_inline_1_arg2_.length-1]]\n}",args:[{name:"_inline_1_arg0_",lvalue:true,rvalue:false,count:1},{name:"_inline_1_arg1_",lvalue:false,rvalue:true,count:1},{name:"_inline_1_arg2_",lvalue:false,rvalue:true,count:4}],thisVars:[],localVars:["_inline_1_i","_inline_1_v"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},funcName:"convert",blockSize:64})},{"cwise-compiler":74}],74:[function(e,t,r){arguments[4][4][0].apply(r,arguments)},{"./lib/thunk.js":76,dup:4}],75:[function(e,t,r){arguments[4][5][0].apply(r,arguments)},{dup:5,uniq:77}],76:[function(e,t,r){arguments[4][6][0].apply(r,arguments)},{"./compile.js":75,dup:6}],77:[function(e,t,r){arguments[4][7][0].apply(r,arguments)},{dup:7}],78:[function(e,t,r){arguments[4][8][0].apply(r,arguments)},{dup:8,"iota-array":79,"is-buffer":80}],79:[function(e,t,r){arguments[4][9][0].apply(r,arguments)},{dup:9}],80:[function(e,t,r){arguments[4][10][0].apply(r,arguments)},{dup:10}],81:[function(e,t,r){function n(e,t,r,n){var a=0;var n=n===undefined?{}:n;var o=n.loop===undefined?null:n.loop;var s=n.palette===undefined?null:n.palette;if(t<=0||r<=0||t>65535||r>65535)throw"Width/Height invalid.";function u(e){var t=e.length;if(t<2||t>256||t&t-1)throw"Invalid code/color length, must be power of 2 and 2 .. 256.";return t}e[a++]=71;e[a++]=73;e[a++]=70;e[a++]=56;e[a++]=57;e[a++]=97;var l=0;var f=0;if(s!==null){var c=u(s);while(c>>=1)++l;c=1<<l;--l;if(n.background!==undefined){f=n.background;if(f>=c)throw"Background index out of range.";if(f===0)throw"Background index explicitly passed as 0."}}e[a++]=t&255;e[a++]=t>>8&255;e[a++]=r&255;e[a++]=r>>8&255;e[a++]=(s!==null?128:0)|l;e[a++]=f;e[a++]=0;if(s!==null){for(var h=0,d=s.length;h<d;++h){var p=s[h];e[a++]=p>>16&255;e[a++]=p>>8&255;e[a++]=p&255}}if(o!==null){if(o<0||o>65535)throw"Loop count invalid.";e[a++]=33;e[a++]=255;e[a++]=11;e[a++]=78;e[a++]=69;e[a++]=84;e[a++]=83;e[a++]=67;e[a++]=65;e[a++]=80;e[a++]=69;e[a++]=50;e[a++]=46;e[a++]=48;e[a++]=3;e[a++]=1;e[a++]=o&255;e[a++]=o>>8&255;e[a++]=0}var _=false;this.addFrame=function(t,r,n,o,l,f){if(_===true){--a;_=false}f=f===undefined?{}:f;if(t<0||r<0||t>65535||r>65535)throw"x/y invalid.";if(n<=0||o<=0||n>65535||o>65535)throw"Width/Height invalid.";if(l.length<n*o)throw"Not enough pixels for the frame size.";var c=true;var h=f.palette;if(h===undefined||h===null){c=false;h=s}if(h===undefined||h===null)throw"Must supply either a local or global palette.";var d=u(h);var p=0;while(d>>=1)++p;d=1<<p;var v=f.delay===undefined?0:f.delay;var g=f.disposal===undefined?0:f.disposal;if(g<0||g>3)throw"Disposal out of range.";var m=false;var y=0;if(f.transparent!==undefined&&f.transparent!==null){m=true;y=f.transparent;if(y<0||y>=d)throw"Transparent color index."}if(g!==0||m||v!==0){e[a++]=33;e[a++]=249;e[a++]=4;e[a++]=g<<2|(m===true?1:0);e[a++]=v&255;e[a++]=v>>8&255;e[a++]=y;e[a++]=0}e[a++]=44;e[a++]=t&255;e[a++]=t>>8&255;e[a++]=r&255;e[a++]=r>>8&255;e[a++]=n&255;e[a++]=n>>8&255;e[a++]=o&255;e[a++]=o>>8&255;e[a++]=c===true?128|p-1:0;if(c===true){for(var b=0,w=h.length;b<w;++b){var E=h[b];e[a++]=E>>16&255;e[a++]=E>>8&255;e[a++]=E&255}}a=i(e,a,p<2?2:p,l)};this.end=function(){if(_===false){e[a++]=59;_=true}return a}}function i(e,t,r,n){e[t++]=r;var i=t++;var a=1<<r;var o=a-1;var s=a+1;var u=s+1;var l=r+1;var f=0;var c=0;function h(r){while(f>=r){e[t++]=c&255;c>>=8;f-=8;if(t===i+256){e[i]=255;i=t++}}}function d(e){c|=e<<f;f+=l;h(8)}var p=n[0]&o;var _={};d(a);for(var v=1,g=n.length;v<g;++v){var m=n[v]&o;var y=p<<8|m;var b=_[y];if(b===undefined){c|=p<<f;f+=l;while(f>=8){e[t++]=c&255;c>>=8;f-=8;if(t===i+256){e[i]=255;i=t++}}if(u===4096){d(a);u=s+1;l=r+1;_={}}else{if(u>=1<<l)++l;_[y]=u++}p=m}else{p=b}}d(p);d(s);h(1);if(i+1===t){e[i]=0}else{e[i]=t-i-1;e[t++]=0}return t}function a(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!==56||e[t++]!==97){throw"Invalid GIF 87a/89a header."}var r=e[t++]|e[t++]<<8;var n=e[t++]|e[t++]<<8;var i=e[t++];var a=i>>7;var s=i&7;var u=1<<s+1;var l=e[t++];e[t++];var f=null;if(a){f=t;t+=u*3}var c=true;var h=[];var d=0;var p=null;var _=0;var v=null;this.width=r;this.height=n;while(c&&t<e.length){switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0){t+=14;v=e[t++]|e[t++]<<8;t++}else{t+=12;while(true){var g=e[t++];if(g===0)break;t+=g}}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw"Invalid graphics extension block.";var m=e[t++];d=e[t++]|e[t++]<<8;p=e[t++];if((m&1)===0)p=null;_=m>>2&7;t++;break;case 254:while(true){var g=e[t++];if(g===0)break;t+=g}break;default:throw"Unknown graphic control label: 0x"+e[t-1].toString(16)}break;case 44:var y=e[t++]|e[t++]<<8;var b=e[t++]|e[t++]<<8;var w=e[t++]|e[t++]<<8;var E=e[t++]|e[t++]<<8;var A=e[t++];var x=A>>7;var T=A>>6&1;var R=A&7;var S=1<<R+1;var C=f;var j=false;if(x){var j=true;C=t;t+=S*3}var k=t;t++;while(true){var g=e[t++];if(g===0)break;t+=g}h.push({x:y,y:b,width:w,height:E,has_local_palette:j,palette_offset:C,data_offset:k,data_length:t-k,transparent_index:p,interlaced:!!T,delay:d,disposal:_});break;case 59:c=false;break;default:throw"Unknown gif block: 0x"+e[t-1].toString(16);break}}this.numFrames=function(){return h.length};this.loopCount=function(){return v};this.frameInfo=function(e){if(e<0||e>=h.length)throw"Frame index out of range.";return h[e]};this.decodeAndBlitFrameBGRA=function(t,n){var i=this.frameInfo(t);var a=i.width*i.height;var s=new Uint8Array(a);o(e,i.data_offset,s,a);var u=i.palette_offset;var l=i.transparent_index;if(l===null)l=256;var f=i.width;var c=r-f;var h=f;var d=(i.y*r+i.x)*4;var p=((i.y+i.height)*r+i.x)*4;var _=d;var v=c*4;if(i.interlaced===true){v+=r*4*7}var g=8;for(var m=0,y=s.length;m<y;++m){var b=s[m];if(h===0){_+=v;h=f;if(_>=p){v=c*4+r*4*(g-1);_=d+(f+c)*(g<<1);g>>=1}}if(b===l){_+=4}else{var w=e[u+b*3];var E=e[u+b*3+1];var A=e[u+b*3+2];n[_++]=A;n[_++]=E;n[_++]=w;n[_++]=255}--h}};this.decodeAndBlitFrameRGBA=function(t,n){var i=this.frameInfo(t);var a=i.width*i.height;var s=new Uint8Array(a);o(e,i.data_offset,s,a);var u=i.palette_offset;var l=i.transparent_index;if(l===null)l=256;var f=i.width;var c=r-f;var h=f;var d=(i.y*r+i.x)*4;var p=((i.y+i.height)*r+i.x)*4;var _=d;var v=c*4;if(i.interlaced===true){v+=r*4*7}var g=8;for(var m=0,y=s.length;m<y;++m){var b=s[m];if(h===0){_+=v;h=f;if(_>=p){v=c*4+r*4*(g-1);_=d+(f+c)*(g<<1);g>>=1}}if(b===l){_+=4}else{var w=e[u+b*3];var E=e[u+b*3+1];var A=e[u+b*3+2];n[_++]=w;n[_++]=E;n[_++]=A;n[_++]=255}--h}}}function o(e,t,r,n){var i=e[t++];var a=1<<i;var o=a+1;var s=o+1;var u=i+1;var l=(1<<u)-1;var f=0;var c=0;var h=0;var d=e[t++];var p=new Int32Array(4096);var _=null;while(true){while(f<16){if(d===0)break;c|=e[t++]<<f;f+=8;if(d===1){d=e[t++]}else{--d}}if(f<u)break;var v=c&l;c>>=u;f-=u;if(v===a){s=o+1;u=i+1;l=(1<<u)-1;_=null;continue}else if(v===o){break}var g=v<s?v:_;var m=0;var y=g;while(y>a){y=p[y]>>8;++m}var b=y;var w=h+m+(g!==v?1:0);if(w>n){console.log("Warning, gif stream longer than expected.");return}r[h++]=b;h+=m;var E=h;if(g!==v)r[h++]=b;y=g;while(m--){y=p[y];r[--E]=y&255;y>>=8}if(_!==null&&s<4096){p[s++]=_<<8|b;if(s>=l+1&&u<12){++u;l=l<<1|1}}_=v}if(h!==n){console.log("Warning, gif stream shorter than expected.")}return r}try{r.GifWriter=n;r.GifReader=a}catch(s){}},{}],82:[function(e,t,r){(function(n){var i=e("stream");r=t.exports=a;a.through=a;function a(e,t,r){e=e||function(e){this.queue(e)};t=t||function(){this.queue(null)};var a=false,o=false,s=[],u=false;var l=new i;l.readable=l.writable=true;l.paused=false;l.autoDestroy=!(r&&r.autoDestroy===false);l.write=function(t){e.call(this,t);return!l.paused};function f(){while(s.length&&!l.paused){var e=s.shift();if(null===e)return l.emit("end");else l.emit("data",e)}}l.queue=l.push=function(e){if(u)return l;if(e===null)u=true;s.push(e);f();return l};l.on("end",function(){l.readable=false;if(!l.writable&&l.autoDestroy)n.nextTick(function(){l.destroy()})});function c(){l.writable=false;t.call(l);if(!l.readable&&l.autoDestroy)l.destroy()}l.end=function(e){if(a)return;a=true;if(arguments.length)l.write(e);c();return l};l.destroy=function(){if(o)return;o=true;a=true;s.length=0;l.writable=l.readable=false;l.emit("close");return l};l.pause=function(){if(l.paused)return;l.paused=true;return l};l.resume=function(){if(l.paused){l.paused=false;l.emit("resume")}f();if(!l.paused)l.emit("drain");return l};return l}}).call(this,e("_process"))},{_process:29,stream:44}],83:[function(e,t,r){"use strict";var n=e("game-shell");var i=e("webglew");function a(e){e=e||{};var t=e.extensions||[];var r=n(e);var a=r.scale||1;var o=e.glOptions;r.on("init",function u(){var n=document.createElement("canvas");var u=n.getContext("webgl",o)||n.getContext("experimental-webgl",o);if(!u){r.emit("gl-error",new Error("Unable to initialize WebGL"));return}var l=i(u);for(var f=0;f<t.length;++f){if(!(t[f]in l)){r.emit("gl-error",new Error("Missing extension: "+t[f]));return}}n.style.position="absolute";n.style.left="0px";n.style.top="0px";r.element.appendChild(n);r.canvas=n;r.gl=u;s();r.clearFlags=e.clearFlags===undefined?u.COLOR_BUFFER_BIT|u.DEPTH_BUFFER_BIT:e.clearFlags;r.clearColor=e.clearColor||[0,0,0,0];r.clearDepth=e.clearDepth||1;r.clearStencil=e.clearStencil||0;r.on("resize",s);r.on("render",function c(e){u.bindFramebuffer(u.FRAMEBUFFER,null);u.viewport(0,0,r._width/a|0,r._height/a|0);if(r.clearFlags&u.STENCIL_BUFFER_BIT){u.clearStencil(r.clearStencil)}if(r.clearFlags&u.COLOR_BUFFER_BIT){u.clearColor(r.clearColor[0],r.clearColor[1],r.clearColor[2],r.clearColor[3])}if(r.clearFlags&u.DEPTH_BUFFER_BIT){u.clearDepth(r.clearDepth)}if(r.clearFlags){u.clear(u.COLOR_BUFFER_BIT|u.DEPTH_BUFFER_BIT|u.STENCIL_BUFFER_BIT)}r.emit("gl-render",e)});r.emit("gl-init")});function s(){var e=r._width/a|0;var t=r._height/a|0;r.canvas.width=e;r.canvas.height=t;r.canvas.style.width=r._width+"px";r.canvas.style.height=r._height+"px";r.emit("gl-resize",e,t)}Object.defineProperty(r,"scale",{get:function(){return a},set:function(e){e=+e;if(e<=0||isNaN(e)||a===e){return a}a=e;s();return a}});Object.defineProperty(r,"width",{get:function(){return r._width/a|0}});Object.defineProperty(r,"height",{get:function(){return r._height/a|0}});Object.defineProperty(r,"mouse",{get:function(){return[r.mouseX/a,r.mouseY/a]}});Object.defineProperty(r,"prevMouse",{get:function(){return[r.prevMouseX/a,r.prevMouseY/a]}});return r}t.exports=a},{"game-shell":93,webglew:95}],84:[function(e,t,r){if(typeof window.performance==="object"){if(window.performance.now){t.exports=function(){return window.performance.now()}}else if(window.performance.webkitNow){t.exports=function(){return window.performance.webkitNow()}}}else if(Date.now){t.exports=Date.now}else{t.exports=function(){return(new Date).getTime()}}},{}],85:[function(e,t,r){var n="",i,a,o;if(window.addEventListener){i="addEventListener"}else{i="attachEvent";n="on"}o="onwheel"in document.createElement("div")?"wheel":document.onmousewheel!==undefined?"mousewheel":"DOMMouseScroll";function s(e,t,r,a){e[i](n+t,o=="wheel"?r:function(e){!e&&(e=window.event);var t={originalEvent:e,target:e.target||e.srcElement,type:"wheel",deltaMode:e.type=="MozMousePixelScroll"?0:1,deltaX:0,delatZ:0,preventDefault:function(){e.preventDefault?e.preventDefault():e.returnValue=false}};if(o=="mousewheel"){t.deltaY=-1/40*e.wheelDelta;e.wheelDeltaX&&(t.deltaX=-1/40*e.wheelDeltaX)}else{t.deltaY=e.detail}return r(t)},a||false)}t.exports=function(e,t,r){s(e,o,t,r);if(o=="DOMMouseScroll"){s(e,"MozMousePixelScroll",t,r)}}},{}],86:[function(e,t,r){var n=0;var i=["ms","moz","webkit","o"];for(var a=0;a<i.length&&!window.requestAnimationFrame;++a){window.requestAnimationFrame=window[i[a]+"RequestAnimationFrame"];window.cancelAnimationFrame=window[i[a]+"CancelAnimationFrame"]||window[i[a]+"CancelRequestAnimationFrame"]}if(!window.requestAnimationFrame)window.requestAnimationFrame=function(e,t){var r=(new Date).getTime();var i=Math.max(0,16-(r-n));var a=window.setTimeout(function(){e(r+i)},i);n=r+i;return a};if(!window.cancelAnimationFrame)window.cancelAnimationFrame=function(e){clearTimeout(e)}},{}],87:[function(e,t,r){"use strict";function n(e,t,r,n,i,a){var o=["function ",e,"(a,l,h,",n.join(","),"){",a?"":"var i=",r?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a",i?".get(m)":"[m]"];if(a){if(t.indexOf("c")<0){o.push(";if(x===y){return m}else if(x<=y){")}else{o.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){")}}else{o.push(";if(",t,"){i=m;")}if(r){o.push("l=m+1}else{h=m-1}")}else{o.push("h=m-1}else{l=m+1}")}o.push("}");if(a){o.push("return -1};")}else{o.push("return i};")}return o.join("")}function i(e,t,r,i){var a=new Function([n("A","x"+e+"y",t,["y"],false,i),n("B","x"+e+"y",t,["y"],true,i),n("P","c(x,y)"+e+"0",t,["y","c"],false,i),n("Q","c(x,y)"+e+"0",t,["y","c"],true,i),"function dispatchBsearch",r,"(a,y,c,l,h){if(a.shape){if(typeof(c)==='function'){return Q(a,(l===undefined)?0:l|0,(h===undefined)?a.shape[0]-1:h|0,y,c)}else{return B(a,(c===undefined)?0:c|0,(l===undefined)?a.shape[0]-1:l|0,y)}}else{if(typeof(c)==='function'){return P(a,(l===undefined)?0:l|0,(h===undefined)?a.length-1:h|0,y,c)}else{return A(a,(c===undefined)?0:c|0,(l===undefined)?a.length-1:l|0,y)}}}return dispatchBsearch",r].join(""));return a()}t.exports={ge:i(">=",false,"GE"),gt:i(">",false,"GT"),lt:i("<",true,"LT"),le:i("<=",true,"LE"),eq:i("-",true,"EQ",true)}},{}],88:[function(e,t,r){!function(e,r){if(typeof t!="undefined")t.exports=r();else if(typeof define=="function"&&typeof define.amd=="object")define(r);else this[e]=r()}("domready",function(){var e=[],t,r=document,n=r.documentElement.doScroll,i="DOMContentLoaded",a=(n?/^loaded|^c/:/^loaded|^i|^c/).test(r.readyState);if(!a)r.addEventListener(i,t=function(){r.removeEventListener(i,t);a=1;while(t=e.shift())t()});return function(t){a?setTimeout(t,0):e.push(t)}})},{}],89:[function(e,t,r){"use strict";function n(e){var t={};for(var r in e){if(e.hasOwnProperty(r)){t[e[r]]=r}}return t}t.exports=n},{}],90:[function(e,t,r){arguments[4][9][0].apply(r,arguments)},{dup:9}],91:[function(e,t,r){arguments[4][7][0].apply(r,arguments)},{dup:7}],92:[function(e,t,r){var n=typeof window!=="undefined"?window.navigator.userAgent:"",i=/OS X/.test(n),a=/Opera/.test(n),o=!/like Gecko/.test(n)&&!a;var s,u=t.exports={0:i?"<menu>":"<UNK>",1:"<mouse 1>",2:"<mouse 2>",3:"<break>",4:"<mouse 3>",5:"<mouse 4>",6:"<mouse 5>",8:"<backspace>",9:"<tab>",12:"<clear>",13:"<enter>",16:"<shift>",17:"<control>",18:"<alt>",19:"<pause>",20:"<caps-lock>",21:"<ime-hangul>",23:"<ime-junja>",24:"<ime-final>",25:"<ime-kanji>",27:"<escape>",28:"<ime-convert>",29:"<ime-nonconvert>",30:"<ime-accept>",31:"<ime-mode-change>",27:"<escape>",32:"<space>",33:"<page-up>",34:"<page-down>",35:"<end>",36:"<home>",37:"<left>",38:"<up>",39:"<right>",40:"<down>",41:"<select>",42:"<print>",43:"<execute>",44:"<snapshot>",45:"<insert>",46:"<delete>",47:"<help>",91:"<meta>",92:"<meta>",93:i?"<meta>":"<menu>",95:"<sleep>",106:"<num-*>",107:"<num-+>",108:"<num-enter>",109:"<num-->",110:"<num-.>",111:"<num-/>",144:"<num-lock>",145:"<scroll-lock>",160:"<shift-left>",161:"<shift-right>",162:"<control-left>",163:"<control-right>",164:"<alt-left>",165:"<alt-right>",166:"<browser-back>",167:"<browser-forward>",168:"<browser-refresh>",169:"<browser-stop>",170:"<browser-search>",171:"<browser-favorites>",172:"<browser-home>",173:i&&o?"-":"<volume-mute>",174:"<volume-down>",175:"<volume-up>",176:"<next-track>",177:"<prev-track>",178:"<stop>",179:"<play-pause>",180:"<launch-mail>",181:"<launch-media-select>",182:"<launch-app 1>",183:"<launch-app 2>",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",223:"<meta>",224:"<meta>",226:"<alt-gr>",229:"<ime-process>",231:a?"`":"<unicode>",246:"<attention>",247:"<crsel>",248:"<exsel>",249:"<erase-eof>",250:"<play>",251:"<zoom>",252:"<no-name>",253:"<pa-1>",254:"<clear>"};for(s=58;s<65;++s){u[s]=String.fromCharCode(s)}for(s=48;s<58;++s){u[s]=s-48+""}for(s=65;s<91;++s){u[s]=String.fromCharCode(s)}for(s=96;s<106;++s){u[s]="<num-"+(s-96)+">"}for(s=112;s<136;++s){u[s]="F"+(s-111)}},{}],93:[function(e,t,r){"use strict";var n=e("events").EventEmitter,i=e("util"),a=e("domready"),o=e("vkey"),s=e("invert-hash"),u=e("uniq"),l=e("binary-search-bounds"),f=e("iota-array"),c=Math.min;e("./lib/raf-polyfill.js");var h=e("./lib/mousewheel-polyfill.js");var d=e("./lib/hrtime-polyfill.js");var p=function(){var e=new Array(256),t,r,n;for(t=0;t<256;++t){e[t]="UNK"}for(t in o){n=o[t];if(n.charAt(0)==="<"&&n.charAt(n.length-1)===">"){n=n.substring(1,n.length-1)}n=n.replace(/\s/g,"-");e[parseInt(t)]=n}return e}();var _=u(Object.keys(s(p)));function v(e){return l.eq(_,e)}function g(e){return v(p[e])}function m(){n.call(this);this._curKeyState=new Array(_.length);this._pressCount=new Array(_.length);this._releaseCount=new Array(_.length);this._tickInterval=null;this._rafHandle=null;this._tickRate=0;this._lastTick=d();this._frameTime=0;this._paused=true;this._width=0;this._height=0;this._wantFullscreen=false;this._wantPointerLock=false;this._fullscreenActive=false;this._pointerLockActive=false;this._render=j.bind(undefined,this);this.preventDefaults=true;this.stopPropagation=false;for(var e=0;e<_.length;++e){this._curKeyState[e]=false;this._pressCount[e]=this._releaseCount[e]=0}this.element=null;this.bindings={};this.frameSkip=100;this.tickCount=0;this.frameCount=0;this.startTime=d();this.tickTime=this._tickRate;this.frameTime=10;this.stickyFullscreen=false;this.stickyPointerLock=false;this.scroll=[0,0,0];this.mouseX=0;this.mouseY=0;this.prevMouseX=0;this.prevMouseY=0}i.inherits(m,n);var y=m.prototype;y.keyNames=_;y.bind=function(e){var t;if(e in this.bindings){t=this.bindings[e]}else{t=[]}var r;for(var n=1,i=arguments.length;n<i;++n){r=arguments[n];if(v(r)>=0){t.push(r)}else if(r in this.bindings){var a=this.bindings[r];for(var o=0;o<a.length;++o){t.push(a[o])}}}t=u(t);if(t.length>0){this.bindings[e]=t}this.emit("bind",e,t)};y.unbind=function(e){if(e in this.bindings){delete this.bindings[e]}this.emit("unbind",e)};function b(e,t,r){if(r in t){var n=t[r];for(var i=0,a=n.length;i<a;++i){if(e[v(n[i])]){return true}}return false}var o=v(r);if(o>=0){return e[o]}return false}function w(e,t,r){if(r in t){var n=t[r],i=0;for(var a=0,o=n.length;a<o;++a){i+=e[v(n[a])]}return i}var s=v(r);if(s>=0){return e[s]}return 0}y.down=function(e){return b(this._curKeyState,this.bindings,e)};y.wasDown=function(e){return this.down(e)||!!this.press(e)};y.up=function(e){return!this.down(e)};y.wasUp=function(e){return this.up(e)||!!this.release(e)};y.press=function(e){return w(this._pressCount,this.bindings,e)};y.release=function(e){return w(this._releaseCount,this.bindings,e)};Object.defineProperty(y,"paused",{get:function(){return this._paused},set:function(e){var t=!!e;if(t!==this._paused){if(!this._paused){this._paused=true;this._frameTime=c(1,(d()-this._lastTick)/this._tickRate);clearInterval(this._tickInterval)}else{this._paused=false;this._lastTick=d()-Math.floor(this._frameTime*this._tickRate);this._tickInterval=setInterval(C,this._tickRate,this);this._rafHandle=requestAnimationFrame(this._render)}}}});function E(e){var t=e.element;if(e._wantFullscreen&&!e._fullscreenActive){var r=t.requestFullscreen||t.requestFullScreen||t.webkitRequestFullscreen||t.webkitRequestFullScreen||t.mozRequestFullscreen||t.mozRequestFullScreen||function(){};r.call(t)}if(e._wantPointerLock&&!e._pointerLockActive){var n=t.requestPointerLock||t.webkitRequestPointerLock||t.mozRequestPointerLock||t.msRequestPointerLock||t.oRequestPointerLock||function(){};n.call(t)}}var A=document.exitFullscreen||document.cancelFullscreen||document.cancelFullScreen||document.webkitCancelFullscreen||document.webkitCancelFullScreen||document.mozCancelFullscreen||document.mozCancelFullScreen||function(){};Object.defineProperty(y,"fullscreen",{get:function(){return this._fullscreenActive},set:function(e){var t=!!e;if(!t){this._wantFullscreen=false;A.call(document)}else{this._wantFullscreen=true;E(this)}return this._fullscreenActive}});function x(e){e._fullscreenActive=document.fullscreen||document.mozFullScreen||document.webkitIsFullScreen||false;if(!e.stickyFullscreen&&e._fullscreenActive){e._wantFullscreen=false}}var T=document.exitPointerLock||document.webkitExitPointerLock||document.mozExitPointerLock||function(){};Object.defineProperty(y,"pointerLock",{get:function(){return this._pointerLockActive},set:function(e){var t=!!e;if(!t){this._wantPointerLock=false;T.call(document)}else{this._wantPointerLock=true;E(this)}return this._pointerLockActive}});function R(e,t){e._pointerLockActive=e.element===(document.pointerLockElement||document.mozPointerLockElement||document.webkitPointerLockElement||null);if(!e.stickyPointerLock&&e._pointerLockActive){e._wantPointerLock=false}}Object.defineProperty(y,"width",{get:function(){return this.element.clientWidth}});Object.defineProperty(y,"height",{get:function(){return this.element.clientHeight}});function S(e,t,r){var n=e._curKeyState[t];if(n!==r){if(r){e._pressCount[t]++}else{e._releaseCount[t]++}e._curKeyState[t]=r}}function C(e){var t=d()+e.frameSkip,r=e._pressCount,n=e._releaseCount,i,a,o,s=e._tickRate,u=_.length;while(!e._paused&&d()>=e._lastTick+s){if(d()>t){e._lastTick=d()+s;return}a=d();e.emit("tick");o=d();e.tickTime=o-a;++e.tickCount;e._lastTick+=s;for(i=0;i<u;++i){r[i]=n[i]=0}if(e._pointerLockActive){e.prevMouseX=e.mouseX=e.width>>1;e.prevMouseY=e.mouseY=e.height>>1}else{e.prevMouseX=e.mouseX;e.prevMouseY=e.mouseY}e.scroll[0]=e.scroll[1]=e.scroll[2]=0}}function j(e){e._rafHandle=requestAnimationFrame(e._render);C(e);var t;if(e._paused){t=e._frameTime}else{t=c(1,(d()-e._lastTick)/e._tickRate)}++e.frameCount;var r=d();e.emit("render",t);var n=d();e.frameTime=n-r}function k(e){return document.activeElement===document.body||document.activeElement===e.element}function I(e,t){if(e.preventDefaults){t.preventDefault()}if(e.stopPropagation){t.stopPropagation()}}function O(e,t){I(e,t);var r=g(t.keyCode||t.char||t.which||t.charCode);if(r>=0){S(e,r,false)}}function L(e,t){if(!k(e)){return}I(e,t);if(t.metaKey){H(e,t)}else{var r=g(t.keyCode||t.char||t.which||t.charCode);if(r>=0){S(e,r,true)}}}var N=f(32).map(function(e){return v("mouse-"+(e+1))});function M(e,t){for(var r=0;r<32;++r){S(e,N[r],!!(t&1<<r))}}function P(e,t){I(e,t);if(e._pointerLockActive){var r=t.movementX||t.mozMovementX||t.webkitMovementX||0,n=t.movementY||t.mozMovementY||t.webkitMovementY||0;e.mouseX+=r;e.mouseY+=n}else{e.mouseX=t.clientX-e.element.offsetLeft;e.mouseY=t.clientY-e.element.offsetTop}return false}function U(e,t){I(e,t);S(e,N[t.button],true);return false}function B(e,t){I(e,t);S(e,N[t.button],false);return false}function D(e,t){I(e,t);if(e._pointerLockActive){e.prevMouseX=e.mouseX=e.width>>1;e.prevMouseY=e.mouseY=e.height>>1}else{e.prevMouseX=e.mouseX=t.clientX-e.element.offsetLeft;e.prevMouseY=e.mouseY=t.clientY-e.element.offsetTop}return false}function F(e,t){I(e,t);M(e,0);return false}function V(e,t){I(e,t);var r=1;switch(t.deltaMode){case 0:r=1;break;case 1:r=12;break;case 2:r=e.height;break}e.scroll[0]+=t.deltaX*r;e.scroll[1]+=t.deltaY*r;e.scroll[2]+=t.deltaZ*r||0;return false}function X(e,t){I(e,t);return false}function H(e,t){var r=_.length,n=e._curKeyState,i=e._releaseCount,a;for(a=0;a<r;++a){if(n[a]){++i[a]}n[a]=false}return false}function G(e,t){var r=e.element.clientWidth|0;var n=e.element.clientHeight|0;if(r!==e._width||n!==e._height){e._width=r;e._height=n;e.emit("resize",r,n)}}function z(){var e=document.createElement("div");e.tabindex=1;e.style.position="absolute";e.style.left="0px";e.style.right="0px";e.style.top="0px";e.style.bottom="0px";e.style.height="100%";e.style.overflow="hidden";document.body.appendChild(e);document.body.style.overflow="hidden";document.body.style.height="100%";return e}function Y(e){e=e||{};var t=!!e.fullscreen;var r=t;if(typeof e.pointerLock!==undefined){r=!!e.pointerLock}var n=new m;n._tickRate=e.tickRate||30;n.frameSkip=e.frameSkip||(n._tickRate+5)*5;n.stickyFullscreen=!!e.stickyFullscreen||!!e.sticky;n.stickyPointerLock=!!e.stickyPointerLock||!!e.sticky;if(e.bindings){n.bindings=e.bindings}setTimeout(function(){a(function i(){var i=e.element;if(typeof i==="string"){var a=document.querySelector(i);if(!a){a=document.getElementById(i)}if(!a){a=document.getElementByClass(i)[0]}if(!a){a=z()}n.element=a}else if(typeof i==="object"&&!!i){n.element=i}else if(typeof i==="function"){n.element=i()}else{n.element=z()}if(n.element.style){n.element.style["-webkit-touch-callout"]="none";n.element.style["-webkit-user-select"]="none";n.element.style["-khtml-user-select"]="none";n.element.style["-moz-user-select"]="none";n.element.style["-ms-user-select"]="none";n.element.style["user-select"]="none"}n._width=n.element.clientWidth;n._height=n.element.clientHeight;var o=G.bind(undefined,n);if(typeof MutationObserver!=="undefined"){var s=new MutationObserver(o);s.observe(n.element,{attributes:true,subtree:true})}else{n.element.addEventListener("DOMSubtreeModified",o,false)}window.addEventListener("resize",o,false);window.addEventListener("keydown",L.bind(undefined,n),false);window.addEventListener("keyup",O.bind(undefined,n),false);n.element.oncontextmenu=X.bind(undefined,n);n.element.addEventListener("mousedown",U.bind(undefined,n),false);n.element.addEventListener("mouseup",B.bind(undefined,n),false);n.element.addEventListener("mousemove",P.bind(undefined,n),false);n.element.addEventListener("mouseenter",D.bind(undefined,n),false);var u=F.bind(undefined,n);n.element.addEventListener("mouseleave",u,false);n.element.addEventListener("mouseout",u,false);window.addEventListener("mouseleave",u,false);window.addEventListener("mouseout",u,false);var l=H.bind(undefined,n);n.element.addEventListener("blur",l,false);n.element.addEventListener("focusout",l,false);n.element.addEventListener("focus",l,false);window.addEventListener("blur",l,false);window.addEventListener("focusout",l,false);window.addEventListener("focus",l,false);h(n.element,V.bind(undefined,n),false);var f=x.bind(undefined,n);document.addEventListener("fullscreenchange",f,false);document.addEventListener("mozfullscreenchange",f,false);document.addEventListener("webkitfullscreenchange",f,false);n.element.addEventListener("click",E.bind(undefined,n),false);var c=R.bind(undefined,n);document.addEventListener("pointerlockchange",c,false);document.addEventListener("mozpointerlockchange",c,false);document.addEventListener("webkitpointerlockchange",c,false);document.addEventListener("pointerlocklost",c,false);document.addEventListener("webkitpointerlocklost",c,false);document.addEventListener("mozpointerlocklost",c,false);n.fullscreen=t;n.pointerLock=r;n.bind("mouse-left","mouse-1");n.bind("mouse-right","mouse-3");n.bind("mouse-middle","mouse-2");n._lastTick=d();n.startTime=d();n.paused=false;n.emit("init")})},0);return n}t.exports=Y},{"./lib/hrtime-polyfill.js":84,
"./lib/mousewheel-polyfill.js":85,"./lib/raf-polyfill.js":86,"binary-search-bounds":87,domready:88,events:25,"invert-hash":89,"iota-array":90,uniq:91,util:47,vkey:92}],94:[function(e,t,r){arguments[4][18][0].apply(r,arguments)},{dup:18}],95:[function(e,t,r){"use strict";var n=typeof WeakMap==="undefined"?e("weak-map"):WeakMap;var i=new n;function a(e){return e.replace(/^[A-Z]+_/,"")}function o(e){var t=i.get(e);if(t){return t}var r={};var n=e.getSupportedExtensions();for(var o=0;o<n.length;++o){var s=n[o];if(s.indexOf("MOZ_")===0){continue}var u=e.getExtension(n[o]);if(!u){continue}while(true){r[s]=u;var l=a(s);if(l===s){break}s=l}}i.set(e,r);return r}t.exports=o},{"weak-map":94}],96:[function(e,t,r){"use strict";var n=e("./lib/create-uniforms");var i=e("./lib/create-attributes");var a=e("./lib/reflect");var o=e("./lib/shader-cache");var s=e("./lib/runtime-reflect");function u(e){this.gl=e;this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}var l=u.prototype;l.bind=function(){if(!this.program){this._relink()}this.gl.useProgram(this.program)};l.dispose=function(){if(this._fref){this._fref.dispose()}if(this._vref){this._vref.dispose()}this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null};function f(e,t){if(e.name<t.name){return-1}return 1}l.update=function(e,t,r,u){if(!t||arguments.length===1){var l=e;e=l.vertex;t=l.fragment;r=l.uniforms;u=l.attributes}var c=this;var h=c.gl;var d=c._vref;c._vref=o.shader(h,h.VERTEX_SHADER,e);if(d){d.dispose()}c.vertShader=c._vref.shader;var p=this._fref;c._fref=o.shader(h,h.FRAGMENT_SHADER,t);if(p){p.dispose()}c.fragShader=c._fref.shader;if(!r||!u){var _=h.createProgram();h.attachShader(_,c.fragShader);h.attachShader(_,c.vertShader);h.linkProgram(_);if(!h.getProgramParameter(_,h.LINK_STATUS)){var v=h.getProgramInfoLog(_);console.error("gl-shader: Error linking program:",v);throw new Error("gl-shader: Error linking program:"+v)}r=r||s.uniforms(h,_);u=u||s.attributes(h,_);h.deleteProgram(_)}u=u.slice();u.sort(f);var g=[];var m=[];var y=[];for(var b=0;b<u.length;++b){var w=u[b];if(w.type.indexOf("mat")>=0){var E=w.type.charAt(w.type.length-1)|0;var A=new Array(E);for(var x=0;x<E;++x){A[x]=y.length;m.push(w.name+"["+x+"]");if(typeof w.location==="number"){y.push(w.location+x)}else if(Array.isArray(w.location)&&w.location.length===E&&typeof w.location[x]==="number"){y.push(w.location[x]|0)}else{y.push(-1)}}g.push({name:w.name,type:w.type,locations:A})}else{g.push({name:w.name,type:w.type,locations:[y.length]});m.push(w.name);if(typeof w.location==="number"){y.push(w.location|0)}else{y.push(-1)}}}var T=0;for(var b=0;b<y.length;++b){if(y[b]<0){while(y.indexOf(T)>=0){T+=1}y[b]=T}}var R=new Array(r.length);function S(){c.program=o.program(h,c._vref,c._fref,m,y);for(var e=0;e<r.length;++e){R[e]=h.getUniformLocation(c.program,r[e].name)}}S();c._relink=S;c.types={uniforms:a(r),attributes:a(u)};c.attributes=i(h,c,g,y);Object.defineProperty(c,"uniforms",n(h,c,r,R))};function c(e,t,r,n,i){var a=new u(e);a.update(t,r,n,i);return a}t.exports=c},{"./lib/create-attributes":97,"./lib/create-uniforms":98,"./lib/reflect":99,"./lib/runtime-reflect":100,"./lib/shader-cache":101}],97:[function(e,t,r){"use strict";t.exports=s;function n(e,t,r,n,i,a){this._gl=e;this._wrapper=t;this._index=r;this._locations=n;this._dimension=i;this._constFunc=a}var i=n.prototype;i.pointer=function u(e,t,r,n){var i=this;var a=i._gl;var o=i._locations[i._index];a.vertexAttribPointer(o,i._dimension,e||a.FLOAT,!!t,r||0,n||0);a.enableVertexAttribArray(o)};i.set=function(e,t,r,n){return this._constFunc(this._locations[this._index],e,t,r,n)};Object.defineProperty(i,"location",{get:function(){return this._locations[this._index]},set:function(e){if(e!==this._locations[this._index]){this._locations[this._index]=e|0;this._wrapper.program=null}return e|0}});function a(e,t,r,i,a,o,s){var u=["gl","v"];var l=[];for(var f=0;f<a;++f){u.push("x"+f);l.push("x"+f)}u.push("if(x0.length===void 0){return gl.vertexAttrib"+a+"f(v,"+l.join()+")}else{return gl.vertexAttrib"+a+"fv(v,x0)}");var c=Function.apply(null,u);var h=new n(e,t,r,i,a,c);Object.defineProperty(o,s,{set:function(t){e.disableVertexAttribArray(i[r]);c(e,i[r],t);return t},get:function(){return h},enumerable:true})}function o(e,t,r,n,i,o,s){var u=new Array(i);var l=new Array(i);for(var f=0;f<i;++f){a(e,t,r[f],n,i,u,f);l[f]=u[f]}Object.defineProperty(u,"location",{set:function(e){if(Array.isArray(e)){for(var t=0;t<i;++t){l[t].location=e[t]}}else{for(var t=0;t<i;++t){l[t].location=e+t}}return e},get:function(){var e=new Array(i);for(var t=0;t<i;++t){e[t]=n[r[t]]}return e},enumerable:true});u.pointer=function(t,a,o,s){t=t||e.FLOAT;a=!!a;o=o||i*i;s=s||0;for(var u=0;u<i;++u){var l=n[r[u]];e.vertexAttribPointer(l,i,t,a,o,s+u*i);e.enableVertexAttribArray(l)}};var c=new Array(i);var h=e["vertexAttrib"+i+"fv"];Object.defineProperty(o,s,{set:function(t){for(var a=0;a<i;++a){var o=n[r[a]];e.disableVertexAttribArray(o);if(Array.isArray(t[0])){h.call(e,o,t[a])}else{for(var s=0;s<i;++s){c[s]=t[i*a+s]}h.call(e,o,c)}}return t},get:function(){return u},enumerable:true})}function s(e,t,r,n){var i={};for(var s=0,u=r.length;s<u;++s){var l=r[s];var f=l.name;var c=l.type;var h=l.locations;switch(c){case"bool":case"int":case"float":a(e,t,h[0],n,1,i,f);break;default:if(c.indexOf("vec")>=0){var d=c.charCodeAt(c.length-1)-48;if(d<2||d>4){throw new Error("gl-shader: Invalid data type for attribute "+f+": "+c)}a(e,t,h[0],n,d,i,f)}else if(c.indexOf("mat")>=0){var d=c.charCodeAt(c.length-1)-48;if(d<2||d>4){throw new Error("gl-shader: Invalid data type for attribute "+f+": "+c)}o(e,t,h,n,d,i,f)}else{throw new Error("gl-shader: Unknown data type for attribute "+f+": "+c)}break}}return i}},{}],98:[function(e,t,r){"use strict";var n=e("./reflect");t.exports=o;function i(e){var t=new Function("y","return function(){return y}");return t(e)}function a(e,t){var r=new Array(e);for(var n=0;n<e;++n){r[n]=t}return r}function o(e,t,r,o){function s(r){var n=new Function("gl","wrapper","locations","return function(){return gl.getUniform(wrapper.program,locations["+r+"])}");return n(e,t,o)}function u(e,t,r){switch(r){case"bool":case"int":case"sampler2D":case"samplerCube":return"gl.uniform1i(locations["+t+"],obj"+e+")";case"float":return"gl.uniform1f(locations["+t+"],obj"+e+")";default:var n=r.indexOf("vec");if(0<=n&&n<=1&&r.length===4+n){var i=r.charCodeAt(r.length-1)-48;if(i<2||i>4){throw new Error("gl-shader: Invalid data type")}switch(r.charAt(0)){case"b":case"i":return"gl.uniform"+i+"iv(locations["+t+"],obj"+e+")";case"v":return"gl.uniform"+i+"fv(locations["+t+"],obj"+e+")";default:throw new Error("gl-shader: Unrecognized data type for vector "+name+": "+r)}}else if(r.indexOf("mat")===0&&r.length===4){var i=r.charCodeAt(r.length-1)-48;if(i<2||i>4){throw new Error("gl-shader: Invalid uniform dimension type for matrix "+name+": "+r)}return"gl.uniformMatrix"+i+"fv(locations["+t+"],false,obj"+e+")"}else{throw new Error("gl-shader: Unknown uniform data type for "+name+": "+r)}break}}function l(e,t){if(typeof t!=="object"){return[[e,t]]}var r=[];for(var n in t){var i=t[n];var a=e;if(parseInt(n)+""===n){a+="["+n+"]"}else{a+="."+n}if(typeof i==="object"){r.push.apply(r,l(a,i))}else{r.push([a,i])}}return r}function f(t){var n=["return function updateProperty(obj){"];var i=l("",t);for(var a=0;a<i.length;++a){var s=i[a];var f=s[0];var c=s[1];if(o[c]){n.push(u(f,c,r[c].type))}}n.push("return obj}");var h=new Function("gl","locations",n.join("\n"));return h(e,o)}function c(e){switch(e){case"bool":return false;case"int":case"sampler2D":case"samplerCube":return 0;case"float":return 0;default:var t=e.indexOf("vec");if(0<=t&&t<=1&&e.length===4+t){var r=e.charCodeAt(e.length-1)-48;if(r<2||r>4){throw new Error("gl-shader: Invalid data type")}if(e.charAt(0)==="b"){return a(r,false)}return a(r,0)}else if(e.indexOf("mat")===0&&e.length===4){var r=e.charCodeAt(e.length-1)-48;if(r<2||r>4){throw new Error("gl-shader: Invalid uniform dimension type for matrix "+name+": "+e)}return a(r*r,0)}else{throw new Error("gl-shader: Unknown uniform data type for "+name+": "+e)}break}}function h(e,t,n){if(typeof n==="object"){var a=d(n);Object.defineProperty(e,t,{get:i(a),set:f(n),enumerable:true,configurable:false})}else{if(o[n]){Object.defineProperty(e,t,{get:s(n),set:f(n),enumerable:true,configurable:false})}else{e[t]=c(r[n].type)}}}function d(e){var t;if(Array.isArray(e)){t=new Array(e.length);for(var r=0;r<e.length;++r){h(t,r,e[r])}}else{t={};for(var n in e){h(t,n,e[n])}}return t}var p=n(r,true);return{get:i(d(p)),set:f(p),enumerable:true,configurable:true}}},{"./reflect":99}],99:[function(e,t,r){"use strict";t.exports=n;function n(e,t){var r={};for(var n=0;n<e.length;++n){var i=e[n].name;var a=i.split(".");var o=r;for(var s=0;s<a.length;++s){var u=a[s].split("[");if(u.length>1){if(!(u[0]in o)){o[u[0]]=[]}o=o[u[0]];for(var l=1;l<u.length;++l){var f=parseInt(u[l]);if(l<u.length-1||s<a.length-1){if(!(f in o)){if(l<u.length-1){o[f]=[]}else{o[f]={}}}o=o[f]}else{if(t){o[f]=n}else{o[f]=e[n].type}}}}else if(s<a.length-1){if(!(u[0]in o)){o[u[0]]={}}o=o[u[0]]}else{if(t){o[u[0]]=n}else{o[u[0]]=e[n].type}}}}return r}},{}],100:[function(e,t,r){"use strict";r.uniforms=o;r.attributes=s;var n={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"};var i=null;function a(e,t){if(!i){var r=Object.keys(n);i={};for(var a=0;a<r.length;++a){var o=r[a];i[e[o]]=n[o]}}return i[t]}function o(e,t){var r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);var n=[];for(var i=0;i<r;++i){var o=e.getActiveUniform(t,i);if(o){var s=a(e,o.type);if(o.size>1){for(var u=0;u<o.size;++u){n.push({name:o.name.replace("[0]","["+u+"]"),type:s})}}else{n.push({name:o.name,type:s})}}}return n}function s(e,t){var r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);var n=[];for(var i=0;i<r;++i){var o=e.getActiveAttrib(t,i);if(o){n.push({name:o.name,type:a(e,o.type)})}}return n}},{}],101:[function(e,t,r){"use strict";r.shader=d;r.program=p;var n=e("gl-format-compiler-error");var i=typeof WeakMap==="undefined"?e("weakmap-shim"):WeakMap;var a=new i;var o=0;function s(e,t,r,n,i,a,o){this.id=e;this.src=t;this.type=r;this.shader=n;this.count=a;this.programs=[];this.cache=o}s.prototype.dispose=function(){if(--this.count===0){var e=this.cache;var t=e.gl;var r=this.programs;for(var n=0,i=r.length;n<i;++n){var a=e.programs[r[n]];if(a){delete e.programs[n];t.deleteProgram(a)}}t.deleteShader(this.shader);delete e.shaders[this.type===t.FRAGMENT_SHADER|0][this.src]}};function u(e){this.gl=e;this.shaders=[{},{}];this.programs={}}var l=u.prototype;function f(e,t,r){var i=e.createShader(t);e.shaderSource(i,r);e.compileShader(i);if(!e.getShaderParameter(i,e.COMPILE_STATUS)){var a=e.getShaderInfoLog(i);try{var o=n(a,r,t)}catch(s){console.warn("Failed to format compiler error: "+s);throw new Error("gl-shader: Error compiling shader:\n"+a)}console.warn("gl-shader: "+o.long);throw new Error("gl-shader: "+o.short)}return i}l.getShaderReference=function(e,t){var r=this.gl;var n=this.shaders[e===r.FRAGMENT_SHADER|0];var i=n[t];if(!i||!r.isShader(i.shader)){var a=f(r,e,t);i=n[t]=new s(o++,t,e,a,[],1,this)}else{i.count+=1}return i};function c(e,t,r,n,i){var a=e.createProgram();e.attachShader(a,t);e.attachShader(a,r);for(var o=0;o<n.length;++o){e.bindAttribLocation(a,i[o],n[o])}e.linkProgram(a);if(!e.getProgramParameter(a,e.LINK_STATUS)){var s=e.getProgramInfoLog(a);console.error("gl-shader: Error linking program:",s);throw new Error("gl-shader: Error linking program:"+s)}return a}l.getProgram=function(e,t,r,n){var i=[e.id,t.id,r.join(":"),n.join(":")].join("@");var a=this.programs[i];if(!a||!this.gl.isProgram(a)){this.programs[i]=a=c(this.gl,e.shader,t.shader,r,n);e.programs.push(i);t.programs.push(i)}return a};function h(e){var t=a.get(e);if(!t){t=new u(e);a.set(e,t)}return t}function d(e,t,r){return h(e).getShaderReference(t,r)}function p(e,t,r,n,i){return h(e).getProgram(t,r,n,i)}},{"gl-format-compiler-error":102,"weakmap-shim":120}],102:[function(e,t,r){var n=e("sprintf-js").sprintf;var i=e("gl-constants/lookup");var a=e("glsl-shader-name");var o=e("add-line-numbers");t.exports=s;function s(e,t,r){"use strict";var s=a(t)||"of unknown name (see npm glsl-shader-name)";var u="unknown type";if(r!==undefined){u=r===i.FRAGMENT_SHADER?"fragment":"vertex"}var l=n("Error compiling %s shader %s:\n",u,s);var f=n("%s%s",l,e);var c=e.split("\n");var h={};for(var d=0;d<c.length;d++){var p=c[d];if(p==="")continue;var _=parseInt(p.split(":")[2]);if(isNaN(_)){throw new Error(n("Could not parse error: %s",p))}h[_]=p}var v=o(t).split("\n");for(var d=0;d<v.length;d++){if(!h[d+3]&&!h[d+2]&&!h[d+1])continue;var g=v[d];l+=g+"\n";if(h[d+1]){var m=h[d+1];m=m.substr(m.split(":",3).join(":").length+1).trim();l+=n("^^^ %s\n\n",m)}}return{"long":l.trim(),"short":f.trim()}}},{"add-line-numbers":103,"gl-constants/lookup":107,"glsl-shader-name":108,"sprintf-js":117}],103:[function(e,t,r){var n=e("pad-left");t.exports=i;function i(e,t,r){t=typeof t==="number"?t:1;r=r||": ";var i=e.split(/\r?\n/);var a=String(i.length+t-1).length;return i.map(function(e,i){var o=i+t;var s=String(o).length;var u=n(o,a-s);return u+r+e}).join("\n")}},{"pad-left":104}],104:[function(e,t,r){"use strict";var n=e("repeat-string");t.exports=function i(e,t,r){r=typeof r!=="undefined"?r+"":" ";return n(r,t)+e}},{"repeat-string":105}],105:[function(e,t,r){"use strict";var n="";var i;t.exports=a;function a(e,t){if(typeof e!=="string"){throw new TypeError("repeat-string expects a string.")}if(t===1)return e;if(t===2)return e+e;var r=e.length*t;if(i!==e||typeof i==="undefined"){i=e;n=""}while(r>n.length&&t>0){if(t&1){n+=e}t>>=1;if(!t)break;e+=e}return n.substr(0,r)}},{}],106:[function(e,t,r){t.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},{}],107:[function(e,t,r){var n=e("./1.0/numbers");t.exports=function i(e){return n[e]}},{"./1.0/numbers":106}],108:[function(e,t,r){var n=e("glsl-tokenizer");var i=e("atob-lite");t.exports=a;function a(e){var t=Array.isArray(e)?e:n(e);for(var r=0;r<t.length;r++){var a=t[r];if(a.type!=="preprocessor")continue;var o=a.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(!o)continue;if(!o[2])continue;var s=o[1];var u=o[2];return(s?i(u):u).trim()}}},{"atob-lite":109,"glsl-tokenizer":116}],109:[function(e,t,r){t.exports=function n(e){return atob(e)}},{}],110:[function(e,t,r){t.exports=A;var n=e("./lib/literals"),i=e("./lib/operators"),a=e("./lib/builtins"),o=e("./lib/literals-300es"),s=e("./lib/builtins-300es");var u=999,l=9999,f=0,c=1,h=2,d=3,p=4,_=5,v=6,g=7,m=8,y=9,b=10,w=11;var E=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"];function A(e){var t=0,r=0,A=u,x,T,R=[],S=[],C=0,j=0,k=1,I=0,O=0,L=false,N=false,M="",P;e=e||{};var U=a;var B=n;if(e.version==="300 es"){U=s;B=o}return function(e){S=[];if(e!==null)return F(e);return V()};function D(e){if(e.length){S.push({type:E[A],data:e,position:O,line:k,column:I})}}function F(e){t=0;M+=e;P=M.length;var n;while(x=M[t],t<P){n=t;switch(A){case f:t=Y();break;case c:t=z();break;case h:t=G();break;case d:t=W();break;case p:t=$();break;case w:t=K();break;case _:t=Z();break;case l:t=J();break;case y:t=H();break;case u:t=X();break}if(n!==t){switch(M[n]){case"\n":I=0;++k;break;default:++I;break}}}r+=t;M=M.slice(t);return S}function V(e){if(R.length){D(R.join(""))}A=b;D("(eof)");return S}function X(){R=R.length?[]:R;if(T==="/"&&x==="*"){O=r+t-1;A=f;T=x;return t+1}if(T==="/"&&x==="/"){O=r+t-1;A=c;T=x;return t+1}if(x==="#"){A=h;O=r+t;return t}if(/\s/.test(x)){A=y;O=r+t;return t}L=/\d/.test(x);N=/[^\w_]/.test(x);O=r+t;A=L?p:N?d:l;return t}function H(){if(/[^\s]/g.test(x)){D(R.join(""));A=u;return t}R.push(x);T=x;return t+1}function G(){if(x==="\n"&&T!=="\\"){D(R.join(""));A=u;return t}R.push(x);T=x;return t+1}function z(){return G()}function Y(){if(x==="/"&&T==="*"){R.push(x);D(R.join(""));A=u;return t+1}R.push(x);T=x;return t+1}function W(){if(T==="."&&/\d/.test(x)){A=_;return t}if(T==="/"&&x==="*"){A=f;return t}if(T==="/"&&x==="/"){A=c;return t}if(x==="."&&R.length){while(q(R));A=_;return t}if(x===";"||x===")"||x==="("){if(R.length)while(q(R));D(x);A=u;return t+1}var e=R.length===2&&x!=="=";if(/[\w_\d\s]/.test(x)||e){while(q(R));A=u;return t}R.push(x);T=x;return t+1}function q(e){var t=0,r,n;do{r=i.indexOf(e.slice(0,e.length+t).join(""));n=i[r];if(r===-1){if(t--+e.length>0)continue;n=e.slice(0,1).join("")}D(n);O+=n.length;R=R.slice(n.length);return R.length}while(1)}function K(){if(/[^a-fA-F0-9]/.test(x)){D(R.join(""));A=u;return t}R.push(x);T=x;return t+1}function $(){if(x==="."){R.push(x);A=_;T=x;return t+1}if(/[eE]/.test(x)){R.push(x);A=_;T=x;return t+1}if(x==="x"&&R.length===1&&R[0]==="0"){A=w;R.push(x);T=x;return t+1}if(/[^\d]/.test(x)){D(R.join(""));A=u;return t}R.push(x);T=x;return t+1}function Z(){if(x==="f"){R.push(x);T=x;t+=1}if(/[eE]/.test(x)){R.push(x);T=x;return t+1}if(x==="-"&&/[eE]/.test(T)){R.push(x);T=x;return t+1}if(/[^\d]/.test(x)){D(R.join(""));A=u;return t}R.push(x);T=x;return t+1}function J(){if(/[^\d\w_]/.test(x)){var e=R.join("");if(B.indexOf(e)>-1){A=m}else if(U.indexOf(e)>-1){A=g}else{A=v}D(R.join(""));A=u;return t}R.push(x);T=x;return t+1}}},{"./lib/builtins":112,"./lib/builtins-300es":111,"./lib/literals":114,"./lib/literals-300es":113,"./lib/operators":115}],111:[function(e,t,r){var n=e("./builtins");n=n.slice().filter(function(e){return!/^(gl\_|texture)/.test(e)});t.exports=n.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},{"./builtins":112}],112:[function(e,t,r){t.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},{}],113:[function(e,t,r){var n=e("./literals");t.exports=n.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uint","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},{"./literals":114}],114:[function(e,t,r){t.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},{}],115:[function(e,t,r){t.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},{}],116:[function(e,t,r){var n=e("./index");t.exports=i;function i(e,t){var r=n(t);var i=[];i=i.concat(r(e));i=i.concat(r(null));return i}},{"./index":110}],117:[function(e,t,r){(function(e){var t={not_string:/[^s]/,number:/[diefg]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijosuxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[\+\-]/};function n(){var e=arguments[0],t=n.cache;if(!(t[e]&&t.hasOwnProperty(e))){t[e]=n.parse(e)}return n.format.call(null,t[e],arguments)}n.format=function(e,r){var i=1,s=e.length,u="",l,f=[],c,h,d,p,_,v,g=true,m="";for(c=0;c<s;c++){u=a(e[c]);if(u==="string"){f[f.length]=e[c]}else if(u==="array"){d=e[c];if(d[2]){l=r[i];for(h=0;h<d[2].length;h++){if(!l.hasOwnProperty(d[2][h])){throw new Error(n("[sprintf] property '%s' does not exist",d[2][h]))}l=l[d[2][h]]}}else if(d[1]){l=r[d[1]]}else{l=r[i++]}if(a(l)=="function"){l=l()}if(t.not_string.test(d[8])&&t.not_json.test(d[8])&&(a(l)!="number"&&isNaN(l))){throw new TypeError(n("[sprintf] expecting number but found %s",a(l)))}if(t.number.test(d[8])){g=l>=0}switch(d[8]){case"b":l=l.toString(2);break;case"c":l=String.fromCharCode(l);break;case"d":case"i":l=parseInt(l,10);break;case"j":l=JSON.stringify(l,null,d[6]?parseInt(d[6]):0);break;case"e":l=d[7]?l.toExponential(d[7]):l.toExponential();break;case"f":l=d[7]?parseFloat(l).toFixed(d[7]):parseFloat(l);break;case"g":
l=d[7]?parseFloat(l).toPrecision(d[7]):parseFloat(l);break;case"o":l=l.toString(8);break;case"s":l=(l=String(l))&&d[7]?l.substring(0,d[7]):l;break;case"u":l=l>>>0;break;case"x":l=l.toString(16);break;case"X":l=l.toString(16).toUpperCase();break}if(t.json.test(d[8])){f[f.length]=l}else{if(t.number.test(d[8])&&(!g||d[3])){m=g?"+":"-";l=l.toString().replace(t.sign,"")}else{m=""}_=d[4]?d[4]==="0"?"0":d[4].charAt(1):" ";v=d[6]-(m+l).length;p=d[6]?v>0?o(_,v):"":"";f[f.length]=d[5]?m+l+p:_==="0"?m+p+l:p+m+l}}}return f.join("")};n.cache={};n.parse=function(e){var r=e,n=[],i=[],a=0;while(r){if((n=t.text.exec(r))!==null){i[i.length]=n[0]}else if((n=t.modulo.exec(r))!==null){i[i.length]="%"}else if((n=t.placeholder.exec(r))!==null){if(n[2]){a|=1;var o=[],s=n[2],u=[];if((u=t.key.exec(s))!==null){o[o.length]=u[1];while((s=s.substring(u[0].length))!==""){if((u=t.key_access.exec(s))!==null){o[o.length]=u[1]}else if((u=t.index_access.exec(s))!==null){o[o.length]=u[1]}else{throw new SyntaxError("[sprintf] failed to parse named argument key")}}}else{throw new SyntaxError("[sprintf] failed to parse named argument key")}n[2]=o}else{a|=2}if(a===3){throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported")}i[i.length]=n}else{throw new SyntaxError("[sprintf] unexpected placeholder")}r=r.substring(n[0].length)}return i};var i=function(e,t,r){r=(t||[]).slice(0);r.splice(0,0,e);return n.apply(null,r)};function a(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function o(e,t){return Array(t+1).join(e)}if(typeof r!=="undefined"){r.sprintf=n;r.vsprintf=i}else{e.sprintf=n;e.vsprintf=i;if(typeof define==="function"&&define.amd){define(function(){return{sprintf:n,vsprintf:i}})}}})(typeof window==="undefined"?this:window)},{}],118:[function(e,t,r){var n=e("./hidden-store.js");t.exports=i;function i(){var e={};return function(t){if((typeof t!=="object"||t===null)&&typeof t!=="function"){throw new Error("Weakmap-shim: Key must be object")}var r=t.valueOf(e);return r&&r.identity===e?r:n(t,e)}}},{"./hidden-store.js":119}],119:[function(e,t,r){t.exports=n;function n(e,t){var r={identity:t};var n=e.valueOf;Object.defineProperty(e,"valueOf",{value:function(e){return e!==t?n.apply(this,arguments):r},writable:true});return r}},{}],120:[function(e,t,r){var n=e("./create-store.js");t.exports=i;function i(){var e=n();return{get:function(t,r){var n=e(t);return n.hasOwnProperty("value")?n.value:r},set:function(t,r){e(t).value=r},has:function(t){return"value"in e(t)},"delete":function(t){return delete e(t).value}}}},{"./create-store.js":118}],121:[function(e,t,r){arguments[4][3][0].apply(r,arguments)},{"cwise-compiler":122,dup:3}],122:[function(e,t,r){arguments[4][4][0].apply(r,arguments)},{"./lib/thunk.js":124,dup:4}],123:[function(e,t,r){arguments[4][5][0].apply(r,arguments)},{dup:5,uniq:125}],124:[function(e,t,r){arguments[4][6][0].apply(r,arguments)},{"./compile.js":123,dup:6}],125:[function(e,t,r){arguments[4][7][0].apply(r,arguments)},{dup:7}],126:[function(e,t,r){arguments[4][8][0].apply(r,arguments)},{dup:8,"iota-array":127,"is-buffer":128}],127:[function(e,t,r){arguments[4][9][0].apply(r,arguments)},{dup:9}],128:[function(e,t,r){arguments[4][10][0].apply(r,arguments)},{dup:10}],129:[function(e,t,r){arguments[4][11][0].apply(r,arguments)},{dup:11}],130:[function(e,t,r){arguments[4][12][0].apply(r,arguments)},{dup:12}],131:[function(e,t,r){arguments[4][13][0].apply(r,arguments)},{"bit-twiddle":129,buffer:21,dup:13}],132:[function(e,t,r){"use strict";var n=e("ndarray");var i=e("ndarray-ops");var a=e("typedarray-pool");t.exports=b;var o=null;var s=null;var u=null;function l(e){o=[e.LINEAR,e.NEAREST_MIPMAP_LINEAR,e.LINEAR_MIPMAP_NEAREST,e.LINEAR_MIPMAP_NEAREST];s=[e.NEAREST,e.LINEAR,e.NEAREST_MIPMAP_NEAREST,e.NEAREST_MIPMAP_LINEAR,e.LINEAR_MIPMAP_NEAREST,e.LINEAR_MIPMAP_LINEAR];u=[e.REPEAT,e.CLAMP_TO_EDGE,e.MIRRORED_REPEAT]}var f=function(e,t){i.muls(e,t,255)};function c(e,t,r){var n=e.gl;var i=n.getParameter(n.MAX_TEXTURE_SIZE);if(t<0||t>i||r<0||r>i){throw new Error("gl-texture2d: Invalid texture size")}e._shape=[t,r];e.bind();n.texImage2D(n.TEXTURE_2D,0,e.format,t,r,0,e.format,e.type,null);e._mipLevels=[0];return e}function h(e,t,r,n,i,a){this.gl=e;this.handle=t;this.format=i;this.type=a;this._shape=[r,n];this._mipLevels=[0];this._magFilter=e.NEAREST;this._minFilter=e.NEAREST;this._wrapS=e.CLAMP_TO_EDGE;this._wrapT=e.CLAMP_TO_EDGE;this._anisoSamples=1;var o=this;var s=[this._wrapS,this._wrapT];Object.defineProperties(s,[{get:function(){return o._wrapS},set:function(e){return o.wrapS=e}},{get:function(){return o._wrapT},set:function(e){return o.wrapT=e}}]);this._wrapVector=s;var u=[this._shape[0],this._shape[1]];Object.defineProperties(u,[{get:function(){return o._shape[0]},set:function(e){return o.width=e}},{get:function(){return o._shape[1]},set:function(e){return o.height=e}}]);this._shapeVector=u}var d=h.prototype;Object.defineProperties(d,{minFilter:{get:function(){return this._minFilter},set:function(e){this.bind();var t=this.gl;if(this.type===t.FLOAT&&o.indexOf(e)>=0){if(!t.getExtension("OES_texture_float_linear")){e=t.NEAREST}}if(s.indexOf(e)<0){throw new Error("gl-texture2d: Unknown filter mode "+e)}t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e);return this._minFilter=e}},magFilter:{get:function(){return this._magFilter},set:function(e){this.bind();var t=this.gl;if(this.type===t.FLOAT&&o.indexOf(e)>=0){if(!t.getExtension("OES_texture_float_linear")){e=t.NEAREST}}if(s.indexOf(e)<0){throw new Error("gl-texture2d: Unknown filter mode "+e)}t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,e);return this._magFilter=e}},mipSamples:{get:function(){return this._anisoSamples},set:function(e){var t=this._anisoSamples;this._anisoSamples=Math.max(e,1)|0;if(t!==this._anisoSamples){var r=gl.getExtension("EXT_texture_filter_anisotropic");if(r){this.gl.texParameterf(this.gl.TEXTURE_2D,r.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(e){this.bind();if(u.indexOf(e)<0){throw new Error("gl-texture2d: Unknown wrap mode "+e)}this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,e);return this._wrapS=e}},wrapT:{get:function(){return this._wrapT},set:function(e){this.bind();if(u.indexOf(e)<0){throw new Error("gl-texture2d: Unknown wrap mode "+e)}this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,e);return this._wrapT=e}},wrap:{get:function(){return this._wrapVector},set:function(e){if(!Array.isArray(e)){e=[e,e]}if(e.length!==2){throw new Error("gl-texture2d: Must specify wrap mode for rows and columns")}for(var t=0;t<2;++t){if(u.indexOf(e[t])<0){throw new Error("gl-texture2d: Unknown wrap mode "+e)}}this._wrapS=e[0];this._wrapT=e[1];var r=this.gl;this.bind();r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,this._wrapS);r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,this._wrapT);return e}},shape:{get:function(){return this._shapeVector},set:function(e){if(!Array.isArray(e)){e=[e|0,e|0]}else{if(e.length!==2){throw new Error("gl-texture2d: Invalid texture shape")}}c(this,e[0]|0,e[1]|0);return[e[0]|0,e[1]|0]}},width:{get:function(){return this._shape[0]},set:function(e){e=e|0;c(this,e,this._shape[1]);return e}},height:{get:function(){return this._shape[1]},set:function(e){e=e|0;c(this,this._shape[0],e);return e}}});d.bind=function(e){var t=this.gl;if(e!==undefined){t.activeTexture(t.TEXTURE0+(e|0))}t.bindTexture(t.TEXTURE_2D,this.handle);if(e!==undefined){return e|0}return t.getParameter(t.ACTIVE_TEXTURE)-t.TEXTURE0};d.dispose=function(){this.gl.deleteTexture(this.handle)};d.generateMipmap=function(){this.bind();this.gl.generateMipmap(this.gl.TEXTURE_2D);var e=Math.min(this._shape[0],this._shape[1]);for(var t=0;e>0;++t,e>>>=1){if(this._mipLevels.indexOf(t)<0){this._mipLevels.push(t)}}};d.setPixels=function(e,t,r,n){var i=this.gl;this.bind();if(Array.isArray(t)){n=r;r=t[1]|0;t=t[0]|0}else{t=t||0;r=r||0}n=n||0;if(e instanceof HTMLCanvasElement||e instanceof ImageData||e instanceof HTMLImageElement||e instanceof HTMLVideoElement){var a=this._mipLevels.indexOf(n)<0;if(a){i.texImage2D(i.TEXTURE_2D,0,this.format,this.format,this.type,e);this._mipLevels.push(n)}else{i.texSubImage2D(i.TEXTURE_2D,n,t,r,this.format,this.type,e)}}else if(e.shape&&e.stride&&e.data){if(e.shape.length<2||t+e.shape[1]>this._shape[1]>>>n||r+e.shape[0]>this._shape[0]>>>n||t<0||r<0){throw new Error("gl-texture2d: Texture dimensions are out of bounds")}_(i,t,r,n,this.format,this.type,this._mipLevels,e)}else{throw new Error("gl-texture2d: Unsupported data type")}};function p(e,t){if(e.length===3){return t[2]===1&&t[1]===e[0]*e[2]&&t[0]===e[2]}return t[0]===1&&t[1]===e[0]}function _(e,t,r,o,s,u,l,c){var h=c.dtype;var d=c.shape.slice();if(d.length<2||d.length>3){throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d")}var _=0,v=0;var g=p(d,c.stride.slice());if(h==="float32"){_=e.FLOAT}else if(h==="float64"){_=e.FLOAT;g=false;h="float32"}else if(h==="uint8"){_=e.UNSIGNED_BYTE}else{_=e.UNSIGNED_BYTE;g=false;h="uint8"}var m=1;if(d.length===2){v=e.LUMINANCE;d=[d[0],d[1],1];c=n(c.data,d,[c.stride[0],c.stride[1],1],c.offset)}else if(d.length===3){if(d[2]===1){v=e.ALPHA}else if(d[2]===2){v=e.LUMINANCE_ALPHA}else if(d[2]===3){v=e.RGB}else if(d[2]===4){v=e.RGBA}else{throw new Error("gl-texture2d: Invalid shape for pixel coords")}m=d[2]}else{throw new Error("gl-texture2d: Invalid shape for texture")}if((v===e.LUMINANCE||v===e.ALPHA)&&(s===e.LUMINANCE||s===e.ALPHA)){v=s}if(v!==s){throw new Error("gl-texture2d: Incompatible texture format for setPixels")}var y=c.size;var b=l.indexOf(o)<0;if(b){l.push(o)}if(_===u&&g){if(c.offset===0&&c.data.length===y){if(b){e.texImage2D(e.TEXTURE_2D,o,s,d[0],d[1],0,s,u,c.data)}else{e.texSubImage2D(e.TEXTURE_2D,o,t,r,d[0],d[1],s,u,c.data)}}else{if(b){e.texImage2D(e.TEXTURE_2D,o,s,d[0],d[1],0,s,u,c.data.subarray(c.offset,c.offset+y))}else{e.texSubImage2D(e.TEXTURE_2D,o,t,r,d[0],d[1],s,u,c.data.subarray(c.offset,c.offset+y))}}}else{var w;if(u===e.FLOAT){w=a.mallocFloat32(y)}else{w=a.mallocUint8(y)}var E=n(w,d,[d[2],d[2]*d[0],1]);if(_===e.FLOAT&&u===e.UNSIGNED_BYTE){f(E,c)}else{i.assign(E,c)}if(b){e.texImage2D(e.TEXTURE_2D,o,s,d[0],d[1],0,s,u,w.subarray(0,y))}else{e.texSubImage2D(e.TEXTURE_2D,o,t,r,d[0],d[1],s,u,w.subarray(0,y))}if(u===e.FLOAT){a.freeFloat32(w)}else{a.freeUint8(w)}}}function v(e){var t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE);return t}function g(e,t,r,n,i){var a=e.getParameter(e.MAX_TEXTURE_SIZE);if(t<0||t>a||r<0||r>a){throw new Error("gl-texture2d: Invalid texture shape")}if(i===e.FLOAT&&!e.getExtension("OES_texture_float")){throw new Error("gl-texture2d: Floating point textures not supported on this platform")}var o=v(e);e.texImage2D(e.TEXTURE_2D,0,n,t,r,0,n,i,null);return new h(e,o,t,r,n,i)}function m(e,t,r,n){var i=v(e);e.texImage2D(e.TEXTURE_2D,0,r,r,n,t);return new h(e,i,t.width|0,t.height|0,r,n)}function y(e,t){var r=t.dtype;var o=t.shape.slice();var s=e.getParameter(e.MAX_TEXTURE_SIZE);if(o[0]<0||o[0]>s||o[1]<0||o[1]>s){throw new Error("gl-texture2d: Invalid texture size")}var u=p(o,t.stride.slice());var l=0;if(r==="float32"){l=e.FLOAT}else if(r==="float64"){l=e.FLOAT;u=false;r="float32"}else if(r==="uint8"){l=e.UNSIGNED_BYTE}else{l=e.UNSIGNED_BYTE;u=false;r="uint8"}var c=0;if(o.length===2){c=e.LUMINANCE;o=[o[0],o[1],1];t=n(t.data,o,[t.stride[0],t.stride[1],1],t.offset)}else if(o.length===3){if(o[2]===1){c=e.ALPHA}else if(o[2]===2){c=e.LUMINANCE_ALPHA}else if(o[2]===3){c=e.RGB}else if(o[2]===4){c=e.RGBA}else{throw new Error("gl-texture2d: Invalid shape for pixel coords")}}else{throw new Error("gl-texture2d: Invalid shape for texture")}if(l===e.FLOAT&&!e.getExtension("OES_texture_float")){l=e.UNSIGNED_BYTE;u=false}var d,_;var g=t.size;if(!u){var m=[o[2],o[2]*o[0],1];_=a.malloc(g,r);var y=n(_,o,m,0);if((r==="float32"||r==="float64")&&l===e.UNSIGNED_BYTE){f(y,t)}else{i.assign(y,t)}d=_.subarray(0,g)}else if(t.offset===0&&t.data.length===g){d=t.data}else{d=t.data.subarray(t.offset,t.offset+g)}var b=v(e);e.texImage2D(e.TEXTURE_2D,0,c,o[0],o[1],0,c,l,d);if(!u){a.free(_)}return new h(e,b,o[0],o[1],c,l)}function b(e){if(arguments.length<=1){throw new Error("gl-texture2d: Missing arguments for texture2d constructor")}if(!o){l(e)}if(typeof arguments[1]==="number"){return g(e,arguments[1],arguments[2],arguments[3]||e.RGBA,arguments[4]||e.UNSIGNED_BYTE)}if(Array.isArray(arguments[1])){return g(e,arguments[1][0]|0,arguments[1][1]|0,arguments[2]||e.RGBA,arguments[3]||e.UNSIGNED_BYTE)}if(typeof arguments[1]==="object"){var t=arguments[1];if(t instanceof HTMLCanvasElement||t instanceof HTMLImageElement||t instanceof HTMLVideoElement||t instanceof ImageData){return m(e,t,arguments[2]||e.RGBA,arguments[3]||e.UNSIGNED_BYTE)}else if(t.shape&&t.data&&t.stride){return y(e,t)}}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")}},{ndarray:126,"ndarray-ops":121,"typedarray-pool":131}],133:[function(e,t,r){(function(e){(function(){var n;var i="4.11.1";var a=200;var o="Expected a function";var s="__lodash_hash_undefined__";var u="__lodash_placeholder__";var l=1,f=2,c=4,h=8,d=16,p=32,_=64,v=128,g=256,m=512;var y=1,b=2;var w=30,E="...";var A=150,x=16;var T=1,R=2,S=3;var C=1/0,j=9007199254740991,k=1.7976931348623157e308,I=0/0;var O=4294967295,L=O-1,N=O>>>1;var M="[object Arguments]",P="[object Array]",U="[object Boolean]",B="[object Date]",D="[object Error]",F="[object Function]",V="[object GeneratorFunction]",X="[object Map]",H="[object Number]",G="[object Object]",z="[object Promise]",Y="[object RegExp]",W="[object Set]",q="[object String]",K="[object Symbol]",$="[object WeakMap]",Z="[object WeakSet]";var J="[object ArrayBuffer]",Q="[object DataView]",ee="[object Float32Array]",te="[object Float64Array]",re="[object Int8Array]",ne="[object Int16Array]",ie="[object Int32Array]",ae="[object Uint8Array]",oe="[object Uint8ClampedArray]",se="[object Uint16Array]",ue="[object Uint32Array]";var le=/\b__p \+= '';/g,fe=/\b(__p \+=) '' \+/g,ce=/(__e\(.*?\)|\b__t\)) \+\n'';/g;var he=/&(?:amp|lt|gt|quot|#39|#96);/g,de=/[&<>"'`]/g,pe=RegExp(he.source),_e=RegExp(de.source);var ve=/<%-([\s\S]+?)%>/g,ge=/<%([\s\S]+?)%>/g,me=/<%=([\s\S]+?)%>/g;var ye=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,be=/^\w*$/,we=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]/g;var Ee=/[\\^$.*+?()[\]{}|]/g,Ae=RegExp(Ee.source);var xe=/^\s+|\s+$/g,Te=/^\s+/,Re=/\s+$/;var Se=/[a-zA-Z0-9]+/g;var Ce=/\\(\\)?/g;var je=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g;var ke=/\w*$/;var Ie=/^0x/i;var Oe=/^[-+]0x[0-9a-f]+$/i;var Le=/^0b[01]+$/i;var Ne=/^\[object .+?Constructor\]$/;var Me=/^0o[0-7]+$/i;var Pe=/^(?:0|[1-9]\d*)$/;var Ue=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g;var Be=/($^)/;var De=/['\n\r\u2028\u2029\\]/g;var Fe="\\ud800-\\udfff",Ve="\\u0300-\\u036f\\ufe20-\\ufe23",Xe="\\u20d0-\\u20f0",He="\\u2700-\\u27bf",Ge="a-z\\xdf-\\xf6\\xf8-\\xff",ze="\\xac\\xb1\\xd7\\xf7",Ye="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",We="\\u2018\\u2019\\u201c\\u201d",qe=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ke="A-Z\\xc0-\\xd6\\xd8-\\xde",$e="\\ufe0e\\ufe0f",Ze=ze+Ye+We+qe;var Je="[']",Qe="["+Fe+"]",et="["+Ze+"]",tt="["+Ve+Xe+"]",rt="\\d+",nt="["+He+"]",it="["+Ge+"]",at="[^"+Fe+Ze+rt+He+Ge+Ke+"]",ot="\\ud83c[\\udffb-\\udfff]",st="(?:"+tt+"|"+ot+")",ut="[^"+Fe+"]",lt="(?:\\ud83c[\\udde6-\\uddff]){2}",ft="[\\ud800-\\udbff][\\udc00-\\udfff]",ct="["+Ke+"]",ht="\\u200d";var dt="(?:"+it+"|"+at+")",pt="(?:"+ct+"|"+at+")",_t="(?:"+Je+"(?:d|ll|m|re|s|t|ve))?",vt="(?:"+Je+"(?:D|LL|M|RE|S|T|VE))?",gt=st+"?",mt="["+$e+"]?",yt="(?:"+ht+"(?:"+[ut,lt,ft].join("|")+")"+mt+gt+")*",bt=mt+gt+yt,wt="(?:"+[nt,lt,ft].join("|")+")"+bt,Et="(?:"+[ut+tt+"?",tt,lt,ft,Qe].join("|")+")";var At=RegExp(Je,"g");var xt=RegExp(tt,"g");var Tt=RegExp(ot+"(?="+ot+")|"+Et+bt,"g");var Rt=RegExp([ct+"?"+it+"+"+_t+"(?="+[et,ct,"$"].join("|")+")",pt+"+"+vt+"(?="+[et,ct+dt,"$"].join("|")+")",ct+"?"+dt+"+"+_t,ct+"+"+vt,rt,wt].join("|"),"g");var St=RegExp("["+ht+Fe+Ve+Xe+$e+"]");var Ct=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;var jt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","Reflect","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"];var kt=-1;var It={};It[ee]=It[te]=It[re]=It[ne]=It[ie]=It[ae]=It[oe]=It[se]=It[ue]=true;It[M]=It[P]=It[J]=It[U]=It[Q]=It[B]=It[D]=It[F]=It[X]=It[H]=It[G]=It[Y]=It[W]=It[q]=It[$]=false;var Ot={};Ot[M]=Ot[P]=Ot[J]=Ot[Q]=Ot[U]=Ot[B]=Ot[ee]=Ot[te]=Ot[re]=Ot[ne]=Ot[ie]=Ot[X]=Ot[H]=Ot[G]=Ot[Y]=Ot[W]=Ot[q]=Ot[K]=Ot[ae]=Ot[oe]=Ot[se]=Ot[ue]=true;Ot[D]=Ot[F]=Ot[$]=false;var Lt={"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss"};var Nt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"};var Mt={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"};var Pt={"function":true,object:true};var Ut={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};var Bt=parseFloat,Dt=parseInt;var Ft=Pt[typeof r]&&r&&!r.nodeType?r:n;var Vt=Pt[typeof t]&&t&&!t.nodeType?t:n;var Xt=Vt&&Vt.exports===Ft?Ft:n;var Ht=Tr(Ft&&Vt&&typeof e=="object"&&e);var Gt=Tr(Pt[typeof self]&&self);var zt=Tr(Pt[typeof window]&&window);var Yt=Tr(Pt[typeof this]&&this);var Wt=Ht||zt!==(Yt&&Yt.window)&&zt||Gt||Yt||Function("return this")();function qt(e,t){e.set(t[0],t[1]);return e}function Kt(e,t){e.add(t);return e}function $t(e,t,r){var n=r.length;switch(n){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function Zt(e,t,r,n){var i=-1,a=e.length;while(++i<a){var o=e[i];t(n,o,r(o),e)}return n}function Jt(e,t){var r=-1,n=e.length,i=-1,a=t.length,o=Array(n+a);while(++r<n){o[r]=e[r]}while(++i<a){o[r++]=t[i]}return o}function Qt(e,t){var r=-1,n=e.length;while(++r<n){if(t(e[r],r,e)===false){break}}return e}function er(e,t){var r=e.length;while(r--){if(t(e[r],r,e)===false){break}}return e}function tr(e,t){var r=-1,n=e.length;while(++r<n){if(!t(e[r],r,e)){return false}}return true}function rr(e,t){var r=-1,n=e.length,i=0,a=[];while(++r<n){var o=e[r];if(t(o,r,e)){a[i++]=o}}return a}function nr(e,t){return!!e.length&&dr(e,t,0)>-1}function ir(e,t,r){var n=-1,i=e.length;while(++n<i){if(r(t,e[n])){return true}}return false}function ar(e,t){var r=-1,n=e.length,i=Array(n);while(++r<n){i[r]=t(e[r],r,e)}return i}function or(e,t){var r=-1,n=t.length,i=e.length;while(++r<n){e[i+r]=t[r]}return e}function sr(e,t,r,n){var i=-1,a=e.length;if(n&&a){r=e[++i]}while(++i<a){r=t(r,e[i],i,e)}return r}function ur(e,t,r,n){var i=e.length;if(n&&i){r=e[--i]}while(i--){r=t(r,e[i],i,e)}return r}function lr(e,t){var r=-1,n=e.length;while(++r<n){if(t(e[r],r,e)){return true}}return false}function fr(e,t,r){var i=-1,a=e.length;while(++i<a){var o=e[i],s=t(o);if(s!=null&&(u===n?s===s:r(s,u))){var u=s,l=o}}return l}function cr(e,t,r,n){var i;r(e,function(e,r,a){if(t(e,r,a)){i=n?r:e;return false}});return i}function hr(e,t,r){var n=e.length,i=r?n:-1;while(r?i--:++i<n){if(t(e[i],i,e)){return i}}return-1}function dr(e,t,r){if(t!==t){return Lr(e,r)}var n=r-1,i=e.length;while(++n<i){if(e[n]===t){return n}}return-1}function pr(e,t,r,n){var i=r-1,a=e.length;while(++i<a){if(n(e[i],t)){return i}}return-1}function _r(e,t){var r=e?e.length:0;return r?mr(e,t)/r:I}function vr(e,t,r,n,i){i(e,function(e,i,a){r=n?(n=false,e):t(r,e,i,a)});return r}function gr(e,t){var r=e.length;e.sort(t);while(r--){e[r]=e[r].value}return e}function mr(e,t){var r,i=-1,a=e.length;while(++i<a){var o=t(e[i]);if(o!==n){r=r===n?o:r+o}}return r}function yr(e,t){var r=-1,n=Array(e);while(++r<e){n[r]=t(r)}return n}function br(e,t){return ar(t,function(t){return[t,e[t]]})}function wr(e){return function(t){return e(t)}}function Er(e,t){return ar(t,function(t){return e[t]})}function Ar(e,t){var r=-1,n=e.length;while(++r<n&&dr(t,e[r],0)>-1){}return r}function xr(e,t){var r=e.length;while(r--&&dr(t,e[r],0)>-1){}return r}function Tr(e){return e&&e.Object===Object?e:null}function Rr(e,t){if(e!==t){var r=e===null,i=e===n,a=e===e;var o=t===null,s=t===n,u=t===t;if(e>t&&!o||!a||r&&!s&&u||i&&u){return 1}if(e<t&&!r||!u||o&&!i&&a||s&&a){return-1}}return 0}function Sr(e,t,r){var n=-1,i=e.criteria,a=t.criteria,o=i.length,s=r.length;while(++n<o){var u=Rr(i[n],a[n]);if(u){if(n>=s){return u}var l=r[n];return u*(l=="desc"?-1:1)}}return e.index-t.index}function Cr(e,t){var r=e.length,n=0;while(r--){if(e[r]===t){n++}}return n}function jr(e){return function(t,r){var i;if(t===n&&r===n){return 0}if(t!==n){i=t}if(r!==n){i=i===n?r:e(i,r)}return i}}function kr(e){return Lt[e]}function Ir(e){return Nt[e]}function Or(e){return"\\"+Ut[e]}function Lr(e,t,r){var n=e.length,i=t+(r?0:-1);while(r?i--:++i<n){var a=e[i];if(a!==a){return i}}return-1}function Nr(e){var t=false;if(e!=null&&typeof e.toString!="function"){try{t=!!(e+"")}catch(r){}}return t}function Mr(e,t){e=typeof e=="number"||Pe.test(e)?+e:-1;t=t==null?j:t;return e>-1&&e%1==0&&e<t}function Pr(e){var t,r=[];while(!(t=e.next()).done){r.push(t.value)}return r}function Ur(e){var t=-1,r=Array(e.size);e.forEach(function(e,n){r[++t]=[n,e]});return r}function Br(e,t){var r=-1,n=e.length,i=0,a=[];while(++r<n){var o=e[r];if(o===t||o===u){e[r]=u;a[i++]=r}}return a}function Dr(e){var t=-1,r=Array(e.size);e.forEach(function(e){r[++t]=e});return r}function Fr(e){if(!(e&&St.test(e))){return e.length}var t=Tt.lastIndex=0;while(Tt.test(e)){t++}return t}function Vr(e){return e.match(Tt)}function Xr(e){return Mt[e]}function Hr(e){e=e?Gr.defaults({},e,Gr.pick(Wt,jt)):Wt;var t=e.Date,r=e.Error,Pe=e.Math,Fe=e.RegExp,Ve=e.TypeError;var Xe=e.Array.prototype,He=e.Object.prototype,Ge=e.String.prototype;var ze=e.Function.prototype.toString;var Ye=He.hasOwnProperty;var We=0;var qe=ze.call(Object);var Ke=He.toString;var $e=Wt._;var Ze=Fe("^"+ze.call(Ye).replace(Ee,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var Je=Xt?e.Buffer:n,Qe=e.Reflect,et=e.Symbol,tt=e.Uint8Array,rt=e.clearTimeout,nt=Qe?Qe.enumerate:n,it=Object.getOwnPropertySymbols,at=typeof(at=et&&et.iterator)=="symbol"?at:n,ot=Object.create,st=He.propertyIsEnumerable,ut=e.setTimeout,lt=Xe.splice;var ft=Pe.ceil,ct=Pe.floor,ht=Object.getPrototypeOf,dt=e.isFinite,pt=Xe.join,_t=Object.keys,vt=Pe.max,gt=Pe.min,mt=e.parseInt,yt=Pe.random,bt=Ge.replace,wt=Xe.reverse,Et=Ge.split;var Tt=Ma(e,"DataView"),Lt=Ma(e,"Map"),Nt=Ma(e,"Promise"),Mt=Ma(e,"Set"),Pt=Ma(e,"WeakMap"),Ut=Ma(Object,"create");var Ft=Pt&&new Pt;var Vt=!st.call({valueOf:1},"valueOf");var Ht={};var Gt=lo(Tt),zt=lo(Lt),Yt=lo(Nt),Tr=lo(Mt),zr=lo(Pt);var Yr=et?et.prototype:n,Wr=Yr?Yr.valueOf:n,qr=Yr?Yr.toString:n;function Kr(e){if(tl(e)&&!Bu(e)&&!(e instanceof Jr)){if(e instanceof Zr){return e}if(Ye.call(e,"__wrapped__")){return fo(e)}}return new Zr(e)}function $r(){}function Zr(e,t){this.__wrapped__=e;this.__actions__=[];this.__chain__=!!t;this.__index__=0;this.__values__=n}Kr.templateSettings={escape:ve,evaluate:ge,interpolate:me,variable:"",imports:{_:Kr}};Kr.prototype=$r.prototype;Kr.prototype.constructor=Kr;Zr.prototype=Un($r.prototype);Zr.prototype.constructor=Zr;function Jr(e){this.__wrapped__=e;this.__actions__=[];this.__dir__=1;this.__filtered__=false;this.__iteratees__=[];this.__takeCount__=O;this.__views__=[]}function Qr(){var e=new Jr(this.__wrapped__);e.__actions__=ra(this.__actions__);e.__dir__=this.__dir__;e.__filtered__=this.__filtered__;e.__iteratees__=ra(this.__iteratees__);e.__takeCount__=this.__takeCount__;e.__views__=ra(this.__views__);return e}function en(){if(this.__filtered__){var e=new Jr(this);e.__dir__=-1;e.__filtered__=true}else{e=this.clone();e.__dir__*=-1}return e}function tn(){var e=this.__wrapped__.value(),t=this.__dir__,r=Bu(e),n=t<0,i=r?e.length:0,o=Va(0,i,this.__views__),s=o.start,u=o.end,l=u-s,f=n?u:s-1,c=this.__iteratees__,h=c.length,d=0,p=gt(l,this.__takeCount__);if(!r||i<a||i==l&&p==l){return Di(e,this.__actions__)}var _=[];e:while(l--&&d<p){f+=t;var v=-1,g=e[f];while(++v<h){var m=c[v],y=m.iteratee,b=m.type,w=y(g);if(b==R){g=w}else if(!w){if(b==T){continue e}else{break e}}}_[d++]=g}return _}Jr.prototype=Un($r.prototype);Jr.prototype.constructor=Jr;function rn(){}function nn(e,t){return on(e,t)&&delete e[t]}function an(e,t){if(Ut){var r=e[t];return r===s?n:r}return Ye.call(e,t)?e[t]:n}function on(e,t){return Ut?e[t]!==n:Ye.call(e,t)}function sn(e,t,r){e[t]=Ut&&r===n?s:r}rn.prototype=Ut?Ut(null):He;function un(e){var t=-1,r=e?e.length:0;this.clear();while(++t<r){var n=e[t];this.set(n[0],n[1])}}function ln(){this.__data__={hash:new rn,map:Lt?new Lt:[],string:new rn}}function fn(e){var t=this.__data__;if(Za(e)){return nn(typeof e=="string"?t.string:t.hash,e)}return Lt?t.map["delete"](e):An(t.map,e)}function cn(e){var t=this.__data__;if(Za(e)){return an(typeof e=="string"?t.string:t.hash,e)}return Lt?t.map.get(e):xn(t.map,e)}function hn(e){var t=this.__data__;if(Za(e)){return on(typeof e=="string"?t.string:t.hash,e)}return Lt?t.map.has(e):Tn(t.map,e)}function dn(e,t){var r=this.__data__;if(Za(e)){sn(typeof e=="string"?r.string:r.hash,e,t)}else if(Lt){r.map.set(e,t)}else{Sn(r.map,e,t)}return this}un.prototype.clear=ln;un.prototype["delete"]=fn;un.prototype.get=cn;un.prototype.has=hn;un.prototype.set=dn;function pn(e){var t=-1,r=e?e.length:0;this.__data__=new un;while(++t<r){this.push(e[t])}}function _n(e,t){var r=e.__data__;if(Za(t)){var n=r.__data__,i=typeof t=="string"?n.string:n.hash;return i[t]===s}return r.has(t)}function vn(e){var t=this.__data__;if(Za(e)){var r=t.__data__,n=typeof e=="string"?r.string:r.hash;n[e]=s}else{t.set(e,s)}}pn.prototype.push=vn;function gn(e){var t=-1,r=e?e.length:0;this.clear();while(++t<r){var n=e[t];this.set(n[0],n[1])}}function mn(){this.__data__={array:[],map:null}}function yn(e){var t=this.__data__,r=t.array;return r?An(r,e):t.map["delete"](e)}function bn(e){var t=this.__data__,r=t.array;return r?xn(r,e):t.map.get(e)}function wn(e){var t=this.__data__,r=t.array;return r?Tn(r,e):t.map.has(e)}function En(e,t){var r=this.__data__,n=r.array;if(n){if(n.length<a-1){Sn(n,e,t)}else{r.array=null;r.map=new un(n)}}var i=r.map;if(i){i.set(e,t)}return this}gn.prototype.clear=mn;gn.prototype["delete"]=yn;gn.prototype.get=bn;gn.prototype.has=wn;gn.prototype.set=En;function An(e,t){var r=Rn(e,t);if(r<0){return false}var n=e.length-1;if(r==n){e.pop()}else{lt.call(e,r,1)}return true}function xn(e,t){var r=Rn(e,t);return r<0?n:e[r][1]}function Tn(e,t){return Rn(e,t)>-1}function Rn(e,t){var r=e.length;while(r--){if(Nu(e[r][0],t)){return r}}return-1}function Sn(e,t,r){var n=Rn(e,t);if(n<0){e.push([t,r])}else{e[n][1]=r}}function Cn(e,t,r,i){if(e===n||Nu(e,He[r])&&!Ye.call(i,r)){return t}return e}function jn(e,t,r){if(r!==n&&!Nu(e[t],r)||typeof t=="number"&&r===n&&!(t in e)){e[t]=r}}function kn(e,t,r){var i=e[t];if(!(Ye.call(e,t)&&Nu(i,r))||r===n&&!(t in e)){e[t]=r}}function In(e,t,r,n){Fn(e,function(e,i,a){t(n,e,r(e),a)});return n}function On(e,t){return e&&na(t,Zl(t),e)}function Ln(e,t){var r=-1,i=e==null,a=t.length,o=Array(a);while(++r<a){o[r]=i?n:zl(e,t[r])}return o}function Nn(e,t,r){if(e===e){if(r!==n){e=e<=r?e:r}if(t!==n){e=e>=t?e:t}}return e}function Mn(e,t,r,i,a,o,s){var u;if(i){u=o?i(e,a,o,s):i(e)}if(u!==n){return u}if(!el(e)){return e}var l=Bu(e);if(l){u=Ha(e);if(!t){return ra(e,u)}}else{var f=Fa(e),c=f==F||f==V;if(Hu(e)){return Yi(e,t)}if(f==G||f==M||c&&!o){if(Nr(e)){return o?e:{}}u=Ga(c?{}:e);if(!t){return ia(e,On(u,e))}}else{if(!Ot[f]){return o?e:{}}u=za(e,f,Mn,t)}}s||(s=new gn);var h=s.get(e);if(h){return h}s.set(e,u);if(!l){var d=r?Ca(e):Zl(e)}Qt(d||e,function(n,a){if(d){a=n;n=e[a]}kn(u,a,Mn(n,t,r,i,a,e,s))});return u}function Pn(e){var t=Zl(e),r=t.length;return function(i){if(i==null){return!r}var a=r;while(a--){var o=t[a],s=e[o],u=i[o];if(u===n&&!(o in Object(i))||!s(u)){return false}}return true}}function Un(e){return el(e)?ot(e):{}}function Bn(e,t,r){if(typeof e!="function"){throw new Ve(o)}return ut(function(){e.apply(n,r)},t)}function Dn(e,t,r,n){var i=-1,o=nr,s=true,u=e.length,l=[],f=t.length;if(!u){return l}if(r){t=ar(t,wr(r))}if(n){o=ir;s=false}else if(t.length>=a){o=_n;s=false;t=new pn(t)}e:while(++i<u){var c=e[i],h=r?r(c):c;if(s&&h===h){var d=f;while(d--){if(t[d]===h){continue e}}l.push(c)}else if(!o(t,h,n)){l.push(c)}}return l}var Fn=sa(qn);var Vn=sa(Kn,true);function Xn(e,t){var r=true;Fn(e,function(e,n,i){r=!!t(e,n,i);return r});return r}function Hn(e,t,r,i){var a=e.length;r=Al(r);if(r<0){r=-r>a?0:a+r}i=i===n||i>a?a:Al(i);if(i<0){i+=a}i=r>i?0:xl(i);while(r<i){e[r++]=t}return e}function Gn(e,t){var r=[];Fn(e,function(e,n,i){if(t(e,n,i)){r.push(e)}});return r}function zn(e,t,r,n,i){var a=-1,o=e.length;r||(r=Wa);i||(i=[]);while(++a<o){var s=e[a];if(t>0&&r(s)){if(t>1){zn(s,t-1,r,n,i)}else{or(i,s)}}else if(!n){i[i.length]=s}}return i}var Yn=ua();var Wn=ua(true);function qn(e,t){return e&&Yn(e,t,Zl)}function Kn(e,t){return e&&Wn(e,t,Zl)}function $n(e,t){return rr(t,function(t){return Zu(e[t])})}function Zn(e,t){t=$a(t,e)?[t]:Gi(t);var r=0,i=t.length;while(e!=null&&r<i){e=e[t[r++]]}return r&&r==i?e:n}function Jn(e,t,r){var n=t(e);return Bu(e)?n:or(n,r(e))}function Qn(e,t){return Ye.call(e,t)||typeof e=="object"&&t in e&&Ua(e)===null}function ei(e,t){return t in Object(e)}function ti(e,t,r){return e>=gt(t,r)&&e<vt(t,r)}function ri(e,t,r){var i=r?ir:nr,a=e[0].length,o=e.length,s=o,u=Array(o),l=Infinity,f=[];while(s--){var c=e[s];if(s&&t){c=ar(c,wr(t))}l=gt(c.length,l);u[s]=!r&&(t||a>=120&&c.length>=120)?new pn(s&&c):n}c=e[0];var h=-1,d=u[0];e:while(++h<a&&f.length<l){var p=c[h],_=t?t(p):p;if(!(d?_n(d,_):i(f,_,r))){s=o;while(--s){var v=u[s];if(!(v?_n(v,_):i(e[s],_,r))){continue e}}if(d){d.push(_)}f.push(p)}}return f}function ni(e,t,r,n){qn(e,function(e,i,a){t(n,r(e),i,a)});return n}function ii(e,t,r){if(!$a(t,e)){t=Gi(t);e=io(e,t);t=Po(t)}var i=e==null?e:e[t];return i==null?n:$t(i,e,r)}function ai(e,t,r,n,i){if(e===t){return true}if(e==null||t==null||!el(e)&&!tl(t)){return e!==e&&t!==t}return oi(e,t,ai,r,n,i)}function oi(e,t,r,n,i,a){var o=Bu(e),s=Bu(t),u=P,l=P;if(!o){u=Fa(e);u=u==M?G:u}if(!s){l=Fa(t);l=l==M?G:l}var f=u==G&&!Nr(e),c=l==G&&!Nr(t),h=u==l;if(h&&!f){a||(a=new gn);return o||vl(e)?Ta(e,t,r,n,i,a):Ra(e,t,u,r,n,i,a)}if(!(i&b)){var d=f&&Ye.call(e,"__wrapped__"),p=c&&Ye.call(t,"__wrapped__");if(d||p){var _=d?e.value():e,v=p?t.value():t;a||(a=new gn);return r(_,v,n,i,a)}}if(!h){return false}a||(a=new gn);return Sa(e,t,r,n,i,a)}function si(e,t,r,i){var a=r.length,o=a,s=!i;if(e==null){return!o}e=Object(e);while(a--){var u=r[a];if(s&&u[2]?u[1]!==e[u[0]]:!(u[0]in e)){return false}}while(++a<o){u=r[a];var l=u[0],f=e[l],c=u[1];if(s&&u[2]){if(f===n&&!(l in e)){return false}}else{var h=new gn;if(i){var d=i(f,c,l,e,t,h)}if(!(d===n?ai(c,f,i,y|b,h):d)){return false}}}return true}function ui(e){if(typeof e=="function"){return e}if(e==null){return ac}if(typeof e=="object"){return Bu(e)?di(e[0],e[1]):hi(e)}return mc(e)}function li(e){return _t(Object(e))}function fi(e){e=e==null?e:Object(e);var t=[];for(var r in e){t.push(r)}return t}
if(nt&&!st.call({valueOf:1},"valueOf")){fi=function(e){return Pr(nt(e))}}function ci(e,t){var r=-1,n=Fu(e)?Array(e.length):[];Fn(e,function(e,i,a){n[++r]=t(e,i,a)});return n}function hi(e){var t=Na(e);if(t.length==1&&t[0][2]){return to(t[0][0],t[0][1])}return function(r){return r===e||si(r,e,t)}}function di(e,t){if($a(e)&&eo(t)){return to(e,t)}return function(r){var i=zl(r,e);return i===n&&i===t?Wl(r,e):ai(t,i,n,y|b)}}function pi(e,t,r,i,a){if(e===t){return}if(!(Bu(t)||vl(t))){var o=Jl(t)}Qt(o||t,function(s,u){if(o){u=s;s=t[u]}if(el(s)){a||(a=new gn);_i(e,t,u,r,pi,i,a)}else{var l=i?i(e[u],s,u+"",e,t,a):n;if(l===n){l=s}jn(e,u,l)}})}function _i(e,t,r,i,a,o,s){var u=e[r],l=t[r],f=s.get(l);if(f){jn(e,r,f);return}var c=o?o(u,l,r+"",e,t,s):n;var h=c===n;if(h){c=l;if(Bu(l)||vl(l)){if(Bu(u)){c=u}else if(Vu(u)){c=ra(u)}else{h=false;c=Mn(l,true)}}else if(fl(l)||Uu(l)){if(Uu(u)){c=Rl(u)}else if(!el(u)||i&&Zu(u)){h=false;c=Mn(l,true)}else{c=u}}else{h=false}}s.set(l,c);if(h){a(c,l,i,o,s)}s["delete"](l);jn(e,r,c)}function vi(e,t){var r=e.length;if(!r){return}t+=t<0?r:0;return Mr(t,r)?e[t]:n}function gi(e,t,r){var n=-1;t=ar(t.length?t:[ac],wr(Oa()));var i=ci(e,function(e,r,i){var a=ar(t,function(t){return t(e)});return{criteria:a,index:++n,value:e}});return gr(i,function(e,t){return Sr(e,t,r)})}function mi(e,t){e=Object(e);return sr(t,function(t,r){if(r in e){t[r]=e[r]}return t},{})}function yi(e,t){var r=-1,n=ja(e),i=n.length,a={};while(++r<i){var o=n[r],s=e[o];if(t(s,o)){a[o]=s}}return a}function bi(e){return function(t){return t==null?n:t[e]}}function wi(e){return function(t){return Zn(t,e)}}function Ei(e,t,r,n){var i=n?pr:dr,a=-1,o=t.length,s=e;if(r){s=ar(e,wr(r))}while(++a<o){var u=0,l=t[a],f=r?r(l):l;while((u=i(s,f,u,n))>-1){if(s!==e){lt.call(s,u,1)}lt.call(e,u,1)}}return e}function Ai(e,t){var r=e?t.length:0,n=r-1;while(r--){var i=t[r];if(n==r||i!=a){var a=i;if(Mr(i)){lt.call(e,i,1)}else if(!$a(i,e)){var o=Gi(i),s=io(e,o);if(s!=null){delete s[Po(o)]}}else{delete e[i]}}}return e}function xi(e,t){return e+ct(yt()*(t-e+1))}function Ti(e,t,r,n){var i=-1,a=vt(ft((t-e)/(r||1)),0),o=Array(a);while(a--){o[n?a:++i]=e;e+=r}return o}function Ri(e,t){var r="";if(!e||t<1||t>j){return r}do{if(t%2){r+=e}t=ct(t/2);if(t){e+=e}}while(t);return r}function Si(e,t,r,i){t=$a(t,e)?[t]:Gi(t);var a=-1,o=t.length,s=o-1,u=e;while(u!=null&&++a<o){var l=t[a];if(el(u)){var f=r;if(a!=s){var c=u[l];f=i?i(c,l,u):n;if(f===n){f=c==null?Mr(t[a+1])?[]:{}:c}}kn(u,l,f)}u=u[l]}return e}var Ci=!Ft?ac:function(e,t){Ft.set(e,t);return e};function ji(e,t,r){var n=-1,i=e.length;if(t<0){t=-t>i?0:i+t}r=r>i?i:r;if(r<0){r+=i}i=t>r?0:r-t>>>0;t>>>=0;var a=Array(i);while(++n<i){a[n]=e[n+t]}return a}function ki(e,t){var r;Fn(e,function(e,n,i){r=t(e,n,i);return!r});return!!r}function Ii(e,t,r){var n=0,i=e?e.length:n;if(typeof t=="number"&&t===t&&i<=N){while(n<i){var a=n+i>>>1,o=e[a];if((r?o<=t:o<t)&&o!==null){n=a+1}else{i=a}}return i}return Oi(e,t,ac,r)}function Oi(e,t,r,i){t=r(t);var a=0,o=e?e.length:0,s=t!==t,u=t===null,l=t===n;while(a<o){var f=ct((a+o)/2),c=r(e[f]),h=c!==n,d=c===c;if(s){var p=d||i}else if(u){p=d&&h&&(i||c!=null)}else if(l){p=d&&(i||h)}else if(c==null){p=false}else{p=i?c<=t:c<t}if(p){a=f+1}else{o=f}}return gt(o,L)}function Li(e){return Ni(e)}function Ni(e,t){var r=0,n=e.length,i=e[0],a=t?t(i):i,o=a,s=1,u=[i];while(++r<n){i=e[r],a=t?t(i):i;if(!Nu(a,o)){o=a;u[s++]=i}}return u}function Mi(e,t,r){var n=-1,i=nr,o=e.length,s=true,u=[],l=u;if(r){s=false;i=ir}else if(o>=a){var f=t?null:Aa(e);if(f){return Dr(f)}s=false;i=_n;l=new pn}else{l=t?[]:u}e:while(++n<o){var c=e[n],h=t?t(c):c;if(s&&h===h){var d=l.length;while(d--){if(l[d]===h){continue e}}if(t){l.push(h)}u.push(c)}else if(!i(l,h,r)){if(l!==u){l.push(h)}u.push(c)}}return u}function Pi(e,t){t=$a(t,e)?[t]:Gi(t);e=io(e,t);var r=Po(t);return e!=null&&Yl(e,r)?delete e[r]:true}function Ui(e,t,r,n){return Si(e,t,r(Zn(e,t)),n)}function Bi(e,t,r,n){var i=e.length,a=n?i:-1;while((n?a--:++a<i)&&t(e[a],a,e)){}return r?ji(e,n?0:a,n?a+1:i):ji(e,n?a+1:0,n?i:a)}function Di(e,t){var r=e;if(r instanceof Jr){r=r.value()}return sr(t,function(e,t){return t.func.apply(t.thisArg,or([e],t.args))},r)}function Fi(e,t,r){var n=-1,i=e.length;while(++n<i){var a=a?or(Dn(a,e[n],t,r),Dn(e[n],a,t,r)):e[n]}return a&&a.length?Mi(a,t,r):[]}function Vi(e,t,r){var i=-1,a=e.length,o=t.length,s={};while(++i<a){var u=i<o?t[i]:n;r(s,e[i],u)}return s}function Xi(e){return Vu(e)?e:[]}function Hi(e){return typeof e=="function"?e:ac}function Gi(e){return Bu(e)?e:so(e)}function zi(e,t,r){var i=e.length;r=r===n?i:r;return!t&&r>=i?e:ji(e,t,r)}function Yi(e,t){if(t){return e.slice()}var r=new e.constructor(e.length);e.copy(r);return r}function Wi(e){var t=new e.constructor(e.byteLength);new tt(t).set(new tt(e));return t}function qi(e,t){var r=t?Wi(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}function Ki(e,t,r){var n=t?r(Ur(e),true):Ur(e);return sr(n,qt,new e.constructor)}function $i(e){var t=new e.constructor(e.source,ke.exec(e));t.lastIndex=e.lastIndex;return t}function Zi(e,t,r){var n=t?r(Dr(e),true):Dr(e);return sr(n,Kt,new e.constructor)}function Ji(e){return Wr?Object(Wr.call(e)):{}}function Qi(e,t){var r=t?Wi(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function ea(e,t,r,n){var i=-1,a=e.length,o=r.length,s=-1,u=t.length,l=vt(a-o,0),f=Array(u+l),c=!n;while(++s<u){f[s]=t[s]}while(++i<o){if(c||i<a){f[r[i]]=e[i]}}while(l--){f[s++]=e[i++]}return f}function ta(e,t,r,n){var i=-1,a=e.length,o=-1,s=r.length,u=-1,l=t.length,f=vt(a-s,0),c=Array(f+l),h=!n;while(++i<f){c[i]=e[i]}var d=i;while(++u<l){c[d+u]=t[u]}while(++o<s){if(h||i<a){c[d+r[o]]=e[i++]}}return c}function ra(e,t){var r=-1,n=e.length;t||(t=Array(n));while(++r<n){t[r]=e[r]}return t}function na(e,t,r,n){r||(r={});var i=-1,a=t.length;while(++i<a){var o=t[i];var s=n?n(r[o],e[o],o,r,e):e[o];kn(r,o,s)}return r}function ia(e,t){return na(e,Ba(e),t)}function aa(e,t){return function(r,n){var i=Bu(r)?Zt:In,a=t?t():{};return i(r,e,Oa(n),a)}}function oa(e){return xu(function(t,r){var i=-1,a=r.length,o=a>1?r[a-1]:n,s=a>2?r[2]:n;o=typeof o=="function"?(a--,o):n;if(s&&Ka(r[0],r[1],s)){o=a<3?n:o;a=1}t=Object(t);while(++i<a){var u=r[i];if(u){e(t,u,i,o)}}return t})}function sa(e,t){return function(r,n){if(r==null){return r}if(!Fu(r)){return e(r,n)}var i=r.length,a=t?i:-1,o=Object(r);while(t?a--:++a<i){if(n(o[a],a,o)===false){break}}return r}}function ua(e){return function(t,r,n){var i=-1,a=Object(t),o=n(t),s=o.length;while(s--){var u=o[e?s:++i];if(r(a[u],u,a)===false){break}}return t}}function la(e,t,r){var n=t&l,i=ha(e);function a(){var t=this&&this!==Wt&&this instanceof a?i:e;return t.apply(n?r:this,arguments)}return a}function fa(e){return function(t){t=Cl(t);var r=St.test(t)?Vr(t):n;var i=r?r[0]:t.charAt(0);var a=r?zi(r,1).join(""):t.slice(1);return i[e]()+a}}function ca(e){return function(t){return sr(Zf(xf(t).replace(At,"")),e,"")}}function ha(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=Un(e.prototype),n=e.apply(r,t);return el(n)?n:r}}function da(e,t,r){var i=ha(e);function a(){var o=arguments.length,s=Array(o),u=o,l=Pa(a);while(u--){s[u]=arguments[u]}var f=o<3&&s[0]!==l&&s[o-1]!==l?[]:Br(s,l);o-=f.length;if(o<r){return wa(e,t,_a,a.placeholder,n,s,f,n,n,r-o)}var c=this&&this!==Wt&&this instanceof a?i:e;return $t(c,this,s)}return a}function pa(e){return xu(function(t){t=zn(t,1);var r=t.length,i=r,s=Zr.prototype.thru;if(e){t.reverse()}while(i--){var u=t[i];if(typeof u!="function"){throw new Ve(o)}if(s&&!l&&Ia(u)=="wrapper"){var l=new Zr([],true)}}i=l?i:r;while(++i<r){u=t[i];var f=Ia(u),c=f=="wrapper"?ka(u):n;if(c&&Ja(c[0])&&c[1]==(v|h|p|g)&&!c[4].length&&c[9]==1){l=l[Ia(c[0])].apply(l,c[3])}else{l=u.length==1&&Ja(u)?l[f]():l.thru(u)}}return function(){var e=arguments,n=e[0];if(l&&e.length==1&&Bu(n)&&n.length>=a){return l.plant(n).value()}var i=0,o=r?t[i].apply(this,e):n;while(++i<r){o=t[i].call(this,o)}return o}})}function _a(e,t,r,i,a,o,s,u,c,p){var _=t&v,g=t&l,y=t&f,b=t&(h|d),w=t&m,E=y?n:ha(e);function A(){var n=arguments.length,l=n,f=Array(n);while(l--){f[l]=arguments[l]}if(b){var h=Pa(A),d=Cr(f,h)}if(i){f=ea(f,i,a,b)}if(o){f=ta(f,o,s,b)}n-=d;if(b&&n<p){var v=Br(f,h);return wa(e,t,_a,A.placeholder,r,f,v,u,c,p-n)}var m=g?r:this,x=y?m[e]:e;n=f.length;if(u){f=ao(f,u)}else if(w&&n>1){f.reverse()}if(_&&c<n){f.length=c}if(this&&this!==Wt&&this instanceof A){x=E||ha(x)}return x.apply(m,f)}return A}function va(e,t){return function(r,n){return ni(r,e,t(n),{})}}function ga(e){return xu(function(t){t=t.length==1&&Bu(t[0])?ar(t[0],wr(Oa())):ar(zn(t,1,qa),wr(Oa()));return xu(function(r){var n=this;return e(t,function(e){return $t(e,n,r)})})})}function ma(e,t){t=t===n?" ":t+"";var r=t.length;if(r<2){return r?Ri(t,e):t}var i=Ri(t,ft(e/Fr(t)));return St.test(t)?zi(Vr(i),0,e).join(""):i.slice(0,e)}function ya(e,t,r,n){var i=t&l,a=ha(e);function o(){var t=-1,s=arguments.length,u=-1,l=n.length,f=Array(l+s),c=this&&this!==Wt&&this instanceof o?a:e;while(++u<l){f[u]=n[u]}while(s--){f[u++]=arguments[++t]}return $t(c,i?r:this,f)}return o}function ba(e){return function(t,r,i){if(i&&typeof i!="number"&&Ka(t,r,i)){r=i=n}t=Tl(t);t=t===t?t:0;if(r===n){r=t;t=0}else{r=Tl(r)||0}i=i===n?t<r?1:-1:Tl(i)||0;return Ti(t,r,i,e)}}function wa(e,t,r,i,a,o,s,u,d,v){var g=t&h,m=g?s:n,y=g?n:s,b=g?o:n,w=g?n:o;t|=g?p:_;t&=~(g?_:p);if(!(t&c)){t&=~(l|f)}var E=[e,t,a,b,m,w,y,u,d,v];var A=r.apply(n,E);if(Ja(e)){oo(A,E)}A.placeholder=i;return A}function Ea(e){var t=Pe[e];return function(e,r){e=Tl(e);r=Al(r);if(r){var n=(Cl(e)+"e").split("e"),i=t(n[0]+"e"+(+n[1]+r));n=(Cl(i)+"e").split("e");return+(n[0]+"e"+(+n[1]-r))}return t(e)}}var Aa=!(Mt&&new Mt([1,2]).size===2)?dc:function(e){return new Mt(e)};function xa(e,t,r,i,a,s,u,c){var v=t&f;if(!v&&typeof e!="function"){throw new Ve(o)}var g=i?i.length:0;if(!g){t&=~(p|_);i=a=n}u=u===n?u:vt(Al(u),0);c=c===n?c:Al(c);g-=a?a.length:0;if(t&_){var m=i,y=a;i=a=n}var b=v?n:ka(e);var w=[e,t,r,i,a,m,y,s,u,c];if(b){ro(w,b)}e=w[0];t=w[1];r=w[2];i=w[3];a=w[4];c=w[9]=w[9]==null?v?0:e.length:vt(w[9]-g,0);if(!c&&t&(h|d)){t&=~(h|d)}if(!t||t==l){var E=la(e,t,r)}else if(t==h||t==d){E=da(e,t,c)}else if((t==p||t==(l|p))&&!a.length){E=ya(e,t,r,i)}else{E=_a.apply(n,w)}var A=b?Ci:oo;return A(E,w)}function Ta(e,t,r,i,a,o){var s=-1,u=a&b,l=a&y,f=e.length,c=t.length;if(f!=c&&!(u&&c>f)){return false}var h=o.get(e);if(h){return h==t}var d=true;o.set(e,t);while(++s<f){var p=e[s],_=t[s];if(i){var v=u?i(_,p,s,t,e,o):i(p,_,s,e,t,o)}if(v!==n){if(v){continue}d=false;break}if(l){if(!lr(t,function(e){return p===e||r(p,e,i,a,o)})){d=false;break}}else if(!(p===_||r(p,_,i,a,o))){d=false;break}}o["delete"](e);return d}function Ra(e,t,r,n,i,a,o){switch(r){case Q:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset){return false}e=e.buffer;t=t.buffer;case J:if(e.byteLength!=t.byteLength||!n(new tt(e),new tt(t))){return false}return true;case U:case B:return+e==+t;case D:return e.name==t.name&&e.message==t.message;case H:return e!=+e?t!=+t:e==+t;case Y:case q:return e==t+"";case X:var s=Ur;case W:var u=a&b;s||(s=Dr);if(e.size!=t.size&&!u){return false}var l=o.get(e);if(l){return l==t}a|=y;o.set(e,t);return Ta(s(e),s(t),n,i,a,o);case K:if(Wr){return Wr.call(e)==Wr.call(t)}}return false}function Sa(e,t,r,i,a,o){var s=a&b,u=Zl(e),l=u.length,f=Zl(t),c=f.length;if(l!=c&&!s){return false}var h=l;while(h--){var d=u[h];if(!(s?d in t:Qn(t,d))){return false}}var p=o.get(e);if(p){return p==t}var _=true;o.set(e,t);var v=s;while(++h<l){d=u[h];var g=e[d],m=t[d];if(i){var y=s?i(m,g,d,t,e,o):i(g,m,d,e,t,o)}if(!(y===n?g===m||r(g,m,i,a,o):y)){_=false;break}v||(v=d=="constructor")}if(_&&!v){var w=e.constructor,E=t.constructor;if(w!=E&&("constructor"in e&&"constructor"in t)&&!(typeof w=="function"&&w instanceof w&&typeof E=="function"&&E instanceof E)){_=false}}o["delete"](e);return _}function Ca(e){return Jn(e,Zl,Ba)}function ja(e){return Jn(e,Jl,Da)}var ka=!Ft?dc:function(e){return Ft.get(e)};function Ia(e){var t=e.name+"",r=Ht[t],n=Ye.call(Ht,t)?r.length:0;while(n--){var i=r[n],a=i.func;if(a==null||a==e){return i.name}}return t}function Oa(){var e=Kr.iteratee||oc;e=e===oc?ui:e;return arguments.length?e(arguments[0],arguments[1]):e}var La=bi("length");function Na(e){var t=cf(e),r=t.length;while(r--){t[r][2]=eo(t[r][1])}return t}function Ma(e,t){var r=e[t];return ol(r)?r:n}function Pa(e){var t=Ye.call(Kr,"placeholder")?Kr:e;return t.placeholder}function Ua(e){return ht(Object(e))}function Ba(e){return it(Object(e))}if(!it){Ba=function(){return[]}}var Da=!it?Ba:function(e){var t=[];while(e){or(t,Ba(e));e=Ua(e)}return t};function Fa(e){return Ke.call(e)}if(Tt&&Fa(new Tt(new ArrayBuffer(1)))!=Q||Lt&&Fa(new Lt)!=X||Nt&&Fa(Nt.resolve())!=z||Mt&&Fa(new Mt)!=W||Pt&&Fa(new Pt)!=$){Fa=function(e){var t=Ke.call(e),r=t==G?e.constructor:n,i=r?lo(r):n;if(i){switch(i){case Gt:return Q;case zt:return X;case Yt:return z;case Tr:return W;case zr:return $}}return t}}function Va(e,t,r){var n=-1,i=r.length;while(++n<i){var a=r[n],o=a.size;switch(a.type){case"drop":e+=o;break;case"dropRight":t-=o;break;case"take":t=gt(t,e+o);break;case"takeRight":e=vt(e,t-o);break}}return{start:e,end:t}}function Xa(e,t,r){t=$a(t,e)?[t]:Gi(t);var n,i=-1,a=t.length;while(++i<a){var o=t[i];if(!(n=e!=null&&r(e,o))){break}e=e[o]}if(n){return n}var a=e?e.length:0;return!!a&&Qu(a)&&Mr(o,a)&&(Bu(e)||pl(e)||Uu(e))}function Ha(e){var t=e.length,r=e.constructor(t);if(t&&typeof e[0]=="string"&&Ye.call(e,"index")){r.index=e.index;r.input=e.input}return r}function Ga(e){return typeof e.constructor=="function"&&!Qa(e)?Un(Ua(e)):{}}function za(e,t,r,n){var i=e.constructor;switch(t){case J:return Wi(e);case U:case B:return new i(+e);case Q:return qi(e,n);case ee:case te:case re:case ne:case ie:case ae:case oe:case se:case ue:return Qi(e,n);case X:return Ki(e,n,r);case H:case q:return new i(e);case Y:return $i(e);case W:return Zi(e,n,r);case K:return Ji(e)}}function Ya(e){var t=e?e.length:n;if(Qu(t)&&(Bu(e)||pl(e)||Uu(e))){return yr(t,String)}return null}function Wa(e){return Vu(e)&&(Bu(e)||Uu(e))}function qa(e){return Bu(e)&&!(e.length==2&&!Zu(e[0]))}function Ka(e,t,r){if(!el(r)){return false}var n=typeof t;if(n=="number"?Fu(r)&&Mr(t,r.length):n=="string"&&t in r){return Nu(r[t],e)}return false}function $a(e,t){var r=typeof e;if(r=="number"||r=="symbol"){return true}return!Bu(e)&&(_l(e)||be.test(e)||!ye.test(e)||t!=null&&e in Object(t))}function Za(e){var t=typeof e;return t=="number"||t=="boolean"||t=="string"&&e!="__proto__"||e==null}function Ja(e){var t=Ia(e),r=Kr[t];if(typeof r!="function"||!(t in Jr.prototype)){return false}if(e===r){return true}var n=ka(r);return!!n&&e===n[0]}function Qa(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||He;return e===r}function eo(e){return e===e&&!el(e)}function to(e,t){return function(r){if(r==null){return false}return r[e]===t&&(t!==n||e in Object(r))}}function ro(e,t){var r=e[1],n=t[1],i=r|n,a=i<(l|f|v);var o=n==v&&r==h||n==v&&r==g&&e[7].length<=t[8]||n==(v|g)&&t[7].length<=t[8]&&r==h;if(!(a||o)){return e}if(n&l){e[2]=t[2];i|=r&l?0:c}var s=t[3];if(s){var d=e[3];e[3]=d?ea(d,s,t[4]):s;e[4]=d?Br(e[3],u):t[4]}s=t[5];if(s){d=e[5];e[5]=d?ta(d,s,t[6]):s;e[6]=d?Br(e[5],u):t[6]}s=t[7];if(s){e[7]=s}if(n&v){e[8]=e[8]==null?t[8]:gt(e[8],t[8])}if(e[9]==null){e[9]=t[9]}e[0]=t[0];e[1]=i;return e}function no(e,t,r,i,a,o){if(el(e)&&el(t)){pi(e,t,n,no,o.set(t,e))}return e}function io(e,t){return t.length==1?e:Zn(e,ji(t,0,-1))}function ao(e,t){var r=e.length,i=gt(t.length,r),a=ra(e);while(i--){var o=t[i];e[i]=Mr(o,r)?a[o]:n}return e}var oo=function(){var e=0,t=0;return function(r,n){var i=au(),a=x-(i-t);t=i;if(a>0){if(++e>=A){return r}}else{e=0}return Ci(r,n)}}();var so=gu(function(e){var t=[];Cl(e).replace(we,function(e,r,n,i){t.push(n?i.replace(Ce,"$1"):r||e)});return t});function uo(e){return typeof e=="string"||_l(e)?e:e+""}function lo(e){if(e!=null){try{return ze.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function fo(e){if(e instanceof Jr){return e.clone()}var t=new Zr(e.__wrapped__,e.__chain__);t.__actions__=ra(e.__actions__);t.__index__=e.__index__;t.__values__=e.__values__;return t}function co(e,t,r){if(r?Ka(e,t,r):t===n){t=1}else{t=vt(Al(t),0)}var i=e?e.length:0;if(!i||t<1){return[]}var a=0,o=0,s=Array(ft(i/t));while(a<i){s[o++]=ji(e,a,a+=t)}return s}function ho(e){var t=-1,r=e?e.length:0,n=0,i=[];while(++t<r){var a=e[t];if(a){i[n++]=a}}return i}function po(){var e=arguments.length,t=ju(arguments[0]);if(e<2){return e?ra(t):[]}var r=Array(e-1);while(e--){r[e-1]=arguments[e]}return Jt(t,zn(r,1))}var _o=xu(function(e,t){return Vu(e)?Dn(e,zn(t,1,Vu,true)):[]});var vo=xu(function(e,t){var r=Po(t);if(Vu(r)){r=n}return Vu(e)?Dn(e,zn(t,1,Vu,true),Oa(r)):[]});var go=xu(function(e,t){var r=Po(t);if(Vu(r)){r=n}return Vu(e)?Dn(e,zn(t,1,Vu,true),n,r):[]});function mo(e,t,r){var i=e?e.length:0;if(!i){return[]}t=r||t===n?1:Al(t);return ji(e,t<0?0:t,i)}function yo(e,t,r){var i=e?e.length:0;if(!i){return[]}t=r||t===n?1:Al(t);t=i-t;return ji(e,0,t<0?0:t)}function bo(e,t){return e&&e.length?Bi(e,Oa(t,3),true,true):[]}function wo(e,t){return e&&e.length?Bi(e,Oa(t,3),true):[]}function Eo(e,t,r,n){var i=e?e.length:0;if(!i){return[]}if(r&&typeof r!="number"&&Ka(e,t,r)){r=0;n=i}return Hn(e,t,r,n)}function Ao(e,t){return e&&e.length?hr(e,Oa(t,3)):-1}function xo(e,t){return e&&e.length?hr(e,Oa(t,3),true):-1}function To(e){var t=e?e.length:0;return t?zn(e,1):[]}function Ro(e){var t=e?e.length:0;return t?zn(e,C):[]}function So(e,t){var r=e?e.length:0;if(!r){return[]}t=t===n?1:Al(t);return zn(e,t)}function Co(e){var t=-1,r=e?e.length:0,n={};while(++t<r){var i=e[t];n[i[0]]=i[1]}return n}function jo(e){return e&&e.length?e[0]:n}function ko(e,t,r){var n=e?e.length:0;if(!n){return-1}r=Al(r);if(r<0){r=vt(n+r,0)}return dr(e,t,r)}function Io(e){return yo(e,1)}var Oo=xu(function(e){var t=ar(e,Xi);return t.length&&t[0]===e[0]?ri(t):[]});var Lo=xu(function(e){var t=Po(e),r=ar(e,Xi);if(t===Po(r)){t=n}else{r.pop()}return r.length&&r[0]===e[0]?ri(r,Oa(t)):[]});var No=xu(function(e){var t=Po(e),r=ar(e,Xi);if(t===Po(r)){t=n}else{r.pop()}return r.length&&r[0]===e[0]?ri(r,n,t):[]});function Mo(e,t){return e?pt.call(e,t):""}function Po(e){var t=e?e.length:0;return t?e[t-1]:n}function Uo(e,t,r){var i=e?e.length:0;if(!i){return-1}var a=i;if(r!==n){a=Al(r);a=(a<0?vt(i+a,0):gt(a,i-1))+1}if(t!==t){return Lr(e,a,true)}while(a--){if(e[a]===t){return a}}return-1}function Bo(e,t){return e&&e.length?vi(e,Al(t)):n}var Do=xu(Fo);function Fo(e,t){return e&&e.length&&t&&t.length?Ei(e,t):e}function Vo(e,t,r){return e&&e.length&&t&&t.length?Ei(e,t,Oa(r)):e}function Xo(e,t,r){return e&&e.length&&t&&t.length?Ei(e,t,n,r):e}var Ho=xu(function(e,t){t=ar(zn(t,1),String);var r=Ln(e,t);Ai(e,t.sort(Rr));return r});function Go(e,t){var r=[];if(!(e&&e.length)){return r}var n=-1,i=[],a=e.length;t=Oa(t,3);while(++n<a){var o=e[n];if(t(o,n,e)){r.push(o);i.push(n)}}Ai(e,i);return r}function zo(e){return e?wt.call(e):e}function Yo(e,t,r){var i=e?e.length:0;if(!i){return[]}if(r&&typeof r!="number"&&Ka(e,t,r)){t=0;r=i}else{t=t==null?0:Al(t);r=r===n?i:Al(r)}return ji(e,t,r)}function Wo(e,t){return Ii(e,t)}function qo(e,t,r){return Oi(e,t,Oa(r))}function Ko(e,t){var r=e?e.length:0;if(r){var n=Ii(e,t);if(n<r&&Nu(e[n],t)){return n}}return-1}function $o(e,t){return Ii(e,t,true)}function Zo(e,t,r){return Oi(e,t,Oa(r),true)}function Jo(e,t){var r=e?e.length:0;if(r){var n=Ii(e,t,true)-1;if(Nu(e[n],t)){return n}}return-1}function Qo(e){return e&&e.length?Li(e):[]}function es(e,t){return e&&e.length?Ni(e,Oa(t)):[]}function ts(e){return mo(e,1)}function rs(e,t,r){if(!(e&&e.length)){return[]}t=r||t===n?1:Al(t);return ji(e,0,t<0?0:t)}function ns(e,t,r){var i=e?e.length:0;if(!i){return[]}t=r||t===n?1:Al(t);t=i-t;return ji(e,t<0?0:t,i)}function is(e,t){return e&&e.length?Bi(e,Oa(t,3),false,true):[]}function as(e,t){return e&&e.length?Bi(e,Oa(t,3)):[]}var os=xu(function(e){return Mi(zn(e,1,Vu,true))});var ss=xu(function(e){var t=Po(e);if(Vu(t)){t=n}return Mi(zn(e,1,Vu,true),Oa(t))});var us=xu(function(e){var t=Po(e);if(Vu(t)){t=n}return Mi(zn(e,1,Vu,true),n,t)});function ls(e){return e&&e.length?Mi(e):[]}function fs(e,t){return e&&e.length?Mi(e,Oa(t)):[]}function cs(e,t){return e&&e.length?Mi(e,n,t):[]}function hs(e){if(!(e&&e.length)){return[]}var t=0;e=rr(e,function(e){if(Vu(e)){t=vt(e.length,t);return true}});return yr(t,function(t){return ar(e,bi(t))})}function ds(e,t){if(!(e&&e.length)){return[]}var r=hs(e);if(t==null){return r}return ar(r,function(e){return $t(t,n,e)})}var ps=xu(function(e,t){return Vu(e)?Dn(e,t):[]});var _s=xu(function(e){return Fi(rr(e,Vu))});var vs=xu(function(e){var t=Po(e);if(Vu(t)){t=n}return Fi(rr(e,Vu),Oa(t))});var gs=xu(function(e){var t=Po(e);if(Vu(t)){t=n}return Fi(rr(e,Vu),n,t)});var ms=xu(hs);function ys(e,t){return Vi(e||[],t||[],kn)}function bs(e,t){return Vi(e||[],t||[],Si)}var ws=xu(function(e){var t=e.length,r=t>1?e[t-1]:n;r=typeof r=="function"?(e.pop(),r):n;return ds(e,r)});function Es(e){var t=Kr(e);t.__chain__=true;return t}function As(e,t){t(e);return e}function xs(e,t){return t(e)}var Ts=xu(function(e){e=zn(e,1);var t=e.length,r=t?e[0]:0,i=this.__wrapped__,a=function(t){return Ln(t,e)};if(t>1||this.__actions__.length||!(i instanceof Jr)||!Mr(r)){return this.thru(a)}i=i.slice(r,+r+(t?1:0));i.__actions__.push({func:xs,args:[a],thisArg:n});return new Zr(i,this.__chain__).thru(function(e){if(t&&!e.length){e.push(n)}return e})});function Rs(){return Es(this)}function Ss(){return new Zr(this.value(),this.__chain__)}function Cs(){if(this.__values__===n){this.__values__=El(this.value())}var e=this.__index__>=this.__values__.length,t=e?n:this.__values__[this.__index__++];return{done:e,value:t}}function js(){return this}function ks(e){var t,r=this;while(r instanceof $r){var i=fo(r);i.__index__=0;i.__values__=n;if(t){a.__wrapped__=i}else{t=i}var a=i;r=r.__wrapped__}a.__wrapped__=e;return t}function Is(){var e=this.__wrapped__;if(e instanceof Jr){var t=e;if(this.__actions__.length){t=new Jr(this)}t=t.reverse();t.__actions__.push({func:xs,args:[zo],thisArg:n});return new Zr(t,this.__chain__)}return this.thru(zo)}function Os(){return Di(this.__wrapped__,this.__actions__)}var Ls=aa(function(e,t,r){Ye.call(e,r)?++e[r]:e[r]=1});function Ns(e,t,r){var i=Bu(e)?tr:Xn;if(r&&Ka(e,t,r)){t=n}return i(e,Oa(t,3))}function Ms(e,t){var r=Bu(e)?rr:Gn;return r(e,Oa(t,3))}function Ps(e,t){t=Oa(t,3);if(Bu(e)){var r=hr(e,t);return r>-1?e[r]:n}return cr(e,t,Fn)}function Us(e,t){t=Oa(t,3);if(Bu(e)){var r=hr(e,t,true);return r>-1?e[r]:n}return cr(e,t,Vn)}function Bs(e,t){return zn(Ws(e,t),1)}function Ds(e,t){return zn(Ws(e,t),C)}function Fs(e,t,r){r=r===n?1:Al(r);return zn(Ws(e,t),r)}function Vs(e,t){return typeof t=="function"&&Bu(e)?Qt(e,t):Fn(e,Oa(t))}function Xs(e,t){return typeof t=="function"&&Bu(e)?er(e,t):Vn(e,Oa(t))}var Hs=aa(function(e,t,r){if(Ye.call(e,r)){e[r].push(t)}else{e[r]=[t]}});function Gs(e,t,r,n){e=Fu(e)?e:gf(e);r=r&&!n?Al(r):0;var i=e.length;if(r<0){r=vt(i+r,0)}return pl(e)?r<=i&&e.indexOf(t,r)>-1:!!i&&dr(e,t,r)>-1}var zs=xu(function(e,t,r){var i=-1,a=typeof t=="function",o=$a(t),s=Fu(e)?Array(e.length):[];Fn(e,function(e){var u=a?t:o&&e!=null?e[t]:n;s[++i]=u?$t(u,e,r):ii(e,t,r)});return s});var Ys=aa(function(e,t,r){e[r]=t});function Ws(e,t){var r=Bu(e)?ar:ci;return r(e,Oa(t,3))}function qs(e,t,r,i){if(e==null){return[]}if(!Bu(t)){t=t==null?[]:[t]}r=i?n:r;if(!Bu(r)){r=r==null?[]:[r]}return gi(e,t,r)}var Ks=aa(function(e,t,r){e[r?0:1].push(t)},function(){return[[],[]]});function $s(e,t,r){var n=Bu(e)?sr:vr,i=arguments.length<3;return n(e,Oa(t,4),r,i,Fn)}function Zs(e,t,r){var n=Bu(e)?ur:vr,i=arguments.length<3;return n(e,Oa(t,4),r,i,Vn)}function Js(e,t){var r=Bu(e)?rr:Gn;t=Oa(t,3);return r(e,function(e,r,n){return!t(e,r,n)})}function Qs(e){var t=Fu(e)?e:gf(e),r=t.length;return r>0?t[xi(0,r-1)]:n}function eu(e,t,r){var i=-1,a=El(e),o=a.length,s=o-1;if(r?Ka(e,t,r):t===n){t=1}else{t=Nn(Al(t),0,o)}while(++i<t){var u=xi(i,s),l=a[u];a[u]=a[i];a[i]=l}a.length=t;return a}function tu(e){return eu(e,O)}function ru(e){if(e==null){return 0}if(Fu(e)){var t=e.length;return t&&pl(e)?Fr(e):t}if(tl(e)){var r=Fa(e);if(r==X||r==W){return e.size}}return Zl(e).length}function nu(e,t,r){var i=Bu(e)?lr:ki;if(r&&Ka(e,t,r)){t=n}return i(e,Oa(t,3))}var iu=xu(function(e,t){if(e==null){return[]}var r=t.length;if(r>1&&Ka(e,t[0],t[1])){t=[]}else if(r>2&&Ka(t[0],t[1],t[2])){t=[t[0]]}t=t.length==1&&Bu(t[0])?t[0]:zn(t,1,qa);return gi(e,t,[])});var au=t.now;function ou(e,t){if(typeof t!="function"){throw new Ve(o)}e=Al(e);return function(){if(--e<1){return t.apply(this,arguments)}}}function su(e,t,r){t=r?n:t;t=e&&t==null?e.length:t;return xa(e,v,n,n,n,n,t)}function uu(e,t){var r;if(typeof t!="function"){throw new Ve(o)}e=Al(e);return function(){if(--e>0){r=t.apply(this,arguments)}if(e<=1){t=n}return r}}var lu=xu(function(e,t,r){var n=l;if(r.length){var i=Br(r,Pa(lu));n|=p}return xa(e,n,t,r,i)});var fu=xu(function(e,t,r){var n=l|f;if(r.length){var i=Br(r,Pa(fu));n|=p}return xa(t,n,e,r,i)});function cu(e,t,r){t=r?n:t;var i=xa(e,h,n,n,n,n,n,t);i.placeholder=cu.placeholder;return i}function hu(e,t,r){t=r?n:t;var i=xa(e,d,n,n,n,n,n,t);i.placeholder=hu.placeholder;return i}function du(e,t,r){var i,a,s,u,l,f=0,c=0,h=false,d=false,p=true;if(typeof e!="function"){throw new Ve(o)}t=Tl(t)||0;if(el(r)){h=!!r.leading;d="maxWait"in r;s=d?vt(Tl(r.maxWait)||0,t):s;p="trailing"in r?!!r.trailing:p}function _(t){var r=i,o=a;i=a=n;c=t;u=e.apply(o,r);return u}function v(e){c=e;l=ut(y,t);return h?_(e):u}function g(e){var r=e-f,n=e-c,i=t-r;return d?gt(i,s-n):i}function m(e){var r=e-f,n=e-c;return!f||r>=t||r<0||d&&n>=s}function y(){var e=au();if(m(e)){return b(e)}l=ut(y,g(e))}function b(e){rt(l);l=n;if(p&&i){return _(e)}i=a=n;return u}function w(){if(l!==n){rt(l)}f=c=0;i=a=l=n}function E(){return l===n?u:b(au())}function A(){var e=au(),r=m(e);i=arguments;a=this;f=e;if(r){if(l===n){return v(f)}if(d){rt(l);l=ut(y,t);return _(f)}}if(l===n){l=ut(y,t)}return u}A.cancel=w;A.flush=E;return A}var pu=xu(function(e,t){return Bn(e,1,t)});var _u=xu(function(e,t,r){return Bn(e,Tl(t)||0,r)});function vu(e){return xa(e,m)}function gu(e,t){if(typeof e!="function"||t&&typeof t!="function"){throw new Ve(o)}var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],a=r.cache;if(a.has(i)){return a.get(i)}var o=e.apply(this,n);r.cache=a.set(i,o);return o};r.cache=new(gu.Cache||un);return r}gu.Cache=un;function mu(e){if(typeof e!="function"){throw new Ve(o)}return function(){return!e.apply(this,arguments)}}function yu(e){return uu(2,e)}var bu=xu(function(e,t){t=t.length==1&&Bu(t[0])?ar(t[0],wr(Oa())):ar(zn(t,1,qa),wr(Oa()));var r=t.length;return xu(function(n){var i=-1,a=gt(n.length,r);while(++i<a){n[i]=t[i].call(this,n[i])}return $t(e,this,n)})});var wu=xu(function(e,t){var r=Br(t,Pa(wu));return xa(e,p,n,t,r)});var Eu=xu(function(e,t){var r=Br(t,Pa(Eu));return xa(e,_,n,t,r)});var Au=xu(function(e,t){return xa(e,g,n,n,n,zn(t,1))});function xu(e,t){if(typeof e!="function"){throw new Ve(o)}t=vt(t===n?e.length-1:Al(t),0);return function(){var r=arguments,n=-1,i=vt(r.length-t,0),a=Array(i);while(++n<i){a[n]=r[t+n]}switch(t){case 0:return e.call(this,a);case 1:return e.call(this,r[0],a);case 2:return e.call(this,r[0],r[1],a)}var o=Array(t+1);n=-1;while(++n<t){o[n]=r[n]}o[t]=a;return $t(e,this,o)}}function Tu(e,t){if(typeof e!="function"){throw new Ve(o)}t=t===n?0:vt(Al(t),0);return xu(function(r){var n=r[t],i=zi(r,0,t);if(n){or(i,n)}return $t(e,this,i)})}function Ru(e,t,r){var n=true,i=true;if(typeof e!="function"){throw new Ve(o)}if(el(r)){n="leading"in r?!!r.leading:n;i="trailing"in r?!!r.trailing:i}return du(e,t,{leading:n,maxWait:t,trailing:i})}function Su(e){return su(e,1)}function Cu(e,t){t=t==null?ac:t;return wu(t,e)}function ju(){if(!arguments.length){return[]}var e=arguments[0];return Bu(e)?e:[e]}function ku(e){return Mn(e,false,true)}function Iu(e,t){return Mn(e,false,true,t)}function Ou(e){return Mn(e,true,true)}function Lu(e,t){return Mn(e,true,true,t)}function Nu(e,t){return e===t||e!==e&&t!==t}function Mu(e,t){return e>t}function Pu(e,t){return e>=t}function Uu(e){return Vu(e)&&Ye.call(e,"callee")&&(!st.call(e,"callee")||Ke.call(e)==M)}var Bu=Array.isArray;function Du(e){return tl(e)&&Ke.call(e)==J}function Fu(e){return e!=null&&Qu(La(e))&&!Zu(e)}function Vu(e){return tl(e)&&Fu(e)}function Xu(e){return e===true||e===false||tl(e)&&Ke.call(e)==U}var Hu=!Je?rc(false):function(e){return e instanceof Je};function Gu(e){return tl(e)&&Ke.call(e)==B}function zu(e){return!!e&&e.nodeType===1&&tl(e)&&!fl(e)}function Yu(e){if(Fu(e)&&(Bu(e)||pl(e)||Zu(e.splice)||Uu(e)||Hu(e))){return!e.length}if(tl(e)){var t=Fa(e);if(t==X||t==W){return!e.size}}for(var r in e){if(Ye.call(e,r)){return false}}return!(Vt&&Zl(e).length)}function Wu(e,t){return ai(e,t)}function qu(e,t,r){r=typeof r=="function"?r:n;var i=r?r(e,t):n;return i===n?ai(e,t,r):!!i}function Ku(e){if(!tl(e)){return false}return Ke.call(e)==D||typeof e.message=="string"&&typeof e.name=="string"}function $u(e){return typeof e=="number"&&dt(e)}function Zu(e){var t=el(e)?Ke.call(e):"";return t==F||t==V}function Ju(e){return typeof e=="number"&&e==Al(e)}function Qu(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=j}function el(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function tl(e){return!!e&&typeof e=="object"}function rl(e){return tl(e)&&Fa(e)==X}function nl(e,t){return e===t||si(e,t,Na(t))}function il(e,t,r){r=typeof r=="function"?r:n;return si(e,t,Na(t),r)}function al(e){return ll(e)&&e!=+e}function ol(e){if(!el(e)){return false}var t=Zu(e)||Nr(e)?Ze:Ne;return t.test(lo(e))}function sl(e){return e===null}function ul(e){return e==null}function ll(e){return typeof e=="number"||tl(e)&&Ke.call(e)==H}function fl(e){if(!tl(e)||Ke.call(e)!=G||Nr(e)){return false}var t=Ua(e);if(t===null){return true}var r=Ye.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&ze.call(r)==qe}function cl(e){return el(e)&&Ke.call(e)==Y}function hl(e){return Ju(e)&&e>=-j&&e<=j}function dl(e){return tl(e)&&Fa(e)==W}function pl(e){return typeof e=="string"||!Bu(e)&&tl(e)&&Ke.call(e)==q}function _l(e){return typeof e=="symbol"||tl(e)&&Ke.call(e)==K}function vl(e){return tl(e)&&Qu(e.length)&&!!It[Ke.call(e)]}function gl(e){return e===n}function ml(e){return tl(e)&&Fa(e)==$}function yl(e){return tl(e)&&Ke.call(e)==Z}function bl(e,t){return e<t}function wl(e,t){return e<=t}function El(e){if(!e){return[]}if(Fu(e)){return pl(e)?Vr(e):ra(e)}if(at&&e[at]){return Pr(e[at]())}var t=Fa(e),r=t==X?Ur:t==W?Dr:gf;return r(e)}function Al(e){if(!e){return e===0?e:0}e=Tl(e);if(e===C||e===-C){var t=e<0?-1:1;return t*k}var r=e%1;return e===e?r?e-r:e:0}function xl(e){return e?Nn(Al(e),0,O):0}function Tl(e){if(typeof e=="number"){return e}if(_l(e)){return I}if(el(e)){var t=Zu(e.valueOf)?e.valueOf():e;e=el(t)?t+"":t}if(typeof e!="string"){return e===0?e:+e}e=e.replace(xe,"");var r=Le.test(e);return r||Me.test(e)?Dt(e.slice(2),r?2:8):Oe.test(e)?I:+e}function Rl(e){return na(e,Jl(e))}function Sl(e){return Nn(Al(e),-j,j)}function Cl(e){if(typeof e=="string"){return e}if(e==null){return""}if(_l(e)){return qr?qr.call(e):""}var t=e+"";return t=="0"&&1/e==-C?"-0":t}var jl=oa(function(e,t){if(Vt||Qa(t)||Fu(t)){na(t,Zl(t),e);return}for(var r in t){if(Ye.call(t,r)){kn(e,r,t[r])}}});var kl=oa(function(e,t){if(Vt||Qa(t)||Fu(t)){na(t,Jl(t),e);return}for(var r in t){kn(e,r,t[r])}});var Il=oa(function(e,t,r,n){na(t,Jl(t),e,n)});var Ol=oa(function(e,t,r,n){na(t,Zl(t),e,n)});var Ll=xu(function(e,t){return Ln(e,zn(t,1))});function Nl(e,t){var r=Un(e);return t?On(r,t):r}var Ml=xu(function(e){e.push(n,Cn);return $t(Il,n,e)});var Pl=xu(function(e){e.push(n,no);return $t(rf,n,e)});function Ul(e,t){
return cr(e,Oa(t,3),qn,true)}function Bl(e,t){return cr(e,Oa(t,3),Kn,true)}function Dl(e,t){return e==null?e:Yn(e,Oa(t),Jl)}function Fl(e,t){return e==null?e:Wn(e,Oa(t),Jl)}function Vl(e,t){return e&&qn(e,Oa(t))}function Xl(e,t){return e&&Kn(e,Oa(t))}function Hl(e){return e==null?[]:$n(e,Zl(e))}function Gl(e){return e==null?[]:$n(e,Jl(e))}function zl(e,t,r){var i=e==null?n:Zn(e,t);return i===n?r:i}function Yl(e,t){return e!=null&&Xa(e,t,Qn)}function Wl(e,t){return e!=null&&Xa(e,t,ei)}var ql=va(function(e,t,r){e[t]=r},rc(ac));var Kl=va(function(e,t,r){if(Ye.call(e,t)){e[t].push(r)}else{e[t]=[r]}},Oa);var $l=xu(ii);function Zl(e){var t=Qa(e);if(!(t||Fu(e))){return li(e)}var r=Ya(e),n=!!r,i=r||[],a=i.length;for(var o in e){if(Qn(e,o)&&!(n&&(o=="length"||Mr(o,a)))&&!(t&&o=="constructor")){i.push(o)}}return i}function Jl(e){var t=-1,r=Qa(e),n=fi(e),i=n.length,a=Ya(e),o=!!a,s=a||[],u=s.length;while(++t<i){var l=n[t];if(!(o&&(l=="length"||Mr(l,u)))&&!(l=="constructor"&&(r||!Ye.call(e,l)))){s.push(l)}}return s}function Ql(e,t){var r={};t=Oa(t,3);qn(e,function(e,n,i){r[t(e,n,i)]=e});return r}function ef(e,t){var r={};t=Oa(t,3);qn(e,function(e,n,i){r[n]=t(e,n,i)});return r}var tf=oa(function(e,t,r){pi(e,t,r)});var rf=oa(function(e,t,r,n){pi(e,t,r,n)});var nf=xu(function(e,t){if(e==null){return{}}t=ar(zn(t,1),uo);return mi(e,Dn(ja(e),t))});function af(e,t){t=Oa(t);return yi(e,function(e,r){return!t(e,r)})}var of=xu(function(e,t){return e==null?{}:mi(e,zn(t,1))});function sf(e,t){return e==null?{}:yi(e,Oa(t))}function uf(e,t,r){t=$a(t,e)?[t]:Gi(t);var i=-1,a=t.length;if(!a){e=n;a=1}while(++i<a){var o=e==null?n:e[t[i]];if(o===n){i=a;o=r}e=Zu(o)?o.call(e):o}return e}function lf(e,t,r){return e==null?e:Si(e,t,r)}function ff(e,t,r,i){i=typeof i=="function"?i:n;return e==null?e:Si(e,t,r,i)}function cf(e){return br(e,Zl(e))}function hf(e){return br(e,Jl(e))}function df(e,t,r){var n=Bu(e)||vl(e);t=Oa(t,4);if(r==null){if(n||el(e)){var i=e.constructor;if(n){r=Bu(e)?new i:[]}else{r=Zu(i)?Un(Ua(e)):{}}}else{r={}}}(n?Qt:qn)(e,function(e,n,i){return t(r,e,n,i)});return r}function pf(e,t){return e==null?true:Pi(e,t)}function _f(e,t,r){return e==null?e:Ui(e,t,Hi(r))}function vf(e,t,r,i){i=typeof i=="function"?i:n;return e==null?e:Ui(e,t,Hi(r),i)}function gf(e){return e?Er(e,Zl(e)):[]}function mf(e){return e==null?[]:Er(e,Jl(e))}function yf(e,t,r){if(r===n){r=t;t=n}if(r!==n){r=Tl(r);r=r===r?r:0}if(t!==n){t=Tl(t);t=t===t?t:0}return Nn(Tl(e),t,r)}function bf(e,t,r){t=Tl(t)||0;if(r===n){r=t;t=0}else{r=Tl(r)||0}e=Tl(e);return ti(e,t,r)}function wf(e,t,r){if(r&&typeof r!="boolean"&&Ka(e,t,r)){t=r=n}if(r===n){if(typeof t=="boolean"){r=t;t=n}else if(typeof e=="boolean"){r=e;e=n}}if(e===n&&t===n){e=0;t=1}else{e=Tl(e)||0;if(t===n){t=e;e=0}else{t=Tl(t)||0}}if(e>t){var i=e;e=t;t=i}if(r||e%1||t%1){var a=yt();return gt(e+a*(t-e+Bt("1e-"+((a+"").length-1))),t)}return xi(e,t)}var Ef=ca(function(e,t,r){t=t.toLowerCase();return e+(r?Af(t):t)});function Af(e){return $f(Cl(e).toLowerCase())}function xf(e){e=Cl(e);return e&&e.replace(Ue,kr).replace(xt,"")}function Tf(e,t,r){e=Cl(e);t=typeof t=="string"?t:t+"";var i=e.length;r=r===n?i:Nn(Al(r),0,i);r-=t.length;return r>=0&&e.indexOf(t,r)==r}function Rf(e){e=Cl(e);return e&&_e.test(e)?e.replace(de,Ir):e}function Sf(e){e=Cl(e);return e&&Ae.test(e)?e.replace(Ee,"\\$&"):e}var Cf=ca(function(e,t,r){return e+(r?"-":"")+t.toLowerCase()});var jf=ca(function(e,t,r){return e+(r?" ":"")+t.toLowerCase()});var kf=fa("toLowerCase");function If(e,t,r){e=Cl(e);t=Al(t);var n=t?Fr(e):0;if(!t||n>=t){return e}var i=(t-n)/2;return ma(ct(i),r)+e+ma(ft(i),r)}function Of(e,t,r){e=Cl(e);t=Al(t);var n=t?Fr(e):0;return t&&n<t?e+ma(t-n,r):e}function Lf(e,t,r){e=Cl(e);t=Al(t);var n=t?Fr(e):0;return t&&n<t?ma(t-n,r)+e:e}function Nf(e,t,r){if(r||t==null){t=0}else if(t){t=+t}e=Cl(e).replace(xe,"");return mt(e,t||(Ie.test(e)?16:10))}function Mf(e,t,r){if(r?Ka(e,t,r):t===n){t=1}else{t=Al(t)}return Ri(Cl(e),t)}function Pf(){var e=arguments,t=Cl(e[0]);return e.length<3?t:bt.call(t,e[1],e[2])}var Uf=ca(function(e,t,r){return e+(r?"_":"")+t.toLowerCase()});function Bf(e,t,r){if(r&&typeof r!="number"&&Ka(e,t,r)){t=r=n}r=r===n?O:r>>>0;if(!r){return[]}e=Cl(e);if(e&&(typeof t=="string"||t!=null&&!cl(t))){t+="";if(t==""&&St.test(e)){return zi(Vr(e),0,r)}}return Et.call(e,t,r)}var Df=ca(function(e,t,r){return e+(r?" ":"")+$f(t)});function Ff(e,t,r){e=Cl(e);r=Nn(Al(r),0,e.length);return e.lastIndexOf(t,r)==r}function Vf(e,t,r){var i=Kr.templateSettings;if(r&&Ka(e,t,r)){t=n}e=Cl(e);t=Il({},t,i,Cn);var a=Il({},t.imports,i.imports,Cn),o=Zl(a),s=Er(a,o);var u,l,f=0,c=t.interpolate||Be,h="__p += '";var d=Fe((t.escape||Be).source+"|"+c.source+"|"+(c===me?je:Be).source+"|"+(t.evaluate||Be).source+"|$","g");var p="//# sourceURL="+("sourceURL"in t?t.sourceURL:"lodash.templateSources["+ ++kt+"]")+"\n";e.replace(d,function(t,r,n,i,a,o){n||(n=i);h+=e.slice(f,o).replace(De,Or);if(r){u=true;h+="' +\n__e("+r+") +\n'"}if(a){l=true;h+="';\n"+a+";\n__p += '"}if(n){h+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"}f=o+t.length;return t});h+="';\n";var _=t.variable;if(!_){h="with (obj) {\n"+h+"\n}\n"}h=(l?h.replace(le,""):h).replace(fe,"$1").replace(ce,"$1;");h="function("+(_||"obj")+") {\n"+(_?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(u?", __e = _.escape":"")+(l?", __j = Array.prototype.join;\n"+"function print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var v=Jf(function(){return Function(o,p+"return "+h).apply(n,s)});v.source=h;if(Ku(v)){throw v}return v}function Xf(e){return Cl(e).toLowerCase()}function Hf(e){return Cl(e).toUpperCase()}function Gf(e,t,r){e=Cl(e);if(!e){return e}if(r||t===n){return e.replace(xe,"")}if(!(t+="")){return e}var i=Vr(e),a=Vr(t),o=Ar(i,a),s=xr(i,a)+1;return zi(i,o,s).join("")}function zf(e,t,r){e=Cl(e);if(!e){return e}if(r||t===n){return e.replace(Re,"")}if(!(t+="")){return e}var i=Vr(e),a=xr(i,Vr(t))+1;return zi(i,0,a).join("")}function Yf(e,t,r){e=Cl(e);if(!e){return e}if(r||t===n){return e.replace(Te,"")}if(!(t+="")){return e}var i=Vr(e),a=Ar(i,Vr(t));return zi(i,a).join("")}function Wf(e,t){var r=w,i=E;if(el(t)){var a="separator"in t?t.separator:a;r="length"in t?Al(t.length):r;i="omission"in t?Cl(t.omission):i}e=Cl(e);var o=e.length;if(St.test(e)){var s=Vr(e);o=s.length}if(r>=o){return e}var u=r-Fr(i);if(u<1){return i}var l=s?zi(s,0,u).join(""):e.slice(0,u);if(a===n){return l+i}if(s){u+=l.length-u}if(cl(a)){if(e.slice(u).search(a)){var f,c=l;if(!a.global){a=Fe(a.source,Cl(ke.exec(a))+"g")}a.lastIndex=0;while(f=a.exec(c)){var h=f.index}l=l.slice(0,h===n?u:h)}}else if(e.indexOf(a,u)!=u){var d=l.lastIndexOf(a);if(d>-1){l=l.slice(0,d)}}return l+i}function qf(e){e=Cl(e);return e&&pe.test(e)?e.replace(he,Xr):e}var Kf=ca(function(e,t,r){return e+(r?" ":"")+t.toUpperCase()});var $f=fa("toUpperCase");function Zf(e,t,r){e=Cl(e);t=r?n:t;if(t===n){t=Ct.test(e)?Rt:Se}return e.match(t)||[]}var Jf=xu(function(e,t){try{return $t(e,n,t)}catch(i){return Ku(i)?i:new r(i)}});var Qf=xu(function(e,t){Qt(zn(t,1),function(t){e[t]=lu(e[t],e)});return e});function ec(e){var t=e?e.length:0,r=Oa();e=!t?[]:ar(e,function(e){if(typeof e[1]!="function"){throw new Ve(o)}return[r(e[0]),e[1]]});return xu(function(r){var n=-1;while(++n<t){var i=e[n];if($t(i[0],this,r)){return $t(i[1],this,r)}}})}function tc(e){return Pn(Mn(e,true))}function rc(e){return function(){return e}}var nc=pa();var ic=pa(true);function ac(e){return e}function oc(e){return ui(typeof e=="function"?e:Mn(e,true))}function sc(e){return hi(Mn(e,true))}function uc(e,t){return di(e,Mn(t,true))}var lc=xu(function(e,t){return function(r){return ii(r,e,t)}});var fc=xu(function(e,t){return function(r){return ii(e,r,t)}});function cc(e,t,r){var n=Zl(t),i=$n(t,n);if(r==null&&!(el(t)&&(i.length||!n.length))){r=t;t=e;e=this;i=$n(t,Zl(t))}var a=!(el(r)&&"chain"in r)||!!r.chain,o=Zu(e);Qt(i,function(r){var n=t[r];e[r]=n;if(o){e.prototype[r]=function(){var t=this.__chain__;if(a||t){var r=e(this.__wrapped__),i=r.__actions__=ra(this.__actions__);i.push({func:n,args:arguments,thisArg:e});r.__chain__=t;return r}return n.apply(e,or([this.value()],arguments))}}});return e}function hc(){if(Wt._===this){Wt._=$e}return this}function dc(){}function pc(e){e=Al(e);return xu(function(t){return vi(t,e)})}var _c=ga(ar);var vc=ga(tr);var gc=ga(lr);function mc(e){return $a(e)?bi(e):wi(e)}function yc(e){return function(t){return e==null?n:Zn(e,t)}}var bc=ba();var wc=ba(true);function Ec(e,t){e=Al(e);if(e<1||e>j){return[]}var r=O,n=gt(e,O);t=Oa(t);e-=O;var i=yr(n,t);while(++r<e){t(r)}return i}function Ac(e){if(Bu(e)){return ar(e,uo)}return _l(e)?[e]:ra(so(e))}function xc(e){var t=++We;return Cl(e)+t}var Tc=jr(function(e,t){return e+t});var Rc=Ea("ceil");var Sc=jr(function(e,t){return e/t});var Cc=Ea("floor");function jc(e){return e&&e.length?fr(e,ac,Mu):n}function kc(e,t){return e&&e.length?fr(e,Oa(t),Mu):n}function Ic(e){return _r(e,ac)}function Oc(e,t){return _r(e,Oa(t))}function Lc(e){return e&&e.length?fr(e,ac,bl):n}function Nc(e,t){return e&&e.length?fr(e,Oa(t),bl):n}var Mc=jr(function(e,t){return e*t});var Pc=Ea("round");var Uc=jr(function(e,t){return e-t});function Bc(e){return e&&e.length?mr(e,ac):0}function Dc(e,t){return e&&e.length?mr(e,Oa(t)):0}Kr.after=ou;Kr.ary=su;Kr.assign=jl;Kr.assignIn=kl;Kr.assignInWith=Il;Kr.assignWith=Ol;Kr.at=Ll;Kr.before=uu;Kr.bind=lu;Kr.bindAll=Qf;Kr.bindKey=fu;Kr.castArray=ju;Kr.chain=Es;Kr.chunk=co;Kr.compact=ho;Kr.concat=po;Kr.cond=ec;Kr.conforms=tc;Kr.constant=rc;Kr.countBy=Ls;Kr.create=Nl;Kr.curry=cu;Kr.curryRight=hu;Kr.debounce=du;Kr.defaults=Ml;Kr.defaultsDeep=Pl;Kr.defer=pu;Kr.delay=_u;Kr.difference=_o;Kr.differenceBy=vo;Kr.differenceWith=go;Kr.drop=mo;Kr.dropRight=yo;Kr.dropRightWhile=bo;Kr.dropWhile=wo;Kr.fill=Eo;Kr.filter=Ms;Kr.flatMap=Bs;Kr.flatMapDeep=Ds;Kr.flatMapDepth=Fs;Kr.flatten=To;Kr.flattenDeep=Ro;Kr.flattenDepth=So;Kr.flip=vu;Kr.flow=nc;Kr.flowRight=ic;Kr.fromPairs=Co;Kr.functions=Hl;Kr.functionsIn=Gl;Kr.groupBy=Hs;Kr.initial=Io;Kr.intersection=Oo;Kr.intersectionBy=Lo;Kr.intersectionWith=No;Kr.invert=ql;Kr.invertBy=Kl;Kr.invokeMap=zs;Kr.iteratee=oc;Kr.keyBy=Ys;Kr.keys=Zl;Kr.keysIn=Jl;Kr.map=Ws;Kr.mapKeys=Ql;Kr.mapValues=ef;Kr.matches=sc;Kr.matchesProperty=uc;Kr.memoize=gu;Kr.merge=tf;Kr.mergeWith=rf;Kr.method=lc;Kr.methodOf=fc;Kr.mixin=cc;Kr.negate=mu;Kr.nthArg=pc;Kr.omit=nf;Kr.omitBy=af;Kr.once=yu;Kr.orderBy=qs;Kr.over=_c;Kr.overArgs=bu;Kr.overEvery=vc;Kr.overSome=gc;Kr.partial=wu;Kr.partialRight=Eu;Kr.partition=Ks;Kr.pick=of;Kr.pickBy=sf;Kr.property=mc;Kr.propertyOf=yc;Kr.pull=Do;Kr.pullAll=Fo;Kr.pullAllBy=Vo;Kr.pullAllWith=Xo;Kr.pullAt=Ho;Kr.range=bc;Kr.rangeRight=wc;Kr.rearg=Au;Kr.reject=Js;Kr.remove=Go;Kr.rest=xu;Kr.reverse=zo;Kr.sampleSize=eu;Kr.set=lf;Kr.setWith=ff;Kr.shuffle=tu;Kr.slice=Yo;Kr.sortBy=iu;Kr.sortedUniq=Qo;Kr.sortedUniqBy=es;Kr.split=Bf;Kr.spread=Tu;Kr.tail=ts;Kr.take=rs;Kr.takeRight=ns;Kr.takeRightWhile=is;Kr.takeWhile=as;Kr.tap=As;Kr.throttle=Ru;Kr.thru=xs;Kr.toArray=El;Kr.toPairs=cf;Kr.toPairsIn=hf;Kr.toPath=Ac;Kr.toPlainObject=Rl;Kr.transform=df;Kr.unary=Su;Kr.union=os;Kr.unionBy=ss;Kr.unionWith=us;Kr.uniq=ls;Kr.uniqBy=fs;Kr.uniqWith=cs;Kr.unset=pf;Kr.unzip=hs;Kr.unzipWith=ds;Kr.update=_f;Kr.updateWith=vf;Kr.values=gf;Kr.valuesIn=mf;Kr.without=ps;Kr.words=Zf;Kr.wrap=Cu;Kr.xor=_s;Kr.xorBy=vs;Kr.xorWith=gs;Kr.zip=ms;Kr.zipObject=ys;Kr.zipObjectDeep=bs;Kr.zipWith=ws;Kr.entries=cf;Kr.entriesIn=hf;Kr.extend=kl;Kr.extendWith=Il;cc(Kr,Kr);Kr.add=Tc;Kr.attempt=Jf;Kr.camelCase=Ef;Kr.capitalize=Af;Kr.ceil=Rc;Kr.clamp=yf;Kr.clone=ku;Kr.cloneDeep=Ou;Kr.cloneDeepWith=Lu;Kr.cloneWith=Iu;Kr.deburr=xf;Kr.divide=Sc;Kr.endsWith=Tf;Kr.eq=Nu;Kr.escape=Rf;Kr.escapeRegExp=Sf;Kr.every=Ns;Kr.find=Ps;Kr.findIndex=Ao;Kr.findKey=Ul;Kr.findLast=Us;Kr.findLastIndex=xo;Kr.findLastKey=Bl;Kr.floor=Cc;Kr.forEach=Vs;Kr.forEachRight=Xs;Kr.forIn=Dl;Kr.forInRight=Fl;Kr.forOwn=Vl;Kr.forOwnRight=Xl;Kr.get=zl;Kr.gt=Mu;Kr.gte=Pu;Kr.has=Yl;Kr.hasIn=Wl;Kr.head=jo;Kr.identity=ac;Kr.includes=Gs;Kr.indexOf=ko;Kr.inRange=bf;Kr.invoke=$l;Kr.isArguments=Uu;Kr.isArray=Bu;Kr.isArrayBuffer=Du;Kr.isArrayLike=Fu;Kr.isArrayLikeObject=Vu;Kr.isBoolean=Xu;Kr.isBuffer=Hu;Kr.isDate=Gu;Kr.isElement=zu;Kr.isEmpty=Yu;Kr.isEqual=Wu;Kr.isEqualWith=qu;Kr.isError=Ku;Kr.isFinite=$u;Kr.isFunction=Zu;Kr.isInteger=Ju;Kr.isLength=Qu;Kr.isMap=rl;Kr.isMatch=nl;Kr.isMatchWith=il;Kr.isNaN=al;Kr.isNative=ol;Kr.isNil=ul;Kr.isNull=sl;Kr.isNumber=ll;Kr.isObject=el;Kr.isObjectLike=tl;Kr.isPlainObject=fl;Kr.isRegExp=cl;Kr.isSafeInteger=hl;Kr.isSet=dl;Kr.isString=pl;Kr.isSymbol=_l;Kr.isTypedArray=vl;Kr.isUndefined=gl;Kr.isWeakMap=ml;Kr.isWeakSet=yl;Kr.join=Mo;Kr.kebabCase=Cf;Kr.last=Po;Kr.lastIndexOf=Uo;Kr.lowerCase=jf;Kr.lowerFirst=kf;Kr.lt=bl;Kr.lte=wl;Kr.max=jc;Kr.maxBy=kc;Kr.mean=Ic;Kr.meanBy=Oc;Kr.min=Lc;Kr.minBy=Nc;Kr.multiply=Mc;Kr.nth=Bo;Kr.noConflict=hc;Kr.noop=dc;Kr.now=au;Kr.pad=If;Kr.padEnd=Of;Kr.padStart=Lf;Kr.parseInt=Nf;Kr.random=wf;Kr.reduce=$s;Kr.reduceRight=Zs;Kr.repeat=Mf;Kr.replace=Pf;Kr.result=uf;Kr.round=Pc;Kr.runInContext=Hr;Kr.sample=Qs;Kr.size=ru;Kr.snakeCase=Uf;Kr.some=nu;Kr.sortedIndex=Wo;Kr.sortedIndexBy=qo;Kr.sortedIndexOf=Ko;Kr.sortedLastIndex=$o;Kr.sortedLastIndexBy=Zo;Kr.sortedLastIndexOf=Jo;Kr.startCase=Df;Kr.startsWith=Ff;Kr.subtract=Uc;Kr.sum=Bc;Kr.sumBy=Dc;Kr.template=Vf;Kr.times=Ec;Kr.toInteger=Al;Kr.toLength=xl;Kr.toLower=Xf;Kr.toNumber=Tl;Kr.toSafeInteger=Sl;Kr.toString=Cl;Kr.toUpper=Hf;Kr.trim=Gf;Kr.trimEnd=zf;Kr.trimStart=Yf;Kr.truncate=Wf;Kr.unescape=qf;Kr.uniqueId=xc;Kr.upperCase=Kf;Kr.upperFirst=$f;Kr.each=Vs;Kr.eachRight=Xs;Kr.first=jo;cc(Kr,function(){var e={};qn(Kr,function(t,r){if(!Ye.call(Kr.prototype,r)){e[r]=t}});return e}(),{chain:false});Kr.VERSION=i;Qt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){Kr[e].placeholder=Kr});Qt(["drop","take"],function(e,t){Jr.prototype[e]=function(r){var i=this.__filtered__;if(i&&!t){return new Jr(this)}r=r===n?1:vt(Al(r),0);var a=this.clone();if(i){a.__takeCount__=gt(r,a.__takeCount__)}else{a.__views__.push({size:gt(r,O),type:e+(a.__dir__<0?"Right":"")})}return a};Jr.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}});Qt(["filter","map","takeWhile"],function(e,t){var r=t+1,n=r==T||r==S;Jr.prototype[e]=function(e){var t=this.clone();t.__iteratees__.push({iteratee:Oa(e,3),type:r});t.__filtered__=t.__filtered__||n;return t}});Qt(["head","last"],function(e,t){var r="take"+(t?"Right":"");Jr.prototype[e]=function(){return this[r](1).value()[0]}});Qt(["initial","tail"],function(e,t){var r="drop"+(t?"":"Right");Jr.prototype[e]=function(){return this.__filtered__?new Jr(this):this[r](1)}});Jr.prototype.compact=function(){return this.filter(ac)};Jr.prototype.find=function(e){return this.filter(e).head()};Jr.prototype.findLast=function(e){return this.reverse().find(e)};Jr.prototype.invokeMap=xu(function(e,t){if(typeof e=="function"){return new Jr(this)}return this.map(function(r){return ii(r,e,t)})});Jr.prototype.reject=function(e){e=Oa(e,3);return this.filter(function(t){return!e(t)})};Jr.prototype.slice=function(e,t){e=Al(e);var r=this;if(r.__filtered__&&(e>0||t<0)){return new Jr(r)}if(e<0){r=r.takeRight(-e)}else if(e){r=r.drop(e)}if(t!==n){t=Al(t);r=t<0?r.dropRight(-t):r.take(t-e)}return r};Jr.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()};Jr.prototype.toArray=function(){return this.take(O)};qn(Jr.prototype,function(e,t){var r=/^(?:filter|find|map|reject)|While$/.test(t),i=/^(?:head|last)$/.test(t),a=Kr[i?"take"+(t=="last"?"Right":""):t],o=i||/^find/.test(t);if(!a){return}Kr.prototype[t]=function(){var t=this.__wrapped__,s=i?[1]:arguments,u=t instanceof Jr,l=s[0],f=u||Bu(t);var c=function(e){var t=a.apply(Kr,or([e],s));return i&&h?t[0]:t};if(f&&r&&typeof l=="function"&&l.length!=1){u=f=false}var h=this.__chain__,d=!!this.__actions__.length,p=o&&!h,_=u&&!d;if(!o&&f){t=_?t:new Jr(this);var v=e.apply(t,s);v.__actions__.push({func:xs,args:[c],thisArg:n});return new Zr(v,h)}if(p&&_){return e.apply(this,s)}v=this.thru(c);return p?i?v.value()[0]:v.value():v}});Qt(["pop","push","shift","sort","splice","unshift"],function(e){var t=Xe[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",n=/^(?:pop|shift)$/.test(e);Kr.prototype[e]=function(){var e=arguments;if(n&&!this.__chain__){var i=this.value();return t.apply(Bu(i)?i:[],e)}return this[r](function(r){return t.apply(Bu(r)?r:[],e)})}});qn(Jr.prototype,function(e,t){var r=Kr[t];if(r){var n=r.name+"",i=Ht[n]||(Ht[n]=[]);i.push({name:t,func:r})}});Ht[_a(n,f).name]=[{name:"wrapper",func:n}];Jr.prototype.clone=Qr;Jr.prototype.reverse=en;Jr.prototype.value=tn;Kr.prototype.at=Ts;Kr.prototype.chain=Rs;Kr.prototype.commit=Ss;Kr.prototype.next=Cs;Kr.prototype.plant=ks;Kr.prototype.reverse=Is;Kr.prototype.toJSON=Kr.prototype.valueOf=Kr.prototype.value=Os;if(at){Kr.prototype[at]=js}return Kr}var Gr=Hr();(zt||Gt||{})._=Gr;if(typeof define=="function"&&typeof define.amd=="object"&&define.amd){define(function(){return Gr})}else if(Ft&&Vt){if(Xt){(Vt.exports=Gr)._=Gr}Ft._=Gr}else{Wt._=Gr}}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],134:[function(e,t,r){(function(r,n){(function(){"use strict";function i(e){return typeof e==="function"||typeof e==="object"&&e!==null}function a(e){return typeof e==="function"}function o(e){return typeof e==="object"&&e!==null}var s;if(!Array.isArray){s=function(e){return Object.prototype.toString.call(e)==="[object Array]"}}else{s=Array.isArray}var u=s;var l=Date.now||function(){return(new Date).getTime()};function f(){}var c=Object.create||function(e){if(arguments.length>1){throw new Error("Second argument not supported")}if(typeof e!=="object"){throw new TypeError("Argument must be an object")}f.prototype=e;return new f};function h(e,t){for(var r=0,n=e.length;r<n;r++){if(e[r]===t){return r}}return-1}function d(e){var t=e._promiseCallbacks;if(!t){t=e._promiseCallbacks={}}return t}var p={mixin:function(e){e["on"]=this["on"];e["off"]=this["off"];e["trigger"]=this["trigger"];e._promiseCallbacks=undefined;return e},on:function(e,t){if(typeof t!=="function"){throw new TypeError("Callback must be a function")}var r=d(this),n;n=r[e];if(!n){n=r[e]=[]}if(h(n,t)===-1){n.push(t)}},off:function(e,t){var r=d(this),n,i;if(!t){r[e]=[];return}n=r[e];i=h(n,t);if(i!==-1){n.splice(i,1)}},trigger:function(e,t,r){var n=d(this),i,a;if(i=n[e]){for(var o=0;o<i.length;o++){a=i[o];a(t,r)}}}};var _={instrument:false};p["mixin"](_);function v(e,t){if(e==="onerror"){_["on"]("error",t);return}if(arguments.length===2){_[e]=t}else{return _[e]}}var g=[];function m(){setTimeout(function(){var e;for(var t=0;t<g.length;t++){e=g[t];var r=e.payload;r.guid=r.key+r.id;r.childGuid=r.key+r.childId;if(r.error){r.stack=r.error.stack}_["trigger"](e.name,e.payload)}g.length=0},50)}function y(e,t,r){if(1===g.push({name:e,payload:{key:t._guidKey,id:t._id,eventName:e,detail:t._result,childId:r&&r._id,label:t._label,timeStamp:l(),error:_["instrument-with-stack"]?new Error(t._label):null}})){m()}}var b=y;function w(e,t,r){var n=this;var i=n._state;if(i===H&&!e||i===G&&!t){_.instrument&&b("chained",n,n);return n}n._onError=null;var a=new n.constructor(V,r);var o=n._result;_.instrument&&b("chained",n,a);if(i){var s=arguments[i-1];_.async(function(){oe(i,a,s,o)})}else{te(n,a,e,t)}return a}var E=w;function A(e,t){var r=this;if(e&&typeof e==="object"&&e.constructor===r){return e}var n=new r(V,t);Z(n,e);return n}var x=A;function T(e,t,r){if(e===H){return{state:"fulfilled",value:r}}else{return{state:"rejected",reason:r}}}function R(e,t,r,n){this._instanceConstructor=e;this.promise=new e(V,n);this._abortOnReject=r;if(this._validateInput(t)){this._input=t;this.length=t.length;this._remaining=t.length;this._init();if(this.length===0){Q(this.promise,this._result)}else{this.length=this.length||0;this._enumerate();if(this._remaining===0){Q(this.promise,this._result)}}}else{ee(this.promise,this._validationError())}}var S=R;R.prototype._validateInput=function(e){return u(e)};R.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")};R.prototype._init=function(){this._result=new Array(this.length)};R.prototype._enumerate=function(){var e=this.length;var t=this.promise;var r=this._input;for(var n=0;t._state===X&&n<e;n++){this._eachEntry(r[n],n)}};R.prototype._settleMaybeThenable=function(e,t){var r=this._instanceConstructor;var n=r.resolve;if(n===x){var i=Y(e);if(i===E&&e._state!==X){e._onError=null;this._settledAt(e._state,t,e._result)}else if(typeof i!=="function"){this._remaining--;this._result[t]=this._makeResult(H,t,e)}else if(r===D){var a=new r(V);$(a,e,i);this._willSettleAt(a,t)}else{this._willSettleAt(new r(function(t){t(e)}),t)}}else{this._willSettleAt(n(e),t)}};R.prototype._eachEntry=function(e,t){if(o(e)){this._settleMaybeThenable(e,t)}else{this._remaining--;this._result[t]=this._makeResult(H,t,e)}};R.prototype._settledAt=function(e,t,r){var n=this.promise;if(n._state===X){this._remaining--;if(this._abortOnReject&&e===G){ee(n,r)}else{this._result[t]=this._makeResult(e,t,r)}}if(this._remaining===0){Q(n,this._result)}};R.prototype._makeResult=function(e,t,r){return r};R.prototype._willSettleAt=function(e,t){var r=this;te(e,undefined,function(e){r._settledAt(H,t,e)},function(e){r._settledAt(G,t,e)})};function C(e,t){return new S(this,e,true,t).promise}var j=C;function k(e,t){var r=this;var n=new r(V,t);if(!u(e)){ee(n,new TypeError("You must pass an array to race."));return n}var i=e.length;function a(e){Z(n,e)}function o(e){ee(n,e)}for(var s=0;n._state===X&&s<i;s++){te(r.resolve(e[s]),undefined,a,o)}return n}var I=k;function O(e,t){var r=this;var n=new r(V,t);ee(n,e);return n}var L=O;var N="rsvp_"+l()+"-";var M=0;function P(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function U(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function B(e,t){this._id=M++;this._label=t;this._state=undefined;this._result=undefined;this._subscribers=[];_.instrument&&b("created",this);if(V!==e){typeof e!=="function"&&P();this instanceof B?se(this,e):U()}}var D=B;B.cast=x;B.all=j;B.race=I;B.resolve=x;B.reject=L;B.prototype={constructor:B,_guidKey:N,_onError:function(e){var t=this;_.after(function(){if(t._onError){_["trigger"]("error",e,t._label)}})},then:E,"catch":function(e,t){return this.then(undefined,e,t)},"finally":function(e,t){var r=this;var n=r.constructor;return r.then(function(t){return n.resolve(e()).then(function(){return t})},function(t){return n.resolve(e()).then(function(){return n.reject(t)})},t)}};function F(){return new TypeError("A promises callback cannot return that same promise.")}function V(){}var X=void 0;var H=1;var G=2;var z=new ne;function Y(e){try{return e.then}catch(t){z.error=t;return z}}function W(e,t,r,n){try{e.call(t,r,n)}catch(i){return i}}function q(e,t,r){_.async(function(e){var n=false;var i=W(r,t,function(r){if(n){return}n=true;if(t!==r){Z(e,r,undefined)}else{Q(e,r)}},function(t){if(n){return}n=true;ee(e,t)},"Settle: "+(e._label||" unknown promise"));if(!n&&i){n=true;ee(e,i)}},e)}function K(e,t){if(t._state===H){Q(e,t._result)}else if(t._state===G){t._onError=null;ee(e,t._result)}else{te(t,undefined,function(r){if(t!==r){Z(e,r,undefined)}else{Q(e,r)}},function(t){ee(e,t)})}}function $(e,t,r){if(t.constructor===e.constructor&&r===E&&constructor.resolve===x){K(e,t)}else{if(r===z){ee(e,z.error)}else if(r===undefined){Q(e,t)}else if(a(r)){q(e,t,r)}else{Q(e,t)}}}function Z(e,t){if(e===t){Q(e,t)}else if(i(t)){$(e,t,Y(t))}else{Q(e,t)}}function J(e){if(e._onError){e._onError(e._result)}re(e)}function Q(e,t){if(e._state!==X){return}e._result=t;e._state=H;if(e._subscribers.length===0){if(_.instrument){b("fulfilled",e)}}else{_.async(re,e)}}function ee(e,t){if(e._state!==X){return}e._state=G;e._result=t;_.async(J,e)}function te(e,t,r,n){var i=e._subscribers;var a=i.length;e._onError=null;i[a]=t;i[a+H]=r;i[a+G]=n;if(a===0&&e._state){_.async(re,e)}}function re(e){var t=e._subscribers;var r=e._state;if(_.instrument){b(r===H?"fulfilled":"rejected",e)}if(t.length===0){return}var n,i,a=e._result;for(var o=0;o<t.length;o+=3){n=t[o];i=t[o+r];if(n){oe(r,n,i,a)}else{i(a)}}e._subscribers.length=0}function ne(){this.error=null}var ie=new ne;function ae(e,t){try{return e(t)}catch(r){ie.error=r;return ie}}function oe(e,t,r,n){var i=a(r),o,s,u,l;if(i){o=ae(r,n);if(o===ie){l=true;s=o.error;o=null}else{u=true}if(t===o){ee(t,F());return}}else{o=n;u=true}if(t._state!==X){}else if(i&&u){Z(t,o)}else if(l){ee(t,s)}else if(e===H){Q(t,o)}else if(e===G){ee(t,o)}}function se(e,t){var r=false;try{t(function i(t){if(r){return}r=true;Z(e,t)},function a(t){if(r){return}r=true;ee(e,t)})}catch(n){ee(e,n)}}function ue(e,t,r){this._superConstructor(e,t,false,r)}ue.prototype=c(S.prototype);ue.prototype._superConstructor=S;ue.prototype._makeResult=T;ue.prototype._validationError=function(){return new Error("allSettled must be called with an array")};function le(e,t){return new ue(D,e,t).promise}var fe=le;function ce(e,t){return D.all(e,t)}var he=ce;var de=0;var pe={}.toString;var _e;function ve(e,t){Ce[de]=e;Ce[de+1]=t;de+=2;if(de===2){Ie()}}var ge=ve;var me=typeof window!=="undefined"?window:undefined;var ye=me||{};var be=ye.MutationObserver||ye.WebKitMutationObserver;var we=typeof self==="undefined"&&typeof r!=="undefined"&&{}.toString.call(r)==="[object process]";var Ee=typeof Uint8ClampedArray!=="undefined"&&typeof importScripts!=="undefined"&&typeof MessageChannel!=="undefined";function Ae(){var e=r.nextTick;var t=r.versions.node.match(/^(?:(\d+)\.)?(?:(\d+)\.)?(\*|\d+)$/);if(Array.isArray(t)&&t[1]==="0"&&t[2]==="10"){e=setImmediate}return function(){e(je)}}function xe(){return function(){_e(je)}}function Te(){var e=0;var t=new be(je);var r=document.createTextNode("");t.observe(r,{characterData:true});return function(){r.data=e=++e%2}}function Re(){var e=new MessageChannel;e.port1.onmessage=je;return function(){e.port2.postMessage(0)}}function Se(){return function(){setTimeout(je,1)}}var Ce=new Array(1e3);function je(){for(var e=0;e<de;e+=2){var t=Ce[e];var r=Ce[e+1];t(r);Ce[e]=undefined;Ce[e+1]=undefined}de=0}function ke(){try{var t=e;var r=t("vertx");_e=r.runOnLoop||r.runOnContext;return xe()}catch(n){return Se()}}var Ie;if(we){Ie=Ae()}else if(be){Ie=Te()}else if(Ee){Ie=Re()}else if(me===undefined&&typeof e==="function"){Ie=ke()}else{Ie=Se()}function Oe(e){var t={};t["promise"]=new D(function(e,r){t["resolve"]=e;t["reject"]=r},e);return t}var Le=Oe;function Ne(e,t,r){return D.all(e,r).then(function(e){if(!a(t)){throw new TypeError("You must pass a function as filter's second argument.")}var n=e.length;var i=new Array(n);for(var o=0;o<n;o++){i[o]=t(e[o])}return D.all(i,r).then(function(t){var r=new Array(n);var i=0;for(var a=0;a<n;a++){if(t[a]){r[i]=e[a];i++}}r.length=i;return r})})}var Me=Ne;function Pe(e,t,r){this._superConstructor(e,t,true,r)}var Ue=Pe;Pe.prototype=c(S.prototype);Pe.prototype._superConstructor=S;Pe.prototype._init=function(){this._result={}};Pe.prototype._validateInput=function(e){return e&&typeof e==="object"};Pe.prototype._validationError=function(){return new Error("Promise.hash must be called with an object")};Pe.prototype._enumerate=function(){var e=this;var t=e.promise;var r=e._input;var n=[];for(var i in r){if(t._state===X&&Object.prototype.hasOwnProperty.call(r,i)){n.push({position:i,entry:r[i]})}}var a=n.length;e._remaining=a;var o;for(var s=0;t._state===X&&s<a;s++){o=n[s];e._eachEntry(o.entry,o.position)}};function Be(e,t,r){this._superConstructor(e,t,false,r)}Be.prototype=c(Ue.prototype);Be.prototype._superConstructor=S;Be.prototype._makeResult=T;Be.prototype._validationError=function(){return new Error("hashSettled must be called with an object")};function De(e,t){return new Be(D,e,t).promise}var Fe=De;function Ve(e,t){return new Ue(D,e,t).promise}var Xe=Ve;function He(e,t,r){return D.all(e,r).then(function(e){if(!a(t)){throw new TypeError("You must pass a function as map's second argument.")}var n=e.length;var i=new Array(n);for(var o=0;o<n;o++){i[o]=t(e[o])}return D.all(i,r)})}var Ge=He;function ze(){this.value=undefined}var Ye=new ze;var We=new ze;function qe(e){try{return e.then}catch(t){Ye.value=t;return Ye}}function Ke(e,t,r){try{e.apply(t,r)}catch(n){Ye.value=n;return Ye}}function $e(e,t){var r={};var n;var i;var a=e.length;var o=new Array(a);for(var s=0;s<a;s++){o[s]=e[s]}for(i=0;i<t.length;i++){n=t[i];r[n]=o[i+1]}return r}function Ze(e){var t=e.length;var r=new Array(t-1);for(var n=1;n<t;n++){r[n-1]=e[n]}return r}function Je(e,t){return{then:function(r,n){return e.call(t,r,n)}}}function Qe(e,t){var r=function(){var r=this;var n=arguments.length;var i=new Array(n+1);var a;var o=false;for(var s=0;s<n;++s){a=arguments[s];if(!o){o=nt(a);if(o===We){var l=new D(V);ee(l,We.value);return l}else if(o&&o!==true){a=Je(o,a)}}i[s]=a}var f=new D(V);i[n]=function(e,r){if(e)ee(f,e);else if(t===undefined)Z(f,r);else if(t===true)Z(f,Ze(arguments));else if(u(t))Z(f,$e(arguments,t));else Z(f,r)};if(o){return rt(f,i,e,r)}else{return tt(f,i,e,r)}};r.__proto__=e;return r}var et=Qe;function tt(e,t,r,n){var i=Ke(r,n,t);if(i===Ye){ee(e,i.value)}return e}function rt(e,t,r,n){return D.all(t).then(function(t){var i=Ke(r,n,t);if(i===Ye){ee(e,i.value)}return e})}function nt(e){if(e&&typeof e==="object"){if(e.constructor===D){return true}else{return qe(e)}}else{return false}}var it;if(typeof self==="object"){it=self}else if(typeof n==="object"){it=n}else{throw new Error("no global: `self` or `global` found")}var at=it;function ot(e,t){return D.race(e,t)}var st=ot;function ut(e,t){return D.reject(e,t)}var lt=ut;function ft(e,t){return D.resolve(e,t)}var ct=ft;function ht(e){setTimeout(function(){throw e});throw e}var dt=ht;_.async=ge;_.after=function(e){setTimeout(e,0)};var pt=ct;function _t(e,t){_.async(e,t)}function vt(){_["on"].apply(_,arguments)}function gt(){_["off"].apply(_,arguments)}if(typeof window!=="undefined"&&typeof window["__PROMISE_INSTRUMENTATION__"]==="object"){var mt=window["__PROMISE_INSTRUMENTATION__"];v("instrument",true);for(var yt in mt){if(mt.hasOwnProperty(yt)){vt(yt,mt[yt])}}}var bt={race:st,Promise:D,allSettled:fe,hash:Xe,hashSettled:Fe,denodeify:et,on:vt,off:gt,map:Ge,filter:Me,resolve:ct,reject:lt,all:he,rethrow:dt,defer:Le,EventTarget:p,configure:v,async:_t};if(typeof define==="function"&&define["amd"]){define(function(){return bt})}else if(typeof t!=="undefined"&&t["exports"]){t["exports"]=bt}else if(typeof at!=="undefined"){at["RSVP"]=bt}}).call(this)}).call(this,e("_process"),typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{_process:29}],135:[function(e,t,r){(function(e){"use strict";if(e.fetch){return}function t(e){if(typeof e!=="string"){e=String(e)}if(/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e)){throw new TypeError("Invalid character in header field name")}return e.toLowerCase()}function r(e){if(typeof e!=="string"){e=String(e)}return e}function n(e){this.map={};if(e instanceof n){e.forEach(function(e,t){this.append(t,e)},this)}else if(e){Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}}n.prototype.append=function(e,n){e=t(e);n=r(n);var i=this.map[e];if(!i){i=[];this.map[e]=i}i.push(n)};n.prototype["delete"]=function(e){delete this.map[t(e)]};n.prototype.get=function(e){var r=this.map[t(e)];return r?r[0]:null};n.prototype.getAll=function(e){return this.map[t(e)]||[]};n.prototype.has=function(e){return this.map.hasOwnProperty(t(e))};n.prototype.set=function(e,n){this.map[t(e)]=[r(n)]};n.prototype.forEach=function(e,t){Object.getOwnPropertyNames(this.map).forEach(function(r){this.map[r].forEach(function(n){e.call(t,n,r,this)},this)},this)};function i(e){if(e.bodyUsed){return Promise.reject(new TypeError("Already read"))}e.bodyUsed=true}function a(e){return new Promise(function(t,r){e.onload=function(){t(e.result)};e.onerror=function(){
r(e.error)}})}function o(e){var t=new FileReader;t.readAsArrayBuffer(e);return a(t)}function s(e){var t=new FileReader;t.readAsText(e);return a(t)}var u={blob:"FileReader"in e&&"Blob"in e&&function(){try{new Blob;return true}catch(e){return false}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};function l(){this.bodyUsed=false;this._initBody=function(e){this._bodyInit=e;if(typeof e==="string"){this._bodyText=e}else if(u.blob&&Blob.prototype.isPrototypeOf(e)){this._bodyBlob=e}else if(u.formData&&FormData.prototype.isPrototypeOf(e)){this._bodyFormData=e}else if(!e){this._bodyText=""}else if(u.arrayBuffer&&ArrayBuffer.prototype.isPrototypeOf(e)){}else{throw new Error("unsupported BodyInit type")}if(!this.headers.get("content-type")){if(typeof e==="string"){this.headers.set("content-type","text/plain;charset=UTF-8")}else if(this._bodyBlob&&this._bodyBlob.type){this.headers.set("content-type",this._bodyBlob.type)}}};if(u.blob){this.blob=function(){var e=i(this);if(e){return e}if(this._bodyBlob){return Promise.resolve(this._bodyBlob)}else if(this._bodyFormData){throw new Error("could not read FormData body as blob")}else{return Promise.resolve(new Blob([this._bodyText]))}};this.arrayBuffer=function(){return this.blob().then(o)};this.text=function(){var e=i(this);if(e){return e}if(this._bodyBlob){return s(this._bodyBlob)}else if(this._bodyFormData){throw new Error("could not read FormData body as text")}else{return Promise.resolve(this._bodyText)}}}else{this.text=function(){var e=i(this);return e?e:Promise.resolve(this._bodyText)}}if(u.formData){this.formData=function(){return this.text().then(d)}}this.json=function(){return this.text().then(JSON.parse)};return this}var f=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function c(e){var t=e.toUpperCase();return f.indexOf(t)>-1?t:e}function h(e,t){t=t||{};var r=t.body;if(h.prototype.isPrototypeOf(e)){if(e.bodyUsed){throw new TypeError("Already read")}this.url=e.url;this.credentials=e.credentials;if(!t.headers){this.headers=new n(e.headers)}this.method=e.method;this.mode=e.mode;if(!r){r=e._bodyInit;e.bodyUsed=true}}else{this.url=e}this.credentials=t.credentials||this.credentials||"omit";if(t.headers||!this.headers){this.headers=new n(t.headers)}this.method=c(t.method||this.method||"GET");this.mode=t.mode||this.mode||null;this.referrer=null;if((this.method==="GET"||this.method==="HEAD")&&r){throw new TypeError("Body not allowed for GET or HEAD requests")}this._initBody(r)}h.prototype.clone=function(){return new h(this)};function d(e){var t=new FormData;e.trim().split("&").forEach(function(e){if(e){var r=e.split("=");var n=r.shift().replace(/\+/g," ");var i=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(i))}});return t}function p(e){var t=new n;var r=e.getAllResponseHeaders().trim().split("\n");r.forEach(function(e){var r=e.trim().split(":");var n=r.shift().trim();var i=r.join(":").trim();t.append(n,i)});return t}l.call(h.prototype);function _(e,t){if(!t){t={}}this.type="default";this.status=t.status;this.ok=this.status>=200&&this.status<300;this.statusText=t.statusText;this.headers=t.headers instanceof n?t.headers:new n(t.headers);this.url=t.url||"";this._initBody(e)}l.call(_.prototype);_.prototype.clone=function(){return new _(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new n(this.headers),url:this.url})};_.error=function(){var e=new _(null,{status:0,statusText:""});e.type="error";return e};var v=[301,302,303,307,308];_.redirect=function(e,t){if(v.indexOf(t)===-1){throw new RangeError("Invalid status code")}return new _(null,{status:t,headers:{location:e}})};e.Headers=n;e.Request=h;e.Response=_;e.fetch=function(e,t){return new Promise(function(r,n){var i;if(h.prototype.isPrototypeOf(e)&&!t){i=e}else{i=new h(e,t)}var a=new XMLHttpRequest;function o(){if("responseURL"in a){return a.responseURL}if(/^X-Request-URL:/m.test(a.getAllResponseHeaders())){return a.getResponseHeader("X-Request-URL")}return}a.onload=function(){var e=a.status===1223?204:a.status;if(e<100||e>599){n(new TypeError("Network request failed"));return}var t={status:e,statusText:a.statusText,headers:p(a),url:o()};var i="response"in a?a.response:a.responseText;r(new _(i,t))};a.onerror=function(){n(new TypeError("Network request failed"))};a.open(i.method,i.url,true);if(i.credentials==="include"){a.withCredentials=true}if("responseType"in a&&u.blob){a.responseType="blob"}i.headers.forEach(function(e,t){a.setRequestHeader(t,e)});a.send(typeof i._bodyInit==="undefined"?null:i._bodyInit)})};e.fetch.polyfill=true})(typeof self!=="undefined"?self:this)},{}]},{},[1]);